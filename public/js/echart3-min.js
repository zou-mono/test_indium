!function(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory():"function"==typeof define&&define.amd?define([],factory):"object"==typeof exports?exports.echarts=factory():root.echarts=factory()}(this,function(){return function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){module.exports=__webpack_require__(1),__webpack_require__(99),__webpack_require__(133),__webpack_require__(138),__webpack_require__(147),__webpack_require__(151),__webpack_require__(161),__webpack_require__(182),__webpack_require__(194),__webpack_require__(215),__webpack_require__(219),__webpack_require__(223),__webpack_require__(238),__webpack_require__(244),__webpack_require__(251),__webpack_require__(257),__webpack_require__(261),__webpack_require__(269),__webpack_require__(112),__webpack_require__(273),__webpack_require__(279),__webpack_require__(283),__webpack_require__(294),__webpack_require__(224),__webpack_require__(297),__webpack_require__(303),__webpack_require__(315),__webpack_require__(316),__webpack_require__(330),__webpack_require__(345),__webpack_require__(351),__webpack_require__(354),__webpack_require__(357),__webpack_require__(366),__webpack_require__(379)},function(module,exports,__webpack_require__){function createRegisterEventWithLowercaseName(method){return function(eventName,handler,context){eventName=eventName&&eventName.toLowerCase(),Eventful.prototype[method].call(this,eventName,handler,context)}}function MessageCenter(){Eventful.call(this)}function ECharts(dom,theme,opts){function prioritySortFunc(a,b){return a.prio-b.prio}opts=opts||{},"string"==typeof theme&&(theme=themeStorage[theme]),this.id,this.group,this._dom=dom,this._zr=zrender.init(dom,{renderer:opts.renderer||"canvas",devicePixelRatio:opts.devicePixelRatio}),this._theme=zrUtil.clone(theme),this._chartsViews=[],this._chartsMap={},this._componentsViews=[],this._componentsMap={},this._api=new ExtensionAPI(this),this._coordSysMgr=new CoordinateSystemManager,Eventful.call(this),this._messageCenter=new MessageCenter,this._initEvents(),this.resize=zrUtil.bind(this.resize,this),this._pendingActions=[],timsort(visualFuncs,prioritySortFunc),timsort(dataProcessorFuncs,prioritySortFunc),this._zr.animation.on("frame",this._onframe,this)}function toggleHighlight(method,payload){var ecModel=this._model;ecModel&&ecModel.eachComponent({mainType:"series",query:payload},function(seriesModel,index){var chartView=this._chartsMap[seriesModel.__viewId];chartView&&chartView.__alive&&chartView[method](seriesModel,ecModel,this._api,payload)},this)}function invokeUpdateMethod(methodName,ecModel,payload){var api=this._api;each(this._componentsViews,function(component){var componentModel=component.__model;component[methodName](componentModel,ecModel,api,payload),updateZ(componentModel,component)},this),ecModel.eachSeries(function(seriesModel,idx){var chart=this._chartsMap[seriesModel.__viewId];chart[methodName](seriesModel,ecModel,api,payload),updateZ(seriesModel,chart),updateProgressiveAndBlend(seriesModel,chart)},this),updateHoverLayerStatus(this._zr,ecModel)}function prepareView(type,ecModel){for(var isComponent="component"===type,viewList=isComponent?this._componentsViews:this._chartsViews,viewMap=isComponent?this._componentsMap:this._chartsMap,zr=this._zr,i=0;i<viewList.length;i++)viewList[i].__alive=!1;ecModel[isComponent?"eachComponent":"eachSeries"](function(componentType,model){if(isComponent){if("series"===componentType)return}else model=componentType;var viewId=model.id+"_"+model.type,view=viewMap[viewId];if(!view){var classType=ComponentModel.parseClassType(model.type),Clazz=isComponent?ComponentView.getClass(classType.main,classType.sub):ChartView.getClass(classType.sub);if(!Clazz)return;view=new Clazz,view.init(ecModel,this._api),viewMap[viewId]=view,viewList.push(view),zr.add(view.group)}model.__viewId=viewId,view.__alive=!0,view.__id=viewId,view.__model=model},this);for(var i=0;i<viewList.length;){var view=viewList[i];view.__alive?i++:(zr.remove(view.group),view.dispose(ecModel,this._api),viewList.splice(i,1),delete viewMap[view.__id])}}function processData(ecModel,api){each(dataProcessorFuncs,function(process){process.func(ecModel,api)})}function stackSeriesData(ecModel){var stackedDataMap={};ecModel.eachSeries(function(series){var stack=series.get("stack"),data=series.getData();if(stack&&"list"===data.type){var previousStack=stackedDataMap[stack];previousStack&&(data.stackedOn=previousStack),stackedDataMap[stack]=data}})}function doLayout(ecModel,payload){var api=this._api;each(visualFuncs,function(visual){visual.isLayout&&visual.func(ecModel,api,payload)})}function doVisualEncoding(ecModel,payload){var api=this._api;ecModel.clearColorPalette(),ecModel.eachSeries(function(seriesModel){seriesModel.clearColorPalette()}),each(visualFuncs,function(visual){visual.func(ecModel,api,payload)})}function doRender(ecModel,payload){var api=this._api;each(this._componentsViews,function(componentView){var componentModel=componentView.__model;componentView.render(componentModel,ecModel,api,payload),updateZ(componentModel,componentView)},this),each(this._chartsViews,function(chart){chart.__alive=!1},this),ecModel.eachSeries(function(seriesModel,idx){var chartView=this._chartsMap[seriesModel.__viewId];chartView.__alive=!0,chartView.render(seriesModel,ecModel,api,payload),chartView.group.silent=!!seriesModel.get("silent"),updateZ(seriesModel,chartView),updateProgressiveAndBlend(seriesModel,chartView)},this),updateHoverLayerStatus(this._zr,ecModel),each(this._chartsViews,function(chart){chart.__alive||chart.remove(ecModel,api)},this)}function updateHoverLayerStatus(zr,ecModel){var storage=zr.storage,elCount=0;storage.traverse(function(el){el.isGroup||elCount++}),elCount>ecModel.get("hoverLayerThreshold")&&!env.node&&storage.traverse(function(el){el.isGroup||(el.useHoverLayer=!0)})}function updateProgressiveAndBlend(seriesModel,chartView){var elCount=0;chartView.group.traverse(function(el){"group"===el.type||el.ignore||elCount++});var frameDrawNum=+seriesModel.get("progressive"),needProgressive=elCount>seriesModel.get("progressiveThreshold")&&frameDrawNum&&!env.node;needProgressive&&chartView.group.traverse(function(el){el.isGroup||(el.progressive=needProgressive?Math.floor(elCount++/frameDrawNum):-1,needProgressive&&el.stopAnimation(!0))});var blendMode=seriesModel.get("blendMode")||null;!env.canvasSupported&&blendMode&&"source-over"!==blendMode&&console.warn("Only canvas support blendMode"),chartView.group.traverse(function(el){el.isGroup||el.setStyle("blend",blendMode)})}function updateZ(model,view){var z=model.get("z"),zlevel=model.get("zlevel");view.group.traverse(function(el){"group"!==el.type&&(null!=z&&(el.z=z),null!=zlevel&&(el.zlevel=zlevel))})}function enableConnect(chart){function updateConnectedChartsStatus(charts,status){for(var i=0;i<charts.length;i++){var otherChart=charts[i];otherChart[STATUS_KEY]=status}}var STATUS_PENDING=0,STATUS_UPDATING=1,STATUS_UPDATED=2,STATUS_KEY="__connectUpdateStatus";zrUtil.each(eventActionMap,function(actionType,eventType){chart._messageCenter.on(eventType,function(event){if(connectedGroups[chart.group]&&chart[STATUS_KEY]!==STATUS_PENDING){var action=chart.makeActionFromEvent(event),otherCharts=[];for(var id in instances){var otherChart=instances[id];otherChart!==chart&&otherChart.group===chart.group&&otherCharts.push(otherChart)}updateConnectedChartsStatus(otherCharts,STATUS_PENDING),each(otherCharts,function(otherChart){otherChart[STATUS_KEY]!==STATUS_UPDATING&&otherChart.dispatchAction(action)}),updateConnectedChartsStatus(otherCharts,STATUS_UPDATED)}})})}var env=__webpack_require__(2),GlobalModel=__webpack_require__(3),ExtensionAPI=__webpack_require__(25),CoordinateSystemManager=__webpack_require__(26),OptionManager=__webpack_require__(27),ComponentModel=__webpack_require__(19),SeriesModel=__webpack_require__(28),ComponentView=__webpack_require__(29),ChartView=__webpack_require__(42),graphic=__webpack_require__(43),zrender=__webpack_require__(81),zrUtil=__webpack_require__(4),colorTool=__webpack_require__(39),Eventful=__webpack_require__(33),timsort=__webpack_require__(85),each=zrUtil.each,PRIORITY_PROCESSOR_FILTER=1e3,PRIORITY_PROCESSOR_STATISTIC=5e3,PRIORITY_VISUAL_LAYOUT=1e3,PRIORITY_VISUAL_GLOBAL=2e3,PRIORITY_VISUAL_CHART=3e3,PRIORITY_VISUAL_COMPONENT=4e3,PRIORITY_VISUAL_BRUSH=5e3,IN_MAIN_PROCESS="__flag_in_main_process",HAS_GRADIENT_OR_PATTERN_BG="_hasGradientOrPatternBg",OPTION_UPDATED="_optionUpdated";MessageCenter.prototype.on=createRegisterEventWithLowercaseName("on"),MessageCenter.prototype.off=createRegisterEventWithLowercaseName("off"),MessageCenter.prototype.one=createRegisterEventWithLowercaseName("one"),zrUtil.mixin(MessageCenter,Eventful);var echartsProto=ECharts.prototype;echartsProto._onframe=function(){this[OPTION_UPDATED]&&(this[IN_MAIN_PROCESS]=!0,updateMethods.prepareAndUpdate.call(this),this[IN_MAIN_PROCESS]=!1,this[OPTION_UPDATED]=!1)},echartsProto.getDom=function(){return this._dom},echartsProto.getZr=function(){return this._zr},echartsProto.setOption=function(option,notMerge,lazyUpdate){if(zrUtil.assert(!this[IN_MAIN_PROCESS],"`setOption` should not be called during main process."),this[IN_MAIN_PROCESS]=!0,!this._model||notMerge){var optionManager=new OptionManager(this._api),theme=this._theme,ecModel=this._model=new GlobalModel(null,null,theme,optionManager);ecModel.init(null,null,theme,optionManager)}this._model.setOption(option,optionPreprocessorFuncs),lazyUpdate?this[OPTION_UPDATED]=!0:(updateMethods.prepareAndUpdate.call(this),this._zr.refreshImmediately(),this[OPTION_UPDATED]=!1),this[IN_MAIN_PROCESS]=!1,this._flushPendingActions()},echartsProto.setTheme=function(){console.log("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},echartsProto.getModel=function(){return this._model},echartsProto.getOption=function(){return this._model&&this._model.getOption()},echartsProto.getWidth=function(){return this._zr.getWidth()},echartsProto.getHeight=function(){return this._zr.getHeight()},echartsProto.getRenderedCanvas=function(opts){if(env.canvasSupported){opts=opts||{},opts.pixelRatio=opts.pixelRatio||1,opts.backgroundColor=opts.backgroundColor||this._model.get("backgroundColor");var zr=this._zr,list=zr.storage.getDisplayList();return zrUtil.each(list,function(el){el.stopAnimation(!0)}),zr.painter.getRenderedCanvas(opts)}},echartsProto.getDataURL=function(opts){opts=opts||{};var excludeComponents=opts.excludeComponents,ecModel=this._model,excludesComponentViews=[],self=this;each(excludeComponents,function(componentType){ecModel.eachComponent({mainType:componentType},function(component){var view=self._componentsMap[component.__viewId];view.group.ignore||(excludesComponentViews.push(view),view.group.ignore=!0)})});var url=this.getRenderedCanvas(opts).toDataURL("image/"+(opts&&opts.type||"png"));return each(excludesComponentViews,function(view){view.group.ignore=!1}),url},echartsProto.getConnectedDataURL=function(opts){if(env.canvasSupported){var groupId=this.group,mathMin=Math.min,mathMax=Math.max,MAX_NUMBER=1/0;if(connectedGroups[groupId]){var left=MAX_NUMBER,top=MAX_NUMBER,right=-MAX_NUMBER,bottom=-MAX_NUMBER,canvasList=[],dpr=opts&&opts.pixelRatio||1;for(var id in instances){var chart=instances[id];if(chart.group===groupId){var canvas=chart.getRenderedCanvas(zrUtil.clone(opts)),boundingRect=chart.getDom().getBoundingClientRect();left=mathMin(boundingRect.left,left),top=mathMin(boundingRect.top,top),right=mathMax(boundingRect.right,right),bottom=mathMax(boundingRect.bottom,bottom),canvasList.push({dom:canvas,left:boundingRect.left,top:boundingRect.top})}}left*=dpr,top*=dpr,right*=dpr,bottom*=dpr;var width=right-left,height=bottom-top,targetCanvas=zrUtil.createCanvas();targetCanvas.width=width,targetCanvas.height=height;var zr=zrender.init(targetCanvas);return each(canvasList,function(item){var img=new graphic.Image({style:{x:item.left*dpr-left,y:item.top*dpr-top,image:item.dom}});zr.add(img)}),zr.refreshImmediately(),targetCanvas.toDataURL("image/"+(opts&&opts.type||"png"))}return this.getDataURL(opts)}};var updateMethods={update:function(payload){var ecModel=this._model,api=this._api,coordSysMgr=this._coordSysMgr,zr=this._zr;if(ecModel){ecModel.restoreData(),coordSysMgr.create(this._model,this._api),processData.call(this,ecModel,api),stackSeriesData.call(this,ecModel),coordSysMgr.update(ecModel,api),doVisualEncoding.call(this,ecModel,payload),doRender.call(this,ecModel,payload);var backgroundColor=ecModel.get("backgroundColor")||"transparent",painter=zr.painter;if(painter.isSingleCanvas&&painter.isSingleCanvas())zr.configLayer(0,{clearColor:backgroundColor});else{if(!env.canvasSupported){var colorArr=colorTool.parse(backgroundColor);backgroundColor=colorTool.stringify(colorArr,"rgb"),0===colorArr[3]&&(backgroundColor="transparent")}backgroundColor.colorStops||backgroundColor.image?(zr.configLayer(0,{clearColor:backgroundColor}),this[HAS_GRADIENT_OR_PATTERN_BG]=!0,this._dom.style.background="transparent"):(this[HAS_GRADIENT_OR_PATTERN_BG]&&zr.configLayer(0,{clearColor:null}),this[HAS_GRADIENT_OR_PATTERN_BG]=!1,this._dom.style.background=backgroundColor)}}},updateView:function(payload){var ecModel=this._model;ecModel&&(ecModel.eachSeries(function(seriesModel){seriesModel.getData().clearAllVisual()}),doVisualEncoding.call(this,ecModel,payload),invokeUpdateMethod.call(this,"updateView",ecModel,payload))},updateVisual:function(payload){var ecModel=this._model;ecModel&&(ecModel.eachSeries(function(seriesModel){seriesModel.getData().clearAllVisual()}),doVisualEncoding.call(this,ecModel,payload),invokeUpdateMethod.call(this,"updateVisual",ecModel,payload))},updateLayout:function(payload){var ecModel=this._model;ecModel&&(doLayout.call(this,ecModel,payload),invokeUpdateMethod.call(this,"updateLayout",ecModel,payload))},highlight:function(payload){toggleHighlight.call(this,"highlight",payload)},downplay:function(payload){toggleHighlight.call(this,"downplay",payload)},prepareAndUpdate:function(payload){var ecModel=this._model;prepareView.call(this,"component",ecModel),prepareView.call(this,"chart",ecModel),updateMethods.update.call(this,payload)}};echartsProto.resize=function(){zrUtil.assert(!this[IN_MAIN_PROCESS],"`resize` should not be called during main process."),this[IN_MAIN_PROCESS]=!0,this._zr.resize();var optionChanged=this._model&&this._model.resetOption("media");updateMethods[optionChanged?"prepareAndUpdate":"update"].call(this),this._loadingFX&&this._loadingFX.resize(),this[IN_MAIN_PROCESS]=!1,this._flushPendingActions()},echartsProto.showLoading=function(name,cfg){if(zrUtil.isObject(name)&&(cfg=name,name=""),name=name||"default",this.hideLoading(),!loadingEffects[name])return void console.warn("Loading effects "+name+" not exists.");var el=loadingEffects[name](this._api,cfg),zr=this._zr;this._loadingFX=el,zr.add(el)},echartsProto.hideLoading=function(){this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},echartsProto.makeActionFromEvent=function(eventObj){var payload=zrUtil.extend({},eventObj);return payload.type=eventActionMap[eventObj.type],payload},echartsProto.dispatchAction=function(payload,silent){var actionWrap=actions[payload.type];if(actionWrap){var actionInfo=actionWrap.actionInfo,updateMethod=actionInfo.update||"update";if(this[IN_MAIN_PROCESS])return void this._pendingActions.push(payload);this[IN_MAIN_PROCESS]=!0;var payloads=[payload],batched=!1;payload.batch&&(batched=!0,payloads=zrUtil.map(payload.batch,function(item){return item=zrUtil.defaults(zrUtil.extend({},item),payload),item.batch=null,item}));for(var eventObj,eventObjBatch=[],isHighlightOrDownplay="highlight"===payload.type||"downplay"===payload.type,i=0;i<payloads.length;i++){var batchItem=payloads[i];eventObj=actionWrap.action(batchItem,this._model),eventObj=eventObj||zrUtil.extend({},batchItem),eventObj.type=actionInfo.event||eventObj.type,eventObjBatch.push(eventObj),isHighlightOrDownplay&&updateMethods[updateMethod].call(this,batchItem)}"none"===updateMethod||isHighlightOrDownplay||(this[OPTION_UPDATED]?(updateMethods.prepareAndUpdate.call(this,payload),this[OPTION_UPDATED]=!1):updateMethods[updateMethod].call(this,payload)),eventObj=batched?{type:actionInfo.event||payload.type,batch:eventObjBatch}:eventObjBatch[0],this[IN_MAIN_PROCESS]=!1,!silent&&this._messageCenter.trigger(eventObj.type,eventObj),this._flushPendingActions()}},echartsProto._flushPendingActions=function(){for(var pendingActions=this._pendingActions;pendingActions.length;){var payload=pendingActions.shift();this.dispatchAction(payload)}},echartsProto.on=createRegisterEventWithLowercaseName("on"),echartsProto.off=createRegisterEventWithLowercaseName("off"),echartsProto.one=createRegisterEventWithLowercaseName("one");var MOUSE_EVENT_NAMES=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout"];echartsProto._initEvents=function(){each(MOUSE_EVENT_NAMES,function(eveName){this._zr.on(eveName,function(e){var ecModel=this.getModel(),el=e.target;if(el&&null!=el.dataIndex){var dataModel=el.dataModel||ecModel.getSeriesByIndex(el.seriesIndex),params=dataModel&&dataModel.getDataParams(el.dataIndex,el.dataType)||{};params.event=e,params.type=eveName,this.trigger(eveName,params)}else el&&el.eventData&&this.trigger(eveName,el.eventData)},this)},this),each(eventActionMap,function(actionType,eventType){this._messageCenter.on(eventType,function(event){this.trigger(eventType,event)},this)},this)},echartsProto.isDisposed=function(){return this._disposed},echartsProto.clear=function(){this.setOption({series:[]},!0)},echartsProto.dispose=function(){if(this._disposed)return void console.warn("Instance "+this.id+" has been disposed");this._disposed=!0;var api=this._api,ecModel=this._model;each(this._componentsViews,function(component){component.dispose(ecModel,api)}),each(this._chartsViews,function(chart){chart.dispose(ecModel,api)}),this._zr.dispose(),delete instances[this.id]},zrUtil.mixin(ECharts,Eventful);var actions=[],eventActionMap={},dataProcessorFuncs=[],optionPreprocessorFuncs=[],visualFuncs=[],themeStorage={},loadingEffects={},instances={},connectedGroups={},idBase=new Date-0,groupIdBase=new Date-0,DOM_ATTRIBUTE_KEY="_echarts_instance_",echarts={version:"3.2.3",dependencies:{zrender:"3.1.3"}};echarts.init=function(dom,theme,opts){if(zrender.version.replace(".","")-0<echarts.dependencies.zrender.replace(".","")-0)throw new Error("ZRender "+zrender.version+" is too old for ECharts "+echarts.version+". Current version need ZRender "+echarts.dependencies.zrender+"+");if(!dom)throw new Error("Initialize failed: invalid dom.");!zrUtil.isDom(dom)||"CANVAS"===dom.nodeName.toUpperCase()||dom.clientWidth&&dom.clientHeight||console.warn("Can't get dom width or height");var chart=new ECharts(dom,theme,opts);return chart.id="ec_"+idBase++,instances[chart.id]=chart,dom.setAttribute&&dom.setAttribute(DOM_ATTRIBUTE_KEY,chart.id),enableConnect(chart),chart},echarts.connect=function(groupId){if(zrUtil.isArray(groupId)){var charts=groupId;groupId=null,zrUtil.each(charts,function(chart){null!=chart.group&&(groupId=chart.group)}),groupId=groupId||"g_"+groupIdBase++,zrUtil.each(charts,function(chart){chart.group=groupId})}return connectedGroups[groupId]=!0,groupId},echarts.disConnect=function(groupId){connectedGroups[groupId]=!1},echarts.dispose=function(chart){zrUtil.isDom(chart)?chart=echarts.getInstanceByDom(chart):"string"==typeof chart&&(chart=instances[chart]),chart instanceof ECharts&&!chart.isDisposed()&&chart.dispose()},echarts.getInstanceByDom=function(dom){var key=dom.getAttribute(DOM_ATTRIBUTE_KEY);return instances[key]},echarts.getInstanceById=function(key){return instances[key]},echarts.registerTheme=function(name,theme){themeStorage[name]=theme},echarts.registerPreprocessor=function(preprocessorFunc){optionPreprocessorFuncs.push(preprocessorFunc)},echarts.registerProcessor=function(priority,processorFunc){if("function"==typeof priority&&(processorFunc=priority,priority=PRIORITY_PROCESSOR_FILTER),isNaN(priority))throw new Error("Unkown processor priority");dataProcessorFuncs.push({prio:priority,func:processorFunc})},echarts.registerAction=function(actionInfo,eventName,action){"function"==typeof eventName&&(action=eventName,eventName="");var actionType=zrUtil.isObject(actionInfo)?actionInfo.type:[actionInfo,actionInfo={event:eventName}][0];actionInfo.event=(actionInfo.event||actionType).toLowerCase(),eventName=actionInfo.event,actions[actionType]||(actions[actionType]={action:action,actionInfo:actionInfo}),eventActionMap[eventName]=actionType},echarts.registerCoordinateSystem=function(type,CoordinateSystem){CoordinateSystemManager.register(type,CoordinateSystem)},echarts.registerLayout=function(priority,layoutFunc){if("function"==typeof priority&&(layoutFunc=priority,priority=PRIORITY_VISUAL_LAYOUT),isNaN(priority))throw new Error("Unkown layout priority");visualFuncs.push({prio:priority,func:layoutFunc,isLayout:!0})},echarts.registerVisual=function(priority,visualFunc){if("function"==typeof priority&&(visualFunc=priority,priority=PRIORITY_VISUAL_CHART),isNaN(priority))throw new Error("Unkown visual priority");visualFuncs.push({prio:priority,func:visualFunc})},echarts.registerLoading=function(name,loadingFx){loadingEffects[name]=loadingFx};var parseClassType=ComponentModel.parseClassType;echarts.extendComponentModel=function(opts,superClass){var Clazz=ComponentModel;if(superClass){var classType=parseClassType(superClass);Clazz=ComponentModel.getClass(classType.main,classType.sub,!0)}return Clazz.extend(opts)},echarts.extendComponentView=function(opts,superClass){var Clazz=ComponentView;if(superClass){var classType=parseClassType(superClass);Clazz=ComponentView.getClass(classType.main,classType.sub,!0)}return Clazz.extend(opts)},echarts.extendSeriesModel=function(opts,superClass){var Clazz=SeriesModel;if(superClass){superClass="series."+superClass.replace("series.","");var classType=parseClassType(superClass);Clazz=SeriesModel.getClass(classType.main,classType.sub,!0)}return Clazz.extend(opts)},echarts.extendChartView=function(opts,superClass){var Clazz=ChartView;if(superClass){superClass.replace("series.","");var classType=parseClassType(superClass);Clazz=ChartView.getClass(classType.main,!0)}return Clazz.extend(opts)},echarts.setCanvasCreator=function(creator){zrUtil.createCanvas=creator},echarts.registerVisual(PRIORITY_VISUAL_GLOBAL,__webpack_require__(93)),echarts.registerPreprocessor(__webpack_require__(94)),echarts.registerLoading("default",__webpack_require__(96)),echarts.registerAction({type:"highlight",event:"highlight",update:"highlight"},zrUtil.noop),echarts.registerAction({type:"downplay",event:"downplay",update:"downplay"},zrUtil.noop),echarts.List=__webpack_require__(97),echarts.Model=__webpack_require__(12),echarts.graphic=__webpack_require__(43),echarts.number=__webpack_require__(7),echarts.format=__webpack_require__(6),echarts.matrix=__webpack_require__(11),echarts.vector=__webpack_require__(10),echarts.color=__webpack_require__(39),echarts.util={},each(["map","each","filter","indexOf","inherits","reduce","filter","bind","curry","isArray","isString","isObject","isFunction","extend","defaults"],function(name){echarts.util[name]=zrUtil[name]}),echarts.PRIORITY={PROCESSOR:{FILTER:PRIORITY_PROCESSOR_FILTER,STATISTIC:PRIORITY_PROCESSOR_STATISTIC},VISUAL:{LAYOUT:PRIORITY_VISUAL_LAYOUT,GLOBAL:PRIORITY_VISUAL_GLOBAL,CHART:PRIORITY_VISUAL_CHART,COMPONENT:PRIORITY_VISUAL_COMPONENT,BRUSH:PRIORITY_VISUAL_BRUSH}},module.exports=echarts},function(module,exports){function detect(ua){var os={},browser={},firefox=ua.match(/Firefox\/([\d.]+)/),ie=ua.match(/MSIE\s([\d.]+)/)||ua.match(/Trident\/.+?rv:(([\d.]+))/),edge=ua.match(/Edge\/([\d.]+)/);return firefox&&(browser.firefox=!0,browser.version=firefox[1]),ie&&(browser.ie=!0,browser.version=ie[1]),ie&&(browser.ie=!0,browser.version=ie[1]),edge&&(browser.edge=!0,browser.version=edge[1]),{browser:browser,os:os,node:!1,canvasSupported:!!document.createElement("canvas").getContext,touchEventsSupported:"ontouchstart"in window&&!browser.ie&&!browser.edge,pointerEventsSupported:"onpointerdown"in window&&(browser.edge||browser.ie&&browser.version>=10)}}var env={};env="undefined"==typeof navigator?{browser:{},os:{},node:!0,canvasSupported:!0}:detect(navigator.userAgent),module.exports=env},function(module,exports,__webpack_require__){function mergeTheme(option,theme){for(var name in theme)ComponentModel.hasClass(name)||("object"==typeof theme[name]?option[name]=option[name]?zrUtil.merge(option[name],theme[name],!1):zrUtil.clone(theme[name]):null==option[name]&&(option[name]=theme[name]))}function initBase(baseOption){baseOption=baseOption,this.option={},this.option[OPTION_INNER_KEY]=1,this._componentsMap={},this._seriesIndices=null,mergeTheme(baseOption,this._theme.option),zrUtil.merge(baseOption,globalDefault,!1),this.mergeOption(baseOption)}function getComponentsByTypes(componentsMap,types){zrUtil.isArray(types)||(types=types?[types]:[]);var ret={};return each(types,function(type){ret[type]=(componentsMap[type]||[]).slice()}),ret}function makeKeyInfo(mainType,mapResult){var idMap={};each(mapResult,function(item,index){var existCpt=item.exist;existCpt&&(idMap[existCpt.id]=item)}),each(mapResult,function(item,index){var opt=item.option;if(zrUtil.assert(!opt||null==opt.id||!idMap[opt.id]||idMap[opt.id]===item,"id duplicates: "+(opt&&opt.id)),opt&&null!=opt.id&&(idMap[opt.id]=item),isObject(opt)){var subType=determineSubType(mainType,opt,item.exist);item.keyInfo={mainType:mainType,subType:subType}}}),each(mapResult,function(item,index){var existCpt=item.exist,opt=item.option,keyInfo=item.keyInfo;if(isObject(opt)){if(keyInfo.name=null!=opt.name?opt.name+"":existCpt?existCpt.name:"\0-",existCpt)keyInfo.id=existCpt.id;else if(null!=opt.id)keyInfo.id=opt.id+"";else{var idNum=0;do keyInfo.id="\0"+keyInfo.name+"\0"+idNum++;while(idMap[keyInfo.id])}idMap[keyInfo.id]=item}})}function determineSubType(mainType,newCptOption,existComponent){var subType=newCptOption.type?newCptOption.type:existComponent?existComponent.subType:ComponentModel.determineSubType(mainType,newCptOption);return subType}function createSeriesIndices(seriesModels){return map(seriesModels,function(series){return series.componentIndex})||[]}function filterBySubType(components,condition){return condition.hasOwnProperty("subType")?filter(components,function(cpt){return cpt.subType===condition.subType}):components}function assertSeriesInitialized(ecModel){if(!ecModel._seriesIndices)throw new Error("Series has not been initialized yet.")}var zrUtil=__webpack_require__(4),modelUtil=__webpack_require__(5),Model=__webpack_require__(12),each=zrUtil.each,filter=zrUtil.filter,map=zrUtil.map,isArray=zrUtil.isArray,indexOf=zrUtil.indexOf,isObject=zrUtil.isObject,ComponentModel=__webpack_require__(19),globalDefault=__webpack_require__(23),OPTION_INNER_KEY="\0_ec_inner",GlobalModel=Model.extend({constructor:GlobalModel,init:function(option,parentModel,theme,optionManager){theme=theme||{},this.option=null,this._theme=new Model(theme),this._optionManager=optionManager},setOption:function(option,optionPreprocessorFuncs){zrUtil.assert(!(OPTION_INNER_KEY in option),"please use chart.getOption()"),this._optionManager.setOption(option,optionPreprocessorFuncs),this.resetOption()},resetOption:function(type){var optionChanged=!1,optionManager=this._optionManager;if(!type||"recreate"===type){var baseOption=optionManager.mountOption("recreate"===type);this.option&&"recreate"!==type?(this.restoreData(),this.mergeOption(baseOption)):initBase.call(this,baseOption),optionChanged=!0}if("timeline"!==type&&"media"!==type||this.restoreData(),!type||"recreate"===type||"timeline"===type){var timelineOption=optionManager.getTimelineOption(this);timelineOption&&(this.mergeOption(timelineOption),optionChanged=!0)}if(!type||"recreate"===type||"media"===type){var mediaOptions=optionManager.getMediaOption(this,this._api);mediaOptions.length&&each(mediaOptions,function(mediaOption){this.mergeOption(mediaOption,optionChanged=!0)},this)}return optionChanged},mergeOption:function(newOption){function visitComponent(mainType,dependencies){var newCptOptionList=modelUtil.normalizeToArray(newOption[mainType]),mapResult=modelUtil.mappingToExists(componentsMap[mainType],newCptOptionList);makeKeyInfo(mainType,mapResult);var dependentModels=getComponentsByTypes(componentsMap,dependencies);option[mainType]=[],componentsMap[mainType]=[],each(mapResult,function(resultItem,index){var componentModel=resultItem.exist,newCptOption=resultItem.option;if(zrUtil.assert(isObject(newCptOption)||componentModel,"Empty component definition"),newCptOption){var ComponentModelClass=ComponentModel.getClass(mainType,resultItem.keyInfo.subType,!0);if(componentModel&&componentModel instanceof ComponentModelClass)componentModel.mergeOption(newCptOption,this),componentModel.optionUpdated(newCptOption,!1);else{var extraOpt=zrUtil.extend({dependentModels:dependentModels,componentIndex:index},resultItem.keyInfo);componentModel=new ComponentModelClass(newCptOption,this,this,extraOpt),componentModel.init(newCptOption,this,this,extraOpt),componentModel.optionUpdated(null,!0)}}else componentModel.mergeOption({},this),componentModel.optionUpdated({},!1);componentsMap[mainType][index]=componentModel,option[mainType][index]=componentModel.option},this),"series"===mainType&&(this._seriesIndices=createSeriesIndices(componentsMap.series))}var option=this.option,componentsMap=this._componentsMap,newCptTypes=[];each(newOption,function(componentOption,mainType){null!=componentOption&&(ComponentModel.hasClass(mainType)?newCptTypes.push(mainType):option[mainType]=null==option[mainType]?zrUtil.clone(componentOption):zrUtil.merge(option[mainType],componentOption,!0))}),ComponentModel.topologicalTravel(newCptTypes,ComponentModel.getAllClassMainTypes(),visitComponent,this),this._seriesIndices=this._seriesIndices||[]},getOption:function(){var option=zrUtil.clone(this.option);return each(option,function(opts,mainType){if(ComponentModel.hasClass(mainType)){for(var opts=modelUtil.normalizeToArray(opts),i=opts.length-1;i>=0;i--)modelUtil.isIdInner(opts[i])&&opts.splice(i,1);option[mainType]=opts}}),delete option[OPTION_INNER_KEY],option},getTheme:function(){return this._theme},getComponent:function(mainType,idx){var list=this._componentsMap[mainType];if(list)return list[idx||0]},queryComponents:function(condition){var mainType=condition.mainType;if(!mainType)return[];var index=condition.index,id=condition.id,name=condition.name,cpts=this._componentsMap[mainType];if(!cpts||!cpts.length)return[];var result;if(null!=index)isArray(index)||(index=[index]),result=filter(map(index,function(idx){return cpts[idx]}),function(val){return!!val});else if(null!=id){var isIdArray=isArray(id);result=filter(cpts,function(cpt){return isIdArray&&indexOf(id,cpt.id)>=0||!isIdArray&&cpt.id===id})}else if(null!=name){var isNameArray=isArray(name);result=filter(cpts,function(cpt){return isNameArray&&indexOf(name,cpt.name)>=0||!isNameArray&&cpt.name===name})}else result=cpts;return filterBySubType(result,condition)},findComponents:function(condition){function getQueryCond(q){var indexAttr=mainType+"Index",idAttr=mainType+"Id",nameAttr=mainType+"Name";return q&&(q.hasOwnProperty(indexAttr)||q.hasOwnProperty(idAttr)||q.hasOwnProperty(nameAttr))?{mainType:mainType,index:q[indexAttr],id:q[idAttr],name:q[nameAttr]}:null}function doFilter(res){return condition.filter?filter(res,condition.filter):res}var query=condition.query,mainType=condition.mainType,queryCond=getQueryCond(query),result=queryCond?this.queryComponents(queryCond):this._componentsMap[mainType];
return doFilter(filterBySubType(result,condition))},eachComponent:function(mainType,cb,context){var componentsMap=this._componentsMap;if("function"==typeof mainType)context=cb,cb=mainType,each(componentsMap,function(components,componentType){each(components,function(component,index){cb.call(context,componentType,component,index)})});else if(zrUtil.isString(mainType))each(componentsMap[mainType],cb,context);else if(isObject(mainType)){var queryResult=this.findComponents(mainType);each(queryResult,cb,context)}},getSeriesByName:function(name){var series=this._componentsMap.series;return filter(series,function(oneSeries){return oneSeries.name===name})},getSeriesByIndex:function(seriesIndex){return this._componentsMap.series[seriesIndex]},getSeriesByType:function(subType){var series=this._componentsMap.series;return filter(series,function(oneSeries){return oneSeries.subType===subType})},getSeries:function(){return this._componentsMap.series.slice()},eachSeries:function(cb,context){assertSeriesInitialized(this),each(this._seriesIndices,function(rawSeriesIndex){var series=this._componentsMap.series[rawSeriesIndex];cb.call(context,series,rawSeriesIndex)},this)},eachRawSeries:function(cb,context){each(this._componentsMap.series,cb,context)},eachSeriesByType:function(subType,cb,context){assertSeriesInitialized(this),each(this._seriesIndices,function(rawSeriesIndex){var series=this._componentsMap.series[rawSeriesIndex];series.subType===subType&&cb.call(context,series,rawSeriesIndex)},this)},eachRawSeriesByType:function(subType,cb,context){return each(this.getSeriesByType(subType),cb,context)},isSeriesFiltered:function(seriesModel){return assertSeriesInitialized(this),zrUtil.indexOf(this._seriesIndices,seriesModel.componentIndex)<0},filterSeries:function(cb,context){assertSeriesInitialized(this);var filteredSeries=filter(this._componentsMap.series,cb,context);this._seriesIndices=createSeriesIndices(filteredSeries)},restoreData:function(){var componentsMap=this._componentsMap;this._seriesIndices=createSeriesIndices(componentsMap.series);var componentTypes=[];each(componentsMap,function(components,componentType){componentTypes.push(componentType)}),ComponentModel.topologicalTravel(componentTypes,ComponentModel.getAllClassMainTypes(),function(componentType,dependencies){each(componentsMap[componentType],function(component){component.restoreData()})})}});zrUtil.mixin(GlobalModel,__webpack_require__(24)),module.exports=GlobalModel},function(module,exports){function clone(source){if("object"==typeof source&&null!==source){var result=source;if(source instanceof Array){result=[];for(var i=0,len=source.length;i<len;i++)result[i]=clone(source[i])}else if(!isBuildInObject(source)&&!isDom(source)){result={};for(var key in source)source.hasOwnProperty(key)&&(result[key]=clone(source[key]))}return result}return source}function merge(target,source,overwrite){if(!isObject(source)||!isObject(target))return overwrite?clone(source):target;for(var key in source)if(source.hasOwnProperty(key)){var targetProp=target[key],sourceProp=source[key];!isObject(sourceProp)||!isObject(targetProp)||isArray(sourceProp)||isArray(targetProp)||isDom(sourceProp)||isDom(targetProp)||isBuildInObject(sourceProp)||isBuildInObject(targetProp)?!overwrite&&key in target||(target[key]=clone(source[key],!0)):merge(targetProp,sourceProp,overwrite)}return target}function mergeAll(targetAndSources,overwrite){for(var result=targetAndSources[0],i=1,len=targetAndSources.length;i<len;i++)result=merge(result,targetAndSources[i],overwrite);return result}function extend(target,source){for(var key in source)source.hasOwnProperty(key)&&(target[key]=source[key]);return target}function defaults(target,source,overlay){for(var key in source)source.hasOwnProperty(key)&&(overlay?null!=source[key]:null==target[key])&&(target[key]=source[key]);return target}function createCanvas(){return document.createElement("canvas")}function getContext(){return _ctx||(_ctx=util.createCanvas().getContext("2d")),_ctx}function indexOf(array,value){if(array){if(array.indexOf)return array.indexOf(value);for(var i=0,len=array.length;i<len;i++)if(array[i]===value)return i}return-1}function inherits(clazz,baseClazz){function F(){}var clazzPrototype=clazz.prototype;F.prototype=baseClazz.prototype,clazz.prototype=new F;for(var prop in clazzPrototype)clazz.prototype[prop]=clazzPrototype[prop];clazz.prototype.constructor=clazz,clazz.superClass=baseClazz}function mixin(target,source,overlay){target="prototype"in target?target.prototype:target,source="prototype"in source?source.prototype:source,defaults(target,source,overlay)}function isArrayLike(data){if(data)return"string"!=typeof data&&"number"==typeof data.length}function each(obj,cb,context){if(obj&&cb)if(obj.forEach&&obj.forEach===nativeForEach)obj.forEach(cb,context);else if(obj.length===+obj.length)for(var i=0,len=obj.length;i<len;i++)cb.call(context,obj[i],i,obj);else for(var key in obj)obj.hasOwnProperty(key)&&cb.call(context,obj[key],key,obj)}function map(obj,cb,context){if(obj&&cb){if(obj.map&&obj.map===nativeMap)return obj.map(cb,context);for(var result=[],i=0,len=obj.length;i<len;i++)result.push(cb.call(context,obj[i],i,obj));return result}}function reduce(obj,cb,memo,context){if(obj&&cb){if(obj.reduce&&obj.reduce===nativeReduce)return obj.reduce(cb,memo,context);for(var i=0,len=obj.length;i<len;i++)memo=cb.call(context,memo,obj[i],i,obj);return memo}}function filter(obj,cb,context){if(obj&&cb){if(obj.filter&&obj.filter===nativeFilter)return obj.filter(cb,context);for(var result=[],i=0,len=obj.length;i<len;i++)cb.call(context,obj[i],i,obj)&&result.push(obj[i]);return result}}function find(obj,cb,context){if(obj&&cb)for(var i=0,len=obj.length;i<len;i++)if(cb.call(context,obj[i],i,obj))return obj[i]}function bind(func,context){var args=nativeSlice.call(arguments,2);return function(){return func.apply(context,args.concat(nativeSlice.call(arguments)))}}function curry(func){var args=nativeSlice.call(arguments,1);return function(){return func.apply(this,args.concat(nativeSlice.call(arguments)))}}function isArray(value){return"[object Array]"===objToString.call(value)}function isFunction(value){return"function"==typeof value}function isString(value){return"[object String]"===objToString.call(value)}function isObject(value){var type=typeof value;return"function"===type||!!value&&"object"==type}function isBuildInObject(value){return!!BUILTIN_OBJECT[objToString.call(value)]}function isDom(value){return value&&1===value.nodeType&&"string"==typeof value.nodeName}function retrieve(values){for(var i=0,len=arguments.length;i<len;i++)if(null!=arguments[i])return arguments[i]}function slice(){return Function.call.apply(nativeSlice,arguments)}function assert(condition,message){if(!condition)throw new Error(message)}var _ctx,BUILTIN_OBJECT={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1},objToString=Object.prototype.toString,arrayProto=Array.prototype,nativeForEach=arrayProto.forEach,nativeFilter=arrayProto.filter,nativeSlice=arrayProto.slice,nativeMap=arrayProto.map,nativeReduce=arrayProto.reduce,util={inherits:inherits,mixin:mixin,clone:clone,merge:merge,mergeAll:mergeAll,extend:extend,defaults:defaults,getContext:getContext,createCanvas:createCanvas,indexOf:indexOf,slice:slice,find:find,isArrayLike:isArrayLike,each:each,map:map,reduce:reduce,filter:filter,bind:bind,curry:curry,isArray:isArray,isString:isString,isObject:isObject,isFunction:isFunction,isBuildInObject:isBuildInObject,isDom:isDom,retrieve:retrieve,assert:assert,noop:function(){}};module.exports=util},function(module,exports,__webpack_require__){var formatUtil=__webpack_require__(6),nubmerUtil=__webpack_require__(7),Model=__webpack_require__(12),zrUtil=__webpack_require__(4),modelUtil={};modelUtil.normalizeToArray=function(value){return value instanceof Array?value:null==value?[]:[value]},modelUtil.defaultEmphasis=function(opt,subOpts){if(opt){var emphasisOpt=opt.emphasis=opt.emphasis||{},normalOpt=opt.normal=opt.normal||{};zrUtil.each(subOpts,function(subOptName){var val=zrUtil.retrieve(emphasisOpt[subOptName],normalOpt[subOptName]);null!=val&&(emphasisOpt[subOptName]=val)})}},modelUtil.LABEL_OPTIONS=["position","show","textStyle","distance","formatter"],modelUtil.getDataItemValue=function(dataItem){return dataItem&&(null==dataItem.value?dataItem:dataItem.value)},modelUtil.isDataItemOption=function(dataItem){return zrUtil.isObject(dataItem)&&!(dataItem instanceof Array)},modelUtil.converDataValue=function(value,dimInfo){var dimType=dimInfo&&dimInfo.type;return"ordinal"===dimType?value:("time"!==dimType||isFinite(value)||null==value||"-"===value||(value=+nubmerUtil.parseDate(value)),null==value||""===value?NaN:+value)},modelUtil.createDataFormatModel=function(data,opt){var model=new Model;return zrUtil.mixin(model,modelUtil.dataFormatMixin),model.seriesIndex=opt.seriesIndex,model.name=opt.name||"",model.mainType=opt.mainType,model.subType=opt.subType,model.getData=function(){return data},model},modelUtil.dataFormatMixin={getDataParams:function(dataIndex,dataType){var data=this.getData(dataType),seriesIndex=this.seriesIndex,seriesName=this.name,rawValue=this.getRawValue(dataIndex,dataType),rawDataIndex=data.getRawIndex(dataIndex),name=data.getName(dataIndex,!0),itemOpt=data.getRawDataItem(dataIndex);return{componentType:this.mainType,componentSubType:this.subType,seriesType:"series"===this.mainType?this.subType:null,seriesIndex:seriesIndex,seriesName:seriesName,name:name,dataIndex:rawDataIndex,data:itemOpt,dataType:dataType,value:rawValue,color:data.getItemVisual(dataIndex,"color"),$vars:["seriesName","name","value"]}},getFormattedLabel:function(dataIndex,status,dataType,dimIndex){status=status||"normal";var data=this.getData(dataType),itemModel=data.getItemModel(dataIndex),params=this.getDataParams(dataIndex,dataType);null!=dimIndex&&params.value instanceof Array&&(params.value=params.value[dimIndex]);var formatter=itemModel.get(["label",status,"formatter"]);return"function"==typeof formatter?(params.status=status,formatter(params)):"string"==typeof formatter?formatUtil.formatTpl(formatter,params):void 0},getRawValue:function(idx,dataType){var data=this.getData(dataType),dataItem=data.getRawDataItem(idx);if(null!=dataItem)return!zrUtil.isObject(dataItem)||dataItem instanceof Array?dataItem:dataItem.value},formatTooltip:zrUtil.noop},modelUtil.mappingToExists=function(exists,newCptOptions){newCptOptions=(newCptOptions||[]).slice();var result=zrUtil.map(exists||[],function(obj,index){return{exist:obj}});return zrUtil.each(newCptOptions,function(cptOption,index){if(zrUtil.isObject(cptOption)){for(var i=0;i<result.length;i++)if(!result[i].option&&null!=cptOption.id&&result[i].exist.id===cptOption.id+"")return result[i].option=cptOption,void(newCptOptions[index]=null);for(var i=0;i<result.length;i++){var exist=result[i].exist;if(!(result[i].option||null!=exist.id&&null!=cptOption.id||null==cptOption.name||modelUtil.isIdInner(cptOption)||modelUtil.isIdInner(exist)||exist.name!==cptOption.name+""))return result[i].option=cptOption,void(newCptOptions[index]=null)}}}),zrUtil.each(newCptOptions,function(cptOption,index){if(zrUtil.isObject(cptOption)){for(var i=0;i<result.length;i++){var exist=result[i].exist;if(!result[i].option&&!modelUtil.isIdInner(exist)&&null==cptOption.id){result[i].option=cptOption;break}}i>=result.length&&result.push({option:cptOption})}}),result},modelUtil.isIdInner=function(cptOption){return zrUtil.isObject(cptOption)&&cptOption.id&&0===(cptOption.id+"").indexOf("\0_ec_\0")},modelUtil.compressBatches=function(batchA,batchB){function makeMap(sourceBatch,map,otherMap){for(var i=0,len=sourceBatch.length;i<len;i++)for(var seriesId=sourceBatch[i].seriesId,dataIndices=modelUtil.normalizeToArray(sourceBatch[i].dataIndex),otherDataIndices=otherMap&&otherMap[seriesId],j=0,lenj=dataIndices.length;j<lenj;j++){var dataIndex=dataIndices[j];otherDataIndices&&otherDataIndices[dataIndex]?otherDataIndices[dataIndex]=null:(map[seriesId]||(map[seriesId]={}))[dataIndex]=1}}function mapToArray(map,isData){var result=[];for(var i in map)if(map.hasOwnProperty(i)&&null!=map[i])if(isData)result.push(+i);else{var dataIndices=mapToArray(map[i],!0);dataIndices.length&&result.push({seriesId:i,dataIndex:dataIndices})}return result}var mapA={},mapB={};return makeMap(batchA||[],mapA),makeMap(batchB||[],mapB,mapA),[mapToArray(mapA),mapToArray(mapB)]},module.exports=modelUtil},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4),numberUtil=__webpack_require__(7),textContain=__webpack_require__(8),formatUtil={};formatUtil.addCommas=function(x){return isNaN(x)?"-":(x=(x+"").split("."),x[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(x.length>1?"."+x[1]:""))},formatUtil.toCamelCase=function(str){return str.toLowerCase().replace(/-(.)/g,function(match,group1){return group1.toUpperCase()})},formatUtil.normalizeCssArray=function(val){var len=val.length;return"number"==typeof val?[val,val,val,val]:2===len?[val[0],val[1],val[0],val[1]]:3===len?[val[0],val[1],val[2],val[1]]:val},formatUtil.encodeHTML=function(source){return String(source).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")};var TPL_VAR_ALIAS=["a","b","c","d","e","f","g"],wrapVar=function(varName,seriesIdx){return"{"+varName+(null==seriesIdx?"":seriesIdx)+"}"};formatUtil.formatTpl=function(tpl,paramsList){zrUtil.isArray(paramsList)||(paramsList=[paramsList]);var seriesLen=paramsList.length;if(!seriesLen)return"";for(var $vars=paramsList[0].$vars||[],i=0;i<$vars.length;i++){var alias=TPL_VAR_ALIAS[i];tpl=tpl.replace(wrapVar(alias),wrapVar(alias,0))}for(var seriesIdx=0;seriesIdx<seriesLen;seriesIdx++)for(var k=0;k<$vars.length;k++)tpl=tpl.replace(wrapVar(TPL_VAR_ALIAS[k],seriesIdx),paramsList[seriesIdx][$vars[k]]);return tpl};var s2d=function(str){return str<10?"0"+str:str};formatUtil.formatTime=function(tpl,value){"week"!==tpl&&"month"!==tpl&&"quarter"!==tpl&&"half-year"!==tpl&&"year"!==tpl||(tpl="MM-dd\nyyyy");var date=numberUtil.parseDate(value),y=date.getFullYear(),M=date.getMonth()+1,d=date.getDate(),h=date.getHours(),m=date.getMinutes(),s=date.getSeconds();return tpl=tpl.replace("MM",s2d(M)).toLowerCase().replace("yyyy",y).replace("yy",y%100).replace("dd",s2d(d)).replace("d",d).replace("hh",s2d(h)).replace("h",h).replace("mm",s2d(m)).replace("m",m).replace("ss",s2d(s)).replace("s",s)},formatUtil.capitalFirst=function(str){return str?str.charAt(0).toUpperCase()+str.substr(1):str},formatUtil.truncateText=textContain.truncateText,module.exports=formatUtil},function(module,exports){function _trim(str){return str.replace(/^\s+/,"").replace(/\s+$/,"")}var number={},RADIAN_EPSILON=1e-4;number.linearMap=function(val,domain,range,clamp){var subDomain=domain[1]-domain[0],subRange=range[1]-range[0];if(0===subDomain)return 0===subRange?range[0]:(range[0]+range[1])/2;if(clamp)if(subDomain>0){if(val<=domain[0])return range[0];if(val>=domain[1])return range[1]}else{if(val>=domain[0])return range[0];if(val<=domain[1])return range[1]}else{if(val===domain[0])return range[0];if(val===domain[1])return range[1]}return(val-domain[0])/subDomain*subRange+range[0]},number.parsePercent=function(percent,all){switch(percent){case"center":case"middle":percent="50%";break;case"left":case"top":percent="0%";break;case"right":case"bottom":percent="100%"}return"string"==typeof percent?_trim(percent).match(/%$/)?parseFloat(percent)/100*all:parseFloat(percent):null==percent?NaN:+percent},number.round=function(x,precision){return null==precision&&(precision=10),+(+x).toFixed(precision)},number.asc=function(arr){return arr.sort(function(a,b){return a-b}),arr},number.getPrecision=function(val){if(val=+val,isNaN(val))return 0;for(var e=1,count=0;Math.round(val*e)/e!==val;)e*=10,count++;return count},number.getPrecisionSafe=function(val){var str=val.toString(),dotIndex=str.indexOf(".");return dotIndex<0?0:str.length-1-dotIndex},number.getPixelPrecision=function(dataExtent,pixelExtent){var log=Math.log,LN10=Math.LN10,dataQuantity=Math.floor(log(dataExtent[1]-dataExtent[0])/LN10),sizeQuantity=Math.round(log(Math.abs(pixelExtent[1]-pixelExtent[0]))/LN10);return Math.max(-dataQuantity+sizeQuantity,0)},number.MAX_SAFE_INTEGER=9007199254740991,number.remRadian=function(radian){var pi2=2*Math.PI;return(radian%pi2+pi2)%pi2},number.isRadianAroundZero=function(val){return val>-RADIAN_EPSILON&&val<RADIAN_EPSILON},number.parseDate=function(value){if(value instanceof Date)return value;if("string"==typeof value){var ret=new Date(value);return isNaN(+ret)&&(ret=new Date(new Date(value.replace(/-/g,"/"))-new Date("1970/01/01"))),ret}return new Date(Math.round(value))},number.quantity=function(val){return Math.pow(10,Math.floor(Math.log(val)/Math.LN10))},number.nice=function(val,round){var nf,exp10=number.quantity(val),f=val/exp10;return nf=round?f<1.5?1:f<2.5?2:f<4?3:f<7?5:10:f<1?1:f<2?2:f<3?3:f<5?5:10,nf*exp10},module.exports=number},function(module,exports,__webpack_require__){function getTextWidth(text,textFont){var key=text+":"+textFont;if(textWidthCache[key])return textWidthCache[key];for(var textLines=(text+"").split("\n"),width=0,i=0,l=textLines.length;i<l;i++)width=Math.max(textContain.measureText(textLines[i],textFont).width,width);return textWidthCacheCounter>TEXT_CACHE_MAX&&(textWidthCacheCounter=0,textWidthCache={}),textWidthCacheCounter++,textWidthCache[key]=width,width}function getTextRect(text,textFont,textAlign,textBaseline){var textLineLen=((text||"")+"").split("\n").length,width=getTextWidth(text,textFont),lineHeight=getTextWidth("国",textFont),height=textLineLen*lineHeight,rect=new BoundingRect(0,0,width,height);switch(rect.lineHeight=lineHeight,textBaseline){case"bottom":case"alphabetic":rect.y-=lineHeight;break;case"middle":rect.y-=lineHeight/2}switch(textAlign){case"end":case"right":rect.x-=rect.width;break;case"center":rect.x-=rect.width/2}return rect}function adjustTextPositionOnRect(textPosition,rect,textRect,distance){var x=rect.x,y=rect.y,height=rect.height,width=rect.width,textHeight=textRect.height,halfHeight=height/2-textHeight/2,textAlign="left";switch(textPosition){case"left":x-=distance,y+=halfHeight,textAlign="right";break;case"right":x+=distance+width,y+=halfHeight,textAlign="left";break;case"top":x+=width/2,y-=distance+textHeight,textAlign="center";break;case"bottom":x+=width/2,y+=height+distance,textAlign="center";break;case"inside":x+=width/2,y+=halfHeight,textAlign="center";break;case"insideLeft":x+=distance,y+=halfHeight,textAlign="left";break;case"insideRight":x+=width-distance,y+=halfHeight,textAlign="right";break;case"insideTop":x+=width/2,y+=distance,textAlign="center";break;case"insideBottom":x+=width/2,y+=height-textHeight-distance,textAlign="center";break;case"insideTopLeft":x+=distance,y+=distance,textAlign="left";break;case"insideTopRight":x+=width-distance,y+=distance,textAlign="right";break;case"insideBottomLeft":x+=distance,y+=height-textHeight-distance;break;case"insideBottomRight":x+=width-distance,y+=height-textHeight-distance,textAlign="right"}return{x:x,y:y,textAlign:textAlign,textBaseline:"top"}}function truncateText(text,containerWidth,textFont,ellipsis,options){if(!containerWidth)return"";options=options||{},ellipsis=retrieve(ellipsis,"...");for(var maxIterations=retrieve(options.maxIterations,2),minChar=retrieve(options.minChar,0),cnCharWidth=getTextWidth("国",textFont),ascCharWidth=getTextWidth("a",textFont),placeholder=retrieve(options.placeholder,""),contentWidth=containerWidth=Math.max(0,containerWidth-1),i=0;i<minChar&&contentWidth>=ascCharWidth;i++)contentWidth-=ascCharWidth;var ellipsisWidth=getTextWidth(ellipsis);ellipsisWidth>contentWidth&&(ellipsis="",ellipsisWidth=0),contentWidth=containerWidth-ellipsisWidth;for(var textLines=(text+"").split("\n"),i=0,len=textLines.length;i<len;i++){var textLine=textLines[i],lineWidth=getTextWidth(textLine,textFont);if(!(lineWidth<=containerWidth)){for(var j=0;;j++){if(lineWidth<=contentWidth||j>=maxIterations){textLine+=ellipsis;break}var subLength=0===j?estimateLength(textLine,contentWidth,ascCharWidth,cnCharWidth):lineWidth>0?Math.floor(textLine.length*contentWidth/lineWidth):0;textLine=textLine.substr(0,subLength),lineWidth=getTextWidth(textLine,textFont)}""===textLine&&(textLine=placeholder),textLines[i]=textLine}}return textLines.join("\n")}function estimateLength(text,contentWidth,ascCharWidth,cnCharWidth){for(var width=0,i=0,len=text.length;i<len&&width<contentWidth;i++){var charCode=text.charCodeAt(i);width+=0<=charCode&&charCode<=127?ascCharWidth:cnCharWidth}return i}var textWidthCache={},textWidthCacheCounter=0,TEXT_CACHE_MAX=5e3,util=__webpack_require__(4),BoundingRect=__webpack_require__(9),retrieve=util.retrieve,textContain={getWidth:getTextWidth,getBoundingRect:getTextRect,adjustTextPositionOnRect:adjustTextPositionOnRect,truncateText:truncateText,measureText:function(text,textFont){var ctx=util.getContext();return ctx.font=textFont||"12px sans-serif",ctx.measureText(text)}};module.exports=textContain},function(module,exports,__webpack_require__){"use strict";function BoundingRect(x,y,width,height){this.x=x,this.y=y,this.width=width,this.height=height}var vec2=__webpack_require__(10),matrix=__webpack_require__(11),v2ApplyTransform=vec2.applyTransform,mathMin=Math.min,mathAbs=Math.abs,mathMax=Math.max;BoundingRect.prototype={constructor:BoundingRect,union:function(other){var x=mathMin(other.x,this.x),y=mathMin(other.y,this.y);this.width=mathMax(other.x+other.width,this.x+this.width)-x,this.height=mathMax(other.y+other.height,this.y+this.height)-y,this.x=x,this.y=y},applyTransform:function(){var min=[],max=[];return function(m){m&&(min[0]=this.x,min[1]=this.y,max[0]=this.x+this.width,max[1]=this.y+this.height,v2ApplyTransform(min,min,m),v2ApplyTransform(max,max,m),this.x=mathMin(min[0],max[0]),this.y=mathMin(min[1],max[1]),this.width=mathAbs(max[0]-min[0]),this.height=mathAbs(max[1]-min[1]))}}(),calculateTransform:function(b){var a=this,sx=b.width/a.width,sy=b.height/a.height,m=matrix.create();return matrix.translate(m,m,[-a.x,-a.y]),matrix.scale(m,m,[sx,sy]),matrix.translate(m,m,[b.x,b.y]),m},intersect:function(b){var a=this,ax0=a.x,ax1=a.x+a.width,ay0=a.y,ay1=a.y+a.height,bx0=b.x,bx1=b.x+b.width,by0=b.y,by1=b.y+b.height;return!(ax1<bx0||bx1<ax0||ay1<by0||by1<ay0)},contain:function(x,y){var rect=this;return x>=rect.x&&x<=rect.x+rect.width&&y>=rect.y&&y<=rect.y+rect.height},clone:function(){return new BoundingRect(this.x,this.y,this.width,this.height)},copy:function(other){this.x=other.x,this.y=other.y,this.width=other.width,this.height=other.height}},module.exports=BoundingRect},function(module,exports){var ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,vector={create:function(x,y){var out=new ArrayCtor(2);return null==x&&(x=0),null==y&&(y=0),out[0]=x,out[1]=y,out},copy:function(out,v){return out[0]=v[0],out[1]=v[1],out},clone:function(v){var out=new ArrayCtor(2);return out[0]=v[0],out[1]=v[1],out},set:function(out,a,b){return out[0]=a,out[1]=b,out},add:function(out,v1,v2){return out[0]=v1[0]+v2[0],out[1]=v1[1]+v2[1],out},scaleAndAdd:function(out,v1,v2,a){return out[0]=v1[0]+v2[0]*a,out[1]=v1[1]+v2[1]*a,out},sub:function(out,v1,v2){return out[0]=v1[0]-v2[0],out[1]=v1[1]-v2[1],out},len:function(v){return Math.sqrt(this.lenSquare(v))},lenSquare:function(v){return v[0]*v[0]+v[1]*v[1]},mul:function(out,v1,v2){return out[0]=v1[0]*v2[0],out[1]=v1[1]*v2[1],out},div:function(out,v1,v2){return out[0]=v1[0]/v2[0],out[1]=v1[1]/v2[1],out},dot:function(v1,v2){return v1[0]*v2[0]+v1[1]*v2[1]},scale:function(out,v,s){return out[0]=v[0]*s,out[1]=v[1]*s,out},normalize:function(out,v){var d=vector.len(v);return 0===d?(out[0]=0,out[1]=0):(out[0]=v[0]/d,out[1]=v[1]/d),out},distance:function(v1,v2){return Math.sqrt((v1[0]-v2[0])*(v1[0]-v2[0])+(v1[1]-v2[1])*(v1[1]-v2[1]))},distanceSquare:function(v1,v2){return(v1[0]-v2[0])*(v1[0]-v2[0])+(v1[1]-v2[1])*(v1[1]-v2[1])},negate:function(out,v){return out[0]=-v[0],out[1]=-v[1],out},lerp:function(out,v1,v2,t){return out[0]=v1[0]+t*(v2[0]-v1[0]),out[1]=v1[1]+t*(v2[1]-v1[1]),out},applyTransform:function(out,v,m){var x=v[0],y=v[1];return out[0]=m[0]*x+m[2]*y+m[4],out[1]=m[1]*x+m[3]*y+m[5],out},min:function(out,v1,v2){return out[0]=Math.min(v1[0],v2[0]),out[1]=Math.min(v1[1],v2[1]),out},max:function(out,v1,v2){return out[0]=Math.max(v1[0],v2[0]),out[1]=Math.max(v1[1],v2[1]),out}};vector.length=vector.len,vector.lengthSquare=vector.lenSquare,vector.dist=vector.distance,vector.distSquare=vector.distanceSquare,module.exports=vector},function(module,exports){var ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,matrix={create:function(){var out=new ArrayCtor(6);return matrix.identity(out),out},identity:function(out){return out[0]=1,out[1]=0,out[2]=0,out[3]=1,out[4]=0,out[5]=0,out},copy:function(out,m){return out[0]=m[0],out[1]=m[1],out[2]=m[2],out[3]=m[3],out[4]=m[4],out[5]=m[5],out},mul:function(out,m1,m2){var out0=m1[0]*m2[0]+m1[2]*m2[1],out1=m1[1]*m2[0]+m1[3]*m2[1],out2=m1[0]*m2[2]+m1[2]*m2[3],out3=m1[1]*m2[2]+m1[3]*m2[3],out4=m1[0]*m2[4]+m1[2]*m2[5]+m1[4],out5=m1[1]*m2[4]+m1[3]*m2[5]+m1[5];return out[0]=out0,out[1]=out1,out[2]=out2,out[3]=out3,out[4]=out4,out[5]=out5,out},translate:function(out,a,v){return out[0]=a[0],out[1]=a[1],out[2]=a[2],out[3]=a[3],out[4]=a[4]+v[0],out[5]=a[5]+v[1],out},rotate:function(out,a,rad){var aa=a[0],ac=a[2],atx=a[4],ab=a[1],ad=a[3],aty=a[5],st=Math.sin(rad),ct=Math.cos(rad);return out[0]=aa*ct+ab*st,out[1]=-aa*st+ab*ct,out[2]=ac*ct+ad*st,out[3]=-ac*st+ct*ad,out[4]=ct*atx+st*aty,out[5]=ct*aty-st*atx,out},scale:function(out,a,v){var vx=v[0],vy=v[1];return out[0]=a[0]*vx,out[1]=a[1]*vy,out[2]=a[2]*vx,out[3]=a[3]*vy,out[4]=a[4]*vx,out[5]=a[5]*vy,out},invert:function(out,a){var aa=a[0],ac=a[2],atx=a[4],ab=a[1],ad=a[3],aty=a[5],det=aa*ad-ab*ac;return det?(det=1/det,out[0]=ad*det,out[1]=-ab*det,out[2]=-ac*det,out[3]=aa*det,out[4]=(ac*aty-ad*atx)*det,out[5]=(ab*atx-aa*aty)*det,out):null}};module.exports=matrix},function(module,exports,__webpack_require__){function Model(option,parentModel,ecModel){this.parentModel=parentModel,this.ecModel=ecModel,this.option=option}var zrUtil=__webpack_require__(4),clazzUtil=__webpack_require__(13);Model.prototype={constructor:Model,init:null,mergeOption:function(option){zrUtil.merge(this.option,option,!0)},get:function(path,ignoreParent){if(!path)return this.option;"string"==typeof path&&(path=path.split("."));for(var obj=this.option,parentModel=this.parentModel,i=0;i<path.length&&(!path[i]||(obj=obj&&"object"==typeof obj?obj[path[i]]:null,null!=obj));i++);return null==obj&&parentModel&&!ignoreParent&&(obj=parentModel.get(path)),obj},getShallow:function(key,ignoreParent){var option=this.option,val=null==option?option:option[key],parentModel=this.parentModel;return null==val&&parentModel&&!ignoreParent&&(val=parentModel.getShallow(key)),val},getModel:function(path,parentModel){var obj=this.get(path,!0),thisParentModel=this.parentModel,model=new Model(obj,parentModel||thisParentModel&&thisParentModel.getModel(path),this.ecModel);return model},isEmpty:function(){return null==this.option},restoreData:function(){},clone:function(){var Ctor=this.constructor;return new Ctor(zrUtil.clone(this.option))},setReadOnly:function(properties){clazzUtil.setReadOnly(this,properties)}},clazzUtil.enableClassExtend(Model);var mixin=zrUtil.mixin;mixin(Model,__webpack_require__(14)),mixin(Model,__webpack_require__(16)),mixin(Model,__webpack_require__(17)),mixin(Model,__webpack_require__(18)),module.exports=Model},function(module,exports,__webpack_require__){function superCall(context,methodName){var args=zrUtil.slice(arguments,2);return this.superClass.prototype[methodName].apply(context,args)}function superApply(context,methodName,args){return this.superClass.prototype[methodName].apply(context,args)}var zrUtil=__webpack_require__(4),clazz={},TYPE_DELIMITER=".",IS_CONTAINER="___EC__COMPONENT__CONTAINER___",parseClassType=clazz.parseClassType=function(componentType){var ret={main:"",sub:""};return componentType&&(componentType=componentType.split(TYPE_DELIMITER),ret.main=componentType[0]||"",ret.sub=componentType[1]||""),ret};clazz.enableClassExtend=function(RootClass){RootClass.$constructor=RootClass,RootClass.extend=function(proto){var superClass=this,ExtendedClass=function(){proto.$constructor?proto.$constructor.apply(this,arguments):superClass.apply(this,arguments)};return zrUtil.extend(ExtendedClass.prototype,proto),ExtendedClass.extend=this.extend,ExtendedClass.superCall=superCall,ExtendedClass.superApply=superApply,zrUtil.inherits(ExtendedClass,this),ExtendedClass.superClass=superClass,ExtendedClass}},clazz.enableClassManagement=function(entity,options){function makeContainer(componentType){var container=storage[componentType.main];return container&&container[IS_CONTAINER]||(container=storage[componentType.main]={},container[IS_CONTAINER]=!0),container}options=options||{};var storage={};if(entity.registerClass=function(Clazz,componentType){if(componentType)if(componentType=parseClassType(componentType),componentType.sub){if(componentType.sub!==IS_CONTAINER){var container=makeContainer(componentType);container[componentType.sub]=Clazz}}else storage[componentType.main]&&console.warn(componentType.main+" exists."),storage[componentType.main]=Clazz;return Clazz},entity.getClass=function(componentTypeMain,subType,throwWhenNotFound){var Clazz=storage[componentTypeMain];if(Clazz&&Clazz[IS_CONTAINER]&&(Clazz=subType?Clazz[subType]:null),throwWhenNotFound&&!Clazz)throw new Error("Component "+componentTypeMain+"."+(subType||"")+" not exists. Load it first.");return Clazz},entity.getClassesByMainType=function(componentType){componentType=parseClassType(componentType);var result=[],obj=storage[componentType.main];return obj&&obj[IS_CONTAINER]?zrUtil.each(obj,function(o,type){type!==IS_CONTAINER&&result.push(o)}):result.push(obj),result},entity.hasClass=function(componentType){return componentType=parseClassType(componentType),!!storage[componentType.main]},entity.getAllClassMainTypes=function(){var types=[];return zrUtil.each(storage,function(obj,type){types.push(type)}),types},entity.hasSubTypes=function(componentType){componentType=parseClassType(componentType);var obj=storage[componentType.main];return obj&&obj[IS_CONTAINER]},entity.parseClassType=parseClassType,options.registerWhenExtend){var originalExtend=entity.extend;originalExtend&&(entity.extend=function(proto){var ExtendedClass=originalExtend.call(this,proto);return entity.registerClass(ExtendedClass,proto.type)})}return entity},clazz.setReadOnly=function(obj,properties){},module.exports=clazz},function(module,exports,__webpack_require__){var getLineStyle=__webpack_require__(15)([["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]);module.exports={getLineStyle:function(excludes){var style=getLineStyle.call(this,excludes),lineDash=this.getLineDash();return lineDash&&(style.lineDash=lineDash),style},getLineDash:function(){var lineType=this.get("type");return"solid"===lineType||null==lineType?null:"dashed"===lineType?[5,5]:[2,2]}}},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);module.exports=function(properties){for(var i=0;i<properties.length;i++)properties[i][1]||(properties[i][1]=properties[i][0]);return function(excludes){for(var style={},i=0;i<properties.length;i++){var propName=properties[i][1];if(!(excludes&&zrUtil.indexOf(excludes,propName)>=0)){var val=this.getShallow(propName);null!=val&&(style[properties[i][0]]=val)}}return style}}},function(module,exports,__webpack_require__){module.exports={getAreaStyle:__webpack_require__(15)([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]])}},function(module,exports,__webpack_require__){function getShallow(model,path){return model&&model.getShallow(path)}
var textContain=__webpack_require__(8);module.exports={getTextColor:function(){var ecModel=this.ecModel;return this.getShallow("color")||ecModel&&ecModel.get("textStyle.color")},getFont:function(){var ecModel=this.ecModel,gTextStyleModel=ecModel&&ecModel.getModel("textStyle");return[this.getShallow("fontStyle")||getShallow(gTextStyleModel,"fontStyle"),this.getShallow("fontWeight")||getShallow(gTextStyleModel,"fontWeight"),(this.getShallow("fontSize")||getShallow(gTextStyleModel,"fontSize")||12)+"px",this.getShallow("fontFamily")||getShallow(gTextStyleModel,"fontFamily")||"sans-serif"].join(" ")},getTextRect:function(text){var textStyle=this.get("textStyle")||{};return textContain.getBoundingRect(text,this.getFont(),textStyle.align,textStyle.baseline)},truncateText:function(text,containerWidth,ellipsis,options){return textContain.truncateText(text,containerWidth,this.getFont(),ellipsis,options)}}},function(module,exports,__webpack_require__){var getItemStyle=__webpack_require__(15)([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]);module.exports={getItemStyle:function(excludes){var style=getItemStyle.call(this,excludes),lineDash=this.getBorderLineDash();return lineDash&&(style.lineDash=lineDash),style},getBorderLineDash:function(){var lineType=this.get("borderType");return"solid"===lineType||null==lineType?null:"dashed"===lineType?[5,5]:[1,1]}}},function(module,exports,__webpack_require__){function getDependencies(componentType){var deps=[];return zrUtil.each(ComponentModel.getClassesByMainType(componentType),function(Clazz){arrayPush.apply(deps,Clazz.prototype.dependencies||[])}),zrUtil.map(deps,function(type){return clazzUtil.parseClassType(type).main})}var Model=__webpack_require__(12),zrUtil=__webpack_require__(4),arrayPush=Array.prototype.push,componentUtil=__webpack_require__(20),clazzUtil=__webpack_require__(13),layout=__webpack_require__(21),ComponentModel=Model.extend({type:"component",id:"",name:"",mainType:"",subType:"",componentIndex:0,defaultOption:null,ecModel:null,dependentModels:[],uid:null,layoutMode:null,$constructor:function(option,parentModel,ecModel,extraOpt){Model.call(this,option,parentModel,ecModel,extraOpt),zrUtil.extend(this,extraOpt),this.uid=componentUtil.getUID("componentModel")},init:function(option,parentModel,ecModel,extraOpt){this.mergeDefaultAndTheme(option,ecModel)},mergeDefaultAndTheme:function(option,ecModel){var layoutMode=this.layoutMode,inputPositionParams=layoutMode?layout.getLayoutParams(option):{},themeModel=ecModel.getTheme();zrUtil.merge(option,themeModel.get(this.mainType)),zrUtil.merge(option,this.getDefaultOption()),layoutMode&&layout.mergeLayoutParam(option,inputPositionParams,layoutMode)},mergeOption:function(option){zrUtil.merge(this.option,option,!0);var layoutMode=this.layoutMode;layoutMode&&layout.mergeLayoutParam(this.option,option,layoutMode)},optionUpdated:function(newCptOption,isInit){},getDefaultOption:function(){if(!this.hasOwnProperty("__defaultOption")){for(var optList=[],Class=this.constructor;Class;){var opt=Class.prototype.defaultOption;opt&&optList.push(opt),Class=Class.superClass}for(var defaultOption={},i=optList.length-1;i>=0;i--)defaultOption=zrUtil.merge(defaultOption,optList[i],!0);this.__defaultOption=defaultOption}return this.__defaultOption}});clazzUtil.enableClassManagement(ComponentModel,{registerWhenExtend:!0}),componentUtil.enableSubTypeDefaulter(ComponentModel),componentUtil.enableTopologicalTravel(ComponentModel,getDependencies),zrUtil.mixin(ComponentModel,__webpack_require__(22)),module.exports=ComponentModel},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4),clazz=__webpack_require__(13),parseClassType=clazz.parseClassType,base=0,componentUtil={},DELIMITER="_";componentUtil.getUID=function(type){return[type||"",base++,Math.random()].join(DELIMITER)},componentUtil.enableSubTypeDefaulter=function(entity){var subTypeDefaulters={};return entity.registerSubTypeDefaulter=function(componentType,defaulter){componentType=parseClassType(componentType),subTypeDefaulters[componentType.main]=defaulter},entity.determineSubType=function(componentType,option){var type=option.type;if(!type){var componentTypeMain=parseClassType(componentType).main;entity.hasSubTypes(componentType)&&subTypeDefaulters[componentTypeMain]&&(type=subTypeDefaulters[componentTypeMain](option))}return type},entity},componentUtil.enableTopologicalTravel=function(entity,dependencyGetter){function makeDepndencyGraph(fullNameList){var graph={},noEntryList=[];return zrUtil.each(fullNameList,function(name){var thisItem=createDependencyGraphItem(graph,name),originalDeps=thisItem.originalDeps=dependencyGetter(name),availableDeps=getAvailableDependencies(originalDeps,fullNameList);thisItem.entryCount=availableDeps.length,0===thisItem.entryCount&&noEntryList.push(name),zrUtil.each(availableDeps,function(dependentName){zrUtil.indexOf(thisItem.predecessor,dependentName)<0&&thisItem.predecessor.push(dependentName);var thatItem=createDependencyGraphItem(graph,dependentName);zrUtil.indexOf(thatItem.successor,dependentName)<0&&thatItem.successor.push(name)})}),{graph:graph,noEntryList:noEntryList}}function createDependencyGraphItem(graph,name){return graph[name]||(graph[name]={predecessor:[],successor:[]}),graph[name]}function getAvailableDependencies(originalDeps,fullNameList){var availableDeps=[];return zrUtil.each(originalDeps,function(dep){zrUtil.indexOf(fullNameList,dep)>=0&&availableDeps.push(dep)}),availableDeps}entity.topologicalTravel=function(targetNameList,fullNameList,callback,context){function removeEdge(succComponentType){graph[succComponentType].entryCount--,0===graph[succComponentType].entryCount&&stack.push(succComponentType)}function removeEdgeAndAdd(succComponentType){targetNameSet[succComponentType]=!0,removeEdge(succComponentType)}if(targetNameList.length){var result=makeDepndencyGraph(fullNameList),graph=result.graph,stack=result.noEntryList,targetNameSet={};for(zrUtil.each(targetNameList,function(name){targetNameSet[name]=!0});stack.length;){var currComponentType=stack.pop(),currVertex=graph[currComponentType],isInTargetNameSet=!!targetNameSet[currComponentType];isInTargetNameSet&&(callback.call(context,currComponentType,currVertex.originalDeps.slice()),delete targetNameSet[currComponentType]),zrUtil.each(currVertex.successor,isInTargetNameSet?removeEdgeAndAdd:removeEdge)}zrUtil.each(targetNameSet,function(){throw new Error("Circle dependency may exists")})}}},module.exports=componentUtil},function(module,exports,__webpack_require__){"use strict";function boxLayout(orient,group,gap,maxWidth,maxHeight){var x=0,y=0;null==maxWidth&&(maxWidth=1/0),null==maxHeight&&(maxHeight=1/0);var currentLineMaxSize=0;group.eachChild(function(child,idx){var nextX,nextY,position=child.position,rect=child.getBoundingRect(),nextChild=group.childAt(idx+1),nextChildRect=nextChild&&nextChild.getBoundingRect();if("horizontal"===orient){var moveX=rect.width+(nextChildRect?-nextChildRect.x+rect.x:0);nextX=x+moveX,nextX>maxWidth||child.newline?(x=0,nextX=moveX,y+=currentLineMaxSize+gap,currentLineMaxSize=rect.height):currentLineMaxSize=Math.max(currentLineMaxSize,rect.height)}else{var moveY=rect.height+(nextChildRect?-nextChildRect.y+rect.y:0);nextY=y+moveY,nextY>maxHeight||child.newline?(x+=currentLineMaxSize+gap,y=0,nextY=moveY,currentLineMaxSize=rect.width):currentLineMaxSize=Math.max(currentLineMaxSize,rect.width)}child.newline||(position[0]=x,position[1]=y,"horizontal"===orient?x=nextX+gap:y=nextY+gap)})}var zrUtil=__webpack_require__(4),BoundingRect=__webpack_require__(9),numberUtil=__webpack_require__(7),formatUtil=__webpack_require__(6),parsePercent=numberUtil.parsePercent,each=zrUtil.each,layout={},LOCATION_PARAMS=["left","right","top","bottom","width","height"];layout.box=boxLayout,layout.vbox=zrUtil.curry(boxLayout,"vertical"),layout.hbox=zrUtil.curry(boxLayout,"horizontal"),layout.getAvailableSize=function(positionInfo,containerRect,margin){var containerWidth=containerRect.width,containerHeight=containerRect.height,x=parsePercent(positionInfo.x,containerWidth),y=parsePercent(positionInfo.y,containerHeight),x2=parsePercent(positionInfo.x2,containerWidth),y2=parsePercent(positionInfo.y2,containerHeight);return(isNaN(x)||isNaN(parseFloat(positionInfo.x)))&&(x=0),(isNaN(x2)||isNaN(parseFloat(positionInfo.x2)))&&(x2=containerWidth),(isNaN(y)||isNaN(parseFloat(positionInfo.y)))&&(y=0),(isNaN(y2)||isNaN(parseFloat(positionInfo.y2)))&&(y2=containerHeight),margin=formatUtil.normalizeCssArray(margin||0),{width:Math.max(x2-x-margin[1]-margin[3],0),height:Math.max(y2-y-margin[0]-margin[2],0)}},layout.getLayoutRect=function(positionInfo,containerRect,margin){margin=formatUtil.normalizeCssArray(margin||0);var containerWidth=containerRect.width,containerHeight=containerRect.height,left=parsePercent(positionInfo.left,containerWidth),top=parsePercent(positionInfo.top,containerHeight),right=parsePercent(positionInfo.right,containerWidth),bottom=parsePercent(positionInfo.bottom,containerHeight),width=parsePercent(positionInfo.width,containerWidth),height=parsePercent(positionInfo.height,containerHeight),verticalMargin=margin[2]+margin[0],horizontalMargin=margin[1]+margin[3],aspect=positionInfo.aspect;switch(isNaN(width)&&(width=containerWidth-right-horizontalMargin-left),isNaN(height)&&(height=containerHeight-bottom-verticalMargin-top),isNaN(width)&&isNaN(height)&&(aspect>containerWidth/containerHeight?width=.8*containerWidth:height=.8*containerHeight),null!=aspect&&(isNaN(width)&&(width=aspect*height),isNaN(height)&&(height=width/aspect)),isNaN(left)&&(left=containerWidth-right-width-horizontalMargin),isNaN(top)&&(top=containerHeight-bottom-height-verticalMargin),positionInfo.left||positionInfo.right){case"center":left=containerWidth/2-width/2-margin[3];break;case"right":left=containerWidth-width-horizontalMargin}switch(positionInfo.top||positionInfo.bottom){case"middle":case"center":top=containerHeight/2-height/2-margin[0];break;case"bottom":top=containerHeight-height-verticalMargin}left=left||0,top=top||0,isNaN(width)&&(width=containerWidth-left-(right||0)),isNaN(height)&&(height=containerHeight-top-(bottom||0));var rect=new BoundingRect(left+margin[3],top+margin[0],width,height);return rect.margin=margin,rect},layout.positionGroup=function(group,positionInfo,containerRect,margin){var groupRect=group.getBoundingRect();positionInfo=zrUtil.extend(zrUtil.clone(positionInfo),{width:groupRect.width,height:groupRect.height}),positionInfo=layout.getLayoutRect(positionInfo,containerRect,margin),group.attr("position",[positionInfo.x-groupRect.x,positionInfo.y-groupRect.y])},layout.mergeLayoutParam=function(targetOption,newOption,opt){function merge(names){var newParams={},newValueCount=0,merged={},mergedValueCount=0,enoughParamNumber=opt.ignoreSize?1:2;if(each(names,function(name){merged[name]=targetOption[name]}),each(names,function(name){hasProp(newOption,name)&&(newParams[name]=merged[name]=newOption[name]),hasValue(newParams,name)&&newValueCount++,hasValue(merged,name)&&mergedValueCount++}),mergedValueCount!==enoughParamNumber&&newValueCount){if(newValueCount>=enoughParamNumber)return newParams;for(var i=0;i<names.length;i++){var name=names[i];if(!hasProp(newParams,name)&&hasProp(targetOption,name)){newParams[name]=targetOption[name];break}}return newParams}return merged}function hasProp(obj,name){return obj.hasOwnProperty(name)}function hasValue(obj,name){return null!=obj[name]&&"auto"!==obj[name]}function copy(names,target,source){each(names,function(name){target[name]=source[name]})}!zrUtil.isObject(opt)&&(opt={});var hNames=["width","left","right"],vNames=["height","top","bottom"],hResult=merge(hNames),vResult=merge(vNames);copy(hNames,targetOption,hResult),copy(vNames,targetOption,vResult)},layout.getLayoutParams=function(source){return layout.copyLayoutParams({},source)},layout.copyLayoutParams=function(target,source){return source&&target&&each(LOCATION_PARAMS,function(name){source.hasOwnProperty(name)&&(target[name]=source[name])}),target},module.exports=layout},function(module,exports){module.exports={getBoxLayoutParams:function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}}}},function(module,exports){var platform="";"undefined"!=typeof navigator&&(platform=navigator.platform||""),module.exports={color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],textStyle:{fontFamily:platform.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,animation:!0,animationDuration:1e3,animationDurationUpdate:300,animationEasing:"exponentialOut",animationEasingUpdate:"cubicOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3}},function(module,exports){module.exports={clearColorPalette:function(){this._colorIdx=0,this._colorNameMap={}},getColorFromPalette:function(name,scope){scope=scope||this;var colorIdx=scope._colorIdx||0,colorNameMap=scope._colorNameMap||(scope._colorNameMap={});if(colorNameMap[name])return colorNameMap[name];var colorPalette=this.get("color",!0)||[];if(colorPalette.length){var color=colorPalette[colorIdx];return name&&(colorNameMap[name]=color),scope._colorIdx=(colorIdx+1)%colorPalette.length,color}}}},function(module,exports,__webpack_require__){"use strict";function ExtensionAPI(chartInstance){zrUtil.each(echartsAPIList,function(name){this[name]=zrUtil.bind(chartInstance[name],chartInstance)},this)}var zrUtil=__webpack_require__(4),echartsAPIList=["getDom","getZr","getWidth","getHeight","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getModel","getOption"];module.exports=ExtensionAPI},function(module,exports){"use strict";function CoordinateSystemManager(){this._coordinateSystems=[]}var coordinateSystemCreators={};CoordinateSystemManager.prototype={constructor:CoordinateSystemManager,create:function(ecModel,api){var coordinateSystems=[];for(var type in coordinateSystemCreators){var list=coordinateSystemCreators[type].create(ecModel,api);list&&(coordinateSystems=coordinateSystems.concat(list))}this._coordinateSystems=coordinateSystems},update:function(ecModel,api){for(var coordinateSystems=this._coordinateSystems,i=0;i<coordinateSystems.length;i++)coordinateSystems[i].update&&coordinateSystems[i].update(ecModel,api)}},CoordinateSystemManager.register=function(type,coordinateSystemCreator){coordinateSystemCreators[type]=coordinateSystemCreator},CoordinateSystemManager.get=function(type){return coordinateSystemCreators[type]},module.exports=CoordinateSystemManager},function(module,exports,__webpack_require__){function OptionManager(api){this._api=api,this._timelineOptions=[],this._mediaList=[],this._mediaDefault,this._currentMediaIndices=[],this._optionBackup,this._newBaseOption}function parseRawOption(rawOption,optionPreprocessorFuncs,isNew){var mediaDefault,baseOption,timelineOptions=[],mediaList=[],timelineOpt=rawOption.timeline;if(rawOption.baseOption&&(baseOption=rawOption.baseOption),(timelineOpt||rawOption.options)&&(baseOption=baseOption||{},timelineOptions=(rawOption.options||[]).slice()),rawOption.media){baseOption=baseOption||{};var media=rawOption.media;each(media,function(singleMedia){singleMedia&&singleMedia.option&&(singleMedia.query?mediaList.push(singleMedia):mediaDefault||(mediaDefault=singleMedia))})}return baseOption||(baseOption=rawOption),baseOption.timeline||(baseOption.timeline=timelineOpt),each([baseOption].concat(timelineOptions).concat(zrUtil.map(mediaList,function(media){return media.option})),function(option){each(optionPreprocessorFuncs,function(preProcess){preProcess(option,isNew)})}),{baseOption:baseOption,timelineOptions:timelineOptions,mediaDefault:mediaDefault,mediaList:mediaList}}function applyMediaQuery(query,ecWidth,ecHeight){var realMap={width:ecWidth,height:ecHeight,aspectratio:ecWidth/ecHeight},applicatable=!0;return zrUtil.each(query,function(value,attr){var matched=attr.match(QUERY_REG);if(matched&&matched[1]&&matched[2]){var operator=matched[1],realAttr=matched[2].toLowerCase();compare(realMap[realAttr],value,operator)||(applicatable=!1)}}),applicatable}function compare(real,expect,operator){return"min"===operator?real>=expect:"max"===operator?real<=expect:real===expect}function indicesEquals(indices1,indices2){return indices1.join(",")===indices2.join(",")}function mergeOption(oldOption,newOption){newOption=newOption||{},each(newOption,function(newCptOpt,mainType){if(null!=newCptOpt){var oldCptOpt=oldOption[mainType];if(ComponentModel.hasClass(mainType)){newCptOpt=modelUtil.normalizeToArray(newCptOpt),oldCptOpt=modelUtil.normalizeToArray(oldCptOpt);var mapResult=modelUtil.mappingToExists(oldCptOpt,newCptOpt);oldOption[mainType]=map(mapResult,function(item){return item.option&&item.exist?merge(item.exist,item.option,!0):item.exist||item.option})}else oldOption[mainType]=merge(oldCptOpt,newCptOpt,!0)}})}var zrUtil=__webpack_require__(4),modelUtil=__webpack_require__(5),ComponentModel=__webpack_require__(19),each=zrUtil.each,clone=zrUtil.clone,map=zrUtil.map,merge=zrUtil.merge,QUERY_REG=/^(min|max)?(.+)$/;OptionManager.prototype={constructor:OptionManager,setOption:function(rawOption,optionPreprocessorFuncs){rawOption=clone(rawOption,!0);var oldOptionBackup=this._optionBackup,newParsedOption=parseRawOption.call(this,rawOption,optionPreprocessorFuncs,!oldOptionBackup);this._newBaseOption=newParsedOption.baseOption,oldOptionBackup?(mergeOption(oldOptionBackup.baseOption,newParsedOption.baseOption),newParsedOption.timelineOptions.length&&(oldOptionBackup.timelineOptions=newParsedOption.timelineOptions),newParsedOption.mediaList.length&&(oldOptionBackup.mediaList=newParsedOption.mediaList),newParsedOption.mediaDefault&&(oldOptionBackup.mediaDefault=newParsedOption.mediaDefault)):this._optionBackup=newParsedOption},mountOption:function(isRecreate){var optionBackup=this._optionBackup;return this._timelineOptions=map(optionBackup.timelineOptions,clone),this._mediaList=map(optionBackup.mediaList,clone),this._mediaDefault=clone(optionBackup.mediaDefault),this._currentMediaIndices=[],clone(isRecreate?optionBackup.baseOption:this._newBaseOption)},getTimelineOption:function(ecModel){var option,timelineOptions=this._timelineOptions;if(timelineOptions.length){var timelineModel=ecModel.getComponent("timeline");timelineModel&&(option=clone(timelineOptions[timelineModel.getCurrentIndex()],!0))}return option},getMediaOption:function(ecModel){var ecWidth=this._api.getWidth(),ecHeight=this._api.getHeight(),mediaList=this._mediaList,mediaDefault=this._mediaDefault,indices=[],result=[];if(!mediaList.length&&!mediaDefault)return result;for(var i=0,len=mediaList.length;i<len;i++)applyMediaQuery(mediaList[i].query,ecWidth,ecHeight)&&indices.push(i);return!indices.length&&mediaDefault&&(indices=[-1]),indices.length&&!indicesEquals(indices,this._currentMediaIndices)&&(result=map(indices,function(index){return clone(index===-1?mediaDefault.option:mediaList[index].option)})),this._currentMediaIndices=indices,result}},module.exports=OptionManager},function(module,exports,__webpack_require__){"use strict";var zrUtil=__webpack_require__(4),formatUtil=__webpack_require__(6),modelUtil=__webpack_require__(5),ComponentModel=__webpack_require__(19),colorPaletteMixin=__webpack_require__(24),env=__webpack_require__(2),encodeHTML=formatUtil.encodeHTML,addCommas=formatUtil.addCommas,SeriesModel=ComponentModel.extend({type:"series.__base__",seriesIndex:0,coordinateSystem:null,defaultOption:null,legendDataProvider:null,visualColorAccessPath:"itemStyle.normal.color",init:function(option,parentModel,ecModel,extraOpt){this.seriesIndex=this.componentIndex,this.mergeDefaultAndTheme(option,ecModel),this._dataBeforeProcessed=this.getInitialData(option,ecModel),this._data=this._dataBeforeProcessed.cloneShallow()},mergeDefaultAndTheme:function(option,ecModel){zrUtil.merge(option,ecModel.getTheme().get(this.subType)),zrUtil.merge(option,this.getDefaultOption()),modelUtil.defaultEmphasis(option.label,modelUtil.LABEL_OPTIONS),this.fillDataTextStyle(option.data)},mergeOption:function(newSeriesOption,ecModel){newSeriesOption=zrUtil.merge(this.option,newSeriesOption,!0),this.fillDataTextStyle(newSeriesOption.data);var data=this.getInitialData(newSeriesOption,ecModel);data&&(this._data=data,this._dataBeforeProcessed=data.cloneShallow())},fillDataTextStyle:function(data){if(data)for(var i=0;i<data.length;i++)data[i]&&data[i].label&&modelUtil.defaultEmphasis(data[i].label,modelUtil.LABEL_OPTIONS)},getInitialData:function(){},getData:function(dataType){return null==dataType?this._data:this._data.getLinkedData(dataType)},setData:function(data){this._data=data},getRawData:function(){return this._dataBeforeProcessed},coordDimToDataDim:function(coordDim){return[coordDim]},dataDimToCoordDim:function(dataDim){return dataDim},getBaseAxis:function(){var coordSys=this.coordinateSystem;return coordSys&&coordSys.getBaseAxis&&coordSys.getBaseAxis()},formatTooltip:function(dataIndex,multipleSeries,dataType){function formatArrayValue(value){return zrUtil.map(value,function(val,idx){var dimInfo=data.getDimensionInfo(idx),dimType=dimInfo&&dimInfo.type;return"ordinal"===dimType?val:"time"===dimType?multipleSeries?"":formatUtil.formatTime("yyyy/mm/dd hh:mm:ss",val):addCommas(val)}).filter(function(val){return!!val}).join(", ")}var data=this._data,value=this.getRawValue(dataIndex),formattedValue=zrUtil.isArray(value)?formatArrayValue(value):addCommas(value),name=data.getName(dataIndex),color=data.getItemVisual(dataIndex,"color"),colorEl='<span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:'+color+'"></span>',seriesName=this.name;return"\0-"===seriesName&&(seriesName=""),multipleSeries?colorEl+encodeHTML(this.name)+" : "+formattedValue:(seriesName&&encodeHTML(seriesName)+"<br />")+colorEl+(name?encodeHTML(name)+" : "+formattedValue:formattedValue)},ifEnableAnimation:function(){if(env.node)return!1;var animationEnabled=this.getShallow("animation");return animationEnabled&&this.getData().count()>this.getShallow("animationThreshold")&&(animationEnabled=!1),animationEnabled},restoreData:function(){this._data=this._dataBeforeProcessed.cloneShallow()},getColorFromPalette:function(name,scope){var ecModel=this.ecModel,color=colorPaletteMixin.getColorFromPalette.call(this,name,scope);return color||(color=ecModel.getColorFromPalette(name,scope)),color},getAxisTooltipDataIndex:null});zrUtil.mixin(SeriesModel,modelUtil.dataFormatMixin),zrUtil.mixin(SeriesModel,colorPaletteMixin),module.exports=SeriesModel},function(module,exports,__webpack_require__){var Group=__webpack_require__(30),componentUtil=__webpack_require__(20),clazzUtil=__webpack_require__(13),Component=function(){this.group=new Group,this.uid=componentUtil.getUID("viewComponent")};Component.prototype={constructor:Component,init:function(ecModel,api){},render:function(componentModel,ecModel,api,payload){},dispose:function(){}};var componentProto=Component.prototype;componentProto.updateView=componentProto.updateLayout=componentProto.updateVisual=function(seriesModel,ecModel,api,payload){},clazzUtil.enableClassExtend(Component),clazzUtil.enableClassManagement(Component,{registerWhenExtend:!0}),module.exports=Component},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4),Element=__webpack_require__(31),BoundingRect=__webpack_require__(9),Group=function(opts){opts=opts||{},Element.call(this,opts);for(var key in opts)this[key]=opts[key];this._children=[],this.__storage=null,this.__dirty=!0};Group.prototype={constructor:Group,isGroup:!0,type:"group",silent:!1,children:function(){return this._children.slice()},childAt:function(idx){return this._children[idx]},childOfName:function(name){for(var children=this._children,i=0;i<children.length;i++)if(children[i].name===name)return children[i]},childCount:function(){return this._children.length},add:function(child){return child&&child!==this&&child.parent!==this&&(this._children.push(child),this._doAdd(child)),this},addBefore:function(child,nextSibling){if(child&&child!==this&&child.parent!==this&&nextSibling&&nextSibling.parent===this){var children=this._children,idx=children.indexOf(nextSibling);idx>=0&&(children.splice(idx,0,child),this._doAdd(child))}return this},_doAdd:function(child){child.parent&&child.parent.remove(child),child.parent=this;var storage=this.__storage,zr=this.__zr;storage&&storage!==child.__storage&&(storage.addToMap(child),child instanceof Group&&child.addChildrenToStorage(storage)),zr&&zr.refresh()},remove:function(child){var zr=this.__zr,storage=this.__storage,children=this._children,idx=zrUtil.indexOf(children,child);return idx<0?this:(children.splice(idx,1),child.parent=null,storage&&(storage.delFromMap(child.id),child instanceof Group&&child.delChildrenFromStorage(storage)),zr&&zr.refresh(),this)},removeAll:function(){var child,i,children=this._children,storage=this.__storage;for(i=0;i<children.length;i++)child=children[i],storage&&(storage.delFromMap(child.id),child instanceof Group&&child.delChildrenFromStorage(storage)),child.parent=null;return children.length=0,this},eachChild:function(cb,context){for(var children=this._children,i=0;i<children.length;i++){var child=children[i];cb.call(context,child,i)}return this},traverse:function(cb,context){for(var i=0;i<this._children.length;i++){var child=this._children[i];cb.call(context,child),"group"===child.type&&child.traverse(cb,context)}return this},addChildrenToStorage:function(storage){for(var i=0;i<this._children.length;i++){var child=this._children[i];storage.addToMap(child),child instanceof Group&&child.addChildrenToStorage(storage)}},delChildrenFromStorage:function(storage){for(var i=0;i<this._children.length;i++){var child=this._children[i];storage.delFromMap(child.id),child instanceof Group&&child.delChildrenFromStorage(storage)}},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(includeChildren){for(var rect=null,tmpRect=new BoundingRect(0,0,0,0),children=includeChildren||this._children,tmpMat=[],i=0;i<children.length;i++){var child=children[i];if(!child.ignore&&!child.invisible){var childRect=child.getBoundingRect(),transform=child.getLocalTransform(tmpMat);transform?(tmpRect.copy(childRect),tmpRect.applyTransform(transform),rect=rect||tmpRect.clone(),rect.union(tmpRect)):(rect=rect||childRect.clone(),rect.union(childRect))}}return rect||tmpRect}},zrUtil.inherits(Group,Element),module.exports=Group},function(module,exports,__webpack_require__){"use strict";var guid=__webpack_require__(32),Eventful=__webpack_require__(33),Transformable=__webpack_require__(34),Animatable=__webpack_require__(35),zrUtil=__webpack_require__(4),Element=function(opts){Transformable.call(this,opts),Eventful.call(this,opts),Animatable.call(this,opts),this.id=opts.id||guid()};Element.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,drift:function(dx,dy){switch(this.draggable){case"horizontal":dy=0;break;case"vertical":dx=0}var m=this.transform;m||(m=this.transform=[1,0,0,1,0,0]),m[4]+=dx,m[5]+=dy,this.decomposeTransform(),this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(cb,context){},attrKV:function(key,value){if("position"===key||"scale"===key||"origin"===key){if(value){var target=this[key];target||(target=this[key]=[]),target[0]=value[0],target[1]=value[1]}}else this[key]=value},hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attr:function(key,value){if("string"==typeof key)this.attrKV(key,value);else if(zrUtil.isObject(key))for(var name in key)key.hasOwnProperty(name)&&this.attrKV(name,key[name]);return this.dirty(!1),this},setClipPath:function(clipPath){var zr=this.__zr;zr&&clipPath.addSelfToZr(zr),this.clipPath&&this.clipPath!==clipPath&&this.removeClipPath(),this.clipPath=clipPath,clipPath.__zr=zr,clipPath.__clipTarget=this,this.dirty(!1)},removeClipPath:function(){var clipPath=this.clipPath;clipPath&&(clipPath.__zr&&clipPath.removeSelfFromZr(clipPath.__zr),clipPath.__zr=null,clipPath.__clipTarget=null,this.clipPath=null,this.dirty(!1))},addSelfToZr:function(zr){this.__zr=zr;var animators=this.animators;if(animators)for(var i=0;i<animators.length;i++)zr.animation.addAnimator(animators[i]);this.clipPath&&this.clipPath.addSelfToZr(zr)},removeSelfFromZr:function(zr){this.__zr=null;var animators=this.animators;if(animators)for(var i=0;i<animators.length;i++)zr.animation.removeAnimator(animators[i]);this.clipPath&&this.clipPath.removeSelfFromZr(zr)}},zrUtil.mixin(Element,Animatable),zrUtil.mixin(Element,Transformable),zrUtil.mixin(Element,Eventful),module.exports=Element},function(module,exports){var idStart=2311;module.exports=function(){return idStart++}},function(module,exports){var arrySlice=Array.prototype.slice,Eventful=function(){this._$handlers={}};Eventful.prototype={constructor:Eventful,one:function(event,handler,context){var _h=this._$handlers;if(!handler||!event)return this;_h[event]||(_h[event]=[]);for(var i=0;i<_h[event].length;i++)if(_h[event][i].h===handler)return this;return _h[event].push({h:handler,one:!0,ctx:context||this}),this},on:function(event,handler,context){var _h=this._$handlers;if(!handler||!event)return this;_h[event]||(_h[event]=[]);for(var i=0;i<_h[event].length;i++)if(_h[event][i].h===handler)return this;return _h[event].push({h:handler,one:!1,ctx:context||this}),this},isSilent:function(event){var _h=this._$handlers;return _h[event]&&_h[event].length},off:function(event,handler){var _h=this._$handlers;if(!event)return this._$handlers={},this;if(handler){if(_h[event]){for(var newList=[],i=0,l=_h[event].length;i<l;i++)_h[event][i].h!=handler&&newList.push(_h[event][i]);_h[event]=newList}_h[event]&&0===_h[event].length&&delete _h[event]}else delete _h[event];return this},trigger:function(type){if(this._$handlers[type]){var args=arguments,argLen=args.length;argLen>3&&(args=arrySlice.call(args,1));for(var _h=this._$handlers[type],len=_h.length,i=0;i<len;){switch(argLen){case 1:_h[i].h.call(_h[i].ctx);break;case 2:_h[i].h.call(_h[i].ctx,args[1]);break;case 3:_h[i].h.call(_h[i].ctx,args[1],args[2]);break;default:_h[i].h.apply(_h[i].ctx,args)}_h[i].one?(_h.splice(i,1),len--):i++}}return this},triggerWithContext:function(type){if(this._$handlers[type]){var args=arguments,argLen=args.length;argLen>4&&(args=arrySlice.call(args,1,args.length-1));for(var ctx=args[args.length-1],_h=this._$handlers[type],len=_h.length,i=0;i<len;){switch(argLen){case 1:_h[i].h.call(ctx);break;case 2:_h[i].h.call(ctx,args[1]);break;case 3:_h[i].h.call(ctx,args[1],args[2]);break;default:_h[i].h.apply(ctx,args)}_h[i].one?(_h.splice(i,1),len--):i++}}return this}},module.exports=Eventful},function(module,exports,__webpack_require__){"use strict";function isNotAroundZero(val){return val>EPSILON||val<-EPSILON}var matrix=__webpack_require__(11),vector=__webpack_require__(10),mIdentity=matrix.identity,EPSILON=5e-5,Transformable=function(opts){opts=opts||{},opts.position||(this.position=[0,0]),null==opts.rotation&&(this.rotation=0),opts.scale||(this.scale=[1,1]),this.origin=this.origin||null},transformableProto=Transformable.prototype;transformableProto.transform=null,transformableProto.needLocalTransform=function(){return isNotAroundZero(this.rotation)||isNotAroundZero(this.position[0])||isNotAroundZero(this.position[1])||isNotAroundZero(this.scale[0]-1)||isNotAroundZero(this.scale[1]-1)},transformableProto.updateTransform=function(){var parent=this.parent,parentHasTransform=parent&&parent.transform,needLocalTransform=this.needLocalTransform(),m=this.transform;return needLocalTransform||parentHasTransform?(m=m||matrix.create(),needLocalTransform?this.getLocalTransform(m):mIdentity(m),
parentHasTransform&&(needLocalTransform?matrix.mul(m,parent.transform,m):matrix.copy(m,parent.transform)),this.transform=m,this.invTransform=this.invTransform||matrix.create(),void matrix.invert(this.invTransform,m)):void(m&&mIdentity(m))},transformableProto.getLocalTransform=function(m){m=m||[],mIdentity(m);var origin=this.origin,scale=this.scale,rotation=this.rotation,position=this.position;return origin&&(m[4]-=origin[0],m[5]-=origin[1]),matrix.scale(m,m,scale),rotation&&matrix.rotate(m,m,rotation),origin&&(m[4]+=origin[0],m[5]+=origin[1]),m[4]+=position[0],m[5]+=position[1],m},transformableProto.setTransform=function(ctx){var m=this.transform,dpr=ctx.dpr||1;m?ctx.setTransform(dpr*m[0],dpr*m[1],dpr*m[2],dpr*m[3],dpr*m[4],dpr*m[5]):ctx.setTransform(dpr,0,0,dpr,0,0)},transformableProto.restoreTransform=function(ctx){var dpr=(this.transform,ctx.dpr||1);ctx.setTransform(dpr,0,0,dpr,0,0)};var tmpTransform=[];transformableProto.decomposeTransform=function(){if(this.transform){var parent=this.parent,m=this.transform;parent&&parent.transform&&(matrix.mul(tmpTransform,parent.invTransform,m),m=tmpTransform);var sx=m[0]*m[0]+m[1]*m[1],sy=m[2]*m[2]+m[3]*m[3],position=this.position,scale=this.scale;isNotAroundZero(sx-1)&&(sx=Math.sqrt(sx)),isNotAroundZero(sy-1)&&(sy=Math.sqrt(sy)),m[0]<0&&(sx=-sx),m[3]<0&&(sy=-sy),position[0]=m[4],position[1]=m[5],scale[0]=sx,scale[1]=sy,this.rotation=Math.atan2(-m[1]/sy,m[0]/sx)}},transformableProto.getGlobalScale=function(){var m=this.transform;if(!m)return[1,1];var sx=Math.sqrt(m[0]*m[0]+m[1]*m[1]),sy=Math.sqrt(m[2]*m[2]+m[3]*m[3]);return m[0]<0&&(sx=-sx),m[3]<0&&(sy=-sy),[sx,sy]},transformableProto.transformCoordToLocal=function(x,y){var v2=[x,y],invTransform=this.invTransform;return invTransform&&vector.applyTransform(v2,v2,invTransform),v2},transformableProto.transformCoordToGlobal=function(x,y){var v2=[x,y],transform=this.transform;return transform&&vector.applyTransform(v2,v2,transform),v2},module.exports=Transformable},function(module,exports,__webpack_require__){"use strict";var Animator=__webpack_require__(36),util=__webpack_require__(4),isString=util.isString,isFunction=util.isFunction,isObject=util.isObject,log=__webpack_require__(40),Animatable=function(){this.animators=[]};Animatable.prototype={constructor:Animatable,animate:function(path,loop){var target,animatingShape=!1,el=this,zr=this.__zr;if(path){var pathSplitted=path.split("."),prop=el;animatingShape="shape"===pathSplitted[0];for(var i=0,l=pathSplitted.length;i<l;i++)prop&&(prop=prop[pathSplitted[i]]);prop&&(target=prop)}else target=el;if(!target)return void log('Property "'+path+'" is not existed in element '+el.id);var animators=el.animators,animator=new Animator(target,loop);return animator.during(function(target){el.dirty(animatingShape)}).done(function(){animators.splice(util.indexOf(animators,animator),1)}),animators.push(animator),zr&&zr.animation.addAnimator(animator),animator},stopAnimation:function(forwardToLast){for(var animators=this.animators,len=animators.length,i=0;i<len;i++)animators[i].stop(forwardToLast);return animators.length=0,this},animateTo:function(target,time,delay,easing,callback){function done(){count--,count||callback&&callback()}isString(delay)?(callback=easing,easing=delay,delay=0):isFunction(easing)?(callback=easing,easing="linear",delay=0):isFunction(delay)?(callback=delay,delay=0):isFunction(time)?(callback=time,time=500):time||(time=500),this.stopAnimation(),this._animateToShallow("",this,target,time,delay,easing,callback);var animators=this.animators.slice(),count=animators.length;count||callback&&callback();for(var i=0;i<animators.length;i++)animators[i].done(done).start(easing)},_animateToShallow:function(path,source,target,time,delay){var objShallow={},propertyCount=0;for(var name in target)if(null!=source[name])isObject(target[name])&&!util.isArrayLike(target[name])?this._animateToShallow(path?path+"."+name:name,source[name],target[name],time,delay):(objShallow[name]=target[name],propertyCount++);else if(null!=target[name])if(path){var props={};props[path]={},props[path][name]=target[name],this.attr(props)}else this.attr(name,target[name]);return propertyCount>0&&this.animate(path,!1).when(null==time?500:time,objShallow).delay(delay||0),this}},module.exports=Animatable},function(module,exports,__webpack_require__){function defaultGetter(target,key){return target[key]}function defaultSetter(target,key,value){target[key]=value}function interpolateNumber(p0,p1,percent){return(p1-p0)*percent+p0}function interpolateString(p0,p1,percent){return percent>.5?p1:p0}function interpolateArray(p0,p1,percent,out,arrDim){var len=p0.length;if(1==arrDim)for(var i=0;i<len;i++)out[i]=interpolateNumber(p0[i],p1[i],percent);else for(var len2=p0[0].length,i=0;i<len;i++)for(var j=0;j<len2;j++)out[i][j]=interpolateNumber(p0[i][j],p1[i][j],percent)}function fillArr(arr0,arr1,arrDim){var arr0Len=arr0.length,arr1Len=arr1.length;if(arr0Len!==arr1Len){var isPreviousLarger=arr0Len>arr1Len;if(isPreviousLarger)arr0.length=arr1Len;else for(var i=arr0Len;i<arr1Len;i++)arr0.push(1===arrDim?arr1[i]:arraySlice.call(arr1[i]))}for(var len2=arr0[0]&&arr0[0].length,i=0;i<arr0.length;i++)if(1===arrDim)isNaN(arr0[i])&&(arr0[i]=arr1[i]);else for(var j=0;j<len2;j++)isNaN(arr0[i][j])&&(arr0[i][j]=arr1[i][j])}function isArraySame(arr0,arr1,arrDim){if(arr0===arr1)return!0;var len=arr0.length;if(len!==arr1.length)return!1;if(1===arrDim){for(var i=0;i<len;i++)if(arr0[i]!==arr1[i])return!1}else for(var len2=arr0[0].length,i=0;i<len;i++)for(var j=0;j<len2;j++)if(arr0[i][j]!==arr1[i][j])return!1;return!0}function catmullRomInterpolateArray(p0,p1,p2,p3,t,t2,t3,out,arrDim){var len=p0.length;if(1==arrDim)for(var i=0;i<len;i++)out[i]=catmullRomInterpolate(p0[i],p1[i],p2[i],p3[i],t,t2,t3);else for(var len2=p0[0].length,i=0;i<len;i++)for(var j=0;j<len2;j++)out[i][j]=catmullRomInterpolate(p0[i][j],p1[i][j],p2[i][j],p3[i][j],t,t2,t3)}function catmullRomInterpolate(p0,p1,p2,p3,t,t2,t3){var v0=.5*(p2-p0),v1=.5*(p3-p1);return(2*(p1-p2)+v0+v1)*t3+(-3*(p1-p2)-2*v0-v1)*t2+v0*t+p1}function cloneValue(value){if(isArrayLike(value)){var len=value.length;if(isArrayLike(value[0])){for(var ret=[],i=0;i<len;i++)ret.push(arraySlice.call(value[i]));return ret}return arraySlice.call(value)}return value}function rgba2String(rgba){return rgba[0]=Math.floor(rgba[0]),rgba[1]=Math.floor(rgba[1]),rgba[2]=Math.floor(rgba[2]),"rgba("+rgba.join(",")+")"}function createTrackClip(animator,easing,oneTrackDone,keyframes,propName){var getter=animator._getter,setter=animator._setter,useSpline="spline"===easing,trackLen=keyframes.length;if(trackLen){var trackMaxTime,firstVal=keyframes[0].value,isValueArray=isArrayLike(firstVal),isValueColor=!1,isValueString=!1,arrDim=isValueArray&&isArrayLike(firstVal[0])?2:1;keyframes.sort(function(a,b){return a.time-b.time}),trackMaxTime=keyframes[trackLen-1].time;for(var kfPercents=[],kfValues=[],prevValue=keyframes[0].value,isAllValueEqual=!0,i=0;i<trackLen;i++){kfPercents.push(keyframes[i].time/trackMaxTime);var value=keyframes[i].value;if(isValueArray&&isArraySame(value,prevValue,arrDim)||!isValueArray&&value===prevValue||(isAllValueEqual=!1),prevValue=value,"string"==typeof value){var colorArray=color.parse(value);colorArray?(value=colorArray,isValueColor=!0):isValueString=!0}kfValues.push(value)}if(!isAllValueEqual){for(var lastValue=kfValues[trackLen-1],i=0;i<trackLen-1;i++)isValueArray?fillArr(kfValues[i],lastValue,arrDim):!isNaN(kfValues[i])||isNaN(lastValue)||isValueString||isValueColor||(kfValues[i]=lastValue);isValueArray&&fillArr(getter(animator._target,propName),lastValue,arrDim);var start,w,p0,p1,p2,p3,lastFrame=0,lastFramePercent=0;if(isValueColor)var rgba=[0,0,0,0];var onframe=function(target,percent){var frame;if(percent<0)frame=0;else if(percent<lastFramePercent){for(start=Math.min(lastFrame+1,trackLen-1),frame=start;frame>=0&&!(kfPercents[frame]<=percent);frame--);frame=Math.min(frame,trackLen-2)}else{for(frame=lastFrame;frame<trackLen&&!(kfPercents[frame]>percent);frame++);frame=Math.min(frame-1,trackLen-2)}lastFrame=frame,lastFramePercent=percent;var range=kfPercents[frame+1]-kfPercents[frame];if(0!==range)if(w=(percent-kfPercents[frame])/range,useSpline)if(p1=kfValues[frame],p0=kfValues[0===frame?frame:frame-1],p2=kfValues[frame>trackLen-2?trackLen-1:frame+1],p3=kfValues[frame>trackLen-3?trackLen-1:frame+2],isValueArray)catmullRomInterpolateArray(p0,p1,p2,p3,w,w*w,w*w*w,getter(target,propName),arrDim);else{var value;if(isValueColor)value=catmullRomInterpolateArray(p0,p1,p2,p3,w,w*w,w*w*w,rgba,1),value=rgba2String(rgba);else{if(isValueString)return interpolateString(p1,p2,w);value=catmullRomInterpolate(p0,p1,p2,p3,w,w*w,w*w*w)}setter(target,propName,value)}else if(isValueArray)interpolateArray(kfValues[frame],kfValues[frame+1],w,getter(target,propName),arrDim);else{var value;if(isValueColor)interpolateArray(kfValues[frame],kfValues[frame+1],w,rgba,1),value=rgba2String(rgba);else{if(isValueString)return interpolateString(kfValues[frame],kfValues[frame+1],w);value=interpolateNumber(kfValues[frame],kfValues[frame+1],w)}setter(target,propName,value)}},clip=new Clip({target:animator._target,life:trackMaxTime,loop:animator._loop,delay:animator._delay,onframe:onframe,ondestroy:oneTrackDone});return easing&&"spline"!==easing&&(clip.easing=easing),clip}}}var Clip=__webpack_require__(37),color=__webpack_require__(39),util=__webpack_require__(4),isArrayLike=util.isArrayLike,arraySlice=Array.prototype.slice,Animator=function(target,loop,getter,setter){this._tracks={},this._target=target,this._loop=loop||!1,this._getter=getter||defaultGetter,this._setter=setter||defaultSetter,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]};Animator.prototype={when:function(time,props){var tracks=this._tracks;for(var propName in props){if(!tracks[propName]){tracks[propName]=[];var value=this._getter(this._target,propName);if(null==value)continue;0!==time&&tracks[propName].push({time:0,value:cloneValue(value)})}tracks[propName].push({time:time,value:props[propName]})}return this},during:function(callback){return this._onframeList.push(callback),this},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var doneList=this._doneList,len=doneList.length,i=0;i<len;i++)doneList[i].call(this)},start:function(easing){var lastClip,self=this,clipCount=0,oneTrackDone=function(){clipCount--,clipCount||self._doneCallback()};for(var propName in this._tracks){var clip=createTrackClip(this,easing,oneTrackDone,this._tracks[propName],propName);clip&&(this._clipList.push(clip),clipCount++,this.animation&&this.animation.addClip(clip),lastClip=clip)}if(lastClip){var oldOnFrame=lastClip.onframe;lastClip.onframe=function(target,percent){oldOnFrame(target,percent);for(var i=0;i<self._onframeList.length;i++)self._onframeList[i](target,percent)}}return clipCount||this._doneCallback(),this},stop:function(forwardToLast){for(var clipList=this._clipList,animation=this.animation,i=0;i<clipList.length;i++){var clip=clipList[i];forwardToLast&&clip.onframe(this._target,1),animation&&animation.removeClip(clip)}clipList.length=0},delay:function(time){return this._delay=time,this},done:function(cb){return cb&&this._doneList.push(cb),this},getClips:function(){return this._clipList}},module.exports=Animator},function(module,exports,__webpack_require__){function Clip(options){this._target=options.target,this._life=options.life||1e3,this._delay=options.delay||0,this._initialized=!1,this.loop=null!=options.loop&&options.loop,this.gap=options.gap||0,this.easing=options.easing||"Linear",this.onframe=options.onframe,this.ondestroy=options.ondestroy,this.onrestart=options.onrestart}var easingFuncs=__webpack_require__(38);Clip.prototype={constructor:Clip,step:function(globalTime){this._initialized||(this._startTime=globalTime+this._delay,this._initialized=!0);var percent=(globalTime-this._startTime)/this._life;if(!(percent<0)){percent=Math.min(percent,1);var easing=this.easing,easingFunc="string"==typeof easing?easingFuncs[easing]:easing,schedule="function"==typeof easingFunc?easingFunc(percent):percent;return this.fire("frame",schedule),1==percent?this.loop?(this.restart(globalTime),"restart"):(this._needsRemove=!0,"destroy"):null}},restart:function(globalTime){var remainder=(globalTime-this._startTime)%this._life;this._startTime=globalTime-remainder+this.gap,this._needsRemove=!1},fire:function(eventType,arg){eventType="on"+eventType,this[eventType]&&this[eventType](this._target,arg)}},module.exports=Clip},function(module,exports){var easing={linear:function(k){return k},quadraticIn:function(k){return k*k},quadraticOut:function(k){return k*(2-k)},quadraticInOut:function(k){return(k*=2)<1?.5*k*k:-.5*(--k*(k-2)-1)},cubicIn:function(k){return k*k*k},cubicOut:function(k){return--k*k*k+1},cubicInOut:function(k){return(k*=2)<1?.5*k*k*k:.5*((k-=2)*k*k+2)},quarticIn:function(k){return k*k*k*k},quarticOut:function(k){return 1- --k*k*k*k},quarticInOut:function(k){return(k*=2)<1?.5*k*k*k*k:-.5*((k-=2)*k*k*k-2)},quinticIn:function(k){return k*k*k*k*k},quinticOut:function(k){return--k*k*k*k*k+1},quinticInOut:function(k){return(k*=2)<1?.5*k*k*k*k*k:.5*((k-=2)*k*k*k*k+2)},sinusoidalIn:function(k){return 1-Math.cos(k*Math.PI/2)},sinusoidalOut:function(k){return Math.sin(k*Math.PI/2)},sinusoidalInOut:function(k){return.5*(1-Math.cos(Math.PI*k))},exponentialIn:function(k){return 0===k?0:Math.pow(1024,k-1)},exponentialOut:function(k){return 1===k?1:1-Math.pow(2,-10*k)},exponentialInOut:function(k){return 0===k?0:1===k?1:(k*=2)<1?.5*Math.pow(1024,k-1):.5*(-Math.pow(2,-10*(k-1))+2)},circularIn:function(k){return 1-Math.sqrt(1-k*k)},circularOut:function(k){return Math.sqrt(1- --k*k)},circularInOut:function(k){return(k*=2)<1?-.5*(Math.sqrt(1-k*k)-1):.5*(Math.sqrt(1-(k-=2)*k)+1)},elasticIn:function(k){var s,a=.1,p=.4;return 0===k?0:1===k?1:(!a||a<1?(a=1,s=p/4):s=p*Math.asin(1/a)/(2*Math.PI),-(a*Math.pow(2,10*(k-=1))*Math.sin((k-s)*(2*Math.PI)/p)))},elasticOut:function(k){var s,a=.1,p=.4;return 0===k?0:1===k?1:(!a||a<1?(a=1,s=p/4):s=p*Math.asin(1/a)/(2*Math.PI),a*Math.pow(2,-10*k)*Math.sin((k-s)*(2*Math.PI)/p)+1)},elasticInOut:function(k){var s,a=.1,p=.4;return 0===k?0:1===k?1:(!a||a<1?(a=1,s=p/4):s=p*Math.asin(1/a)/(2*Math.PI),(k*=2)<1?-.5*(a*Math.pow(2,10*(k-=1))*Math.sin((k-s)*(2*Math.PI)/p)):a*Math.pow(2,-10*(k-=1))*Math.sin((k-s)*(2*Math.PI)/p)*.5+1)},backIn:function(k){var s=1.70158;return k*k*((s+1)*k-s)},backOut:function(k){var s=1.70158;return--k*k*((s+1)*k+s)+1},backInOut:function(k){var s=2.5949095;return(k*=2)<1?.5*(k*k*((s+1)*k-s)):.5*((k-=2)*k*((s+1)*k+s)+2)},bounceIn:function(k){return 1-easing.bounceOut(1-k)},bounceOut:function(k){return k<1/2.75?7.5625*k*k:k<2/2.75?7.5625*(k-=1.5/2.75)*k+.75:k<2.5/2.75?7.5625*(k-=2.25/2.75)*k+.9375:7.5625*(k-=2.625/2.75)*k+.984375},bounceInOut:function(k){return k<.5?.5*easing.bounceIn(2*k):.5*easing.bounceOut(2*k-1)+.5}};module.exports=easing},function(module,exports){function clampCssByte(i){return i=Math.round(i),i<0?0:i>255?255:i}function clampCssAngle(i){return i=Math.round(i),i<0?0:i>360?360:i}function clampCssFloat(f){return f<0?0:f>1?1:f}function parseCssInt(str){return clampCssByte(str.length&&"%"===str.charAt(str.length-1)?parseFloat(str)/100*255:parseInt(str,10))}function parseCssFloat(str){return clampCssFloat(str.length&&"%"===str.charAt(str.length-1)?parseFloat(str)/100:parseFloat(str))}function cssHueToRgb(m1,m2,h){return h<0?h+=1:h>1&&(h-=1),6*h<1?m1+(m2-m1)*h*6:2*h<1?m2:3*h<2?m1+(m2-m1)*(2/3-h)*6:m1}function lerp(a,b,p){return a+(b-a)*p}function parse(colorStr){if(colorStr){colorStr+="";var str=colorStr.replace(/ /g,"").toLowerCase();if(str in kCSSColorTable)return kCSSColorTable[str].slice();if("#"!==str.charAt(0)){var op=str.indexOf("("),ep=str.indexOf(")");if(op!==-1&&ep+1===str.length){var fname=str.substr(0,op),params=str.substr(op+1,ep-(op+1)).split(","),alpha=1;switch(fname){case"rgba":if(4!==params.length)return;alpha=parseCssFloat(params.pop());case"rgb":if(3!==params.length)return;return[parseCssInt(params[0]),parseCssInt(params[1]),parseCssInt(params[2]),alpha];case"hsla":if(4!==params.length)return;return params[3]=parseCssFloat(params[3]),hsla2rgba(params);case"hsl":if(3!==params.length)return;return hsla2rgba(params);default:return}}}else{if(4===str.length){var iv=parseInt(str.substr(1),16);if(!(iv>=0&&iv<=4095))return;return[(3840&iv)>>4|(3840&iv)>>8,240&iv|(240&iv)>>4,15&iv|(15&iv)<<4,1]}if(7===str.length){var iv=parseInt(str.substr(1),16);if(!(iv>=0&&iv<=16777215))return;return[(16711680&iv)>>16,(65280&iv)>>8,255&iv,1]}}}}function hsla2rgba(hsla){var h=(parseFloat(hsla[0])%360+360)%360/360,s=parseCssFloat(hsla[1]),l=parseCssFloat(hsla[2]),m2=l<=.5?l*(s+1):l+s-l*s,m1=2*l-m2,rgba=[clampCssByte(255*cssHueToRgb(m1,m2,h+1/3)),clampCssByte(255*cssHueToRgb(m1,m2,h)),clampCssByte(255*cssHueToRgb(m1,m2,h-1/3))];return 4===hsla.length&&(rgba[3]=hsla[3]),rgba}function rgba2hsla(rgba){if(rgba){var H,S,R=rgba[0]/255,G=rgba[1]/255,B=rgba[2]/255,vMin=Math.min(R,G,B),vMax=Math.max(R,G,B),delta=vMax-vMin,L=(vMax+vMin)/2;if(0===delta)H=0,S=0;else{S=L<.5?delta/(vMax+vMin):delta/(2-vMax-vMin);var deltaR=((vMax-R)/6+delta/2)/delta,deltaG=((vMax-G)/6+delta/2)/delta,deltaB=((vMax-B)/6+delta/2)/delta;R===vMax?H=deltaB-deltaG:G===vMax?H=1/3+deltaR-deltaB:B===vMax&&(H=2/3+deltaG-deltaR),H<0&&(H+=1),H>1&&(H-=1)}var hsla=[360*H,S,L];return null!=rgba[3]&&hsla.push(rgba[3]),hsla}}function lift(color,level){var colorArr=parse(color);if(colorArr){for(var i=0;i<3;i++)level<0?colorArr[i]=colorArr[i]*(1-level)|0:colorArr[i]=(255-colorArr[i])*level+colorArr[i]|0;return stringify(colorArr,4===colorArr.length?"rgba":"rgb")}}function toHex(color,level){var colorArr=parse(color);if(colorArr)return((1<<24)+(colorArr[0]<<16)+(colorArr[1]<<8)+ +colorArr[2]).toString(16).slice(1)}function fastMapToColor(normalizedValue,colors,out){if(colors&&colors.length&&normalizedValue>=0&&normalizedValue<=1){out=out||[0,0,0,0];var value=normalizedValue*(colors.length-1),leftIndex=Math.floor(value),rightIndex=Math.ceil(value),leftColor=colors[leftIndex],rightColor=colors[rightIndex],dv=value-leftIndex;return out[0]=clampCssByte(lerp(leftColor[0],rightColor[0],dv)),out[1]=clampCssByte(lerp(leftColor[1],rightColor[1],dv)),out[2]=clampCssByte(lerp(leftColor[2],rightColor[2],dv)),out[3]=clampCssByte(lerp(leftColor[3],rightColor[3],dv)),out}}function mapToColor(normalizedValue,colors,fullOutput){if(colors&&colors.length&&normalizedValue>=0&&normalizedValue<=1){var value=normalizedValue*(colors.length-1),leftIndex=Math.floor(value),rightIndex=Math.ceil(value),leftColor=parse(colors[leftIndex]),rightColor=parse(colors[rightIndex]),dv=value-leftIndex,color=stringify([clampCssByte(lerp(leftColor[0],rightColor[0],dv)),clampCssByte(lerp(leftColor[1],rightColor[1],dv)),clampCssByte(lerp(leftColor[2],rightColor[2],dv)),clampCssFloat(lerp(leftColor[3],rightColor[3],dv))],"rgba");return fullOutput?{color:color,leftIndex:leftIndex,rightIndex:rightIndex,value:value}:color}}function modifyHSL(color,h,s,l){if(color=parse(color))return color=rgba2hsla(color),null!=h&&(color[0]=clampCssAngle(h)),null!=s&&(color[1]=parseCssFloat(s)),null!=l&&(color[2]=parseCssFloat(l)),stringify(hsla2rgba(color),"rgba")}function modifyAlpha(color,alpha){if(color=parse(color),color&&null!=alpha)return color[3]=clampCssFloat(alpha),stringify(color,"rgba")}function stringify(arrColor,type){var colorStr=arrColor[0]+","+arrColor[1]+","+arrColor[2];return"rgba"!==type&&"hsva"!==type&&"hsla"!==type||(colorStr+=","+arrColor[3]),type+"("+colorStr+")"}var kCSSColorTable={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};module.exports={parse:parse,lift:lift,toHex:toHex,fastMapToColor:fastMapToColor,mapToColor:mapToColor,modifyHSL:modifyHSL,modifyAlpha:modifyAlpha,stringify:stringify}},function(module,exports,__webpack_require__){var config=__webpack_require__(41);module.exports=function(){if(0!==config.debugMode)if(1==config.debugMode)for(var k in arguments)throw new Error(arguments[k]);else if(config.debugMode>1)for(var k in arguments)console.log(arguments[k])}},function(module,exports){var dpr=1;"undefined"!=typeof window&&(dpr=Math.max(window.devicePixelRatio||1,1));var config={debugMode:0,devicePixelRatio:dpr};module.exports=config},function(module,exports,__webpack_require__){function Chart(){this.group=new Group,this.uid=componentUtil.getUID("viewChart")}function elSetState(el,state){if(el&&(el.trigger(state),"group"===el.type))for(var i=0;i<el.childCount();i++)elSetState(el.childAt(i),state)}function toggleHighlight(data,payload,state){var dataIndex=payload&&payload.dataIndex,name=payload&&payload.name;if(null!=dataIndex)for(var dataIndices=dataIndex instanceof Array?dataIndex:[dataIndex],i=0,len=dataIndices.length;i<len;i++)elSetState(data.getItemGraphicEl(dataIndices[i]),state);else if(name)for(var names=name instanceof Array?name:[name],i=0,len=names.length;i<len;i++){var dataIndex=data.indexOfName(names[i]);elSetState(data.getItemGraphicEl(dataIndex),state)}else data.eachItemGraphicEl(function(el){elSetState(el,state)})}var Group=__webpack_require__(30),componentUtil=__webpack_require__(20),clazzUtil=__webpack_require__(13);Chart.prototype={type:"chart",init:function(ecModel,api){},render:function(seriesModel,ecModel,api,payload){},highlight:function(seriesModel,ecModel,api,payload){toggleHighlight(seriesModel.getData(),payload,"emphasis")},downplay:function(seriesModel,ecModel,api,payload){toggleHighlight(seriesModel.getData(),payload,"normal")},remove:function(ecModel,api){this.group.removeAll()},dispose:function(){}};var chartProto=Chart.prototype;chartProto.updateView=chartProto.updateLayout=chartProto.updateVisual=function(seriesModel,ecModel,api,payload){this.render(seriesModel,ecModel,api,payload)},clazzUtil.enableClassExtend(Chart),clazzUtil.enableClassManagement(Chart,{registerWhenExtend:!0}),module.exports=Chart},function(module,exports,__webpack_require__){"use strict";function hasFillOrStroke(fillOrStroke){return null!=fillOrStroke&&"none"!=fillOrStroke}function liftColor(color){return"string"==typeof color?colorTool.lift(color,-.1):color}function cacheElementStl(el){if(el.__hoverStlDirty){var stroke=el.style.stroke,fill=el.style.fill,hoverStyle=el.__hoverStl;hoverStyle.fill=hoverStyle.fill||(hasFillOrStroke(fill)?liftColor(fill):null),hoverStyle.stroke=hoverStyle.stroke||(hasFillOrStroke(stroke)?liftColor(stroke):null);var normalStyle={};for(var name in hoverStyle)hoverStyle.hasOwnProperty(name)&&(normalStyle[name]=el.style[name]);el.__normalStl=normalStyle,el.__hoverStlDirty=!1}}function doSingleEnterHover(el){el.__isHover||(cacheElementStl(el),el.useHoverLayer?el.__zr&&el.__zr.addHover(el,el.__hoverStl):(el.setStyle(el.__hoverStl),el.z2+=1),el.__isHover=!0)}function doSingleLeaveHover(el){if(el.__isHover){var normalStl=el.__normalStl;el.useHoverLayer?el.__zr&&el.__zr.removeHover(el):(normalStl&&el.setStyle(normalStl),el.z2-=1),el.__isHover=!1}}function doEnterHover(el){"group"===el.type?el.traverse(function(child){"group"!==child.type&&doSingleEnterHover(child)}):doSingleEnterHover(el)}function doLeaveHover(el){"group"===el.type?el.traverse(function(child){"group"!==child.type&&doSingleLeaveHover(child)}):doSingleLeaveHover(el)}function setElementHoverStl(el,hoverStl){el.__hoverStl=el.hoverStyle||hoverStl||{},el.__hoverStlDirty=!0,el.__isHover&&cacheElementStl(el)}function onElementMouseOver(){!this.__isEmphasis&&doEnterHover(this)}function onElementMouseOut(){!this.__isEmphasis&&doLeaveHover(this)}function enterEmphasis(){this.__isEmphasis=!0,doEnterHover(this)}function leaveEmphasis(){this.__isEmphasis=!1,doLeaveHover(this)}function animateOrSetProps(isUpdate,el,props,animatableModel,dataIndex,cb){"function"==typeof dataIndex&&(cb=dataIndex,dataIndex=null);var animationEnabled=animatableModel&&(animatableModel.ifEnableAnimation?animatableModel.ifEnableAnimation():animatableModel.getShallow("animation"));if(animationEnabled){var postfix=isUpdate?"Update":"",duration=animatableModel&&animatableModel.getShallow("animationDuration"+postfix),animationEasing=animatableModel&&animatableModel.getShallow("animationEasing"+postfix),animationDelay=animatableModel&&animatableModel.getShallow("animationDelay"+postfix);"function"==typeof animationDelay&&(animationDelay=animationDelay(dataIndex)),duration>0?el.animateTo(props,duration,animationDelay||0,animationEasing,cb):(el.attr(props),cb&&cb())}else el.attr(props),cb&&cb()}var zrUtil=__webpack_require__(4),pathTool=__webpack_require__(44),round=Math.round,Path=__webpack_require__(45),colorTool=__webpack_require__(39),matrix=__webpack_require__(11),vector=__webpack_require__(10),graphic=(__webpack_require__(61),{});graphic.Group=__webpack_require__(30),graphic.Image=__webpack_require__(62),graphic.Text=__webpack_require__(64),graphic.Circle=__webpack_require__(65),graphic.Sector=__webpack_require__(66),graphic.Ring=__webpack_require__(67),graphic.Polygon=__webpack_require__(68),graphic.Polyline=__webpack_require__(72),graphic.Rect=__webpack_require__(73),graphic.Line=__webpack_require__(75),graphic.BezierCurve=__webpack_require__(76),graphic.Arc=__webpack_require__(77),graphic.CompoundPath=__webpack_require__(78),graphic.LinearGradient=__webpack_require__(79),graphic.RadialGradient=__webpack_require__(80),graphic.BoundingRect=__webpack_require__(9),graphic.extendShape=function(opts){return Path.extend(opts)},graphic.extendPath=function(pathData,opts){return pathTool.extendFromString(pathData,opts)},graphic.makePath=function(pathData,opts,rect,layout){var path=pathTool.createFromString(pathData,opts),boundingRect=path.getBoundingRect();if(rect){var aspect=boundingRect.width/boundingRect.height;if("center"===layout){var height,width=rect.height*aspect;width<=rect.width?height=rect.height:(width=rect.width,height=width/aspect);var cx=rect.x+rect.width/2,cy=rect.y+rect.height/2;rect.x=cx-width/2,rect.y=cy-height/2,rect.width=width,rect.height=height}this.resizePath(path,rect)}return path},graphic.mergePath=pathTool.mergePath,graphic.resizePath=function(path,rect){if(path.applyTransform){var pathRect=path.getBoundingRect(),m=pathRect.calculateTransform(rect);path.applyTransform(m)}},graphic.subPixelOptimizeLine=function(param){var subPixelOptimize=graphic.subPixelOptimize,shape=param.shape,lineWidth=param.style.lineWidth;return round(2*shape.x1)===round(2*shape.x2)&&(shape.x1=shape.x2=subPixelOptimize(shape.x1,lineWidth,!0)),round(2*shape.y1)===round(2*shape.y2)&&(shape.y1=shape.y2=subPixelOptimize(shape.y1,lineWidth,!0)),param},graphic.subPixelOptimizeRect=function(param){var subPixelOptimize=graphic.subPixelOptimize,shape=param.shape,lineWidth=param.style.lineWidth,originX=shape.x,originY=shape.y,originWidth=shape.width,originHeight=shape.height;return shape.x=subPixelOptimize(shape.x,lineWidth,!0),shape.y=subPixelOptimize(shape.y,lineWidth,!0),shape.width=Math.max(subPixelOptimize(originX+originWidth,lineWidth,!1)-shape.x,0===originWidth?0:1),shape.height=Math.max(subPixelOptimize(originY+originHeight,lineWidth,!1)-shape.y,0===originHeight?0:1),param},graphic.subPixelOptimize=function(position,lineWidth,positiveOrNegative){var doubledPosition=round(2*position);return(doubledPosition+round(lineWidth))%2===0?doubledPosition/2:(doubledPosition+(positiveOrNegative?1:-1))/2},graphic.setHoverStyle=function(el,hoverStyle){"group"===el.type?el.traverse(function(child){"group"!==child.type&&setElementHoverStl(child,hoverStyle)}):setElementHoverStl(el,hoverStyle),el.on("mouseover",onElementMouseOver).on("mouseout",onElementMouseOut),el.on("emphasis",enterEmphasis).on("normal",leaveEmphasis)},graphic.setText=function(textStyle,labelModel,color){var labelPosition=labelModel.getShallow("position")||"inside",labelColor=labelPosition.indexOf("inside")>=0?"white":color,textStyleModel=labelModel.getModel("textStyle");zrUtil.extend(textStyle,{textDistance:labelModel.getShallow("distance")||5,textFont:textStyleModel.getFont(),textPosition:labelPosition,textFill:textStyleModel.getTextColor()||labelColor})},graphic.updateProps=function(el,props,animatableModel,dataIndex,cb){animateOrSetProps(!0,el,props,animatableModel,dataIndex,cb)},graphic.initProps=function(el,props,animatableModel,dataIndex,cb){animateOrSetProps(!1,el,props,animatableModel,dataIndex,cb)},graphic.getTransform=function(target,ancestor){for(var mat=matrix.identity([]);target&&target!==ancestor;)matrix.mul(mat,target.getLocalTransform(),mat),
target=target.parent;return mat},graphic.applyTransform=function(vertex,transform,invert){return invert&&(transform=matrix.invert([],transform)),vector.applyTransform([],vertex,transform)},graphic.transformDirection=function(direction,transform,invert){var hBase=0===transform[4]||0===transform[5]||0===transform[0]?1:Math.abs(2*transform[4]/transform[0]),vBase=0===transform[4]||0===transform[5]||0===transform[2]?1:Math.abs(2*transform[4]/transform[2]),vertex=["left"===direction?-hBase:"right"===direction?hBase:0,"top"===direction?-vBase:"bottom"===direction?vBase:0];return vertex=graphic.applyTransform(vertex,transform,invert),Math.abs(vertex[0])>Math.abs(vertex[1])?vertex[0]>0?"right":"left":vertex[1]>0?"bottom":"top"},graphic.groupTransition=function(g1,g2,animatableModel,cb){function getElMap(g){var elMap={};return g.traverse(function(el){!el.isGroup&&el.anid&&(elMap[el.anid]=el)}),elMap}function getAnimatableProps(el){var obj={position:vector.clone(el.position),rotation:el.rotation};return el.shape&&(obj.shape=zrUtil.extend({},el.shape)),obj}if(g1&&g2){var elMap1=getElMap(g1);g2.traverse(function(el){if(!el.isGroup&&el.anid){var oldEl=elMap1[el.anid];if(oldEl){var newProp=getAnimatableProps(el);el.attr(getAnimatableProps(oldEl)),graphic.updateProps(el,newProp,animatableModel,el.dataIndex)}}})}},module.exports=graphic},function(module,exports,__webpack_require__){function processArc(x1,y1,x2,y2,fa,fs,rx,ry,psiDeg,cmd,path){var psi=psiDeg*(PI/180),xp=mathCos(psi)*(x1-x2)/2+mathSin(psi)*(y1-y2)/2,yp=-1*mathSin(psi)*(x1-x2)/2+mathCos(psi)*(y1-y2)/2,lambda=xp*xp/(rx*rx)+yp*yp/(ry*ry);lambda>1&&(rx*=mathSqrt(lambda),ry*=mathSqrt(lambda));var f=(fa===fs?-1:1)*mathSqrt((rx*rx*(ry*ry)-rx*rx*(yp*yp)-ry*ry*(xp*xp))/(rx*rx*(yp*yp)+ry*ry*(xp*xp)))||0,cxp=f*rx*yp/ry,cyp=f*-ry*xp/rx,cx=(x1+x2)/2+mathCos(psi)*cxp-mathSin(psi)*cyp,cy=(y1+y2)/2+mathSin(psi)*cxp+mathCos(psi)*cyp,theta=vAngle([1,0],[(xp-cxp)/rx,(yp-cyp)/ry]),u=[(xp-cxp)/rx,(yp-cyp)/ry],v=[(-1*xp-cxp)/rx,(-1*yp-cyp)/ry],dTheta=vAngle(u,v);vRatio(u,v)<=-1&&(dTheta=PI),vRatio(u,v)>=1&&(dTheta=0),0===fs&&dTheta>0&&(dTheta-=2*PI),1===fs&&dTheta<0&&(dTheta+=2*PI),path.addData(cmd,cx,cy,rx,ry,theta,dTheta,psi,fs)}function createPathProxyFromString(data){if(!data)return[];var n,cs=data.replace(/-/g," -").replace(/  /g," ").replace(/ /g,",").replace(/,,/g,",");for(n=0;n<cc.length;n++)cs=cs.replace(new RegExp(cc[n],"g"),"|"+cc[n]);var prevCmd,arr=cs.split("|"),cpx=0,cpy=0,path=new PathProxy,CMD=PathProxy.CMD;for(n=1;n<arr.length;n++){var cmd,str=arr[n],c=str.charAt(0),off=0,p=str.slice(1).replace(/e,-/g,"e-").split(",");p.length>0&&""===p[0]&&p.shift();for(var i=0;i<p.length;i++)p[i]=parseFloat(p[i]);for(;off<p.length&&!isNaN(p[off])&&!isNaN(p[0]);){var ctlPtx,ctlPty,rx,ry,psi,fa,fs,x1=cpx,y1=cpy;switch(c){case"l":cpx+=p[off++],cpy+=p[off++],cmd=CMD.L,path.addData(cmd,cpx,cpy);break;case"L":cpx=p[off++],cpy=p[off++],cmd=CMD.L,path.addData(cmd,cpx,cpy);break;case"m":cpx+=p[off++],cpy+=p[off++],cmd=CMD.M,path.addData(cmd,cpx,cpy),c="l";break;case"M":cpx=p[off++],cpy=p[off++],cmd=CMD.M,path.addData(cmd,cpx,cpy),c="L";break;case"h":cpx+=p[off++],cmd=CMD.L,path.addData(cmd,cpx,cpy);break;case"H":cpx=p[off++],cmd=CMD.L,path.addData(cmd,cpx,cpy);break;case"v":cpy+=p[off++],cmd=CMD.L,path.addData(cmd,cpx,cpy);break;case"V":cpy=p[off++],cmd=CMD.L,path.addData(cmd,cpx,cpy);break;case"C":cmd=CMD.C,path.addData(cmd,p[off++],p[off++],p[off++],p[off++],p[off++],p[off++]),cpx=p[off-2],cpy=p[off-1];break;case"c":cmd=CMD.C,path.addData(cmd,p[off++]+cpx,p[off++]+cpy,p[off++]+cpx,p[off++]+cpy,p[off++]+cpx,p[off++]+cpy),cpx+=p[off-2],cpy+=p[off-1];break;case"S":ctlPtx=cpx,ctlPty=cpy;var len=path.len(),pathData=path.data;prevCmd===CMD.C&&(ctlPtx+=cpx-pathData[len-4],ctlPty+=cpy-pathData[len-3]),cmd=CMD.C,x1=p[off++],y1=p[off++],cpx=p[off++],cpy=p[off++],path.addData(cmd,ctlPtx,ctlPty,x1,y1,cpx,cpy);break;case"s":ctlPtx=cpx,ctlPty=cpy;var len=path.len(),pathData=path.data;prevCmd===CMD.C&&(ctlPtx+=cpx-pathData[len-4],ctlPty+=cpy-pathData[len-3]),cmd=CMD.C,x1=cpx+p[off++],y1=cpy+p[off++],cpx+=p[off++],cpy+=p[off++],path.addData(cmd,ctlPtx,ctlPty,x1,y1,cpx,cpy);break;case"Q":x1=p[off++],y1=p[off++],cpx=p[off++],cpy=p[off++],cmd=CMD.Q,path.addData(cmd,x1,y1,cpx,cpy);break;case"q":x1=p[off++]+cpx,y1=p[off++]+cpy,cpx+=p[off++],cpy+=p[off++],cmd=CMD.Q,path.addData(cmd,x1,y1,cpx,cpy);break;case"T":ctlPtx=cpx,ctlPty=cpy;var len=path.len(),pathData=path.data;prevCmd===CMD.Q&&(ctlPtx+=cpx-pathData[len-4],ctlPty+=cpy-pathData[len-3]),cpx=p[off++],cpy=p[off++],cmd=CMD.Q,path.addData(cmd,ctlPtx,ctlPty,cpx,cpy);break;case"t":ctlPtx=cpx,ctlPty=cpy;var len=path.len(),pathData=path.data;prevCmd===CMD.Q&&(ctlPtx+=cpx-pathData[len-4],ctlPty+=cpy-pathData[len-3]),cpx+=p[off++],cpy+=p[off++],cmd=CMD.Q,path.addData(cmd,ctlPtx,ctlPty,cpx,cpy);break;case"A":rx=p[off++],ry=p[off++],psi=p[off++],fa=p[off++],fs=p[off++],x1=cpx,y1=cpy,cpx=p[off++],cpy=p[off++],cmd=CMD.A,processArc(x1,y1,cpx,cpy,fa,fs,rx,ry,psi,cmd,path);break;case"a":rx=p[off++],ry=p[off++],psi=p[off++],fa=p[off++],fs=p[off++],x1=cpx,y1=cpy,cpx+=p[off++],cpy+=p[off++],cmd=CMD.A,processArc(x1,y1,cpx,cpy,fa,fs,rx,ry,psi,cmd,path)}}"z"!==c&&"Z"!==c||(cmd=CMD.Z,path.addData(cmd)),prevCmd=cmd}return path.toStatic(),path}function createPathOptions(str,opts){var transform,pathProxy=createPathProxyFromString(str);return opts=opts||{},opts.buildPath=function(path){path.setData(pathProxy.data),transform&&transformPath(path,transform);var ctx=path.getContext();ctx&&path.rebuildPath(ctx)},opts.applyTransform=function(m){transform||(transform=matrix.create()),matrix.mul(transform,m,transform),this.dirty(!0)},opts}var Path=__webpack_require__(45),PathProxy=__webpack_require__(49),transformPath=__webpack_require__(60),matrix=__webpack_require__(11),cc=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"],mathSqrt=Math.sqrt,mathSin=Math.sin,mathCos=Math.cos,PI=Math.PI,vMag=function(v){return Math.sqrt(v[0]*v[0]+v[1]*v[1])},vRatio=function(u,v){return(u[0]*v[0]+u[1]*v[1])/(vMag(u)*vMag(v))},vAngle=function(u,v){return(u[0]*v[1]<u[1]*v[0]?-1:1)*Math.acos(vRatio(u,v))};module.exports={createFromString:function(str,opts){return new Path(createPathOptions(str,opts))},extendFromString:function(str,opts){return Path.extend(createPathOptions(str,opts))},mergePath:function(pathEls,opts){for(var pathList=[],len=pathEls.length,i=0;i<len;i++){var pathEl=pathEls[i];pathEl.__dirty&&pathEl.buildPath(pathEl.path,pathEl.shape,!0),pathList.push(pathEl.path)}var pathBundle=new Path(opts);return pathBundle.buildPath=function(path){path.appendPath(pathList);var ctx=path.getContext();ctx&&path.rebuildPath(ctx)},pathBundle}}},function(module,exports,__webpack_require__){function Path(opts){Displayable.call(this,opts),this.path=new PathProxy}var Displayable=__webpack_require__(46),zrUtil=__webpack_require__(4),PathProxy=__webpack_require__(49),pathContain=__webpack_require__(52),Pattern=__webpack_require__(59),getCanvasPattern=Pattern.prototype.getCanvasPattern,abs=Math.abs;Path.prototype={constructor:Path,type:"path",__dirtyPath:!0,strokeContainThreshold:5,brush:function(ctx,prevEl){var style=this.style,path=this.path,hasStroke=style.hasStroke(),hasFill=style.hasFill(),fill=style.fill,stroke=style.stroke,hasFillGradient=hasFill&&!!fill.colorStops,hasStrokeGradient=hasStroke&&!!stroke.colorStops,hasFillPattern=hasFill&&!!fill.image,hasStrokePattern=hasStroke&&!!stroke.image;if(style.bind(ctx,this,prevEl),this.setTransform(ctx),this.__dirty){var rect=this.getBoundingRect();hasFillGradient&&(this._fillGradient=style.getGradient(ctx,fill,rect)),hasStrokeGradient&&(this._strokeGradient=style.getGradient(ctx,stroke,rect))}hasFillGradient?ctx.fillStyle=this._fillGradient:hasFillPattern&&(ctx.fillStyle=getCanvasPattern.call(fill,ctx)),hasStrokeGradient?ctx.strokeStyle=this._strokeGradient:hasStrokePattern&&(ctx.strokeStyle=getCanvasPattern.call(stroke,ctx));var lineDash=style.lineDash,lineDashOffset=style.lineDashOffset,ctxLineDash=!!ctx.setLineDash,scale=this.getGlobalScale();path.setScale(scale[0],scale[1]),this.__dirtyPath||lineDash&&!ctxLineDash&&hasStroke?(path=this.path.beginPath(ctx),lineDash&&!ctxLineDash&&(path.setLineDash(lineDash),path.setLineDashOffset(lineDashOffset)),this.buildPath(path,this.shape,!1),this.__dirtyPath=!1):(ctx.beginPath(),this.path.rebuildPath(ctx)),hasFill&&path.fill(ctx),lineDash&&ctxLineDash&&(ctx.setLineDash(lineDash),ctx.lineDashOffset=lineDashOffset),hasStroke&&path.stroke(ctx),lineDash&&ctxLineDash&&ctx.setLineDash([]),this.restoreTransform(ctx),(style.text||0===style.text)&&this.drawRectText(ctx,this.getBoundingRect())},buildPath:function(ctx,shapeCfg,inBundle){},getBoundingRect:function(){var rect=this._rect,style=this.style,needsUpdateRect=!rect;if(needsUpdateRect){var path=this.path;this.__dirtyPath&&(path.beginPath(),this.buildPath(path,this.shape,!1)),rect=path.getBoundingRect()}if(this._rect=rect,style.hasStroke()){var rectWithStroke=this._rectWithStroke||(this._rectWithStroke=rect.clone());if(this.__dirty||needsUpdateRect){rectWithStroke.copy(rect);var w=style.lineWidth,lineScale=style.strokeNoScale?this.getLineScale():1;style.hasFill()||(w=Math.max(w,this.strokeContainThreshold||4)),lineScale>1e-10&&(rectWithStroke.width+=w/lineScale,rectWithStroke.height+=w/lineScale,rectWithStroke.x-=w/lineScale/2,rectWithStroke.y-=w/lineScale/2)}return rectWithStroke}return rect},contain:function(x,y){var localPos=this.transformCoordToLocal(x,y),rect=this.getBoundingRect(),style=this.style;if(x=localPos[0],y=localPos[1],rect.contain(x,y)){var pathData=this.path.data;if(style.hasStroke()){var lineWidth=style.lineWidth,lineScale=style.strokeNoScale?this.getLineScale():1;if(lineScale>1e-10&&(style.hasFill()||(lineWidth=Math.max(lineWidth,this.strokeContainThreshold)),pathContain.containStroke(pathData,lineWidth/lineScale,x,y)))return!0}if(style.hasFill())return pathContain.contain(pathData,x,y)}return!1},dirty:function(dirtyPath){null==dirtyPath&&(dirtyPath=!0),dirtyPath&&(this.__dirtyPath=dirtyPath,this._rect=null),this.__dirty=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()},animateShape:function(loop){return this.animate("shape",loop)},attrKV:function(key,value){"shape"===key?(this.setShape(value),this.__dirtyPath=!0,this._rect=null):Displayable.prototype.attrKV.call(this,key,value)},setShape:function(key,value){var shape=this.shape;if(shape){if(zrUtil.isObject(key))for(var name in key)shape[name]=key[name];else shape[key]=value;this.dirty(!0)}return this},getLineScale:function(){var m=this.transform;return m&&abs(m[0]-1)>1e-10&&abs(m[3]-1)>1e-10?Math.sqrt(abs(m[0]*m[3]-m[2]*m[1])):1}},Path.extend=function(defaults){var Sub=function(opts){Path.call(this,opts),defaults.style&&this.style.extendFrom(defaults.style,!1);var defaultShape=defaults.shape;if(defaultShape){this.shape=this.shape||{};var thisShape=this.shape;for(var name in defaultShape)!thisShape.hasOwnProperty(name)&&defaultShape.hasOwnProperty(name)&&(thisShape[name]=defaultShape[name])}defaults.init&&defaults.init.call(this,opts)};zrUtil.inherits(Sub,Path);for(var name in defaults)"style"!==name&&"shape"!==name&&(Sub.prototype[name]=defaults[name]);return Sub},zrUtil.inherits(Path,Displayable),module.exports=Path},function(module,exports,__webpack_require__){function Displayable(opts){opts=opts||{},Element.call(this,opts);for(var name in opts)opts.hasOwnProperty(name)&&"style"!==name&&(this[name]=opts[name]);this.style=new Style(opts.style),this._rect=null,this.__clipPaths=[]}var zrUtil=__webpack_require__(4),Style=__webpack_require__(47),Element=__webpack_require__(31),RectText=__webpack_require__(48);Displayable.prototype={constructor:Displayable,type:"displayable",__dirty:!0,invisible:!1,z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,progressive:-1,beforeBrush:function(ctx){},afterBrush:function(ctx){},brush:function(ctx,prevEl){},getBoundingRect:function(){},contain:function(x,y){return this.rectContain(x,y)},traverse:function(cb,context){cb.call(context,this)},rectContain:function(x,y){var coord=this.transformCoordToLocal(x,y),rect=this.getBoundingRect();return rect.contain(coord[0],coord[1])},dirty:function(){this.__dirty=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(loop){return this.animate("style",loop)},attrKV:function(key,value){"style"!==key?Element.prototype.attrKV.call(this,key,value):this.style.set(value)},setStyle:function(key,value){return this.style.set(key,value),this.dirty(!1),this},useStyle:function(obj){return this.style=new Style(obj),this.dirty(!1),this}},zrUtil.inherits(Displayable,Element),zrUtil.mixin(Displayable,RectText),module.exports=Displayable},function(module,exports){function createLinearGradient(ctx,obj,rect){var x=obj.x,x2=obj.x2,y=obj.y,y2=obj.y2;obj.global||(x=x*rect.width+rect.x,x2=x2*rect.width+rect.x,y=y*rect.height+rect.y,y2=y2*rect.height+rect.y);var canvasGradient=ctx.createLinearGradient(x,y,x2,y2);return canvasGradient}function createRadialGradient(ctx,obj,rect){var width=rect.width,height=rect.height,min=Math.min(width,height),x=obj.x,y=obj.y,r=obj.r;obj.global||(x=x*width+rect.x,y=y*height+rect.y,r*=min);var canvasGradient=ctx.createRadialGradient(x,y,0,x,y,r);return canvasGradient}var STYLE_COMMON_PROPS=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]],Style=function(opts){this.extendFrom(opts)};Style.prototype={constructor:Style,fill:"#000000",stroke:null,opacity:1,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,textFill:"#000",textStroke:null,textPosition:"inside",textBaseline:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textTransform:!1,textRotation:0,blend:null,bind:function(ctx,el,prevEl){for(var style=this,prevStyle=prevEl&&prevEl.style,firstDraw=!prevStyle,i=0;i<STYLE_COMMON_PROPS.length;i++){var prop=STYLE_COMMON_PROPS[i],styleName=prop[0];(firstDraw||style[styleName]!==prevStyle[styleName])&&(ctx[styleName]=style[styleName]||prop[1])}if((firstDraw||style.fill!==prevStyle.fill)&&(ctx.fillStyle=style.fill),(firstDraw||style.stroke!==prevStyle.stroke)&&(ctx.strokeStyle=style.stroke),(firstDraw||style.opacity!==prevStyle.opacity)&&(ctx.globalAlpha=null==style.opacity?1:style.opacity),(firstDraw||style.blend!==prevStyle.blend)&&(ctx.globalCompositeOperation=style.blend||"source-over"),this.hasStroke()){var lineWidth=style.lineWidth;ctx.lineWidth=lineWidth/(this.strokeNoScale&&el&&el.getLineScale?el.getLineScale():1)}},hasFill:function(){var fill=this.fill;return null!=fill&&"none"!==fill},hasStroke:function(){var stroke=this.stroke;return null!=stroke&&"none"!==stroke&&this.lineWidth>0},extendFrom:function(otherStyle,overwrite){if(otherStyle){var target=this;for(var name in otherStyle)!otherStyle.hasOwnProperty(name)||!overwrite&&target.hasOwnProperty(name)||(target[name]=otherStyle[name])}},set:function(obj,value){"string"==typeof obj?this[obj]=value:this.extendFrom(obj,!0)},clone:function(){var newStyle=new this.constructor;return newStyle.extendFrom(this,!0),newStyle},getGradient:function(ctx,obj,rect){for(var method="radial"===obj.type?createRadialGradient:createLinearGradient,canvasGradient=method(ctx,obj,rect),colorStops=obj.colorStops,i=0;i<colorStops.length;i++)canvasGradient.addColorStop(colorStops[i].offset,colorStops[i].color);return canvasGradient}};for(var styleProto=Style.prototype,i=0;i<STYLE_COMMON_PROPS.length;i++){var prop=STYLE_COMMON_PROPS[i];prop[0]in styleProto||(styleProto[prop[0]]=prop[1])}Style.getGradient=styleProto.getGradient,module.exports=Style},function(module,exports,__webpack_require__){function parsePercent(value,maxValue){return"string"==typeof value?value.lastIndexOf("%")>=0?parseFloat(value)/100*maxValue:parseFloat(value):value}var textContain=__webpack_require__(8),BoundingRect=__webpack_require__(9),tmpRect=new BoundingRect,RectText=function(){};RectText.prototype={constructor:RectText,drawRectText:function(ctx,rect,textRect){var style=this.style,text=style.text;if(null!=text&&(text+=""),text){ctx.save();var x,y,textPosition=style.textPosition,distance=style.textDistance,align=style.textAlign,font=style.textFont||style.font,baseline=style.textBaseline,verticalAlign=style.textVerticalAlign;textRect=textRect||textContain.getBoundingRect(text,font,align,baseline);var transform=this.transform;if(style.textTransform?this.setTransform(ctx):transform&&(tmpRect.copy(rect),tmpRect.applyTransform(transform),rect=tmpRect),textPosition instanceof Array){if(x=rect.x+parsePercent(textPosition[0],rect.width),y=rect.y+parsePercent(textPosition[1],rect.height),align=align||"left",baseline=baseline||"top",verticalAlign){switch(verticalAlign){case"middle":y-=textRect.height/2-textRect.lineHeight/2;break;case"bottom":y-=textRect.height-textRect.lineHeight/2;break;default:y+=textRect.lineHeight/2}baseline="middle"}}else{var res=textContain.adjustTextPositionOnRect(textPosition,rect,textRect,distance);x=res.x,y=res.y,align=align||res.textAlign,baseline=baseline||res.textBaseline}ctx.textAlign=align||"left",ctx.textBaseline=baseline||"alphabetic";var textFill=style.textFill,textStroke=style.textStroke;textFill&&(ctx.fillStyle=textFill),textStroke&&(ctx.strokeStyle=textStroke),ctx.font=font||"12px sans-serif",ctx.shadowBlur=style.textShadowBlur,ctx.shadowColor=style.textShadowColor||"transparent",ctx.shadowOffsetX=style.textShadowOffsetX,ctx.shadowOffsetY=style.textShadowOffsetY;var textLines=text.split("\n");style.textRotation&&(transform&&ctx.translate(transform[4],transform[5]),ctx.rotate(style.textRotation),transform&&ctx.translate(-transform[4],-transform[5]));for(var i=0;i<textLines.length;i++)textFill&&ctx.fillText(textLines[i],x,y),textStroke&&ctx.strokeText(textLines[i],x,y),y+=textRect.lineHeight;ctx.restore()}}},module.exports=RectText},function(module,exports,__webpack_require__){"use strict";var curve=__webpack_require__(50),vec2=__webpack_require__(10),bbox=__webpack_require__(51),BoundingRect=__webpack_require__(9),dpr=__webpack_require__(41).devicePixelRatio,CMD={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},min=[],max=[],min2=[],max2=[],mathMin=Math.min,mathMax=Math.max,mathCos=Math.cos,mathSin=Math.sin,mathSqrt=Math.sqrt,mathAbs=Math.abs,hasTypedArray="undefined"!=typeof Float32Array,PathProxy=function(){this.data=[],this._len=0,this._ctx=null,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._ux=0,this._uy=0};PathProxy.prototype={constructor:PathProxy,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(sx,sy){this._ux=mathAbs(1/dpr/sx)||0,this._uy=mathAbs(1/dpr/sy)||0},getContext:function(){return this._ctx},beginPath:function(ctx){return this._ctx=ctx,ctx&&ctx.beginPath(),ctx&&(this.dpr=ctx.dpr),this._len=0,this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(x,y){return this.addData(CMD.M,x,y),this._ctx&&this._ctx.moveTo(x,y),this._x0=x,this._y0=y,this._xi=x,this._yi=y,this},lineTo:function(x,y){var exceedUnit=mathAbs(x-this._xi)>this._ux||mathAbs(y-this._yi)>this._uy||this._len<5;return this.addData(CMD.L,x,y),this._ctx&&exceedUnit&&(this._needsDash()?this._dashedLineTo(x,y):this._ctx.lineTo(x,y)),exceedUnit&&(this._xi=x,this._yi=y),this},bezierCurveTo:function(x1,y1,x2,y2,x3,y3){return this.addData(CMD.C,x1,y1,x2,y2,x3,y3),this._ctx&&(this._needsDash()?this._dashedBezierTo(x1,y1,x2,y2,x3,y3):this._ctx.bezierCurveTo(x1,y1,x2,y2,x3,y3)),this._xi=x3,this._yi=y3,this},quadraticCurveTo:function(x1,y1,x2,y2){return this.addData(CMD.Q,x1,y1,x2,y2),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(x1,y1,x2,y2):this._ctx.quadraticCurveTo(x1,y1,x2,y2)),this._xi=x2,this._yi=y2,this},arc:function(cx,cy,r,startAngle,endAngle,anticlockwise){return this.addData(CMD.A,cx,cy,r,r,startAngle,endAngle-startAngle,0,anticlockwise?0:1),this._ctx&&this._ctx.arc(cx,cy,r,startAngle,endAngle,anticlockwise),this._xi=mathCos(endAngle)*r+cx,this._xi=mathSin(endAngle)*r+cx,this},arcTo:function(x1,y1,x2,y2,radius){return this._ctx&&this._ctx.arcTo(x1,y1,x2,y2,radius),this},rect:function(x,y,w,h){return this._ctx&&this._ctx.rect(x,y,w,h),this.addData(CMD.R,x,y,w,h),this},closePath:function(){this.addData(CMD.Z);var ctx=this._ctx,x0=this._x0,y0=this._y0;return ctx&&(this._needsDash()&&this._dashedLineTo(x0,y0),ctx.closePath()),this._xi=x0,this._yi=y0,this},fill:function(ctx){ctx&&ctx.fill(),this.toStatic()},stroke:function(ctx){ctx&&ctx.stroke(),this.toStatic()},setLineDash:function(lineDash){if(lineDash instanceof Array){this._lineDash=lineDash,this._dashIdx=0;for(var lineDashSum=0,i=0;i<lineDash.length;i++)lineDashSum+=lineDash[i];this._dashSum=lineDashSum}return this},setLineDashOffset:function(offset){return this._dashOffset=offset,this},len:function(){return this._len},setData:function(data){var len=data.length;this.data&&this.data.length==len||!hasTypedArray||(this.data=new Float32Array(len));for(var i=0;i<len;i++)this.data[i]=data[i];this._len=len},appendPath:function(path){path instanceof Array||(path=[path]);for(var len=path.length,appendSize=0,offset=this._len,i=0;i<len;i++)appendSize+=path[i].len();hasTypedArray&&this.data instanceof Float32Array&&(this.data=new Float32Array(offset+appendSize));for(var i=0;i<len;i++)for(var appendPathData=path[i].data,k=0;k<appendPathData.length;k++)this.data[offset++]=appendPathData[k];this._len=offset},addData:function(cmd){var data=this.data;this._len+arguments.length>data.length&&(this._expandData(),data=this.data);for(var i=0;i<arguments.length;i++)data[this._len++]=arguments[i];this._prevCmd=cmd},_expandData:function(){if(!(this.data instanceof Array)){for(var newData=[],i=0;i<this._len;i++)newData[i]=this.data[i];this.data=newData}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(x1,y1){var dash,idx,dashSum=this._dashSum,offset=this._dashOffset,lineDash=this._lineDash,ctx=this._ctx,x0=this._xi,y0=this._yi,dx=x1-x0,dy=y1-y0,dist=mathSqrt(dx*dx+dy*dy),x=x0,y=y0,nDash=lineDash.length;for(dx/=dist,dy/=dist,offset<0&&(offset=dashSum+offset),offset%=dashSum,x-=offset*dx,y-=offset*dy;dx>0&&x<=x1||dx<0&&x>=x1||0==dx&&(dy>0&&y<=y1||dy<0&&y>=y1);)idx=this._dashIdx,dash=lineDash[idx],x+=dx*dash,y+=dy*dash,this._dashIdx=(idx+1)%nDash,dx>0&&x<x0||dx<0&&x>x0||dy>0&&y<y0||dy<0&&y>y0||ctx[idx%2?"moveTo":"lineTo"](dx>=0?mathMin(x,x1):mathMax(x,x1),dy>=0?mathMin(y,y1):mathMax(y,y1));dx=x-x1,dy=y-y1,this._dashOffset=-mathSqrt(dx*dx+dy*dy)},_dashedBezierTo:function(x1,y1,x2,y2,x3,y3){var t,dx,dy,x,y,dashSum=this._dashSum,offset=this._dashOffset,lineDash=this._lineDash,ctx=this._ctx,x0=this._xi,y0=this._yi,cubicAt=curve.cubicAt,bezierLen=0,idx=this._dashIdx,nDash=lineDash.length,tmpLen=0;for(offset<0&&(offset=dashSum+offset),offset%=dashSum,t=0;t<1;t+=.1)dx=cubicAt(x0,x1,x2,x3,t+.1)-cubicAt(x0,x1,x2,x3,t),dy=cubicAt(y0,y1,y2,y3,t+.1)-cubicAt(y0,y1,y2,y3,t),bezierLen+=mathSqrt(dx*dx+dy*dy);for(;idx<nDash&&(tmpLen+=lineDash[idx],!(tmpLen>offset));idx++);for(t=(tmpLen-offset)/bezierLen;t<=1;)x=cubicAt(x0,x1,x2,x3,t),y=cubicAt(y0,y1,y2,y3,t),idx%2?ctx.moveTo(x,y):ctx.lineTo(x,y),t+=lineDash[idx]/bezierLen,idx=(idx+1)%nDash;idx%2!==0&&ctx.lineTo(x3,y3),dx=x3-x,dy=y3-y,this._dashOffset=-mathSqrt(dx*dx+dy*dy)},_dashedQuadraticTo:function(x1,y1,x2,y2){var x3=x2,y3=y2;x2=(x2+2*x1)/3,y2=(y2+2*y1)/3,x1=(this._xi+2*x1)/3,y1=(this._yi+2*y1)/3,this._dashedBezierTo(x1,y1,x2,y2,x3,y3)},toStatic:function(){var data=this.data;data instanceof Array&&(data.length=this._len,hasTypedArray&&(this.data=new Float32Array(data)))},getBoundingRect:function(){min[0]=min[1]=min2[0]=min2[1]=Number.MAX_VALUE,max[0]=max[1]=max2[0]=max2[1]=-Number.MAX_VALUE;for(var data=this.data,xi=0,yi=0,x0=0,y0=0,i=0;i<data.length;){var cmd=data[i++];switch(1==i&&(xi=data[i],yi=data[i+1],x0=xi,y0=yi),cmd){case CMD.M:x0=data[i++],y0=data[i++],xi=x0,yi=y0,min2[0]=x0,min2[1]=y0,max2[0]=x0,max2[1]=y0;break;case CMD.L:bbox.fromLine(xi,yi,data[i],data[i+1],min2,max2),xi=data[i++],yi=data[i++];break;case CMD.C:bbox.fromCubic(xi,yi,data[i++],data[i++],data[i++],data[i++],data[i],data[i+1],min2,max2),xi=data[i++],yi=data[i++];break;case CMD.Q:bbox.fromQuadratic(xi,yi,data[i++],data[i++],data[i],data[i+1],min2,max2),xi=data[i++],yi=data[i++];break;case CMD.A:var cx=data[i++],cy=data[i++],rx=data[i++],ry=data[i++],startAngle=data[i++],endAngle=data[i++]+startAngle,anticlockwise=(data[i++],1-data[i++]);1==i&&(x0=mathCos(startAngle)*rx+cx,y0=mathSin(startAngle)*ry+cy),bbox.fromArc(cx,cy,rx,ry,startAngle,endAngle,anticlockwise,min2,max2),xi=mathCos(endAngle)*rx+cx,yi=mathSin(endAngle)*ry+cy;break;case CMD.R:x0=xi=data[i++],y0=yi=data[i++];var width=data[i++],height=data[i++];bbox.fromLine(x0,y0,x0+width,y0+height,min2,max2);break;case CMD.Z:xi=x0,yi=y0}vec2.min(min,min,min2),vec2.max(max,max,max2)}return 0===i&&(min[0]=min[1]=max[0]=max[1]=0),new BoundingRect(min[0],min[1],max[0]-min[0],max[1]-min[1])},rebuildPath:function(ctx){for(var x0,y0,xi,yi,x,y,d=this.data,ux=this._ux,uy=this._uy,len=this._len,i=0;i<len;){var cmd=d[i++];switch(1==i&&(xi=d[i],yi=d[i+1],x0=xi,y0=yi),cmd){case CMD.M:x0=xi=d[i++],y0=yi=d[i++],ctx.moveTo(xi,yi);break;case CMD.L:x=d[i++],y=d[i++],(mathAbs(x-xi)>ux||mathAbs(y-yi)>uy||i===len-1)&&(ctx.lineTo(x,y),xi=x,yi=y);break;case CMD.C:ctx.bezierCurveTo(d[i++],d[i++],d[i++],d[i++],d[i++],d[i++]),xi=d[i-2],yi=d[i-1];break;case CMD.Q:ctx.quadraticCurveTo(d[i++],d[i++],d[i++],d[i++]),xi=d[i-2],yi=d[i-1];break;case CMD.A:var cx=d[i++],cy=d[i++],rx=d[i++],ry=d[i++],theta=d[i++],dTheta=d[i++],psi=d[i++],fs=d[i++],r=rx>ry?rx:ry,scaleX=rx>ry?1:rx/ry,scaleY=rx>ry?ry/rx:1,isEllipse=Math.abs(rx-ry)>.001,endAngle=theta+dTheta;isEllipse?(ctx.translate(cx,cy),ctx.rotate(psi),ctx.scale(scaleX,scaleY),ctx.arc(0,0,r,theta,endAngle,1-fs),ctx.scale(1/scaleX,1/scaleY),ctx.rotate(-psi),ctx.translate(-cx,-cy)):ctx.arc(cx,cy,r,theta,endAngle,1-fs),1==i&&(x0=mathCos(theta)*rx+cx,y0=mathSin(theta)*ry+cy),xi=mathCos(endAngle)*rx+cx,yi=mathSin(endAngle)*ry+cy;break;case CMD.R:x0=xi=d[i],y0=yi=d[i+1],ctx.rect(d[i++],d[i++],d[i++],d[i++]);break;case CMD.Z:ctx.closePath(),xi=x0,yi=y0}}}},PathProxy.CMD=CMD,module.exports=PathProxy},function(module,exports,__webpack_require__){"use strict";function isAroundZero(val){return val>-EPSILON&&val<EPSILON}function isNotAroundZero(val){return val>EPSILON||val<-EPSILON}function cubicAt(p0,p1,p2,p3,t){var onet=1-t;return onet*onet*(onet*p0+3*t*p1)+t*t*(t*p3+3*onet*p2)}function cubicDerivativeAt(p0,p1,p2,p3,t){var onet=1-t;return 3*(((p1-p0)*onet+2*(p2-p1)*t)*onet+(p3-p2)*t*t)}function cubicRootAt(p0,p1,p2,p3,val,roots){var a=p3+3*(p1-p2)-p0,b=3*(p2-2*p1+p0),c=3*(p1-p0),d=p0-val,A=b*b-3*a*c,B=b*c-9*a*d,C=c*c-3*b*d,n=0;if(isAroundZero(A)&&isAroundZero(B))if(isAroundZero(b))roots[0]=0;else{var t1=-c/b;t1>=0&&t1<=1&&(roots[n++]=t1)}else{var disc=B*B-4*A*C;if(isAroundZero(disc)){var K=B/A,t1=-b/a+K,t2=-K/2;t1>=0&&t1<=1&&(roots[n++]=t1),t2>=0&&t2<=1&&(roots[n++]=t2)}else if(disc>0){var discSqrt=mathSqrt(disc),Y1=A*b+1.5*a*(-B+discSqrt),Y2=A*b+1.5*a*(-B-discSqrt);Y1=Y1<0?-mathPow(-Y1,ONE_THIRD):mathPow(Y1,ONE_THIRD),Y2=Y2<0?-mathPow(-Y2,ONE_THIRD):mathPow(Y2,ONE_THIRD);var t1=(-b-(Y1+Y2))/(3*a);t1>=0&&t1<=1&&(roots[n++]=t1)}else{var T=(2*A*b-3*a*B)/(2*mathSqrt(A*A*A)),theta=Math.acos(T)/3,ASqrt=mathSqrt(A),tmp=Math.cos(theta),t1=(-b-2*ASqrt*tmp)/(3*a),t2=(-b+ASqrt*(tmp+THREE_SQRT*Math.sin(theta)))/(3*a),t3=(-b+ASqrt*(tmp-THREE_SQRT*Math.sin(theta)))/(3*a);t1>=0&&t1<=1&&(roots[n++]=t1),t2>=0&&t2<=1&&(roots[n++]=t2),t3>=0&&t3<=1&&(roots[n++]=t3)}}return n}function cubicExtrema(p0,p1,p2,p3,extrema){var b=6*p2-12*p1+6*p0,a=9*p1+3*p3-3*p0-9*p2,c=3*p1-3*p0,n=0;if(isAroundZero(a)){if(isNotAroundZero(b)){var t1=-c/b;t1>=0&&t1<=1&&(extrema[n++]=t1)}}else{var disc=b*b-4*a*c;if(isAroundZero(disc))extrema[0]=-b/(2*a);else if(disc>0){var discSqrt=mathSqrt(disc),t1=(-b+discSqrt)/(2*a),t2=(-b-discSqrt)/(2*a);t1>=0&&t1<=1&&(extrema[n++]=t1),t2>=0&&t2<=1&&(extrema[n++]=t2)}}return n}function cubicSubdivide(p0,p1,p2,p3,t,out){var p01=(p1-p0)*t+p0,p12=(p2-p1)*t+p1,p23=(p3-p2)*t+p2,p012=(p12-p01)*t+p01,p123=(p23-p12)*t+p12,p0123=(p123-p012)*t+p012;out[0]=p0,out[1]=p01,out[2]=p012,out[3]=p0123,out[4]=p0123,out[5]=p123,out[6]=p23,out[7]=p3}function cubicProjectPoint(x0,y0,x1,y1,x2,y2,x3,y3,x,y,out){var t,prev,next,d1,d2,interval=.005,d=1/0;_v0[0]=x,_v0[1]=y;for(var _t=0;_t<1;_t+=.05)_v1[0]=cubicAt(x0,x1,x2,x3,_t),_v1[1]=cubicAt(y0,y1,y2,y3,_t),d1=v2DistSquare(_v0,_v1),d1<d&&(t=_t,d=d1);d=1/0;for(var i=0;i<32&&!(interval<EPSILON_NUMERIC);i++)prev=t-interval,next=t+interval,_v1[0]=cubicAt(x0,x1,x2,x3,prev),_v1[1]=cubicAt(y0,y1,y2,y3,prev),d1=v2DistSquare(_v1,_v0),prev>=0&&d1<d?(t=prev,d=d1):(_v2[0]=cubicAt(x0,x1,x2,x3,next),_v2[1]=cubicAt(y0,y1,y2,y3,next),d2=v2DistSquare(_v2,_v0),next<=1&&d2<d?(t=next,d=d2):interval*=.5);return out&&(out[0]=cubicAt(x0,x1,x2,x3,t),out[1]=cubicAt(y0,y1,y2,y3,t)),mathSqrt(d)}function quadraticAt(p0,p1,p2,t){var onet=1-t;return onet*(onet*p0+2*t*p1)+t*t*p2}function quadraticDerivativeAt(p0,p1,p2,t){return 2*((1-t)*(p1-p0)+t*(p2-p1))}function quadraticRootAt(p0,p1,p2,val,roots){var a=p0-2*p1+p2,b=2*(p1-p0),c=p0-val,n=0;if(isAroundZero(a)){if(isNotAroundZero(b)){var t1=-c/b;t1>=0&&t1<=1&&(roots[n++]=t1)}}else{var disc=b*b-4*a*c;if(isAroundZero(disc)){var t1=-b/(2*a);t1>=0&&t1<=1&&(roots[n++]=t1)}else if(disc>0){var discSqrt=mathSqrt(disc),t1=(-b+discSqrt)/(2*a),t2=(-b-discSqrt)/(2*a);t1>=0&&t1<=1&&(roots[n++]=t1),t2>=0&&t2<=1&&(roots[n++]=t2)}}return n}function quadraticExtremum(p0,p1,p2){var divider=p0+p2-2*p1;return 0===divider?.5:(p0-p1)/divider}function quadraticSubdivide(p0,p1,p2,t,out){var p01=(p1-p0)*t+p0,p12=(p2-p1)*t+p1,p012=(p12-p01)*t+p01;out[0]=p0,out[1]=p01,out[2]=p012,out[3]=p012,out[4]=p12,out[5]=p2}function quadraticProjectPoint(x0,y0,x1,y1,x2,y2,x,y,out){var t,interval=.005,d=1/0;_v0[0]=x,_v0[1]=y;for(var _t=0;_t<1;_t+=.05){_v1[0]=quadraticAt(x0,x1,x2,_t),_v1[1]=quadraticAt(y0,y1,y2,_t);var d1=v2DistSquare(_v0,_v1);d1<d&&(t=_t,d=d1)}d=1/0;for(var i=0;i<32&&!(interval<EPSILON_NUMERIC);i++){var prev=t-interval,next=t+interval;_v1[0]=quadraticAt(x0,x1,x2,prev),_v1[1]=quadraticAt(y0,y1,y2,prev);var d1=v2DistSquare(_v1,_v0);if(prev>=0&&d1<d)t=prev,d=d1;else{_v2[0]=quadraticAt(x0,x1,x2,next),_v2[1]=quadraticAt(y0,y1,y2,next);var d2=v2DistSquare(_v2,_v0);next<=1&&d2<d?(t=next,d=d2):interval*=.5}}return out&&(out[0]=quadraticAt(x0,x1,x2,t),out[1]=quadraticAt(y0,y1,y2,t)),mathSqrt(d)}var vec2=__webpack_require__(10),v2Create=vec2.create,v2DistSquare=vec2.distSquare,mathPow=Math.pow,mathSqrt=Math.sqrt,EPSILON=1e-8,EPSILON_NUMERIC=1e-4,THREE_SQRT=mathSqrt(3),ONE_THIRD=1/3,_v0=v2Create(),_v1=v2Create(),_v2=v2Create();module.exports={cubicAt:cubicAt,cubicDerivativeAt:cubicDerivativeAt,cubicRootAt:cubicRootAt,cubicExtrema:cubicExtrema,cubicSubdivide:cubicSubdivide,cubicProjectPoint:cubicProjectPoint,quadraticAt:quadraticAt,quadraticDerivativeAt:quadraticDerivativeAt,quadraticRootAt:quadraticRootAt,quadraticExtremum:quadraticExtremum,quadraticSubdivide:quadraticSubdivide,quadraticProjectPoint:quadraticProjectPoint}},function(module,exports,__webpack_require__){var vec2=__webpack_require__(10),curve=__webpack_require__(50),bbox={},mathMin=Math.min,mathMax=Math.max,mathSin=Math.sin,mathCos=Math.cos,start=vec2.create(),end=vec2.create(),extremity=vec2.create(),PI2=2*Math.PI;bbox.fromPoints=function(points,min,max){if(0!==points.length){var i,p=points[0],left=p[0],right=p[0],top=p[1],bottom=p[1];for(i=1;i<points.length;i++)p=points[i],left=mathMin(left,p[0]),right=mathMax(right,p[0]),top=mathMin(top,p[1]),bottom=mathMax(bottom,p[1]);min[0]=left,min[1]=top,max[0]=right,max[1]=bottom}},bbox.fromLine=function(x0,y0,x1,y1,min,max){min[0]=mathMin(x0,x1),min[1]=mathMin(y0,y1),max[0]=mathMax(x0,x1),max[1]=mathMax(y0,y1)};var xDim=[],yDim=[];bbox.fromCubic=function(x0,y0,x1,y1,x2,y2,x3,y3,min,max){var i,cubicExtrema=curve.cubicExtrema,cubicAt=curve.cubicAt,n=cubicExtrema(x0,x1,x2,x3,xDim);
for(min[0]=1/0,min[1]=1/0,max[0]=-(1/0),max[1]=-(1/0),i=0;i<n;i++){var x=cubicAt(x0,x1,x2,x3,xDim[i]);min[0]=mathMin(x,min[0]),max[0]=mathMax(x,max[0])}for(n=cubicExtrema(y0,y1,y2,y3,yDim),i=0;i<n;i++){var y=cubicAt(y0,y1,y2,y3,yDim[i]);min[1]=mathMin(y,min[1]),max[1]=mathMax(y,max[1])}min[0]=mathMin(x0,min[0]),max[0]=mathMax(x0,max[0]),min[0]=mathMin(x3,min[0]),max[0]=mathMax(x3,max[0]),min[1]=mathMin(y0,min[1]),max[1]=mathMax(y0,max[1]),min[1]=mathMin(y3,min[1]),max[1]=mathMax(y3,max[1])},bbox.fromQuadratic=function(x0,y0,x1,y1,x2,y2,min,max){var quadraticExtremum=curve.quadraticExtremum,quadraticAt=curve.quadraticAt,tx=mathMax(mathMin(quadraticExtremum(x0,x1,x2),1),0),ty=mathMax(mathMin(quadraticExtremum(y0,y1,y2),1),0),x=quadraticAt(x0,x1,x2,tx),y=quadraticAt(y0,y1,y2,ty);min[0]=mathMin(x0,x2,x),min[1]=mathMin(y0,y2,y),max[0]=mathMax(x0,x2,x),max[1]=mathMax(y0,y2,y)},bbox.fromArc=function(x,y,rx,ry,startAngle,endAngle,anticlockwise,min,max){var vec2Min=vec2.min,vec2Max=vec2.max,diff=Math.abs(startAngle-endAngle);if(diff%PI2<1e-4&&diff>1e-4)return min[0]=x-rx,min[1]=y-ry,max[0]=x+rx,void(max[1]=y+ry);if(start[0]=mathCos(startAngle)*rx+x,start[1]=mathSin(startAngle)*ry+y,end[0]=mathCos(endAngle)*rx+x,end[1]=mathSin(endAngle)*ry+y,vec2Min(min,start,end),vec2Max(max,start,end),startAngle%=PI2,startAngle<0&&(startAngle+=PI2),endAngle%=PI2,endAngle<0&&(endAngle+=PI2),startAngle>endAngle&&!anticlockwise?endAngle+=PI2:startAngle<endAngle&&anticlockwise&&(startAngle+=PI2),anticlockwise){var tmp=endAngle;endAngle=startAngle,startAngle=tmp}for(var angle=0;angle<endAngle;angle+=Math.PI/2)angle>startAngle&&(extremity[0]=mathCos(angle)*rx+x,extremity[1]=mathSin(angle)*ry+y,vec2Min(min,extremity,min),vec2Max(max,extremity,max))},module.exports=bbox},function(module,exports,__webpack_require__){"use strict";function isAroundEqual(a,b){return Math.abs(a-b)<EPSILON}function swapExtrema(){var tmp=extrema[0];extrema[0]=extrema[1],extrema[1]=tmp}function windingCubic(x0,y0,x1,y1,x2,y2,x3,y3,x,y){if(y>y0&&y>y1&&y>y2&&y>y3||y<y0&&y<y1&&y<y2&&y<y3)return 0;var nRoots=curve.cubicRootAt(y0,y1,y2,y3,y,roots);if(0===nRoots)return 0;for(var y0_,y1_,w=0,nExtrema=-1,i=0;i<nRoots;i++){var t=roots[i],unit=0===t||1===t?.5:1,x_=curve.cubicAt(x0,x1,x2,x3,t);x_<x||(nExtrema<0&&(nExtrema=curve.cubicExtrema(y0,y1,y2,y3,extrema),extrema[1]<extrema[0]&&nExtrema>1&&swapExtrema(),y0_=curve.cubicAt(y0,y1,y2,y3,extrema[0]),nExtrema>1&&(y1_=curve.cubicAt(y0,y1,y2,y3,extrema[1]))),w+=2==nExtrema?t<extrema[0]?y0_<y0?unit:-unit:t<extrema[1]?y1_<y0_?unit:-unit:y3<y1_?unit:-unit:t<extrema[0]?y0_<y0?unit:-unit:y3<y0_?unit:-unit)}return w}function windingQuadratic(x0,y0,x1,y1,x2,y2,x,y){if(y>y0&&y>y1&&y>y2||y<y0&&y<y1&&y<y2)return 0;var nRoots=curve.quadraticRootAt(y0,y1,y2,y,roots);if(0===nRoots)return 0;var t=curve.quadraticExtremum(y0,y1,y2);if(t>=0&&t<=1){for(var w=0,y_=curve.quadraticAt(y0,y1,y2,t),i=0;i<nRoots;i++){var unit=0===roots[i]||1===roots[i]?.5:1,x_=curve.quadraticAt(x0,x1,x2,roots[i]);x_<x||(w+=roots[i]<t?y_<y0?unit:-unit:y2<y_?unit:-unit)}return w}var unit=0===roots[0]||1===roots[0]?.5:1,x_=curve.quadraticAt(x0,x1,x2,roots[0]);return x_<x?0:y2<y0?unit:-unit}function windingArc(cx,cy,r,startAngle,endAngle,anticlockwise,x,y){if(y-=cy,y>r||y<-r)return 0;var tmp=Math.sqrt(r*r-y*y);roots[0]=-tmp,roots[1]=tmp;var diff=Math.abs(startAngle-endAngle);if(diff<1e-4)return 0;if(diff%PI2<1e-4){startAngle=0,endAngle=PI2;var dir=anticlockwise?1:-1;return x>=roots[0]+cx&&x<=roots[1]+cx?dir:0}if(anticlockwise){var tmp=startAngle;startAngle=normalizeRadian(endAngle),endAngle=normalizeRadian(tmp)}else startAngle=normalizeRadian(startAngle),endAngle=normalizeRadian(endAngle);startAngle>endAngle&&(endAngle+=PI2);for(var w=0,i=0;i<2;i++){var x_=roots[i];if(x_+cx>x){var angle=Math.atan2(y,x_),dir=anticlockwise?1:-1;angle<0&&(angle=PI2+angle),(angle>=startAngle&&angle<=endAngle||angle+PI2>=startAngle&&angle+PI2<=endAngle)&&(angle>Math.PI/2&&angle<1.5*Math.PI&&(dir=-dir),w+=dir)}}return w}function containPath(data,lineWidth,isStroke,x,y){for(var w=0,xi=0,yi=0,x0=0,y0=0,i=0;i<data.length;){var cmd=data[i++];switch(cmd===CMD.M&&i>1&&(isStroke||(w+=windingLine(xi,yi,x0,y0,x,y))),1==i&&(xi=data[i],yi=data[i+1],x0=xi,y0=yi),cmd){case CMD.M:x0=data[i++],y0=data[i++],xi=x0,yi=y0;break;case CMD.L:if(isStroke){if(containStroke(xi,yi,data[i],data[i+1],lineWidth,x,y))return!0}else w+=windingLine(xi,yi,data[i],data[i+1],x,y)||0;xi=data[i++],yi=data[i++];break;case CMD.C:if(isStroke){if(cubic.containStroke(xi,yi,data[i++],data[i++],data[i++],data[i++],data[i],data[i+1],lineWidth,x,y))return!0}else w+=windingCubic(xi,yi,data[i++],data[i++],data[i++],data[i++],data[i],data[i+1],x,y)||0;xi=data[i++],yi=data[i++];break;case CMD.Q:if(isStroke){if(quadratic.containStroke(xi,yi,data[i++],data[i++],data[i],data[i+1],lineWidth,x,y))return!0}else w+=windingQuadratic(xi,yi,data[i++],data[i++],data[i],data[i+1],x,y)||0;xi=data[i++],yi=data[i++];break;case CMD.A:var cx=data[i++],cy=data[i++],rx=data[i++],ry=data[i++],theta=data[i++],dTheta=data[i++],anticlockwise=(data[i++],1-data[i++]),x1=Math.cos(theta)*rx+cx,y1=Math.sin(theta)*ry+cy;i>1?w+=windingLine(xi,yi,x1,y1,x,y):(x0=x1,y0=y1);var _x=(x-cx)*ry/rx+cx;if(isStroke){if(arc.containStroke(cx,cy,ry,theta,theta+dTheta,anticlockwise,lineWidth,_x,y))return!0}else w+=windingArc(cx,cy,ry,theta,theta+dTheta,anticlockwise,_x,y);xi=Math.cos(theta+dTheta)*rx+cx,yi=Math.sin(theta+dTheta)*ry+cy;break;case CMD.R:x0=xi=data[i++],y0=yi=data[i++];var width=data[i++],height=data[i++],x1=x0+width,y1=y0+height;if(isStroke){if(containStroke(x0,y0,x1,y0,lineWidth,x,y)||containStroke(x1,y0,x1,y1,lineWidth,x,y)||containStroke(x1,y1,x0,y1,lineWidth,x,y)||containStroke(x0,y1,x0,y0,lineWidth,x,y))return!0}else w+=windingLine(x1,y0,x1,y1,x,y),w+=windingLine(x0,y1,x0,y0,x,y);break;case CMD.Z:if(isStroke){if(containStroke(xi,yi,x0,y0,lineWidth,x,y))return!0}else w+=windingLine(xi,yi,x0,y0,x,y);xi=x0,yi=y0}}return isStroke||isAroundEqual(yi,y0)||(w+=windingLine(xi,yi,x0,y0,x,y)||0),0!==w}var CMD=__webpack_require__(49).CMD,line=__webpack_require__(53),cubic=__webpack_require__(54),quadratic=__webpack_require__(55),arc=__webpack_require__(56),normalizeRadian=__webpack_require__(57).normalizeRadian,curve=__webpack_require__(50),windingLine=__webpack_require__(58),containStroke=line.containStroke,PI2=2*Math.PI,EPSILON=1e-4,roots=[-1,-1,-1],extrema=[-1,-1];module.exports={contain:function(pathData,x,y){return containPath(pathData,0,!1,x,y)},containStroke:function(pathData,lineWidth,x,y){return containPath(pathData,lineWidth,!0,x,y)}}},function(module,exports){module.exports={containStroke:function(x0,y0,x1,y1,lineWidth,x,y){if(0===lineWidth)return!1;var _l=lineWidth,_a=0,_b=x0;if(y>y0+_l&&y>y1+_l||y<y0-_l&&y<y1-_l||x>x0+_l&&x>x1+_l||x<x0-_l&&x<x1-_l)return!1;if(x0===x1)return Math.abs(x-x0)<=_l/2;_a=(y0-y1)/(x0-x1),_b=(x0*y1-x1*y0)/(x0-x1);var tmp=_a*x-y+_b,_s=tmp*tmp/(_a*_a+1);return _s<=_l/2*_l/2}}},function(module,exports,__webpack_require__){var curve=__webpack_require__(50);module.exports={containStroke:function(x0,y0,x1,y1,x2,y2,x3,y3,lineWidth,x,y){if(0===lineWidth)return!1;var _l=lineWidth;if(y>y0+_l&&y>y1+_l&&y>y2+_l&&y>y3+_l||y<y0-_l&&y<y1-_l&&y<y2-_l&&y<y3-_l||x>x0+_l&&x>x1+_l&&x>x2+_l&&x>x3+_l||x<x0-_l&&x<x1-_l&&x<x2-_l&&x<x3-_l)return!1;var d=curve.cubicProjectPoint(x0,y0,x1,y1,x2,y2,x3,y3,x,y,null);return d<=_l/2}}},function(module,exports,__webpack_require__){var curve=__webpack_require__(50);module.exports={containStroke:function(x0,y0,x1,y1,x2,y2,lineWidth,x,y){if(0===lineWidth)return!1;var _l=lineWidth;if(y>y0+_l&&y>y1+_l&&y>y2+_l||y<y0-_l&&y<y1-_l&&y<y2-_l||x>x0+_l&&x>x1+_l&&x>x2+_l||x<x0-_l&&x<x1-_l&&x<x2-_l)return!1;var d=curve.quadraticProjectPoint(x0,y0,x1,y1,x2,y2,x,y,null);return d<=_l/2}}},function(module,exports,__webpack_require__){var normalizeRadian=__webpack_require__(57).normalizeRadian,PI2=2*Math.PI;module.exports={containStroke:function(cx,cy,r,startAngle,endAngle,anticlockwise,lineWidth,x,y){if(0===lineWidth)return!1;var _l=lineWidth;x-=cx,y-=cy;var d=Math.sqrt(x*x+y*y);if(d-_l>r||d+_l<r)return!1;if(Math.abs(startAngle-endAngle)%PI2<1e-4)return!0;if(anticlockwise){var tmp=startAngle;startAngle=normalizeRadian(endAngle),endAngle=normalizeRadian(tmp)}else startAngle=normalizeRadian(startAngle),endAngle=normalizeRadian(endAngle);startAngle>endAngle&&(endAngle+=PI2);var angle=Math.atan2(y,x);return angle<0&&(angle+=PI2),angle>=startAngle&&angle<=endAngle||angle+PI2>=startAngle&&angle+PI2<=endAngle}}},function(module,exports){var PI2=2*Math.PI;module.exports={normalizeRadian:function(angle){return angle%=PI2,angle<0&&(angle+=PI2),angle}}},function(module,exports){module.exports=function(x0,y0,x1,y1,x,y){if(y>y0&&y>y1||y<y0&&y<y1)return 0;if(y1===y0)return 0;var dir=y1<y0?1:-1,t=(y-y0)/(y1-y0);1!==t&&0!==t||(dir=y1<y0?.5:-.5);var x_=t*(x1-x0)+x0;return x_>x?dir:0}},function(module,exports){var Pattern=function(image,repeat){this.image=image,this.repeat=repeat,this.type="pattern"};Pattern.prototype.getCanvasPattern=function(ctx){return this._canvasPattern||(this._canvasPattern=ctx.createPattern(this.image,this.repeat))},module.exports=Pattern},function(module,exports,__webpack_require__){function transformPath(path,m){var cmd,nPoint,i,j,k,p,data=path.data,M=CMD.M,C=CMD.C,L=CMD.L,R=CMD.R,A=CMD.A,Q=CMD.Q;for(i=0,j=0;i<data.length;){switch(cmd=data[i++],j=i,nPoint=0,cmd){case M:nPoint=1;break;case L:nPoint=1;break;case C:nPoint=3;break;case Q:nPoint=2;break;case A:var x=m[4],y=m[5],sx=mathSqrt(m[0]*m[0]+m[1]*m[1]),sy=mathSqrt(m[2]*m[2]+m[3]*m[3]),angle=mathAtan2(-m[1]/sy,m[0]/sx);data[i++]+=x,data[i++]+=y,data[i++]*=sx,data[i++]*=sy,data[i++]+=angle,data[i++]+=angle,i+=2,j=i;break;case R:p[0]=data[i++],p[1]=data[i++],v2ApplyTransform(p,p,m),data[j++]=p[0],data[j++]=p[1],p[0]+=data[i++],p[1]+=data[i++],v2ApplyTransform(p,p,m),data[j++]=p[0],data[j++]=p[1]}for(k=0;k<nPoint;k++){var p=points[k];p[0]=data[i++],p[1]=data[i++],v2ApplyTransform(p,p,m),data[j++]=p[0],data[j++]=p[1]}}}var CMD=__webpack_require__(49).CMD,vec2=__webpack_require__(10),v2ApplyTransform=vec2.applyTransform,points=[[],[],[]],mathSqrt=Math.sqrt,mathAtan2=Math.atan2;module.exports=transformPath},function(module,exports){var Gradient=function(colorStops){this.colorStops=colorStops||[]};Gradient.prototype={constructor:Gradient,addColorStop:function(offset,color){this.colorStops.push({offset:offset,color:color})}},module.exports=Gradient},function(module,exports,__webpack_require__){function ZImage(opts){Displayable.call(this,opts)}var Displayable=__webpack_require__(46),BoundingRect=__webpack_require__(9),zrUtil=__webpack_require__(4),LRU=__webpack_require__(63),globalImageCache=new LRU(50);ZImage.prototype={constructor:ZImage,type:"image",brush:function(ctx,prevEl){var image,style=this.style,src=style.image;if(style.bind(ctx,this,prevEl),image="string"==typeof src?this._image:src,!image&&src){var cachedImgObj=globalImageCache.get(src);if(!cachedImgObj)return image=new Image,image.onload=function(){image.onload=null;for(var i=0;i<cachedImgObj.pending.length;i++)cachedImgObj.pending[i].dirty()},cachedImgObj={image:image,pending:[this]},image.src=src,globalImageCache.put(src,cachedImgObj),void(this._image=image);if(image=cachedImgObj.image,this._image=image,!image.width||!image.height)return void cachedImgObj.pending.push(this)}if(image){var width=style.width||image.width,height=style.height||image.height,x=style.x||0,y=style.y||0;if(!image.width||!image.height)return;if(this.setTransform(ctx),style.sWidth&&style.sHeight){var sx=style.sx||0,sy=style.sy||0;ctx.drawImage(image,sx,sy,style.sWidth,style.sHeight,x,y,width,height)}else if(style.sx&&style.sy){var sx=style.sx,sy=style.sy,sWidth=width-sx,sHeight=height-sy;ctx.drawImage(image,sx,sy,sWidth,sHeight,x,y,width,height)}else ctx.drawImage(image,x,y,width,height);null==style.width&&(style.width=width),null==style.height&&(style.height=height),this.restoreTransform(ctx),null!=style.text&&this.drawRectText(ctx,this.getBoundingRect())}},getBoundingRect:function(){var style=this.style;return this._rect||(this._rect=new BoundingRect(style.x||0,style.y||0,style.width||0,style.height||0)),this._rect}},zrUtil.inherits(ZImage,Displayable),module.exports=ZImage},function(module,exports){var LinkedList=function(){this.head=null,this.tail=null,this._len=0},linkedListProto=LinkedList.prototype;linkedListProto.insert=function(val){var entry=new Entry(val);return this.insertEntry(entry),entry},linkedListProto.insertEntry=function(entry){this.head?(this.tail.next=entry,entry.prev=this.tail,this.tail=entry):this.head=this.tail=entry,this._len++},linkedListProto.remove=function(entry){var prev=entry.prev,next=entry.next;prev?prev.next=next:this.head=next,next?next.prev=prev:this.tail=prev,entry.next=entry.prev=null,this._len--},linkedListProto.len=function(){return this._len};var Entry=function(val){this.value=val,this.next,this.prev},LRU=function(maxSize){this._list=new LinkedList,this._map={},this._maxSize=maxSize||10},LRUProto=LRU.prototype;LRUProto.put=function(key,value){var list=this._list,map=this._map;if(null==map[key]){var len=list.len();if(len>=this._maxSize&&len>0){var leastUsedEntry=list.head;list.remove(leastUsedEntry),delete map[leastUsedEntry.key]}var entry=list.insert(value);entry.key=key,map[key]=entry}},LRUProto.get=function(key){var entry=this._map[key],list=this._list;if(null!=entry)return entry!==list.tail&&(list.remove(entry),list.insertEntry(entry)),entry.value},LRUProto.clear=function(){this._list.clear(),this._map={}},module.exports=LRU},function(module,exports,__webpack_require__){var Displayable=__webpack_require__(46),zrUtil=__webpack_require__(4),textContain=__webpack_require__(8),Text=function(opts){Displayable.call(this,opts)};Text.prototype={constructor:Text,type:"text",brush:function(ctx,prevEl){var style=this.style,x=style.x||0,y=style.y||0,text=style.text;if(null!=text&&(text+=""),style.bind(ctx,this,prevEl),text){this.setTransform(ctx);var textBaseline,textAlign=style.textAlign,font=style.textFont||style.font;if(style.textVerticalAlign){var rect=textContain.getBoundingRect(text,font,style.textAlign,"top");switch(textBaseline="middle",style.textVerticalAlign){case"middle":y-=rect.height/2-rect.lineHeight/2;break;case"bottom":y-=rect.height-rect.lineHeight/2;break;default:y+=rect.lineHeight/2}}else textBaseline=style.textBaseline;ctx.font=font||"12px sans-serif",ctx.textAlign=textAlign||"left",ctx.textAlign!==textAlign&&(ctx.textAlign="left"),ctx.textBaseline=textBaseline||"alphabetic",ctx.textBaseline!==textBaseline&&(ctx.textBaseline="alphabetic");for(var lineHeight=textContain.measureText("国",ctx.font).width,textLines=text.split("\n"),i=0;i<textLines.length;i++)style.hasFill()&&ctx.fillText(textLines[i],x,y),style.hasStroke()&&ctx.strokeText(textLines[i],x,y),y+=lineHeight;this.restoreTransform(ctx)}},getBoundingRect:function(){if(!this._rect){var style=this.style,textVerticalAlign=style.textVerticalAlign,rect=textContain.getBoundingRect(style.text+"",style.textFont||style.font,style.textAlign,textVerticalAlign?"top":style.textBaseline);switch(textVerticalAlign){case"middle":rect.y-=rect.height/2;break;case"bottom":rect.y-=rect.height}rect.x+=style.x||0,rect.y+=style.y||0,this._rect=rect}return this._rect}},zrUtil.inherits(Text,Displayable),module.exports=Text},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(45).extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(ctx,shape,inBundle){inBundle&&ctx.moveTo(shape.cx+shape.r,shape.cy),ctx.arc(shape.cx,shape.cy,shape.r,0,2*Math.PI,!0)}})},function(module,exports,__webpack_require__){module.exports=__webpack_require__(45).extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},buildPath:function(ctx,shape){var x=shape.cx,y=shape.cy,r0=Math.max(shape.r0||0,0),r=Math.max(shape.r,0),startAngle=shape.startAngle,endAngle=shape.endAngle,clockwise=shape.clockwise,unitX=Math.cos(startAngle),unitY=Math.sin(startAngle);ctx.moveTo(unitX*r0+x,unitY*r0+y),ctx.lineTo(unitX*r+x,unitY*r+y),ctx.arc(x,y,r,startAngle,endAngle,!clockwise),ctx.lineTo(Math.cos(endAngle)*r0+x,Math.sin(endAngle)*r0+y),0!==r0&&ctx.arc(x,y,r0,endAngle,startAngle,clockwise),ctx.closePath()}})},function(module,exports,__webpack_require__){module.exports=__webpack_require__(45).extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(ctx,shape){var x=shape.cx,y=shape.cy,PI2=2*Math.PI;ctx.moveTo(x+shape.r,y),ctx.arc(x,y,shape.r,0,PI2,!1),ctx.moveTo(x+shape.r0,y),ctx.arc(x,y,shape.r0,0,PI2,!0)}})},function(module,exports,__webpack_require__){var polyHelper=__webpack_require__(69);module.exports=__webpack_require__(45).extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(ctx,shape){polyHelper.buildPath(ctx,shape,!0)}})},function(module,exports,__webpack_require__){var smoothSpline=__webpack_require__(70),smoothBezier=__webpack_require__(71);module.exports={buildPath:function(ctx,shape,closePath){var points=shape.points,smooth=shape.smooth;if(points&&points.length>=2){if(smooth&&"spline"!==smooth){var controlPoints=smoothBezier(points,smooth,closePath,shape.smoothConstraint);ctx.moveTo(points[0][0],points[0][1]);for(var len=points.length,i=0;i<(closePath?len:len-1);i++){var cp1=controlPoints[2*i],cp2=controlPoints[2*i+1],p=points[(i+1)%len];ctx.bezierCurveTo(cp1[0],cp1[1],cp2[0],cp2[1],p[0],p[1])}}else{"spline"===smooth&&(points=smoothSpline(points,closePath)),ctx.moveTo(points[0][0],points[0][1]);for(var i=1,l=points.length;i<l;i++)ctx.lineTo(points[i][0],points[i][1])}closePath&&ctx.closePath()}}}},function(module,exports,__webpack_require__){function interpolate(p0,p1,p2,p3,t,t2,t3){var v0=.5*(p2-p0),v1=.5*(p3-p1);return(2*(p1-p2)+v0+v1)*t3+(-3*(p1-p2)-2*v0-v1)*t2+v0*t+p1}var vec2=__webpack_require__(10);module.exports=function(points,isLoop){for(var len=points.length,ret=[],distance=0,i=1;i<len;i++)distance+=vec2.distance(points[i-1],points[i]);var segs=distance/2;segs=segs<len?len:segs;for(var i=0;i<segs;i++){var p0,p2,p3,pos=i/(segs-1)*(isLoop?len:len-1),idx=Math.floor(pos),w=pos-idx,p1=points[idx%len];isLoop?(p0=points[(idx-1+len)%len],p2=points[(idx+1)%len],p3=points[(idx+2)%len]):(p0=points[0===idx?idx:idx-1],p2=points[idx>len-2?len-1:idx+1],p3=points[idx>len-3?len-1:idx+2]);var w2=w*w,w3=w*w2;ret.push([interpolate(p0[0],p1[0],p2[0],p3[0],w,w2,w3),interpolate(p0[1],p1[1],p2[1],p3[1],w,w2,w3)])}return ret}},function(module,exports,__webpack_require__){var vec2=__webpack_require__(10),v2Min=vec2.min,v2Max=vec2.max,v2Scale=vec2.scale,v2Distance=vec2.distance,v2Add=vec2.add;module.exports=function(points,smooth,isLoop,constraint){var prevPoint,nextPoint,min,max,cps=[],v=[],v1=[],v2=[];if(constraint){min=[1/0,1/0],max=[-(1/0),-(1/0)];for(var i=0,len=points.length;i<len;i++)v2Min(min,min,points[i]),v2Max(max,max,points[i]);v2Min(min,min,constraint[0]),v2Max(max,max,constraint[1])}for(var i=0,len=points.length;i<len;i++){var point=points[i];if(isLoop)prevPoint=points[i?i-1:len-1],nextPoint=points[(i+1)%len];else{if(0===i||i===len-1){cps.push(vec2.clone(points[i]));continue}prevPoint=points[i-1],nextPoint=points[i+1]}vec2.sub(v,nextPoint,prevPoint),v2Scale(v,v,smooth);var d0=v2Distance(point,prevPoint),d1=v2Distance(point,nextPoint),sum=d0+d1;0!==sum&&(d0/=sum,d1/=sum),v2Scale(v1,v,-d0),v2Scale(v2,v,d1);var cp0=v2Add([],point,v1),cp1=v2Add([],point,v2);constraint&&(v2Max(cp0,cp0,min),v2Min(cp0,cp0,max),v2Max(cp1,cp1,min),v2Min(cp1,cp1,max)),cps.push(cp0),cps.push(cp1)}return isLoop&&cps.push(cps.shift()),cps}},function(module,exports,__webpack_require__){var polyHelper=__webpack_require__(69);module.exports=__webpack_require__(45).extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(ctx,shape){polyHelper.buildPath(ctx,shape,!1)}})},function(module,exports,__webpack_require__){var roundRectHelper=__webpack_require__(74);module.exports=__webpack_require__(45).extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(ctx,shape){var x=shape.x,y=shape.y,width=shape.width,height=shape.height;shape.r?roundRectHelper.buildPath(ctx,shape):ctx.rect(x,y,width,height),ctx.closePath()}})},function(module,exports){module.exports={buildPath:function(ctx,shape){var r1,r2,r3,r4,x=shape.x,y=shape.y,width=shape.width,height=shape.height,r=shape.r;width<0&&(x+=width,width=-width),height<0&&(y+=height,height=-height),"number"==typeof r?r1=r2=r3=r4=r:r instanceof Array?1===r.length?r1=r2=r3=r4=r[0]:2===r.length?(r1=r3=r[0],r2=r4=r[1]):3===r.length?(r1=r[0],r2=r4=r[1],r3=r[2]):(r1=r[0],r2=r[1],r3=r[2],r4=r[3]):r1=r2=r3=r4=0;var total;r1+r2>width&&(total=r1+r2,r1*=width/total,r2*=width/total),r3+r4>width&&(total=r3+r4,r3*=width/total,r4*=width/total),r2+r3>height&&(total=r2+r3,r2*=height/total,r3*=height/total),r1+r4>height&&(total=r1+r4,r1*=height/total,r4*=height/total),ctx.moveTo(x+r1,y),ctx.lineTo(x+width-r2,y),0!==r2&&ctx.quadraticCurveTo(x+width,y,x+width,y+r2),ctx.lineTo(x+width,y+height-r3),0!==r3&&ctx.quadraticCurveTo(x+width,y+height,x+width-r3,y+height),ctx.lineTo(x+r4,y+height),0!==r4&&ctx.quadraticCurveTo(x,y+height,x,y+height-r4),ctx.lineTo(x,y+r1),0!==r1&&ctx.quadraticCurveTo(x,y,x+r1,y)}}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(45).extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(ctx,shape){var x1=shape.x1,y1=shape.y1,x2=shape.x2,y2=shape.y2,percent=shape.percent;0!==percent&&(ctx.moveTo(x1,y1),percent<1&&(x2=x1*(1-percent)+x2*percent,y2=y1*(1-percent)+y2*percent),ctx.lineTo(x2,y2))},pointAt:function(p){var shape=this.shape;return[shape.x1*(1-p)+shape.x2*p,shape.y1*(1-p)+shape.y2*p]}})},function(module,exports,__webpack_require__){"use strict";function someVectorAt(shape,t,isTangent){var cpx2=shape.cpx2,cpy2=shape.cpy2;return null===cpx2||null===cpy2?[(isTangent?cubicDerivativeAt:cubicAt)(shape.x1,shape.cpx1,shape.cpx2,shape.x2,t),(isTangent?cubicDerivativeAt:cubicAt)(shape.y1,shape.cpy1,shape.cpy2,shape.y2,t)]:[(isTangent?quadraticDerivativeAt:quadraticAt)(shape.x1,shape.cpx1,shape.x2,t),(isTangent?quadraticDerivativeAt:quadraticAt)(shape.y1,shape.cpy1,shape.y2,t)]}var curveTool=__webpack_require__(50),vec2=__webpack_require__(10),quadraticSubdivide=curveTool.quadraticSubdivide,cubicSubdivide=curveTool.cubicSubdivide,quadraticAt=curveTool.quadraticAt,cubicAt=curveTool.cubicAt,quadraticDerivativeAt=curveTool.quadraticDerivativeAt,cubicDerivativeAt=curveTool.cubicDerivativeAt,out=[];module.exports=__webpack_require__(45).extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(ctx,shape){var x1=shape.x1,y1=shape.y1,x2=shape.x2,y2=shape.y2,cpx1=shape.cpx1,cpy1=shape.cpy1,cpx2=shape.cpx2,cpy2=shape.cpy2,percent=shape.percent;0!==percent&&(ctx.moveTo(x1,y1),null==cpx2||null==cpy2?(percent<1&&(quadraticSubdivide(x1,cpx1,x2,percent,out),cpx1=out[1],x2=out[2],quadraticSubdivide(y1,cpy1,y2,percent,out),cpy1=out[1],y2=out[2]),ctx.quadraticCurveTo(cpx1,cpy1,x2,y2)):(percent<1&&(cubicSubdivide(x1,cpx1,cpx2,x2,percent,out),cpx1=out[1],cpx2=out[2],x2=out[3],cubicSubdivide(y1,cpy1,cpy2,y2,percent,out),cpy1=out[1],cpy2=out[2],y2=out[3]),ctx.bezierCurveTo(cpx1,cpy1,cpx2,cpy2,x2,y2)))},pointAt:function(t){return someVectorAt(this.shape,t,!1)},tangentAt:function(t){var p=someVectorAt(this.shape,t,!0);return vec2.normalize(p,p)}})},function(module,exports,__webpack_require__){module.exports=__webpack_require__(45).extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(ctx,shape){var x=shape.cx,y=shape.cy,r=Math.max(shape.r,0),startAngle=shape.startAngle,endAngle=shape.endAngle,clockwise=shape.clockwise,unitX=Math.cos(startAngle),unitY=Math.sin(startAngle);ctx.moveTo(unitX*r+x,unitY*r+y),ctx.arc(x,y,r,startAngle,endAngle,!clockwise)}})},function(module,exports,__webpack_require__){var Path=__webpack_require__(45);module.exports=Path.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){for(var dirtyPath=this.__dirtyPath,paths=this.shape.paths,i=0;i<paths.length;i++)dirtyPath=dirtyPath||paths[i].__dirtyPath;this.__dirtyPath=dirtyPath,this.__dirty=this.__dirty||dirtyPath},beforeBrush:function(){this._updatePathDirty();for(var paths=this.shape.paths||[],scale=this.getGlobalScale(),i=0;i<paths.length;i++)paths[i].path.setScale(scale[0],scale[1])},buildPath:function(ctx,shape){for(var paths=shape.paths||[],i=0;i<paths.length;i++)paths[i].buildPath(ctx,paths[i].shape,!0)},afterBrush:function(){for(var paths=this.shape.paths,i=0;i<paths.length;i++)paths[i].__dirtyPath=!1},getBoundingRect:function(){return this._updatePathDirty(),Path.prototype.getBoundingRect.call(this)}})},function(module,exports,__webpack_require__){"use strict";var zrUtil=__webpack_require__(4),Gradient=__webpack_require__(61),LinearGradient=function(x,y,x2,y2,colorStops,globalCoord){this.x=null==x?0:x,this.y=null==y?0:y,this.x2=null==x2?1:x2,this.y2=null==y2?0:y2,this.type="linear",this.global=globalCoord||!1,Gradient.call(this,colorStops)};LinearGradient.prototype={constructor:LinearGradient},zrUtil.inherits(LinearGradient,Gradient),module.exports=LinearGradient},function(module,exports,__webpack_require__){"use strict";var zrUtil=__webpack_require__(4),Gradient=__webpack_require__(61),RadialGradient=function(x,y,r,colorStops,globalCoord){this.x=null==x?.5:x,this.y=null==y?.5:y,this.r=null==r?.5:r,this.type="radial",this.global=globalCoord||!1,Gradient.call(this,colorStops)};RadialGradient.prototype={constructor:RadialGradient},zrUtil.inherits(RadialGradient,Gradient),module.exports=RadialGradient},function(module,exports,__webpack_require__){function delInstance(id){delete instances[id]}var guid=__webpack_require__(32),env=__webpack_require__(2),Handler=__webpack_require__(82),Storage=__webpack_require__(84),Animation=__webpack_require__(86),HandlerProxy=__webpack_require__(89),useVML=!env.canvasSupported,painterCtors={canvas:__webpack_require__(91)},instances={},zrender={};zrender.version="3.1.3",zrender.init=function(dom,opts){var zr=new ZRender(guid(),dom,opts);return instances[zr.id]=zr,zr},zrender.dispose=function(zr){if(zr)zr.dispose();else{for(var key in instances)instances[key].dispose();instances={}}return zrender},zrender.getInstance=function(id){return instances[id]},zrender.registerPainter=function(name,Ctor){painterCtors[name]=Ctor};var ZRender=function(id,dom,opts){opts=opts||{},this.dom=dom,this.id=id;var self=this,storage=new Storage,rendererType=opts.renderer;if(useVML){if(!painterCtors.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");rendererType="vml"}else rendererType&&painterCtors[rendererType]||(rendererType="canvas");var painter=new painterCtors[rendererType](dom,storage,opts);this.storage=storage,this.painter=painter;var handerProxy=env.node?null:new HandlerProxy(painter.getViewportRoot());this.handler=new Handler(storage,painter,handerProxy),this.animation=new Animation({stage:{update:function(){self._needsRefresh&&self.refreshImmediately(),self._needsRefreshHover&&self.refreshHoverImmediately()}}}),this.animation.start(),this._needsRefresh;var oldDelFromMap=storage.delFromMap,oldAddToMap=storage.addToMap;storage.delFromMap=function(elId){var el=storage.get(elId);oldDelFromMap.call(storage,elId),el&&el.removeSelfFromZr(self)},storage.addToMap=function(el){oldAddToMap.call(storage,el),el.addSelfToZr(self)}};ZRender.prototype={constructor:ZRender,getId:function(){return this.id},add:function(el){this.storage.addRoot(el),this._needsRefresh=!0},remove:function(el){this.storage.delRoot(el),this._needsRefresh=!0},configLayer:function(zLevel,config){this.painter.configLayer(zLevel,config),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},refresh:function(){this._needsRefresh=!0},addHover:function(el,style){this.painter.addHover&&(this.painter.addHover(el,style),this.refreshHover())},removeHover:function(el){this.painter.removeHover&&(this.painter.removeHover(el),this.refreshHover())},clearHover:function(){this.painter.clearHover&&(this.painter.clearHover(),this.refreshHover())},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.refreshHover()},resize:function(){this.painter.resize(),this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(e,width,height){var id=guid();return this.painter.pathToImage(id,e,width,height)},setCursorStyle:function(cursorStyle){this.handler.setCursorStyle(cursorStyle)},on:function(eventName,eventHandler,context){this.handler.on(eventName,eventHandler,context)},off:function(eventName,eventHandler){this.handler.off(eventName,eventHandler)},trigger:function(eventName,event){this.handler.trigger(eventName,event)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,delInstance(this.id)}},module.exports=zrender},function(module,exports,__webpack_require__){"use strict";function makeEventPacket(eveType,target,event){return{type:eveType,event:event,target:target,cancelBubble:!1,offsetX:event.zrX,offsetY:event.zrY,gestureEvent:event.gestureEvent,pinchX:event.pinchX,pinchY:event.pinchY,pinchScale:event.pinchScale,wheelDelta:event.zrDelta}}function EmptyProxy(){}function isHover(displayable,x,y){if(displayable[displayable.rectHover?"rectContain":"contain"](x,y)){for(var el=displayable;el;){if(el.silent||el.clipPath&&!el.clipPath.contain(x,y))return!1;el=el.parent}return!0}return!1}var util=__webpack_require__(4),Draggable=__webpack_require__(83),Eventful=__webpack_require__(33);EmptyProxy.prototype.dispose=function(){};var handlerNames=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove"],Handler=function(storage,painter,proxy){Eventful.call(this),this.storage=storage,this.painter=painter,proxy=proxy||new EmptyProxy,this.proxy=proxy,proxy.handler=this,this._hovered,this._lastTouchMoment,this._lastX,this._lastY,Draggable.call(this),util.each(handlerNames,function(name){proxy.on&&proxy.on(name,this[name],this)},this)};Handler.prototype={constructor:Handler,mousemove:function(event){var x=event.zrX,y=event.zrY,hovered=this.findHover(x,y,null),lastHovered=this._hovered,proxy=this.proxy;this._hovered=hovered,proxy.setCursor&&proxy.setCursor(hovered?hovered.cursor:"default"),lastHovered&&hovered!==lastHovered&&lastHovered.__zr&&this.dispatchToElement(lastHovered,"mouseout",event),this.dispatchToElement(hovered,"mousemove",event),hovered&&hovered!==lastHovered&&this.dispatchToElement(hovered,"mouseover",event)},mouseout:function(event){this.dispatchToElement(this._hovered,"mouseout",event),this.trigger("globalout",{event:event})},resize:function(event){this._hovered=null},dispatch:function(eventName,eventArgs){var handler=this[eventName];handler&&handler.call(this,eventArgs)},dispose:function(){this.proxy.dispose(),this.storage=this.proxy=this.painter=null},setCursorStyle:function(cursorStyle){var proxy=this.proxy;proxy.setCursor&&proxy.setCursor(cursorStyle)},dispatchToElement:function(targetEl,eventName,event){for(var eventHandler="on"+eventName,eventPacket=makeEventPacket(eventName,targetEl,event),el=targetEl;el&&(el[eventHandler]&&(eventPacket.cancelBubble=el[eventHandler].call(el,eventPacket)),el.trigger(eventName,eventPacket),el=el.parent,!eventPacket.cancelBubble););eventPacket.cancelBubble||(this.trigger(eventName,eventPacket),this.painter&&this.painter.eachOtherLayer(function(layer){
"function"==typeof layer[eventHandler]&&layer[eventHandler].call(layer,eventPacket),layer.trigger&&layer.trigger(eventName,eventPacket)}))},findHover:function(x,y,exclude){for(var list=this.storage.getDisplayList(),i=list.length-1;i>=0;i--)if(!list[i].silent&&list[i]!==exclude&&!list[i].ignore&&isHover(list[i],x,y))return list[i]}},util.each(["click","mousedown","mouseup","mousewheel","dblclick"],function(name){Handler.prototype[name]=function(event){var hovered=this.findHover(event.zrX,event.zrY,null);if("mousedown"===name)this._downel=hovered,this._upel=hovered;else if("mosueup"===name)this._upel=hovered;else if("click"===name&&this._downel!==this._upel)return;this.dispatchToElement(hovered,name,event)}}),util.mixin(Handler,Eventful),util.mixin(Handler,Draggable),module.exports=Handler},function(module,exports){function Draggable(){this.on("mousedown",this._dragStart,this),this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this),this.on("globalout",this._dragEnd,this)}Draggable.prototype={constructor:Draggable,_dragStart:function(e){var draggingTarget=e.target;draggingTarget&&draggingTarget.draggable&&(this._draggingTarget=draggingTarget,draggingTarget.dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.dispatchToElement(draggingTarget,"dragstart",e.event))},_drag:function(e){var draggingTarget=this._draggingTarget;if(draggingTarget){var x=e.offsetX,y=e.offsetY,dx=x-this._x,dy=y-this._y;this._x=x,this._y=y,draggingTarget.drift(dx,dy,e),this.dispatchToElement(draggingTarget,"drag",e.event);var dropTarget=this.findHover(x,y,draggingTarget),lastDropTarget=this._dropTarget;this._dropTarget=dropTarget,draggingTarget!==dropTarget&&(lastDropTarget&&dropTarget!==lastDropTarget&&this.dispatchToElement(lastDropTarget,"dragleave",e.event),dropTarget&&dropTarget!==lastDropTarget&&this.dispatchToElement(dropTarget,"dragenter",e.event))}},_dragEnd:function(e){var draggingTarget=this._draggingTarget;draggingTarget&&(draggingTarget.dragging=!1),this.dispatchToElement(draggingTarget,"dragend",e.event),this._dropTarget&&this.dispatchToElement(this._dropTarget,"drop",e.event),this._draggingTarget=null,this._dropTarget=null}},module.exports=Draggable},function(module,exports,__webpack_require__){"use strict";function shapeCompareFunc(a,b){return a.zlevel===b.zlevel?a.z===b.z?a.z2-b.z2:a.z-b.z:a.zlevel-b.zlevel}var util=__webpack_require__(4),env=__webpack_require__(2),Group=__webpack_require__(30),timsort=__webpack_require__(85),Storage=function(){this._elements={},this._roots=[],this._displayList=[],this._displayListLen=0};Storage.prototype={constructor:Storage,traverse:function(cb,context){for(var i=0;i<this._roots.length;i++)this._roots[i].traverse(cb,context)},getDisplayList:function(update,includeIgnore){return includeIgnore=includeIgnore||!1,update&&this.updateDisplayList(includeIgnore),this._displayList},updateDisplayList:function(includeIgnore){this._displayListLen=0;for(var roots=this._roots,displayList=this._displayList,i=0,len=roots.length;i<len;i++)this._updateAndAddDisplayable(roots[i],null,includeIgnore);displayList.length=this._displayListLen,env.canvasSupported&&timsort(displayList,shapeCompareFunc)},_updateAndAddDisplayable:function(el,clipPaths,includeIgnore){if(!el.ignore||includeIgnore){el.beforeUpdate(),el.__dirty&&el.update(),el.afterUpdate();var clipPath=el.clipPath;if(clipPath&&(clipPath.parent=el,clipPath.updateTransform(),clipPaths?(clipPaths=clipPaths.slice(),clipPaths.push(clipPath)):clipPaths=[clipPath]),el.isGroup){for(var children=el._children,i=0;i<children.length;i++){var child=children[i];el.__dirty&&(child.__dirty=!0),this._updateAndAddDisplayable(child,clipPaths,includeIgnore)}el.__dirty=!1}else el.__clipPaths=clipPaths,this._displayList[this._displayListLen++]=el}},addRoot:function(el){this._elements[el.id]||(el instanceof Group&&el.addChildrenToStorage(this),this.addToMap(el),this._roots.push(el))},delRoot:function(elId){if(null==elId){for(var i=0;i<this._roots.length;i++){var root=this._roots[i];root instanceof Group&&root.delChildrenFromStorage(this)}return this._elements={},this._roots=[],this._displayList=[],void(this._displayListLen=0)}if(elId instanceof Array)for(var i=0,l=elId.length;i<l;i++)this.delRoot(elId[i]);else{var el;el="string"==typeof elId?this._elements[elId]:elId;var idx=util.indexOf(this._roots,el);idx>=0&&(this.delFromMap(el.id),this._roots.splice(idx,1),el instanceof Group&&el.delChildrenFromStorage(this))}},addToMap:function(el){return el instanceof Group&&(el.__storage=this),el.dirty(!1),this._elements[el.id]=el,this},get:function(elId){return this._elements[elId]},delFromMap:function(elId){var elements=this._elements,el=elements[elId];return el&&(delete elements[elId],el instanceof Group&&(el.__storage=null)),this},dispose:function(){this._elements=this._renderList=this._roots=null},displayableSortFunc:shapeCompareFunc},module.exports=Storage},function(module,exports){function minRunLength(n){for(var r=0;n>=DEFAULT_MIN_MERGE;)r|=1&n,n>>=1;return n+r}function makeAscendingRun(array,lo,hi,compare){var runHi=lo+1;if(runHi===hi)return 1;if(compare(array[runHi++],array[lo])<0){for(;runHi<hi&&compare(array[runHi],array[runHi-1])<0;)runHi++;reverseRun(array,lo,runHi)}else for(;runHi<hi&&compare(array[runHi],array[runHi-1])>=0;)runHi++;return runHi-lo}function reverseRun(array,lo,hi){for(hi--;lo<hi;){var t=array[lo];array[lo++]=array[hi],array[hi--]=t}}function binaryInsertionSort(array,lo,hi,start,compare){for(start===lo&&start++;start<hi;start++){for(var mid,pivot=array[start],left=lo,right=start;left<right;)mid=left+right>>>1,compare(pivot,array[mid])<0?right=mid:left=mid+1;var n=start-left;switch(n){case 3:array[left+3]=array[left+2];case 2:array[left+2]=array[left+1];case 1:array[left+1]=array[left];break;default:for(;n>0;)array[left+n]=array[left+n-1],n--}array[left]=pivot}}function gallopLeft(value,array,start,length,hint,compare){var lastOffset=0,maxOffset=0,offset=1;if(compare(value,array[start+hint])>0){for(maxOffset=length-hint;offset<maxOffset&&compare(value,array[start+hint+offset])>0;)lastOffset=offset,offset=(offset<<1)+1,offset<=0&&(offset=maxOffset);offset>maxOffset&&(offset=maxOffset),lastOffset+=hint,offset+=hint}else{for(maxOffset=hint+1;offset<maxOffset&&compare(value,array[start+hint-offset])<=0;)lastOffset=offset,offset=(offset<<1)+1,offset<=0&&(offset=maxOffset);offset>maxOffset&&(offset=maxOffset);var tmp=lastOffset;lastOffset=hint-offset,offset=hint-tmp}for(lastOffset++;lastOffset<offset;){var m=lastOffset+(offset-lastOffset>>>1);compare(value,array[start+m])>0?lastOffset=m+1:offset=m}return offset}function gallopRight(value,array,start,length,hint,compare){var lastOffset=0,maxOffset=0,offset=1;if(compare(value,array[start+hint])<0){for(maxOffset=hint+1;offset<maxOffset&&compare(value,array[start+hint-offset])<0;)lastOffset=offset,offset=(offset<<1)+1,offset<=0&&(offset=maxOffset);offset>maxOffset&&(offset=maxOffset);var tmp=lastOffset;lastOffset=hint-offset,offset=hint-tmp}else{for(maxOffset=length-hint;offset<maxOffset&&compare(value,array[start+hint+offset])>=0;)lastOffset=offset,offset=(offset<<1)+1,offset<=0&&(offset=maxOffset);offset>maxOffset&&(offset=maxOffset),lastOffset+=hint,offset+=hint}for(lastOffset++;lastOffset<offset;){var m=lastOffset+(offset-lastOffset>>>1);compare(value,array[start+m])<0?offset=m:lastOffset=m+1}return offset}function TimSort(array,compare){function pushRun(_runStart,_runLength){runStart[stackSize]=_runStart,runLength[stackSize]=_runLength,stackSize+=1}function mergeRuns(){for(;stackSize>1;){var n=stackSize-2;if(n>=1&&runLength[n-1]<=runLength[n]+runLength[n+1]||n>=2&&runLength[n-2]<=runLength[n]+runLength[n-1])runLength[n-1]<runLength[n+1]&&n--;else if(runLength[n]>runLength[n+1])break;mergeAt(n)}}function forceMergeRuns(){for(;stackSize>1;){var n=stackSize-2;n>0&&runLength[n-1]<runLength[n+1]&&n--,mergeAt(n)}}function mergeAt(i){var start1=runStart[i],length1=runLength[i],start2=runStart[i+1],length2=runLength[i+1];runLength[i]=length1+length2,i===stackSize-3&&(runStart[i+1]=runStart[i+2],runLength[i+1]=runLength[i+2]),stackSize--;var k=gallopRight(array[start2],array,start1,length1,0,compare);start1+=k,length1-=k,0!==length1&&(length2=gallopLeft(array[start1+length1-1],array,start2,length2,length2-1,compare),0!==length2&&(length1<=length2?mergeLow(start1,length1,start2,length2):mergeHigh(start1,length1,start2,length2)))}function mergeLow(start1,length1,start2,length2){var i=0;for(i=0;i<length1;i++)tmp[i]=array[start1+i];var cursor1=0,cursor2=start2,dest=start1;if(array[dest++]=array[cursor2++],0!==--length2){if(1===length1){for(i=0;i<length2;i++)array[dest+i]=array[cursor2+i];return void(array[dest+length2]=tmp[cursor1])}for(var count1,count2,exit,_minGallop=minGallop;;){count1=0,count2=0,exit=!1;do if(compare(array[cursor2],tmp[cursor1])<0){if(array[dest++]=array[cursor2++],count2++,count1=0,0===--length2){exit=!0;break}}else if(array[dest++]=tmp[cursor1++],count1++,count2=0,1===--length1){exit=!0;break}while((count1|count2)<_minGallop);if(exit)break;do{if(count1=gallopRight(array[cursor2],tmp,cursor1,length1,0,compare),0!==count1){for(i=0;i<count1;i++)array[dest+i]=tmp[cursor1+i];if(dest+=count1,cursor1+=count1,length1-=count1,length1<=1){exit=!0;break}}if(array[dest++]=array[cursor2++],0===--length2){exit=!0;break}if(count2=gallopLeft(tmp[cursor1],array,cursor2,length2,0,compare),0!==count2){for(i=0;i<count2;i++)array[dest+i]=array[cursor2+i];if(dest+=count2,cursor2+=count2,length2-=count2,0===length2){exit=!0;break}}if(array[dest++]=tmp[cursor1++],1===--length1){exit=!0;break}_minGallop--}while(count1>=DEFAULT_MIN_GALLOPING||count2>=DEFAULT_MIN_GALLOPING);if(exit)break;_minGallop<0&&(_minGallop=0),_minGallop+=2}if(minGallop=_minGallop,minGallop<1&&(minGallop=1),1===length1){for(i=0;i<length2;i++)array[dest+i]=array[cursor2+i];array[dest+length2]=tmp[cursor1]}else{if(0===length1)throw new Error;for(i=0;i<length1;i++)array[dest+i]=tmp[cursor1+i]}}else for(i=0;i<length1;i++)array[dest+i]=tmp[cursor1+i]}function mergeHigh(start1,length1,start2,length2){var i=0;for(i=0;i<length2;i++)tmp[i]=array[start2+i];var cursor1=start1+length1-1,cursor2=length2-1,dest=start2+length2-1,customCursor=0,customDest=0;if(array[dest--]=array[cursor1--],0!==--length1){if(1===length2){for(dest-=length1,cursor1-=length1,customDest=dest+1,customCursor=cursor1+1,i=length1-1;i>=0;i--)array[customDest+i]=array[customCursor+i];return void(array[dest]=tmp[cursor2])}for(var _minGallop=minGallop;;){var count1=0,count2=0,exit=!1;do if(compare(tmp[cursor2],array[cursor1])<0){if(array[dest--]=array[cursor1--],count1++,count2=0,0===--length1){exit=!0;break}}else if(array[dest--]=tmp[cursor2--],count2++,count1=0,1===--length2){exit=!0;break}while((count1|count2)<_minGallop);if(exit)break;do{if(count1=length1-gallopRight(tmp[cursor2],array,start1,length1,length1-1,compare),0!==count1){for(dest-=count1,cursor1-=count1,length1-=count1,customDest=dest+1,customCursor=cursor1+1,i=count1-1;i>=0;i--)array[customDest+i]=array[customCursor+i];if(0===length1){exit=!0;break}}if(array[dest--]=tmp[cursor2--],1===--length2){exit=!0;break}if(count2=length2-gallopLeft(array[cursor1],tmp,0,length2,length2-1,compare),0!==count2){for(dest-=count2,cursor2-=count2,length2-=count2,customDest=dest+1,customCursor=cursor2+1,i=0;i<count2;i++)array[customDest+i]=tmp[customCursor+i];if(length2<=1){exit=!0;break}}if(array[dest--]=array[cursor1--],0===--length1){exit=!0;break}_minGallop--}while(count1>=DEFAULT_MIN_GALLOPING||count2>=DEFAULT_MIN_GALLOPING);if(exit)break;_minGallop<0&&(_minGallop=0),_minGallop+=2}if(minGallop=_minGallop,minGallop<1&&(minGallop=1),1===length2){for(dest-=length1,cursor1-=length1,customDest=dest+1,customCursor=cursor1+1,i=length1-1;i>=0;i--)array[customDest+i]=array[customCursor+i];array[dest]=tmp[cursor2]}else{if(0===length2)throw new Error;for(customCursor=dest-(length2-1),i=0;i<length2;i++)array[customCursor+i]=tmp[i]}}else for(customCursor=dest-(length2-1),i=0;i<length2;i++)array[customCursor+i]=tmp[i]}var runStart,runLength,minGallop=DEFAULT_MIN_GALLOPING,length=0,tmpStorageLength=DEFAULT_TMP_STORAGE_LENGTH,stackLength=0,stackSize=0;length=array.length,length<2*DEFAULT_TMP_STORAGE_LENGTH&&(tmpStorageLength=length>>>1);var tmp=[];stackLength=length<120?5:length<1542?10:length<119151?19:40,runStart=[],runLength=[],this.mergeRuns=mergeRuns,this.forceMergeRuns=forceMergeRuns,this.pushRun=pushRun}function sort(array,compare,lo,hi){lo||(lo=0),hi||(hi=array.length);var remaining=hi-lo;if(!(remaining<2)){var runLength=0;if(remaining<DEFAULT_MIN_MERGE)return runLength=makeAscendingRun(array,lo,hi,compare),void binaryInsertionSort(array,lo,hi,lo+runLength,compare);var ts=new TimSort(array,compare),minRun=minRunLength(remaining);do{if(runLength=makeAscendingRun(array,lo,hi,compare),runLength<minRun){var force=remaining;force>minRun&&(force=minRun),binaryInsertionSort(array,lo,lo+force,lo+runLength,compare),runLength=force}ts.pushRun(lo,runLength),ts.mergeRuns(),remaining-=runLength,lo+=runLength}while(0!==remaining);ts.forceMergeRuns()}}var DEFAULT_MIN_MERGE=32,DEFAULT_MIN_GALLOPING=7,DEFAULT_TMP_STORAGE_LENGTH=256;module.exports=sort},function(module,exports,__webpack_require__){"use strict";var util=__webpack_require__(4),Dispatcher=__webpack_require__(87).Dispatcher,requestAnimationFrame=__webpack_require__(88),Animator=__webpack_require__(36),Animation=function(options){options=options||{},this.stage=options.stage||{},this.onframe=options.onframe||function(){},this._clips=[],this._running=!1,this._time,this._pausedTime,this._pauseStart,this._paused=!1,Dispatcher.call(this)};Animation.prototype={constructor:Animation,addClip:function(clip){this._clips.push(clip)},addAnimator:function(animator){animator.animation=this;for(var clips=animator.getClips(),i=0;i<clips.length;i++)this.addClip(clips[i])},removeClip:function(clip){var idx=util.indexOf(this._clips,clip);idx>=0&&this._clips.splice(idx,1)},removeAnimator:function(animator){for(var clips=animator.getClips(),i=0;i<clips.length;i++)this.removeClip(clips[i]);animator.animation=null},_update:function(){for(var time=(new Date).getTime()-this._pausedTime,delta=time-this._time,clips=this._clips,len=clips.length,deferredEvents=[],deferredClips=[],i=0;i<len;i++){var clip=clips[i],e=clip.step(time);e&&(deferredEvents.push(e),deferredClips.push(clip))}for(var i=0;i<len;)clips[i]._needsRemove?(clips[i]=clips[len-1],clips.pop(),len--):i++;len=deferredEvents.length;for(var i=0;i<len;i++)deferredClips[i].fire(deferredEvents[i]);this._time=time,this.onframe(delta),this.trigger("frame",delta),this.stage.update&&this.stage.update()},_startLoop:function(){function step(){self._running&&(requestAnimationFrame(step),!self._paused&&self._update())}var self=this;this._running=!0,requestAnimationFrame(step)},start:function(){this._time=(new Date).getTime(),this._pausedTime=0,this._startLoop()},stop:function(){this._running=!1},pause:function(){this._paused||(this._pauseStart=(new Date).getTime(),this._paused=!0)},resume:function(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1)},clear:function(){this._clips=[]},animate:function(target,options){options=options||{};var animator=new Animator(target,options.loop,options.getter,options.setter);return animator}},util.mixin(Animation,Dispatcher),module.exports=Animation},function(module,exports,__webpack_require__){"use strict";function getBoundingClientRect(el){return el.getBoundingClientRect?el.getBoundingClientRect():{left:0,top:0}}function clientToLocal(el,e,out){var box=getBoundingClientRect(el);return out=out||{},out.zrX=e.clientX-box.left,out.zrY=e.clientY-box.top,out}function normalizeEvent(el,e){if(e=e||window.event,null!=e.zrX)return e;var eventType=e.type,isTouch=eventType&&eventType.indexOf("touch")>=0;if(isTouch){var touch="touchend"!=eventType?e.targetTouches[0]:e.changedTouches[0];touch&&clientToLocal(el,touch,e)}else clientToLocal(el,e,e),e.zrDelta=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3;return e}function addEventListener(el,name,handler){isDomLevel2?el.addEventListener(name,handler):el.attachEvent("on"+name,handler)}function removeEventListener(el,name,handler){isDomLevel2?el.removeEventListener(name,handler):el.detachEvent("on"+name,handler)}var Eventful=__webpack_require__(33),isDomLevel2="undefined"!=typeof window&&!!window.addEventListener,stop=isDomLevel2?function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0}:function(e){e.returnValue=!1,e.cancelBubble=!0};module.exports={clientToLocal:clientToLocal,normalizeEvent:normalizeEvent,addEventListener:addEventListener,removeEventListener:removeEventListener,stop:stop,Dispatcher:Eventful}},function(module,exports){module.exports="undefined"!=typeof window&&(window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(func){setTimeout(func,16)}},function(module,exports,__webpack_require__){function eventNameFix(name){return"mousewheel"===name&&env.browser.firefox?"DOMMouseScroll":name}function processGesture(proxy,event,stage){var gestureMgr=proxy._gestureMgr;"start"===stage&&gestureMgr.clear();var gestureInfo=gestureMgr.recognize(event,proxy.handler.findHover(event.zrX,event.zrY,null),proxy.dom);if("end"===stage&&gestureMgr.clear(),gestureInfo){var type=gestureInfo.type;event.gestureEvent=type,proxy.handler.dispatchToElement(gestureInfo.target,type,gestureInfo.event)}}function setTouchTimer(instance){instance._touching=!0,clearTimeout(instance._touchTimer),instance._touchTimer=setTimeout(function(){instance._touching=!1},700)}function useTouchEvent(){return env.touchEventsSupported}function initDomHandler(instance){function makeMouseHandler(fn,instance){return function(){if(!instance._touching)return fn.apply(instance,arguments)}}for(var i=0;i<touchHandlerNames.length;i++){var name=touchHandlerNames[i];instance._handlers[name]=zrUtil.bind(domHandlers[name],instance)}for(var i=0;i<mouseHandlerNames.length;i++){var name=mouseHandlerNames[i];instance._handlers[name]=makeMouseHandler(domHandlers[name],instance)}}function HandlerDomProxy(dom){function mountHandlers(handlerNames,instance){zrUtil.each(handlerNames,function(name){addEventListener(dom,eventNameFix(name),instance._handlers[name])},instance)}Eventful.call(this),this.dom=dom,this._touching=!1,this._touchTimer,this._gestureMgr=new GestureMgr,this._handlers={},initDomHandler(this),useTouchEvent()&&mountHandlers(touchHandlerNames,this),mountHandlers(mouseHandlerNames,this)}var eventTool=__webpack_require__(87),zrUtil=__webpack_require__(4),Eventful=__webpack_require__(33),env=__webpack_require__(2),GestureMgr=__webpack_require__(90),addEventListener=eventTool.addEventListener,removeEventListener=eventTool.removeEventListener,normalizeEvent=eventTool.normalizeEvent,TOUCH_CLICK_DELAY=300,mouseHandlerNames=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove"],touchHandlerNames=["touchstart","touchend","touchmove"],domHandlers={mousemove:function(event){event=normalizeEvent(this.dom,event),this.trigger("mousemove",event)},mouseout:function(event){event=normalizeEvent(this.dom,event);var element=event.toElement||event.relatedTarget;if(element!=this.dom)for(;element&&9!=element.nodeType;){if(element===this.dom)return;element=element.parentNode}this.trigger("mouseout",event)},touchstart:function(event){event=normalizeEvent(this.dom,event),this._lastTouchMoment=new Date,processGesture(this,event,"start"),domHandlers.mousemove.call(this,event),domHandlers.mousedown.call(this,event),setTouchTimer(this)},touchmove:function(event){event=normalizeEvent(this.dom,event),processGesture(this,event,"change"),domHandlers.mousemove.call(this,event),setTouchTimer(this)},touchend:function(event){event=normalizeEvent(this.dom,event),processGesture(this,event,"end"),domHandlers.mouseup.call(this,event),+new Date-this._lastTouchMoment<TOUCH_CLICK_DELAY&&domHandlers.click.call(this,event),setTouchTimer(this)}};zrUtil.each(["click","mousedown","mouseup","mousewheel","dblclick"],function(name){domHandlers[name]=function(event){event=normalizeEvent(this.dom,event),this.trigger(name,event)}});var handlerDomProxyProto=HandlerDomProxy.prototype;handlerDomProxyProto.dispose=function(){for(var handlerNames=mouseHandlerNames.concat(touchHandlerNames),i=0;i<handlerNames.length;i++){var name=handlerNames[i];removeEventListener(this.dom,eventNameFix(name),this._handlers[name])}},handlerDomProxyProto.setCursor=function(cursorStyle){this.dom.style.cursor=cursorStyle||"default"},zrUtil.mixin(HandlerDomProxy,Eventful),module.exports=HandlerDomProxy},function(module,exports,__webpack_require__){"use strict";function dist(pointPair){var dx=pointPair[1][0]-pointPair[0][0],dy=pointPair[1][1]-pointPair[0][1];return Math.sqrt(dx*dx+dy*dy)}function center(pointPair){return[(pointPair[0][0]+pointPair[1][0])/2,(pointPair[0][1]+pointPair[1][1])/2]}var eventUtil=__webpack_require__(87),GestureMgr=function(){this._track=[]};GestureMgr.prototype={constructor:GestureMgr,recognize:function(event,target,root){return this._doTrack(event,target,root),this._recognize(event)},clear:function(){return this._track.length=0,this},_doTrack:function(event,target,root){var touches=event.touches;if(touches){for(var trackItem={points:[],touches:[],target:target,event:event},i=0,len=touches.length;i<len;i++){var touch=touches[i],pos=eventUtil.clientToLocal(root,touch);trackItem.points.push([pos.zrX,pos.zrY]),trackItem.touches.push(touch)}this._track.push(trackItem)}},_recognize:function(event){for(var eventName in recognizers)if(recognizers.hasOwnProperty(eventName)){var gestureInfo=recognizers[eventName](this._track,event);if(gestureInfo)return gestureInfo}}};var recognizers={pinch:function(track,event){var trackLen=track.length;if(trackLen){var pinchEnd=(track[trackLen-1]||{}).points,pinchPre=(track[trackLen-2]||{}).points||pinchEnd;if(pinchPre&&pinchPre.length>1&&pinchEnd&&pinchEnd.length>1){var pinchScale=dist(pinchEnd)/dist(pinchPre);!isFinite(pinchScale)&&(pinchScale=1),event.pinchScale=pinchScale;var pinchCenter=center(pinchEnd);return event.pinchX=pinchCenter[0],event.pinchY=pinchCenter[1],{type:"pinch",target:track[0].target,event:event}}}}};module.exports=GestureMgr},function(module,exports,__webpack_require__){"use strict";function parseInt10(val){return parseInt(val,10)}function isLayerValid(layer){return!!layer&&(!!layer.isBuildin||"function"==typeof layer.resize&&"function"==typeof layer.refresh)}function preProcessLayer(layer){layer.__unusedCount++}function postProcessLayer(layer){1==layer.__unusedCount&&layer.clear()}function isDisplayableCulled(el,width,height){return tmpRect.copy(el.getBoundingRect()),el.transform&&tmpRect.applyTransform(el.transform),viewRect.width=width,viewRect.height=height,!tmpRect.intersect(viewRect)}function isClipPathChanged(clipPaths,prevClipPaths){if(clipPaths==prevClipPaths)return!1;if(!clipPaths||!prevClipPaths||clipPaths.length!==prevClipPaths.length)return!0;for(var i=0;i<clipPaths.length;i++)if(clipPaths[i]!==prevClipPaths[i])return!0}function doClip(clipPaths,ctx){for(var i=0;i<clipPaths.length;i++){var clipPath=clipPaths[i],path=clipPath.path;clipPath.setTransform(ctx),path.beginPath(ctx),clipPath.buildPath(path,clipPath.shape),ctx.clip(),clipPath.restoreTransform(ctx)}}function createRoot(width,height){var domRoot=document.createElement("div"),domRootStyle=domRoot.style;return domRootStyle.position="relative",domRootStyle.overflow="hidden",domRootStyle.width=width+"px",domRootStyle.height=height+"px",domRoot}var config=__webpack_require__(41),util=__webpack_require__(4),log=__webpack_require__(40),BoundingRect=__webpack_require__(9),timsort=__webpack_require__(85),Layer=__webpack_require__(92),requestAnimationFrame=__webpack_require__(88),MAX_PROGRESSIVE_LAYER_NUMBER=5,tmpRect=new BoundingRect(0,0,0,0),viewRect=new BoundingRect(0,0,0,0),Painter=function(root,storage,opts){var singleCanvas=!root.nodeName||"CANVAS"===root.nodeName.toUpperCase();opts=opts||{},this.dpr=opts.devicePixelRatio||config.devicePixelRatio,this._singleCanvas=singleCanvas,this.root=root;var rootStyle=root.style;rootStyle&&(rootStyle["-webkit-tap-highlight-color"]="transparent",rootStyle["-webkit-user-select"]=rootStyle["user-select"]=rootStyle["-webkit-touch-callout"]="none",root.innerHTML=""),this.storage=storage;var zlevelList=this._zlevelList=[],layers=this._layers={};if(this._layerConfig={},singleCanvas){var width=root.width,height=root.height;this._width=width,this._height=height;var mainLayer=new Layer(root,this,1);mainLayer.initContext(),layers[0]=mainLayer,zlevelList.push(0)}else{this._width=this._getWidth(),this._height=this._getHeight();var domRoot=this._domRoot=createRoot(this._width,this._height);root.appendChild(domRoot)}this.pathToImage=this._createPathToImage(),this._progressiveLayers=[],this._hoverlayer,this._hoverElements=[]};Painter.prototype={constructor:Painter,isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._singleCanvas?this._layers[0].dom:this._domRoot},refresh:function(paintAll){var list=this.storage.getDisplayList(!0),zlevelList=this._zlevelList;this._paintList(list,paintAll);for(var i=0;i<zlevelList.length;i++){var z=zlevelList[i],layer=this._layers[z];!layer.isBuildin&&layer.refresh&&layer.refresh()}return this.refreshHover(),this._progressiveLayers.length&&this._startProgessive(),this},addHover:function(el,hoverStyle){if(!el.__hoverMir){var elMirror=new el.constructor({style:el.style,shape:el.shape});elMirror.__from=el,el.__hoverMir=elMirror,elMirror.setStyle(hoverStyle),this._hoverElements.push(elMirror)}},removeHover:function(el){var elMirror=el.__hoverMir,hoverElements=this._hoverElements,idx=util.indexOf(hoverElements,elMirror);idx>=0&&hoverElements.splice(idx,1),el.__hoverMir=null},clearHover:function(el){for(var hoverElements=this._hoverElements,i=0;i<hoverElements.length;i++){var from=hoverElements[i].__from;from&&(from.__hoverMir=null)}hoverElements.length=0},refreshHover:function(){var hoverElements=this._hoverElements,len=hoverElements.length,hoverLayer=this._hoverlayer;if(hoverLayer&&hoverLayer.clear(),len){timsort(hoverElements,this.storage.displayableSortFunc),hoverLayer||(hoverLayer=this._hoverlayer=this.getLayer(1e5));var scope={};hoverLayer.ctx.save();for(var i=0;i<len;){var el=hoverElements[i],originalEl=el.__from;originalEl&&originalEl.__zr?(i++,originalEl.invisible||(el.transform=originalEl.transform,el.invTransform=originalEl.invTransform,el.__clipPaths=originalEl.__clipPaths,this._doPaintEl(el,hoverLayer,!0,scope))):(hoverElements.splice(i,1),originalEl.__hoverMir=null,len--)}hoverLayer.ctx.restore()}},_startProgessive:function(){function step(){token===self._progressiveToken&&self.storage&&(self._doPaintList(self.storage.getDisplayList()),self._furtherProgressive?(self._progress++,requestAnimationFrame(step)):self._progressiveToken=-1)}var self=this;if(self._furtherProgressive){var token=self._progressiveToken=+new Date;self._progress++,requestAnimationFrame(step)}},_clearProgressive:function(){this._progressiveToken=-1,this._progress=0,util.each(this._progressiveLayers,function(layer){layer.__dirty&&layer.clear()})},_paintList:function(list,paintAll){null==paintAll&&(paintAll=!1),this._updateLayerStatus(list),this._clearProgressive(),this.eachBuildinLayer(preProcessLayer),this._doPaintList(list,paintAll),this.eachBuildinLayer(postProcessLayer)},_doPaintList:function(list,paintAll){function flushProgressiveLayer(layer){var dpr=ctx.dpr||1;ctx.save(),ctx.globalAlpha=1,ctx.shadowBlur=0,currentLayer.__dirty=!0,ctx.setTransform(1,0,0,1,0,0),ctx.drawImage(layer.dom,0,0,width*dpr,height*dpr),ctx.restore()}for(var currentLayer,currentZLevel,ctx,scope,currentProgressiveLayer,layerProgress,progressiveLayerIdx=0,width=this._width,height=this._height,frame=this._progress,i=0,l=list.length;i<l;i++){var el=list[i],elZLevel=this._singleCanvas?0:el.zlevel,elFrame=el.__frame;if(elFrame<0&&currentProgressiveLayer&&(flushProgressiveLayer(currentProgressiveLayer),currentProgressiveLayer=null),currentZLevel!==elZLevel&&(ctx&&ctx.restore(),scope={},currentZLevel=elZLevel,currentLayer=this.getLayer(currentZLevel),currentLayer.isBuildin||log("ZLevel "+currentZLevel+" has been used by unkown layer "+currentLayer.id),ctx=currentLayer.ctx,ctx.save(),currentLayer.__unusedCount=0,(currentLayer.__dirty||paintAll)&&currentLayer.clear()),currentLayer.__dirty||paintAll){if(elFrame>=0){if(!currentProgressiveLayer){if(currentProgressiveLayer=this._progressiveLayers[Math.min(progressiveLayerIdx++,MAX_PROGRESSIVE_LAYER_NUMBER-1)],currentProgressiveLayer.ctx.save(),currentProgressiveLayer.renderScope={},currentProgressiveLayer&&currentProgressiveLayer.__progress>currentProgressiveLayer.__maxProgress){i=currentProgressiveLayer.__nextIdxNotProg-1;continue}layerProgress=currentProgressiveLayer.__progress,currentProgressiveLayer.__dirty||(frame=layerProgress),currentProgressiveLayer.__progress=frame+1}elFrame===frame&&this._doPaintEl(el,currentProgressiveLayer,!0,currentProgressiveLayer.renderScope)}else this._doPaintEl(el,currentLayer,paintAll,scope);el.__dirty=!1}}currentProgressiveLayer&&flushProgressiveLayer(currentProgressiveLayer),ctx&&ctx.restore(),this._furtherProgressive=!1,util.each(this._progressiveLayers,function(layer){layer.__maxProgress>=layer.__progress&&(this._furtherProgressive=!0)},this)},_doPaintEl:function(el,currentLayer,forcePaint,scope){var ctx=currentLayer.ctx,m=el.transform;if((currentLayer.__dirty||forcePaint)&&!el.invisible&&0!==el.style.opacity&&(!m||m[0]||m[3])&&(!el.culling||!isDisplayableCulled(el,this._width,this._height))){var clipPaths=el.__clipPaths;(scope.prevClipLayer!==currentLayer||isClipPathChanged(clipPaths,scope.prevElClipPaths))&&(scope.prevElClipPaths&&(scope.prevClipLayer.ctx.restore(),scope.prevClipLayer=scope.prevElClipPaths=null,scope.prevEl=null),clipPaths&&(ctx.save(),doClip(clipPaths,ctx),scope.prevClipLayer=currentLayer,scope.prevElClipPaths=clipPaths)),el.beforeBrush&&el.beforeBrush(ctx),el.brush(ctx,scope.prevEl||null),scope.prevEl=el,el.afterBrush&&el.afterBrush(ctx)}},getLayer:function(zlevel){if(this._singleCanvas)return this._layers[0];var layer=this._layers[zlevel];return layer||(layer=new Layer("zr_"+zlevel,this,this.dpr),layer.isBuildin=!0,this._layerConfig[zlevel]&&util.merge(layer,this._layerConfig[zlevel],!0),this.insertLayer(zlevel,layer),layer.initContext()),layer},insertLayer:function(zlevel,layer){var layersMap=this._layers,zlevelList=this._zlevelList,len=zlevelList.length,prevLayer=null,i=-1,domRoot=this._domRoot;if(layersMap[zlevel])return void log("ZLevel "+zlevel+" has been used already");if(!isLayerValid(layer))return void log("Layer of zlevel "+zlevel+" is not valid");if(len>0&&zlevel>zlevelList[0]){for(i=0;i<len-1&&!(zlevelList[i]<zlevel&&zlevelList[i+1]>zlevel);i++);prevLayer=layersMap[zlevelList[i]]}if(zlevelList.splice(i+1,0,zlevel),prevLayer){var prevDom=prevLayer.dom;prevDom.nextSibling?domRoot.insertBefore(layer.dom,prevDom.nextSibling):domRoot.appendChild(layer.dom)}else domRoot.firstChild?domRoot.insertBefore(layer.dom,domRoot.firstChild):domRoot.appendChild(layer.dom);layersMap[zlevel]=layer},eachLayer:function(cb,context){var z,i,zlevelList=this._zlevelList;for(i=0;i<zlevelList.length;i++)z=zlevelList[i],cb.call(context,this._layers[z],z)},eachBuildinLayer:function(cb,context){var layer,z,i,zlevelList=this._zlevelList;for(i=0;i<zlevelList.length;i++)z=zlevelList[i],layer=this._layers[z],layer.isBuildin&&cb.call(context,layer,z)},eachOtherLayer:function(cb,context){var layer,z,i,zlevelList=this._zlevelList;for(i=0;i<zlevelList.length;i++)z=zlevelList[i],layer=this._layers[z],layer.isBuildin||cb.call(context,layer,z)},getLayers:function(){return this._layers},_updateLayerStatus:function(list){var layers=this._layers,progressiveLayers=this._progressiveLayers,elCountsLastFrame={},progressiveElCountsLastFrame={};this.eachBuildinLayer(function(layer,z){elCountsLastFrame[z]=layer.elCount,
layer.elCount=0,layer.__dirty=!1}),util.each(progressiveLayers,function(layer,idx){progressiveElCountsLastFrame[idx]=layer.elCount,layer.elCount=0,layer.__dirty=!1});for(var currentProgressiveLayer,lastProgressiveKey,progressiveLayerCount=0,frameCount=0,i=0,l=list.length;i<l;i++){var el=list[i],zlevel=this._singleCanvas?0:el.zlevel,layer=layers[zlevel],elProgress=el.progressive;if(layer&&(layer.elCount++,layer.__dirty=layer.__dirty||el.__dirty),elProgress>=0){lastProgressiveKey!==elProgress&&(lastProgressiveKey=elProgress,frameCount++);var elFrame=el.__frame=frameCount-1;if(!currentProgressiveLayer){var idx=Math.min(progressiveLayerCount,MAX_PROGRESSIVE_LAYER_NUMBER-1);currentProgressiveLayer=progressiveLayers[idx],currentProgressiveLayer||(currentProgressiveLayer=progressiveLayers[idx]=new Layer("progressive",this,this.dpr),currentProgressiveLayer.initContext()),currentProgressiveLayer.__maxProgress=0}currentProgressiveLayer.__dirty=currentProgressiveLayer.__dirty||el.__dirty,currentProgressiveLayer.elCount++,currentProgressiveLayer.__maxProgress=Math.max(currentProgressiveLayer.__maxProgress,elFrame),currentProgressiveLayer.__maxProgress>=currentProgressiveLayer.__progress&&(layer.__dirty=!0)}else el.__frame=-1,currentProgressiveLayer&&(currentProgressiveLayer.__nextIdxNotProg=i,progressiveLayerCount++,currentProgressiveLayer=null)}currentProgressiveLayer&&(progressiveLayerCount++,currentProgressiveLayer.__nextIdxNotProg=i),this.eachBuildinLayer(function(layer,z){elCountsLastFrame[z]!==layer.elCount&&(layer.__dirty=!0)}),progressiveLayers.length=Math.min(progressiveLayerCount,MAX_PROGRESSIVE_LAYER_NUMBER),util.each(progressiveLayers,function(layer,idx){progressiveElCountsLastFrame[idx]!==layer.elCount&&(el.__dirty=!0),layer.__dirty&&(layer.__progress=0)})},clear:function(){return this.eachBuildinLayer(this._clearLayer),this},_clearLayer:function(layer){layer.clear()},configLayer:function(zlevel,config){if(config){var layerConfig=this._layerConfig;layerConfig[zlevel]?util.merge(layerConfig[zlevel],config,!0):layerConfig[zlevel]=config;var layer=this._layers[zlevel];layer&&util.merge(layer,layerConfig[zlevel],!0)}},delLayer:function(zlevel){var layers=this._layers,zlevelList=this._zlevelList,layer=layers[zlevel];layer&&(layer.dom.parentNode.removeChild(layer.dom),delete layers[zlevel],zlevelList.splice(util.indexOf(zlevelList,zlevel),1))},resize:function(width,height){var domRoot=this._domRoot;if(domRoot.style.display="none",width=width||this._getWidth(),height=height||this._getHeight(),domRoot.style.display="",this._width!=width||height!=this._height){domRoot.style.width=width+"px",domRoot.style.height=height+"px";for(var id in this._layers)this._layers[id].resize(width,height);this.refresh(!0)}return this._width=width,this._height=height,this},clearLayer:function(zlevel){var layer=this._layers[zlevel];layer&&layer.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(opts){if(opts=opts||{},this._singleCanvas)return this._layers[0].dom;var imageLayer=new Layer("image",this,opts.pixelRatio||this.dpr);imageLayer.initContext(),imageLayer.clearColor=opts.backgroundColor,imageLayer.clear();for(var displayList=this.storage.getDisplayList(!0),scope={},i=0;i<displayList.length;i++){var el=displayList[i];this._doPaintEl(el,imageLayer,!0,scope)}return imageLayer.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getWidth:function(){var root=this.root,stl=document.defaultView.getComputedStyle(root);return(root.clientWidth||parseInt10(stl.width)||parseInt10(root.style.width))-(parseInt10(stl.paddingLeft)||0)-(parseInt10(stl.paddingRight)||0)|0},_getHeight:function(){var root=this.root,stl=document.defaultView.getComputedStyle(root);return(root.clientHeight||parseInt10(stl.height)||parseInt10(root.style.height))-(parseInt10(stl.paddingTop)||0)-(parseInt10(stl.paddingBottom)||0)|0},_pathToImage:function(id,path,width,height,dpr){var canvas=document.createElement("canvas"),ctx=canvas.getContext("2d");canvas.width=width*dpr,canvas.height=height*dpr,ctx.clearRect(0,0,width*dpr,height*dpr);var pathTransform={position:path.position,rotation:path.rotation,scale:path.scale};path.position=[0,0,0],path.rotation=0,path.scale=[1,1],path&&path.brush(ctx);var ImageShape=__webpack_require__(62),imgShape=new ImageShape({id:id,style:{x:0,y:0,image:canvas}});return null!=pathTransform.position&&(imgShape.position=path.position=pathTransform.position),null!=pathTransform.rotation&&(imgShape.rotation=path.rotation=pathTransform.rotation),null!=pathTransform.scale&&(imgShape.scale=path.scale=pathTransform.scale),imgShape},_createPathToImage:function(){var me=this;return function(id,e,width,height){return me._pathToImage(id,e,width,height,me.dpr)}}},module.exports=Painter},function(module,exports,__webpack_require__){function returnFalse(){return!1}function createDom(id,type,painter,dpr){var newDom=document.createElement(type),width=painter.getWidth(),height=painter.getHeight(),newDomStyle=newDom.style;return newDomStyle.position="absolute",newDomStyle.left=0,newDomStyle.top=0,newDomStyle.width=width+"px",newDomStyle.height=height+"px",newDom.width=width*dpr,newDom.height=height*dpr,newDom.setAttribute("data-zr-dom-id",id),newDom}var util=__webpack_require__(4),config=__webpack_require__(41),Style=__webpack_require__(47),Pattern=__webpack_require__(59),Layer=function(id,painter,dpr){var dom;dpr=dpr||config.devicePixelRatio,"string"==typeof id?dom=createDom(id,"canvas",painter,dpr):util.isObject(id)&&(dom=id,id=dom.id),this.id=id,this.dom=dom;var domStyle=dom.style;domStyle&&(dom.onselectstart=returnFalse,domStyle["-webkit-user-select"]="none",domStyle["user-select"]="none",domStyle["-webkit-touch-callout"]="none",domStyle["-webkit-tap-highlight-color"]="rgba(0,0,0,0)"),this.domBack=null,this.ctxBack=null,this.painter=painter,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=dpr};Layer.prototype={constructor:Layer,elCount:0,__dirty:!0,initContext:function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},createBackBuffer:function(){var dpr=this.dpr;this.domBack=createDom("back-"+this.id,"canvas",this.painter,dpr),this.ctxBack=this.domBack.getContext("2d"),1!=dpr&&this.ctxBack.scale(dpr,dpr)},resize:function(width,height){var dpr=this.dpr,dom=this.dom,domStyle=dom.style,domBack=this.domBack;domStyle.width=width+"px",domStyle.height=height+"px",dom.width=width*dpr,dom.height=height*dpr,domBack&&(domBack.width=width*dpr,domBack.height=height*dpr,1!=dpr&&this.ctxBack.scale(dpr,dpr))},clear:function(clearAll){var dom=this.dom,ctx=this.ctx,width=dom.width,height=dom.height,clearColor=this.clearColor,haveMotionBLur=this.motionBlur&&!clearAll,lastFrameAlpha=this.lastFrameAlpha,dpr=this.dpr;if(haveMotionBLur&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(dom,0,0,width/dpr,height/dpr)),ctx.clearRect(0,0,width,height),clearColor){var clearColorGradientOrPattern;clearColor.colorStops?(clearColorGradientOrPattern=clearColor.__canvasGradient||Style.getGradient(ctx,clearColor,{x:0,y:0,width:width,height:height}),clearColor.__canvasGradient=clearColorGradientOrPattern):clearColor.image&&(clearColorGradientOrPattern=Pattern.prototype.getCanvasPattern.call(clearColor,ctx)),ctx.save(),ctx.fillStyle=clearColorGradientOrPattern||clearColor,ctx.fillRect(0,0,width,height),ctx.restore()}if(haveMotionBLur){var domBack=this.domBack;ctx.save(),ctx.globalAlpha=lastFrameAlpha,ctx.drawImage(domBack,0,0,width,height),ctx.restore()}}},module.exports=Layer},function(module,exports,__webpack_require__){var Gradient=__webpack_require__(61);module.exports=function(ecModel){function encodeColor(seriesModel){var colorAccessPath=(seriesModel.visualColorAccessPath||"itemStyle.normal.color").split("."),data=seriesModel.getData(),color=seriesModel.get(colorAccessPath)||seriesModel.getColorFromPalette(seriesModel.get("name"));data.setVisual("color",color),ecModel.isSeriesFiltered(seriesModel)||("function"!=typeof color||color instanceof Gradient||data.each(function(idx){data.setItemVisual(idx,"color",color(seriesModel.getDataParams(idx)))}),data.each(function(idx){var itemModel=data.getItemModel(idx),color=itemModel.get(colorAccessPath,!0);null!=color&&data.setItemVisual(idx,"color",color)}))}ecModel.eachRawSeries(encodeColor)}},function(module,exports,__webpack_require__){function get(opt,path){path=path.split(",");for(var obj=opt,i=0;i<path.length&&(obj=obj&&obj[path[i]],null!=obj);i++);return obj}function set(opt,path,val,overwrite){path=path.split(",");for(var key,obj=opt,i=0;i<path.length-1;i++)key=path[i],null==obj[key]&&(obj[key]={}),obj=obj[key];(overwrite||null==obj[path[i]])&&(obj[path[i]]=val)}function compatLayoutProperties(option){each(LAYOUT_PROPERTIES,function(prop){prop[0]in option&&!(prop[1]in option)&&(option[prop[1]]=option[prop[0]])})}var zrUtil=__webpack_require__(4),compatStyle=__webpack_require__(95),LAYOUT_PROPERTIES=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],COMPATITABLE_COMPONENTS=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],COMPATITABLE_SERIES=["bar","boxplot","candlestick","chord","effectScatter","funnel","gauge","lines","graph","heatmap","line","map","parallel","pie","radar","sankey","scatter","treemap"],each=zrUtil.each;module.exports=function(option){each(option.series,function(seriesOpt){if(zrUtil.isObject(seriesOpt)){var seriesType=seriesOpt.type;if(compatStyle(seriesOpt),"pie"!==seriesType&&"gauge"!==seriesType||null!=seriesOpt.clockWise&&(seriesOpt.clockwise=seriesOpt.clockWise),"gauge"===seriesType){var pointerColor=get(seriesOpt,"pointer.color");null!=pointerColor&&set(seriesOpt,"itemStyle.normal.color",pointerColor)}for(var i=0;i<COMPATITABLE_SERIES.length;i++)if(COMPATITABLE_SERIES[i]===seriesOpt.type){compatLayoutProperties(seriesOpt);break}}}),option.dataRange&&(option.visualMap=option.dataRange),each(COMPATITABLE_COMPONENTS,function(componentName){var options=option[componentName];options&&(zrUtil.isArray(options)||(options=[options]),each(options,function(option){compatLayoutProperties(option)}))})}},function(module,exports,__webpack_require__){function compatItemStyle(opt){var itemStyleOpt=opt&&opt.itemStyle;itemStyleOpt&&zrUtil.each(POSSIBLE_STYLES,function(styleName){var normalItemStyleOpt=itemStyleOpt.normal,emphasisItemStyleOpt=itemStyleOpt.emphasis;normalItemStyleOpt&&normalItemStyleOpt[styleName]&&(opt[styleName]=opt[styleName]||{},opt[styleName].normal?zrUtil.merge(opt[styleName].normal,normalItemStyleOpt[styleName]):opt[styleName].normal=normalItemStyleOpt[styleName],normalItemStyleOpt[styleName]=null),emphasisItemStyleOpt&&emphasisItemStyleOpt[styleName]&&(opt[styleName]=opt[styleName]||{},opt[styleName].emphasis?zrUtil.merge(opt[styleName].emphasis,emphasisItemStyleOpt[styleName]):opt[styleName].emphasis=emphasisItemStyleOpt[styleName],emphasisItemStyleOpt[styleName]=null)})}var zrUtil=__webpack_require__(4),POSSIBLE_STYLES=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];module.exports=function(seriesOpt){if(seriesOpt){compatItemStyle(seriesOpt),compatItemStyle(seriesOpt.markPoint),compatItemStyle(seriesOpt.markLine);var data=seriesOpt.data;if(data){for(var i=0;i<data.length;i++)compatItemStyle(data[i]);var markPoint=seriesOpt.markPoint;if(markPoint&&markPoint.data)for(var mpData=markPoint.data,i=0;i<mpData.length;i++)compatItemStyle(mpData[i]);var markLine=seriesOpt.markLine;if(markLine&&markLine.data)for(var mlData=markLine.data,i=0;i<mlData.length;i++)zrUtil.isArray(mlData[i])?(compatItemStyle(mlData[i][0]),compatItemStyle(mlData[i][1])):compatItemStyle(mlData[i])}}}},function(module,exports,__webpack_require__){var graphic=__webpack_require__(43),zrUtil=__webpack_require__(4),PI=Math.PI;module.exports=function(api,opts){opts=opts||{},zrUtil.defaults(opts,{text:"loading",color:"#c23531",textColor:"#000",maskColor:"rgba(255, 255, 255, 0.8)",zlevel:0});var mask=new graphic.Rect({style:{fill:opts.maskColor},zlevel:opts.zlevel,z:1e4}),arc=new graphic.Arc({shape:{startAngle:-PI/2,endAngle:-PI/2+.1,r:10},style:{stroke:opts.color,lineCap:"round",lineWidth:5},zlevel:opts.zlevel,z:10001}),labelRect=new graphic.Rect({style:{fill:"none",text:opts.text,textPosition:"right",textDistance:10,textFill:opts.textColor},zlevel:opts.zlevel,z:10001});arc.animateShape(!0).when(1e3,{endAngle:3*PI/2}).start("circularInOut"),arc.animateShape(!0).when(1e3,{startAngle:3*PI/2}).delay(300).start("circularInOut");var group=new graphic.Group;return group.add(arc),group.add(labelRect),group.add(mask),group.resize=function(){var cx=api.getWidth()/2,cy=api.getHeight()/2;arc.setShape({cx:cx,cy:cy});var r=arc.shape.r;labelRect.setShape({x:cx-r,y:cy-r,width:2*r,height:2*r}),mask.setShape({x:0,y:0,width:api.getWidth(),height:api.getHeight()})},group.resize(),group}},function(module,exports,__webpack_require__){(function(global){function normalizeDimensions(dimensions){return zrUtil.isArray(dimensions)||(dimensions=[dimensions]),dimensions}function cloneListForMapAndSample(original,excludeDimensions){var allDimensions=original.dimensions,list=new List(zrUtil.map(allDimensions,original.getDimensionInfo,original),original.hostModel);transferProperties(list,original);for(var storage=list._storage={},originalStorage=original._storage,i=0;i<allDimensions.length;i++){var dim=allDimensions[i],dimStore=originalStorage[dim];zrUtil.indexOf(excludeDimensions,dim)>=0?storage[dim]=new dimStore.constructor(originalStorage[dim].length):storage[dim]=originalStorage[dim]}return list}var UNDEFINED="undefined",globalObj="undefined"==typeof window?global:window,Float64Array=typeof globalObj.Float64Array===UNDEFINED?Array:globalObj.Float64Array,Int32Array=typeof globalObj.Int32Array===UNDEFINED?Array:globalObj.Int32Array,dataCtors={float:Float64Array,int:Int32Array,ordinal:Array,number:Array,time:Array},Model=__webpack_require__(12),DataDiffer=__webpack_require__(98),zrUtil=__webpack_require__(4),modelUtil=__webpack_require__(5),isObject=zrUtil.isObject,TRANSFERABLE_PROPERTIES=["stackedOn","hasItemOption","_nameList","_idList","_rawData"],transferProperties=function(a,b){zrUtil.each(TRANSFERABLE_PROPERTIES.concat(b.__wrappedMethods||[]),function(propName){b.hasOwnProperty(propName)&&(a[propName]=b[propName])}),a.__wrappedMethods=b.__wrappedMethods},List=function(dimensions,hostModel){dimensions=dimensions||["x","y"];for(var dimensionInfos={},dimensionNames=[],i=0;i<dimensions.length;i++){var dimensionName,dimensionInfo={};"string"==typeof dimensions[i]?(dimensionName=dimensions[i],dimensionInfo={name:dimensionName,stackable:!1,type:"number"}):(dimensionInfo=dimensions[i],dimensionName=dimensionInfo.name,dimensionInfo.type=dimensionInfo.type||"number"),dimensionNames.push(dimensionName),dimensionInfos[dimensionName]=dimensionInfo}this.dimensions=dimensionNames,this._dimensionInfos=dimensionInfos,this.hostModel=hostModel,this.dataType,this.indices=[],this._storage={},this._nameList=[],this._idList=[],this._optionModels=[],this.stackedOn=null,this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._rawData,this._extent},listProto=List.prototype;listProto.type="list",listProto.hasItemOption=!0,listProto.getDimension=function(dim){return isNaN(dim)||(dim=this.dimensions[dim]||dim),dim},listProto.getDimensionInfo=function(dim){return zrUtil.clone(this._dimensionInfos[this.getDimension(dim)])},listProto.initData=function(data,nameList,dimValueGetter){if(data=data||[],!zrUtil.isArray(data))throw new Error("Invalid data.");this._rawData=data;var storage=this._storage={},indices=this.indices=[],dimensions=this.dimensions,size=data.length,dimensionInfoMap=this._dimensionInfos,idList=[],nameRepeatCount={};nameList=nameList||[];for(var i=0;i<dimensions.length;i++){var dimInfo=dimensionInfoMap[dimensions[i]],DataCtor=dataCtors[dimInfo.type];storage[dimensions[i]]=new DataCtor(size)}var self=this;dimValueGetter||(self.hasItemOption=!1),dimValueGetter=dimValueGetter||function(dataItem,dimName,dataIndex,dimIndex){var value=modelUtil.getDataItemValue(dataItem);return modelUtil.isDataItemOption(dataItem)&&(self.hasItemOption=!0),modelUtil.converDataValue(value instanceof Array?value[dimIndex]:value,dimensionInfoMap[dimName])};for(var idx=0;idx<data.length;idx++){for(var dataItem=data[idx],k=0;k<dimensions.length;k++){var dim=dimensions[k],dimStorage=storage[dim];dimStorage[idx]=dimValueGetter(dataItem,dim,idx,k)}indices.push(idx)}for(var i=0;i<data.length;i++){nameList[i]||data[i]&&null!=data[i].name&&(nameList[i]=data[i].name);var name=nameList[i]||"",id=data[i]&&data[i].id;!id&&name&&(nameRepeatCount[name]=nameRepeatCount[name]||0,id=name,nameRepeatCount[name]>0&&(id+="__ec__"+nameRepeatCount[name]),nameRepeatCount[name]++),id&&(idList[i]=id)}this._nameList=nameList,this._idList=idList},listProto.count=function(){return this.indices.length},listProto.get=function(dim,idx,stack){var storage=this._storage,dataIndex=this.indices[idx];if(null==dataIndex)return NaN;var value=storage[dim]&&storage[dim][dataIndex];if(stack){var dimensionInfo=this._dimensionInfos[dim];if(dimensionInfo&&dimensionInfo.stackable)for(var stackedOn=this.stackedOn;stackedOn;){var stackedValue=stackedOn.get(dim,idx);(value>=0&&stackedValue>0||value<=0&&stackedValue<0)&&(value+=stackedValue),stackedOn=stackedOn.stackedOn}}return value},listProto.getValues=function(dimensions,idx,stack){var values=[];zrUtil.isArray(dimensions)||(stack=idx,idx=dimensions,dimensions=this.dimensions);for(var i=0,len=dimensions.length;i<len;i++)values.push(this.get(dimensions[i],idx,stack));return values},listProto.hasValue=function(idx){for(var dimensions=this.dimensions,dimensionInfos=this._dimensionInfos,i=0,len=dimensions.length;i<len;i++)if("ordinal"!==dimensionInfos[dimensions[i]].type&&isNaN(this.get(dimensions[i],idx)))return!1;return!0},listProto.getDataExtent=function(dim,stack){dim=this.getDimension(dim);var dimData=this._storage[dim],dimInfo=this.getDimensionInfo(dim);stack=dimInfo&&dimInfo.stackable&&stack;var value,dimExtent=(this._extent||(this._extent={}))[dim+!!stack];if(dimExtent)return dimExtent;if(dimData){for(var min=1/0,max=-(1/0),i=0,len=this.count();i<len;i++)value=this.get(dim,i,stack),value<min&&(min=value),value>max&&(max=value);return this._extent[dim+!!stack]=[min,max]}return[1/0,-(1/0)]},listProto.getSum=function(dim,stack){var dimData=this._storage[dim],sum=0;if(dimData)for(var i=0,len=this.count();i<len;i++){var value=this.get(dim,i,stack);isNaN(value)||(sum+=value)}return sum},listProto.indexOf=function(dim,value){var storage=this._storage,dimData=storage[dim],indices=this.indices;if(dimData)for(var i=0,len=indices.length;i<len;i++){var rawIndex=indices[i];if(dimData[rawIndex]===value)return i}return-1},listProto.indexOfName=function(name){for(var indices=this.indices,nameList=this._nameList,i=0,len=indices.length;i<len;i++){var rawIndex=indices[i];if(nameList[rawIndex]===name)return i}return-1},listProto.indexOfRawIndex=function(rawIndex){for(var indices=this.indices,left=0,right=indices.length-1;left<=right;){var mid=(left+right)/2|0;if(indices[mid]<rawIndex)left=mid+1;else{if(!(indices[mid]>rawIndex))return mid;right=mid-1}}return-1},listProto.indexOfNearest=function(dim,value,stack,maxDistance){var storage=this._storage,dimData=storage[dim];null==maxDistance&&(maxDistance=1/0);var nearestIdx=-1;if(dimData)for(var minDist=Number.MAX_VALUE,i=0,len=this.count();i<len;i++){var diff=value-this.get(dim,i,stack),dist=Math.abs(diff);diff<=maxDistance&&(dist<minDist||dist===minDist&&diff>0)&&(minDist=dist,nearestIdx=i)}return nearestIdx},listProto.getRawIndex=function(idx){var rawIdx=this.indices[idx];return null==rawIdx?-1:rawIdx},listProto.getRawDataItem=function(idx){return this._rawData[this.getRawIndex(idx)]},listProto.getName=function(idx){return this._nameList[this.indices[idx]]||""},listProto.getId=function(idx){return this._idList[this.indices[idx]]||this.getRawIndex(idx)+""},listProto.each=function(dims,cb,stack,context){"function"==typeof dims&&(context=stack,stack=cb,cb=dims,dims=[]),dims=zrUtil.map(normalizeDimensions(dims),this.getDimension,this);var value=[],dimSize=dims.length,indices=this.indices;context=context||this;for(var i=0;i<indices.length;i++)switch(dimSize){case 0:cb.call(context,i);break;case 1:cb.call(context,this.get(dims[0],i,stack),i);break;case 2:cb.call(context,this.get(dims[0],i,stack),this.get(dims[1],i,stack),i);break;default:for(var k=0;k<dimSize;k++)value[k]=this.get(dims[k],i,stack);value[k]=i,cb.apply(context,value)}},listProto.filterSelf=function(dimensions,cb,stack,context){"function"==typeof dimensions&&(context=stack,stack=cb,cb=dimensions,dimensions=[]),dimensions=zrUtil.map(normalizeDimensions(dimensions),this.getDimension,this);var newIndices=[],value=[],dimSize=dimensions.length,indices=this.indices;context=context||this;for(var i=0;i<indices.length;i++){var keep;if(1===dimSize)keep=cb.call(context,this.get(dimensions[0],i,stack),i);else{for(var k=0;k<dimSize;k++)value[k]=this.get(dimensions[k],i,stack);value[k]=i,keep=cb.apply(context,value)}keep&&newIndices.push(indices[i])}return this.indices=newIndices,this._extent={},this},listProto.mapArray=function(dimensions,cb,stack,context){"function"==typeof dimensions&&(context=stack,stack=cb,cb=dimensions,dimensions=[]);var result=[];return this.each(dimensions,function(){result.push(cb&&cb.apply(this,arguments))},stack,context),result},listProto.map=function(dimensions,cb,stack,context){dimensions=zrUtil.map(normalizeDimensions(dimensions),this.getDimension,this);var list=cloneListForMapAndSample(this,dimensions),indices=list.indices=this.indices,storage=list._storage,tmpRetValue=[];return this.each(dimensions,function(){var idx=arguments[arguments.length-1],retValue=cb&&cb.apply(this,arguments);if(null!=retValue){"number"==typeof retValue&&(tmpRetValue[0]=retValue,retValue=tmpRetValue);for(var i=0;i<retValue.length;i++){var dim=dimensions[i],dimStore=storage[dim],rawIdx=indices[idx];dimStore&&(dimStore[rawIdx]=retValue[i])}}},stack,context),list},listProto.downSample=function(dimension,rate,sampleValue,sampleIndex){for(var list=cloneListForMapAndSample(this,[dimension]),storage=this._storage,targetStorage=list._storage,originalIndices=this.indices,indices=list.indices=[],frameValues=[],frameIndices=[],frameSize=Math.floor(1/rate),dimStore=targetStorage[dimension],len=this.count(),i=0;i<storage[dimension].length;i++)targetStorage[dimension][i]=storage[dimension][i];for(var i=0;i<len;i+=frameSize){frameSize>len-i&&(frameSize=len-i,frameValues.length=frameSize);for(var k=0;k<frameSize;k++){var idx=originalIndices[i+k];frameValues[k]=dimStore[idx],frameIndices[k]=idx}var value=sampleValue(frameValues),idx=frameIndices[sampleIndex(frameValues,value)||0];dimStore[idx]=value,indices.push(idx)}return list},listProto.getItemModel=function(idx){var hostModel=this.hostModel;return idx=this.indices[idx],new Model(this._rawData[idx],hostModel,hostModel&&hostModel.ecModel)},listProto.diff=function(otherList){var idList=this._idList,otherIdList=otherList&&otherList._idList;return new DataDiffer(otherList?otherList.indices:[],this.indices,function(idx){return otherIdList[idx]||idx+""},function(idx){return idList[idx]||idx+""})},listProto.getVisual=function(key){var visual=this._visual;return visual&&visual[key]},listProto.setVisual=function(key,val){if(isObject(key))for(var name in key)key.hasOwnProperty(name)&&this.setVisual(name,key[name]);else this._visual=this._visual||{},this._visual[key]=val},listProto.setLayout=function(key,val){if(isObject(key))for(var name in key)key.hasOwnProperty(name)&&this.setLayout(name,key[name]);else this._layout[key]=val},listProto.getLayout=function(key){return this._layout[key]},listProto.getItemLayout=function(idx){return this._itemLayouts[idx]},listProto.setItemLayout=function(idx,layout,merge){this._itemLayouts[idx]=merge?zrUtil.extend(this._itemLayouts[idx]||{},layout):layout},listProto.clearItemLayouts=function(){this._itemLayouts.length=0},listProto.getItemVisual=function(idx,key,ignoreParent){var itemVisual=this._itemVisuals[idx],val=itemVisual&&itemVisual[key];return null!=val||ignoreParent?val:this.getVisual(key)},listProto.setItemVisual=function(idx,key,value){var itemVisual=this._itemVisuals[idx]||{};if(this._itemVisuals[idx]=itemVisual,isObject(key))for(var name in key)key.hasOwnProperty(name)&&(itemVisual[name]=key[name]);else itemVisual[key]=value},listProto.clearAllVisual=function(){this._visual={},this._itemVisuals=[]};var setItemDataAndSeriesIndex=function(child){child.seriesIndex=this.seriesIndex,child.dataIndex=this.dataIndex,child.dataType=this.dataType};listProto.setItemGraphicEl=function(idx,el){var hostModel=this.hostModel;el&&(el.dataIndex=idx,el.dataType=this.dataType,el.seriesIndex=hostModel&&hostModel.seriesIndex,"group"===el.type&&el.traverse(setItemDataAndSeriesIndex,el)),this._graphicEls[idx]=el},listProto.getItemGraphicEl=function(idx){return this._graphicEls[idx]},listProto.eachItemGraphicEl=function(cb,context){zrUtil.each(this._graphicEls,function(el,idx){el&&cb&&cb.call(context,el,idx)})},listProto.cloneShallow=function(){var dimensionInfoList=zrUtil.map(this.dimensions,this.getDimensionInfo,this),list=new List(dimensionInfoList,this.hostModel);return list._storage=this._storage,transferProperties(list,this),list.indices=this.indices.slice(),this._extent&&(list._extent=zrUtil.extend({},this._extent)),list},listProto.wrapMethod=function(methodName,injectFunction){var originalMethod=this[methodName];"function"==typeof originalMethod&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(methodName),this[methodName]=function(){var res=originalMethod.apply(this,arguments);return injectFunction.apply(this,[res].concat(zrUtil.slice(arguments)))})},listProto.TRANSFERABLE_METHODS=["cloneShallow","downSample","map"],listProto.CHANGABLE_METHODS=["filterSelf"],module.exports=List}).call(exports,function(){return this}())},function(module,exports){"use strict";function defaultKeyGetter(item){return item}function DataDiffer(oldArr,newArr,oldKeyGetter,newKeyGetter){this._old=oldArr,this._new=newArr,this._oldKeyGetter=oldKeyGetter||defaultKeyGetter,this._newKeyGetter=newKeyGetter||defaultKeyGetter}function initIndexMap(arr,map,keyArr,keyGetter){for(var i=0;i<arr.length;i++){var key=keyGetter(arr[i],i),existence=map[key];null==existence?(keyArr.push(key),map[key]=i):(existence.length||(map[key]=existence=[existence]),existence.push(i))}}DataDiffer.prototype={constructor:DataDiffer,add:function(func){return this._add=func,this},update:function(func){return this._update=func,this},remove:function(func){return this._remove=func,this},execute:function(){var i,oldArr=this._old,newArr=this._new,oldKeyGetter=this._oldKeyGetter,newKeyGetter=this._newKeyGetter,oldDataIndexMap={},newDataIndexMap={},oldDataKeyArr=[],newDataKeyArr=[];for(initIndexMap(oldArr,oldDataIndexMap,oldDataKeyArr,oldKeyGetter),initIndexMap(newArr,newDataIndexMap,newDataKeyArr,newKeyGetter),i=0;i<oldArr.length;i++){var key=oldDataKeyArr[i],idx=newDataIndexMap[key];if(null!=idx){var len=idx.length;len?(1===len&&(newDataIndexMap[key]=null),idx=idx.unshift()):newDataIndexMap[key]=null,this._update&&this._update(idx,i)}else this._remove&&this._remove(i)}for(var i=0;i<newDataKeyArr.length;i++){var key=newDataKeyArr[i];if(newDataIndexMap.hasOwnProperty(key)){var idx=newDataIndexMap[key];if(null==idx)continue;if(idx.length)for(var j=0,len=idx.length;j<len;j++)this._add&&this._add(idx[j]);else this._add&&this._add(idx)}}}},module.exports=DataDiffer},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4),echarts=__webpack_require__(1),PRIORITY=echarts.PRIORITY;__webpack_require__(100),__webpack_require__(103),echarts.registerVisual(zrUtil.curry(__webpack_require__(109),"line","circle","line")),echarts.registerLayout(zrUtil.curry(__webpack_require__(110),"line")),echarts.registerProcessor(PRIORITY.PROCESSOR.STATISTIC,zrUtil.curry(__webpack_require__(111),"line")),__webpack_require__(112)},function(module,exports,__webpack_require__){"use strict";var createListFromArray=__webpack_require__(101),SeriesModel=__webpack_require__(28);module.exports=SeriesModel.extend({type:"series.line",dependencies:["grid","polar"],getInitialData:function(option,ecModel){var coordSys=option.coordinateSystem;if("polar"!==coordSys&&"cartesian2d"!==coordSys)throw new Error("Line not support coordinateSystem besides cartesian and polar");return createListFromArray(option.data,this,ecModel)},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,clipOverflow:!0,label:{normal:{position:"top"}},lineStyle:{normal:{width:2,type:"solid"}},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:!1,connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0}})},function(module,exports,__webpack_require__){"use strict";function firstDataNotNull(data){for(var i=0;i<data.length&&null==data[i];)i++;return data[i]}function ifNeedCompleteOrdinalData(data){var sampleItem=firstDataNotNull(data);return null!=sampleItem&&!zrUtil.isArray(getDataItemValue(sampleItem))}function createListFromArray(data,seriesModel,ecModel){if(data=data||[],!zrUtil.isArray(data))throw new Error("Invalid data.");var coordSysName=seriesModel.get("coordinateSystem"),creator=creators[coordSysName],registeredCoordSys=CoordinateSystem.get(coordSysName),axesInfo=creator&&creator(data,seriesModel,ecModel),dimensions=axesInfo&&axesInfo.dimensions;dimensions||(dimensions=registeredCoordSys&&registeredCoordSys.dimensions||["x","y"],dimensions=completeDimensions(dimensions,data,dimensions.concat(["value"])));var categoryIndex=axesInfo?axesInfo.categoryIndex:-1,list=new List(dimensions,seriesModel),nameList=createNameList(axesInfo,data),categories={},dimValueGetter=categoryIndex>=0&&ifNeedCompleteOrdinalData(data)?function(itemOpt,dimName,dataIndex,dimIndex){return modelUtil.isDataItemOption(itemOpt)&&(list.hasItemOption=!0),dimIndex===categoryIndex?dataIndex:converDataValue(getDataItemValue(itemOpt),dimensions[dimIndex])}:function(itemOpt,dimName,dataIndex,dimIndex){var value=getDataItemValue(itemOpt),val=converDataValue(value&&value[dimIndex],dimensions[dimIndex]);modelUtil.isDataItemOption(itemOpt)&&(list.hasItemOption=!0);var categoryAxesModels=axesInfo&&axesInfo.categoryAxesModels;return categoryAxesModels&&categoryAxesModels[dimName]&&"string"==typeof val&&(categories[dimName]=categories[dimName]||categoryAxesModels[dimName].getCategories(),val=zrUtil.indexOf(categories[dimName],val),val<0&&!isNaN(val)&&(val=+val)),val};return list.hasItemOption=!1,list.initData(data,nameList,dimValueGetter),list}function isStackable(axisType){return"category"!==axisType&&"time"!==axisType}function getDimTypeByAxis(axisType){return"category"===axisType?"ordinal":"time"===axisType?"time":"float"}function createNameList(result,data){var categoryAxisModel,nameList=[],categoryDim=result&&result.dimensions[result.categoryIndex];if(categoryDim&&(categoryAxisModel=result.categoryAxesModels[categoryDim.name]),categoryAxisModel){var categories=categoryAxisModel.getCategories();if(categories){var dataLen=data.length;if(zrUtil.isArray(data[0])&&data[0].length>1){nameList=[];for(var i=0;i<dataLen;i++)nameList[i]=categories[data[i][result.categoryIndex||0]]}else nameList=categories.slice(0)}}return nameList}var List=__webpack_require__(97),completeDimensions=__webpack_require__(102),zrUtil=__webpack_require__(4),modelUtil=__webpack_require__(5),CoordinateSystem=__webpack_require__(26),getDataItemValue=modelUtil.getDataItemValue,converDataValue=modelUtil.converDataValue,creators={cartesian2d:function(data,seriesModel,ecModel){var axesModels=zrUtil.map(["xAxis","yAxis"],function(name){
return ecModel.queryComponents({mainType:name,index:seriesModel.get(name+"Index"),id:seriesModel.get(name+"Id")})[0]}),xAxisModel=axesModels[0],yAxisModel=axesModels[1];if(!xAxisModel)throw new Error('xAxis "'+zrUtil.retrieve(seriesModel.get("xAxisIndex"),seriesModel.get("xAxisId"),0)+'" not found');if(!yAxisModel)throw new Error('yAxis "'+zrUtil.retrieve(seriesModel.get("xAxisIndex"),seriesModel.get("yAxisId"),0)+'" not found');var xAxisType=xAxisModel.get("type"),yAxisType=yAxisModel.get("type"),dimensions=[{name:"x",type:getDimTypeByAxis(xAxisType),stackable:isStackable(xAxisType)},{name:"y",type:getDimTypeByAxis(yAxisType),stackable:isStackable(yAxisType)}],isXAxisCateogry="category"===xAxisType,isYAxisCategory="category"===yAxisType;completeDimensions(dimensions,data,["x","y","z"]);var categoryAxesModels={};return isXAxisCateogry&&(categoryAxesModels.x=xAxisModel),isYAxisCategory&&(categoryAxesModels.y=yAxisModel),{dimensions:dimensions,categoryIndex:isXAxisCateogry?0:isYAxisCategory?1:-1,categoryAxesModels:categoryAxesModels}},polar:function(data,seriesModel,ecModel){var polarModel=ecModel.queryComponents({mainType:"polar",index:seriesModel.get("polarIndex"),id:seriesModel.get("polarId")})[0],angleAxisModel=polarModel.findAxisModel("angleAxis"),radiusAxisModel=polarModel.findAxisModel("radiusAxis");if(!angleAxisModel)throw new Error("angleAxis option not found");if(!radiusAxisModel)throw new Error("radiusAxis option not found");var radiusAxisType=radiusAxisModel.get("type"),angleAxisType=angleAxisModel.get("type"),dimensions=[{name:"radius",type:getDimTypeByAxis(radiusAxisType),stackable:isStackable(radiusAxisType)},{name:"angle",type:getDimTypeByAxis(angleAxisType),stackable:isStackable(angleAxisType)}],isAngleAxisCateogry="category"===angleAxisType,isRadiusAxisCateogry="category"===radiusAxisType;completeDimensions(dimensions,data,["radius","angle","value"]);var categoryAxesModels={};return isRadiusAxisCateogry&&(categoryAxesModels.radius=radiusAxisModel),isAngleAxisCateogry&&(categoryAxesModels.angle=angleAxisModel),{dimensions:dimensions,categoryIndex:isAngleAxisCateogry?1:isRadiusAxisCateogry?0:-1,categoryAxesModels:categoryAxesModels}},geo:function(data,seriesModel,ecModel){return{dimensions:completeDimensions([{name:"lng"},{name:"lat"}],data,["lng","lat","value"])}}};module.exports=createListFromArray},function(module,exports,__webpack_require__){function completeDimensions(dimensions,data,defaultNames,extraPrefix){if(!data)return dimensions;var value0=retrieveValue(data[0]),dimSize=zrUtil.isArray(value0)&&value0.length||1;defaultNames=defaultNames||[],extraPrefix=extraPrefix||"extra";for(var i=0;i<dimSize;i++)if(!dimensions[i]){var name=defaultNames[i]||extraPrefix+(i-defaultNames.length);dimensions[i]=guessOrdinal(data,i)?{type:"ordinal",name:name}:name}return dimensions}function retrieveValue(o){return zrUtil.isArray(o)?o:zrUtil.isObject(o)?o.value:o}var zrUtil=__webpack_require__(4),guessOrdinal=completeDimensions.guessOrdinal=function(data,dimIndex){for(var i=0,len=data.length;i<len;i++){var value=retrieveValue(data[i]);if(!zrUtil.isArray(value))return!1;var value=value[dimIndex];if(null!=value&&isFinite(value))return!1;if(zrUtil.isString(value)&&"-"!==value)return!0}return!1};module.exports=completeDimensions},function(module,exports,__webpack_require__){"use strict";function isPointsSame(points1,points2){if(points1.length===points2.length){for(var i=0;i<points1.length;i++){var p1=points1[i],p2=points2[i];if(p1[0]!==p2[0]||p1[1]!==p2[1])return}return!0}}function getSmooth(smooth){return"number"==typeof smooth?smooth:smooth?.3:0}function getAxisExtentWithGap(axis){var extent=axis.getGlobalExtent();if(axis.onBand){var halfBandWidth=axis.getBandWidth()/2-1,dir=extent[1]>extent[0]?1:-1;extent[0]+=dir*halfBandWidth,extent[1]-=dir*halfBandWidth}return extent}function sign(val){return val>=0?1:-1}function getStackedOnPoints(coordSys,data){var baseAxis=coordSys.getBaseAxis(),valueAxis=coordSys.getOtherAxis(baseAxis),valueStart=baseAxis.onZero?0:valueAxis.scale.getExtent()[0],valueDim=valueAxis.dim,baseDataOffset="x"===valueDim||"radius"===valueDim?1:0;return data.mapArray([valueDim],function(val,idx){for(var stackedOnSameSign,stackedOn=data.stackedOn;stackedOn&&sign(stackedOn.get(valueDim,idx))===sign(val);){stackedOnSameSign=stackedOn;break}var stackedData=[];return stackedData[baseDataOffset]=data.get(baseAxis.dim,idx),stackedData[1-baseDataOffset]=stackedOnSameSign?stackedOnSameSign.get(valueDim,idx,!0):valueStart,coordSys.dataToPoint(stackedData)},!0)}function queryDataIndex(data,payload){return null!=payload.dataIndex?payload.dataIndex:null!=payload.name?data.indexOfName(payload.name):void 0}function createGridClipShape(cartesian,hasAnimation,seriesModel){var xExtent=getAxisExtentWithGap(cartesian.getAxis("x")),yExtent=getAxisExtentWithGap(cartesian.getAxis("y")),isHorizontal=cartesian.getBaseAxis().isHorizontal(),x=Math.min(xExtent[0],xExtent[1]),y=Math.min(yExtent[0],yExtent[1]),width=Math.max(xExtent[0],xExtent[1])-x,height=Math.max(yExtent[0],yExtent[1])-y,lineWidth=seriesModel.get("lineStyle.normal.width")||2,expandSize=seriesModel.get("clipOverflow")?lineWidth/2:Math.max(width,height);isHorizontal?(y-=expandSize,height+=2*expandSize):(x-=expandSize,width+=2*expandSize);var clipPath=new graphic.Rect({shape:{x:x,y:y,width:width,height:height}});return hasAnimation&&(clipPath.shape[isHorizontal?"width":"height"]=0,graphic.initProps(clipPath,{shape:{width:width,height:height}},seriesModel)),clipPath}function createPolarClipShape(polar,hasAnimation,seriesModel){var angleAxis=polar.getAngleAxis(),radiusAxis=polar.getRadiusAxis(),radiusExtent=radiusAxis.getExtent(),angleExtent=angleAxis.getExtent(),RADIAN=Math.PI/180,clipPath=new graphic.Sector({shape:{cx:polar.cx,cy:polar.cy,r0:radiusExtent[0],r:radiusExtent[1],startAngle:-angleExtent[0]*RADIAN,endAngle:-angleExtent[1]*RADIAN,clockwise:angleAxis.inverse}});return hasAnimation&&(clipPath.shape.endAngle=-angleExtent[0]*RADIAN,graphic.initProps(clipPath,{shape:{endAngle:-angleExtent[1]*RADIAN}},seriesModel)),clipPath}function createClipShape(coordSys,hasAnimation,seriesModel){return"polar"===coordSys.type?createPolarClipShape(coordSys,hasAnimation,seriesModel):createGridClipShape(coordSys,hasAnimation,seriesModel)}function turnPointsIntoStep(points,coordSys,stepTurnAt){for(var baseAxis=coordSys.getBaseAxis(),baseIndex="x"===baseAxis.dim||"radius"===baseAxis.dim?0:1,stepPoints=[],i=0;i<points.length-1;i++){var nextPt=points[i+1],pt=points[i];stepPoints.push(pt);var stepPt=[];switch(stepTurnAt){case"end":stepPt[baseIndex]=nextPt[baseIndex],stepPt[1-baseIndex]=pt[1-baseIndex],stepPoints.push(stepPt);break;case"middle":var middle=(pt[baseIndex]+nextPt[baseIndex])/2,stepPt2=[];stepPt[baseIndex]=stepPt2[baseIndex]=middle,stepPt[1-baseIndex]=pt[1-baseIndex],stepPt2[1-baseIndex]=nextPt[1-baseIndex],stepPoints.push(stepPt),stepPoints.push(stepPt2);break;default:stepPt[baseIndex]=pt[baseIndex],stepPt[1-baseIndex]=nextPt[1-baseIndex],stepPoints.push(stepPt)}}return points[i]&&stepPoints.push(points[i]),stepPoints}function clamp(number,extent){return Math.max(Math.min(number,extent[1]),extent[0])}function getVisualGradient(data,coordSys){var visualMetaList=data.getVisual("visualMeta");if(visualMetaList&&visualMetaList.length){for(var visualMeta,i=visualMetaList.length-1;i>=0;i--)if(visualMetaList[i].dimension<2){visualMeta=visualMetaList[i];break}if(!visualMeta||"cartesian2d"!==coordSys.type)return void console.warn("Visual map on line style only support x or y dimension.");var dimension=visualMeta.dimension,dimName=data.dimensions[dimension],dataExtent=data.getDataExtent(dimName),stops=visualMeta.stops,colorStops=[];stops[0].interval&&stops.sort(function(a,b){return a.interval[0]-b.interval[0]});var firstStop=stops[0],lastStop=stops[stops.length-1],min=firstStop.interval?clamp(firstStop.interval[0],dataExtent):firstStop.value,max=lastStop.interval?clamp(lastStop.interval[1],dataExtent):lastStop.value,stopsSpan=max-min;if(0===stopsSpan)return data.getItemVisual(0,"color");for(var i=0;i<stops.length;i++)if(stops[i].interval){if(stops[i].interval[1]===stops[i].interval[0])continue;colorStops.push({offset:(clamp(stops[i].interval[0],dataExtent)-min)/stopsSpan,color:stops[i].color},{offset:(clamp(stops[i].interval[1],dataExtent)-min)/stopsSpan,color:stops[i].color})}else colorStops.push({offset:(stops[i].value-min)/stopsSpan,color:stops[i].color});var gradient=new graphic.LinearGradient(0,0,0,0,colorStops,!0),axis=coordSys.getAxis(dimName),start=Math.round(axis.toGlobalCoord(axis.dataToCoord(min))),end=Math.round(axis.toGlobalCoord(axis.dataToCoord(max)));return gradient[dimName]=start,gradient[dimName+"2"]=end,gradient}}var zrUtil=__webpack_require__(4),SymbolDraw=__webpack_require__(104),Symbol=__webpack_require__(105),lineAnimationDiff=__webpack_require__(107),graphic=__webpack_require__(43),polyHelper=__webpack_require__(108),ChartView=__webpack_require__(42);module.exports=ChartView.extend({type:"line",init:function(){var lineGroup=new graphic.Group,symbolDraw=new SymbolDraw;this.group.add(symbolDraw.group),this._symbolDraw=symbolDraw,this._lineGroup=lineGroup},render:function(seriesModel,ecModel,api){var coordSys=seriesModel.coordinateSystem,group=this.group,data=seriesModel.getData(),lineStyleModel=seriesModel.getModel("lineStyle.normal"),areaStyleModel=seriesModel.getModel("areaStyle.normal"),points=data.mapArray(data.getItemLayout,!0),isCoordSysPolar="polar"===coordSys.type,prevCoordSys=this._coordSys,symbolDraw=this._symbolDraw,polyline=this._polyline,polygon=this._polygon,lineGroup=this._lineGroup,hasAnimation=seriesModel.get("animation"),isAreaChart=!areaStyleModel.isEmpty(),stackedOnPoints=getStackedOnPoints(coordSys,data),showSymbol=seriesModel.get("showSymbol"),isSymbolIgnore=showSymbol&&!isCoordSysPolar&&!seriesModel.get("showAllSymbol")&&this._getSymbolIgnoreFunc(data,coordSys),oldData=this._data;oldData&&oldData.eachItemGraphicEl(function(el,idx){el.__temp&&(group.remove(el),oldData.setItemGraphicEl(idx,null))}),showSymbol||symbolDraw.remove(),group.add(lineGroup);var step=!isCoordSysPolar&&seriesModel.get("step");polyline&&prevCoordSys.type===coordSys.type&&step===this._step?(isAreaChart&&!polygon?polygon=this._newPolygon(points,stackedOnPoints,coordSys,hasAnimation):polygon&&!isAreaChart&&(lineGroup.remove(polygon),polygon=this._polygon=null),lineGroup.setClipPath(createClipShape(coordSys,!1,seriesModel)),showSymbol&&symbolDraw.updateData(data,isSymbolIgnore),data.eachItemGraphicEl(function(el){el.stopAnimation(!0)}),isPointsSame(this._stackedOnPoints,stackedOnPoints)&&isPointsSame(this._points,points)||(hasAnimation?this._updateAnimation(data,stackedOnPoints,coordSys,api,step):(step&&(points=turnPointsIntoStep(points,coordSys,step),stackedOnPoints=turnPointsIntoStep(stackedOnPoints,coordSys,step)),polyline.setShape({points:points}),polygon&&polygon.setShape({points:points,stackedOnPoints:stackedOnPoints})))):(showSymbol&&symbolDraw.updateData(data,isSymbolIgnore),step&&(points=turnPointsIntoStep(points,coordSys,step),stackedOnPoints=turnPointsIntoStep(stackedOnPoints,coordSys,step)),polyline=this._newPolyline(points,coordSys,hasAnimation),isAreaChart&&(polygon=this._newPolygon(points,stackedOnPoints,coordSys,hasAnimation)),lineGroup.setClipPath(createClipShape(coordSys,!0,seriesModel)));var visualColor=getVisualGradient(data,coordSys)||data.getVisual("color");polyline.useStyle(zrUtil.defaults(lineStyleModel.getLineStyle(),{fill:"none",stroke:visualColor,lineJoin:"bevel"}));var smooth=seriesModel.get("smooth");if(smooth=getSmooth(seriesModel.get("smooth")),polyline.setShape({smooth:smooth,smoothMonotone:seriesModel.get("smoothMonotone"),connectNulls:seriesModel.get("connectNulls")}),polygon){var stackedOn=data.stackedOn,stackedOnSmooth=0;if(polygon.useStyle(zrUtil.defaults(areaStyleModel.getAreaStyle(),{fill:visualColor,opacity:.7,lineJoin:"bevel"})),stackedOn){var stackedOnSeries=stackedOn.hostModel;stackedOnSmooth=getSmooth(stackedOnSeries.get("smooth"))}polygon.setShape({smooth:smooth,stackedOnSmooth:stackedOnSmooth,smoothMonotone:seriesModel.get("smoothMonotone"),connectNulls:seriesModel.get("connectNulls")})}this._data=data,this._coordSys=coordSys,this._stackedOnPoints=stackedOnPoints,this._points=points,this._step=step},highlight:function(seriesModel,ecModel,api,payload){var data=seriesModel.getData(),dataIndex=queryDataIndex(data,payload);if(!(dataIndex instanceof Array)&&null!=dataIndex&&dataIndex>=0){var symbol=data.getItemGraphicEl(dataIndex);if(!symbol){var pt=data.getItemLayout(dataIndex);symbol=new Symbol(data,dataIndex),symbol.position=pt,symbol.setZ(seriesModel.get("zlevel"),seriesModel.get("z")),symbol.ignore=isNaN(pt[0])||isNaN(pt[1]),symbol.__temp=!0,data.setItemGraphicEl(dataIndex,symbol),symbol.stopSymbolAnimation(!0),this.group.add(symbol)}symbol.highlight()}else ChartView.prototype.highlight.call(this,seriesModel,ecModel,api,payload)},downplay:function(seriesModel,ecModel,api,payload){var data=seriesModel.getData(),dataIndex=queryDataIndex(data,payload);if(null!=dataIndex&&dataIndex>=0){var symbol=data.getItemGraphicEl(dataIndex);symbol&&(symbol.__temp?(data.setItemGraphicEl(dataIndex,null),this.group.remove(symbol)):symbol.downplay())}else ChartView.prototype.downplay.call(this,seriesModel,ecModel,api,payload)},_newPolyline:function(points){var polyline=this._polyline;return polyline&&this._lineGroup.remove(polyline),polyline=new polyHelper.Polyline({shape:{points:points},silent:!0,z2:10}),this._lineGroup.add(polyline),this._polyline=polyline,polyline},_newPolygon:function(points,stackedOnPoints){var polygon=this._polygon;return polygon&&this._lineGroup.remove(polygon),polygon=new polyHelper.Polygon({shape:{points:points,stackedOnPoints:stackedOnPoints},silent:!0}),this._lineGroup.add(polygon),this._polygon=polygon,polygon},_getSymbolIgnoreFunc:function(data,coordSys){var categoryAxis=coordSys.getAxesByScale("ordinal")[0];if(categoryAxis&&categoryAxis.isLabelIgnored)return zrUtil.bind(categoryAxis.isLabelIgnored,categoryAxis)},_updateAnimation:function(data,stackedOnPoints,coordSys,api,step){var polyline=this._polyline,polygon=this._polygon,seriesModel=data.hostModel,diff=lineAnimationDiff(this._data,data,this._stackedOnPoints,stackedOnPoints,this._coordSys,coordSys),current=diff.current,stackedOnCurrent=diff.stackedOnCurrent,next=diff.next,stackedOnNext=diff.stackedOnNext;step&&(current=turnPointsIntoStep(diff.current,coordSys,step),stackedOnCurrent=turnPointsIntoStep(diff.stackedOnCurrent,coordSys,step),next=turnPointsIntoStep(diff.next,coordSys,step),stackedOnNext=turnPointsIntoStep(diff.stackedOnNext,coordSys,step)),polyline.shape.__points=diff.current,polyline.shape.points=current,graphic.updateProps(polyline,{shape:{points:next}},seriesModel),polygon&&(polygon.setShape({points:current,stackedOnPoints:stackedOnCurrent}),graphic.updateProps(polygon,{shape:{points:next,stackedOnPoints:stackedOnNext,__points:diff.next}},seriesModel));for(var updatedDataInfo=[],diffStatus=diff.status,i=0;i<diffStatus.length;i++){var cmd=diffStatus[i].cmd;if("="===cmd){var el=data.getItemGraphicEl(diffStatus[i].idx1);el&&updatedDataInfo.push({el:el,ptIdx:i})}}polyline.animators&&polyline.animators.length&&polyline.animators[0].during(function(){for(var i=0;i<updatedDataInfo.length;i++){var el=updatedDataInfo[i].el;el.attr("position",polyline.shape.__points[updatedDataInfo[i].ptIdx])}})},remove:function(ecModel){var group=this.group,oldData=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),oldData&&oldData.eachItemGraphicEl(function(el,idx){el.__temp&&(group.remove(el),oldData.setItemGraphicEl(idx,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null}})},function(module,exports,__webpack_require__){function SymbolDraw(symbolCtor){this.group=new graphic.Group,this._symbolCtor=symbolCtor||Symbol}function symbolNeedsDraw(data,idx,isIgnore){var point=data.getItemLayout(idx);return point&&!isNaN(point[0])&&!isNaN(point[1])&&!(isIgnore&&isIgnore(idx))&&"none"!==data.getItemVisual(idx,"symbol")}var graphic=__webpack_require__(43),Symbol=__webpack_require__(105),symbolDrawProto=SymbolDraw.prototype;symbolDrawProto.updateData=function(data,isIgnore){var group=this.group,seriesModel=data.hostModel,oldData=this._data,SymbolCtor=this._symbolCtor,seriesScope={itemStyle:seriesModel.getModel("itemStyle.normal").getItemStyle(["color"]),hoverItemStyle:seriesModel.getModel("itemStyle.emphasis").getItemStyle(),symbolRotate:seriesModel.get("symbolRotate"),symbolOffset:seriesModel.get("symbolOffset"),hoverAnimation:seriesModel.get("hoverAnimation"),labelModel:seriesModel.getModel("label.normal"),hoverLabelModel:seriesModel.getModel("label.emphasis")};data.diff(oldData).add(function(newIdx){var point=data.getItemLayout(newIdx);if(symbolNeedsDraw(data,newIdx,isIgnore)){var symbolEl=new SymbolCtor(data,newIdx,seriesScope);symbolEl.attr("position",point),data.setItemGraphicEl(newIdx,symbolEl),group.add(symbolEl)}}).update(function(newIdx,oldIdx){var symbolEl=oldData.getItemGraphicEl(oldIdx),point=data.getItemLayout(newIdx);return symbolNeedsDraw(data,newIdx,isIgnore)?(symbolEl?(symbolEl.updateData(data,newIdx,seriesScope),graphic.updateProps(symbolEl,{position:point},seriesModel)):(symbolEl=new SymbolCtor(data,newIdx),symbolEl.attr("position",point)),group.add(symbolEl),void data.setItemGraphicEl(newIdx,symbolEl)):void group.remove(symbolEl)}).remove(function(oldIdx){var el=oldData.getItemGraphicEl(oldIdx);el&&el.fadeOut(function(){group.remove(el)})}).execute(),this._data=data},symbolDrawProto.updateLayout=function(){var data=this._data;data&&data.eachItemGraphicEl(function(el,idx){var point=data.getItemLayout(idx);el.attr("position",point)})},symbolDrawProto.remove=function(enableAnimation){var group=this.group,data=this._data;data&&(enableAnimation?data.eachItemGraphicEl(function(el){el.fadeOut(function(){group.remove(el)})}):group.removeAll())},module.exports=SymbolDraw},function(module,exports,__webpack_require__){function normalizeSymbolSize(symbolSize){return symbolSize instanceof Array||(symbolSize=[+symbolSize,+symbolSize]),symbolSize}function Symbol(data,idx,seriesScope){graphic.Group.call(this),this.updateData(data,idx,seriesScope)}function driftSymbol(dx,dy){this.parent.drift(dx,dy)}var zrUtil=__webpack_require__(4),symbolUtil=__webpack_require__(106),graphic=__webpack_require__(43),numberUtil=__webpack_require__(7),symbolProto=Symbol.prototype;symbolProto._createSymbol=function(symbolType,data,idx){this.removeAll();var seriesModel=data.hostModel,color=data.getItemVisual(idx,"color"),symbolPath=symbolUtil.createSymbol(symbolType,-.5,-.5,1,1,color);symbolPath.attr({z2:100,culling:!0,scale:[0,0]}),symbolPath.drift=driftSymbol;var size=normalizeSymbolSize(data.getItemVisual(idx,"symbolSize"));graphic.initProps(symbolPath,{scale:size},seriesModel,idx),this._symbolType=symbolType,this.add(symbolPath)},symbolProto.stopSymbolAnimation=function(toLastFrame){this.childAt(0).stopAnimation(toLastFrame)},symbolProto.getSymbolPath=function(){return this.childAt(0)},symbolProto.getScale=function(){return this.childAt(0).scale},symbolProto.highlight=function(){this.childAt(0).trigger("emphasis")},symbolProto.downplay=function(){this.childAt(0).trigger("normal")},symbolProto.setZ=function(zlevel,z){var symbolPath=this.childAt(0);symbolPath.zlevel=zlevel,symbolPath.z=z},symbolProto.setDraggable=function(draggable){var symbolPath=this.childAt(0);symbolPath.draggable=draggable,symbolPath.cursor=draggable?"move":"pointer"},symbolProto.updateData=function(data,idx,seriesScope){this.silent=!1;var symbolType=data.getItemVisual(idx,"symbol")||"circle",seriesModel=data.hostModel,symbolSize=normalizeSymbolSize(data.getItemVisual(idx,"symbolSize"));if(symbolType!==this._symbolType)this._createSymbol(symbolType,data,idx);else{var symbolPath=this.childAt(0);graphic.updateProps(symbolPath,{scale:symbolSize},seriesModel,idx)}this._updateCommon(data,idx,symbolSize,seriesScope),this._seriesModel=seriesModel};var normalStyleAccessPath=["itemStyle","normal"],emphasisStyleAccessPath=["itemStyle","emphasis"],normalLabelAccessPath=["label","normal"],emphasisLabelAccessPath=["label","emphasis"];symbolProto._updateCommon=function(data,idx,symbolSize,seriesScope){var symbolPath=this.childAt(0),seriesModel=data.hostModel,color=data.getItemVisual(idx,"color");"image"!==symbolPath.type&&symbolPath.useStyle({strokeNoScale:!0}),seriesScope=seriesScope||null;var itemStyle=seriesScope&&seriesScope.itemStyle,hoverItemStyle=seriesScope&&seriesScope.hoverItemStyle,symbolRotate=seriesScope&&seriesScope.symbolRotate,symbolOffset=seriesScope&&seriesScope.symbolOffset,labelModel=seriesScope&&seriesScope.labelModel,hoverLabelModel=seriesScope&&seriesScope.hoverLabelModel,hoverAnimation=seriesScope&&seriesScope.hoverAnimation;if(!seriesScope||data.hasItemOption){var itemModel=data.getItemModel(idx);itemStyle=itemModel.getModel(normalStyleAccessPath).getItemStyle(["color"]),hoverItemStyle=itemModel.getModel(emphasisStyleAccessPath).getItemStyle(),symbolRotate=itemModel.getShallow("symbolRotate"),symbolOffset=itemModel.getShallow("symbolOffset"),labelModel=itemModel.getModel(normalLabelAccessPath),hoverLabelModel=itemModel.getModel(emphasisLabelAccessPath),hoverAnimation=itemModel.getShallow("hoverAnimation")}else hoverItemStyle=zrUtil.extend({},hoverItemStyle);var elStyle=symbolPath.style;symbolPath.rotation=(symbolRotate||0)*Math.PI/180||0,symbolOffset&&symbolPath.attr("position",[numberUtil.parsePercent(symbolOffset[0],symbolSize[0]),numberUtil.parsePercent(symbolOffset[1],symbolSize[1])]),symbolPath.setColor(color),symbolPath.setStyle(itemStyle);var opacity=data.getItemVisual(idx,"opacity");null!=opacity&&(elStyle.opacity=opacity);for(var valueDim,dataType,dimensions=data.dimensions.slice();dimensions.length&&(valueDim=dimensions.pop(),dataType=data.getDimensionInfo(valueDim).type,"ordinal"===dataType||"time"===dataType););null!=valueDim&&labelModel.getShallow("show")?(graphic.setText(elStyle,labelModel,color),elStyle.text=zrUtil.retrieve(seriesModel.getFormattedLabel(idx,"normal"),data.get(valueDim,idx))):elStyle.text="",null!=valueDim&&hoverLabelModel.getShallow("show")?(graphic.setText(hoverItemStyle,hoverLabelModel,color),hoverItemStyle.text=zrUtil.retrieve(seriesModel.getFormattedLabel(idx,"emphasis"),data.get(valueDim,idx))):hoverItemStyle.text="";var size=normalizeSymbolSize(data.getItemVisual(idx,"symbolSize"));if(symbolPath.off("mouseover").off("mouseout").off("emphasis").off("normal"),symbolPath.hoverStyle=hoverItemStyle,graphic.setHoverStyle(symbolPath),hoverAnimation&&seriesModel.ifEnableAnimation()){var onEmphasis=function(){var ratio=size[1]/size[0];this.animateTo({scale:[Math.max(1.1*size[0],size[0]+3),Math.max(1.1*size[1],size[1]+3*ratio)]},400,"elasticOut")},onNormal=function(){this.animateTo({scale:size},400,"elasticOut")};symbolPath.on("mouseover",onEmphasis).on("mouseout",onNormal).on("emphasis",onEmphasis).on("normal",onNormal)}},symbolProto.fadeOut=function(cb){var symbolPath=this.childAt(0);this.silent=!0,symbolPath.style.text="",graphic.updateProps(symbolPath,{scale:[0,0]},this._seriesModel,this.dataIndex,cb)},zrUtil.inherits(Symbol,graphic.Group),module.exports=Symbol},function(module,exports,__webpack_require__){"use strict";var graphic=__webpack_require__(43),BoundingRect=__webpack_require__(9),Triangle=graphic.extendShape({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(path,shape){var cx=shape.cx,cy=shape.cy,width=shape.width/2,height=shape.height/2;path.moveTo(cx,cy-height),path.lineTo(cx+width,cy+height),path.lineTo(cx-width,cy+height),path.closePath()}}),Diamond=graphic.extendShape({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(path,shape){var cx=shape.cx,cy=shape.cy,width=shape.width/2,height=shape.height/2;path.moveTo(cx,cy-height),path.lineTo(cx+width,cy),path.lineTo(cx,cy+height),path.lineTo(cx-width,cy),path.closePath()}}),Pin=graphic.extendShape({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(path,shape){var x=shape.x,y=shape.y,w=shape.width/5*3,h=Math.max(w,shape.height),r=w/2,dy=r*r/(h-r),cy=y-h+r+dy,angle=Math.asin(dy/r),dx=Math.cos(angle)*r,tanX=Math.sin(angle),tanY=Math.cos(angle);path.arc(x,cy,r,Math.PI-angle,2*Math.PI+angle);var cpLen=.6*r,cpLen2=.7*r;path.bezierCurveTo(x+dx-tanX*cpLen,cy+dy+tanY*cpLen,x,y-cpLen2,x,y),path.bezierCurveTo(x,y-cpLen2,x-dx+tanX*cpLen,cy+dy+tanY*cpLen,x-dx,cy+dy),path.closePath()}}),Arrow=graphic.extendShape({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(ctx,shape){var height=shape.height,width=shape.width,x=shape.x,y=shape.y,dx=width/3*2;ctx.moveTo(x,y),ctx.lineTo(x+dx,y+height),ctx.lineTo(x,y+height/4*3),ctx.lineTo(x-dx,y+height),ctx.lineTo(x,y),ctx.closePath()}}),symbolCtors={line:graphic.Line,rect:graphic.Rect,roundRect:graphic.Rect,square:graphic.Rect,circle:graphic.Circle,diamond:Diamond,pin:Pin,arrow:Arrow,triangle:Triangle},symbolShapeMakers={line:function(x,y,w,h,shape){shape.x1=x,shape.y1=y+h/2,shape.x2=x+w,shape.y2=y+h/2},rect:function(x,y,w,h,shape){shape.x=x,shape.y=y,shape.width=w,shape.height=h},roundRect:function(x,y,w,h,shape){shape.x=x,shape.y=y,shape.width=w,shape.height=h,shape.r=Math.min(w,h)/4},square:function(x,y,w,h,shape){var size=Math.min(w,h);shape.x=x,shape.y=y,shape.width=size,shape.height=size},circle:function(x,y,w,h,shape){shape.cx=x+w/2,shape.cy=y+h/2,shape.r=Math.min(w,h)/2},diamond:function(x,y,w,h,shape){shape.cx=x+w/2,shape.cy=y+h/2,shape.width=w,shape.height=h},pin:function(x,y,w,h,shape){shape.x=x+w/2,shape.y=y+h/2,shape.width=w,shape.height=h},arrow:function(x,y,w,h,shape){shape.x=x+w/2,shape.y=y+h/2,shape.width=w,shape.height=h},triangle:function(x,y,w,h,shape){shape.cx=x+w/2,shape.cy=y+h/2,shape.width=w,shape.height=h}},symbolBuildProxies={};for(var name in symbolCtors)symbolBuildProxies[name]=new symbolCtors[name];var Symbol=graphic.extendShape({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},beforeBrush:function(){var style=this.style,shape=this.shape;"pin"===shape.symbolType&&"inside"===style.textPosition&&(style.textPosition=["50%","40%"],style.textAlign="center",style.textVerticalAlign="middle")},buildPath:function(ctx,shape,inBundle){var symbolType=shape.symbolType,proxySymbol=symbolBuildProxies[symbolType];"none"!==shape.symbolType&&(proxySymbol||(symbolType="rect",proxySymbol=symbolBuildProxies[symbolType]),symbolShapeMakers[symbolType](shape.x,shape.y,shape.width,shape.height,proxySymbol.shape),proxySymbol.buildPath(ctx,proxySymbol.shape,inBundle))}}),symbolPathSetColor=function(color){if("image"!==this.type){var symbolStyle=this.style,symbolShape=this.shape;symbolShape&&"line"===symbolShape.symbolType?symbolStyle.stroke=color:this.__isEmptyBrush?(symbolStyle.stroke=color,symbolStyle.fill="#fff"):(symbolStyle.fill&&(symbolStyle.fill=color),symbolStyle.stroke&&(symbolStyle.stroke=color)),this.dirty(!1)}},symbolUtil={createSymbol:function(symbolType,x,y,w,h,color){var isEmpty=0===symbolType.indexOf("empty");isEmpty&&(symbolType=symbolType.substr(5,1).toLowerCase()+symbolType.substr(6));var symbolPath;return symbolPath=0===symbolType.indexOf("image://")?new graphic.Image({style:{image:symbolType.slice(8),x:x,y:y,width:w,height:h}}):0===symbolType.indexOf("path://")?graphic.makePath(symbolType.slice(7),{},new BoundingRect(x,y,w,h)):new Symbol({shape:{symbolType:symbolType,x:x,y:y,width:w,height:h}}),symbolPath.__isEmptyBrush=isEmpty,symbolPath.setColor=symbolPathSetColor,symbolPath.setColor(color),symbolPath}};module.exports=symbolUtil},function(module,exports){function sign(val){return val>=0?1:-1}function getStackedOnPoint(coordSys,data,idx){for(var stackedOnSameSign,baseAxis=coordSys.getBaseAxis(),valueAxis=coordSys.getOtherAxis(baseAxis),valueStart=baseAxis.onZero?0:valueAxis.scale.getExtent()[0],valueDim=valueAxis.dim,baseDataOffset="x"===valueDim||"radius"===valueDim?1:0,stackedOn=data.stackedOn,val=data.get(valueDim,idx);stackedOn&&sign(stackedOn.get(valueDim,idx))===sign(val);){stackedOnSameSign=stackedOn;break}var stackedData=[];return stackedData[baseDataOffset]=data.get(baseAxis.dim,idx),stackedData[1-baseDataOffset]=stackedOnSameSign?stackedOnSameSign.get(valueDim,idx,!0):valueStart,coordSys.dataToPoint(stackedData)}function diffData(oldData,newData){var diffResult=[];return newData.diff(oldData).add(function(idx){diffResult.push({cmd:"+",idx:idx})}).update(function(newIdx,oldIdx){diffResult.push({cmd:"=",idx:oldIdx,idx1:newIdx})}).remove(function(idx){diffResult.push({cmd:"-",idx:idx})}).execute(),diffResult}module.exports=function(oldData,newData,oldStackedOnPoints,newStackedOnPoints,oldCoordSys,newCoordSys){for(var diff=diffData(oldData,newData),currPoints=[],nextPoints=[],currStackedPoints=[],nextStackedPoints=[],status=[],sortedIndices=[],rawIndices=[],dims=newCoordSys.dimensions,i=0;i<diff.length;i++){var diffItem=diff[i],pointAdded=!0;switch(diffItem.cmd){case"=":var currentPt=oldData.getItemLayout(diffItem.idx),nextPt=newData.getItemLayout(diffItem.idx1);(isNaN(currentPt[0])||isNaN(currentPt[1]))&&(currentPt=nextPt.slice()),currPoints.push(currentPt),nextPoints.push(nextPt),currStackedPoints.push(oldStackedOnPoints[diffItem.idx]),nextStackedPoints.push(newStackedOnPoints[diffItem.idx1]),rawIndices.push(newData.getRawIndex(diffItem.idx1));break;case"+":var idx=diffItem.idx;currPoints.push(oldCoordSys.dataToPoint([newData.get(dims[0],idx,!0),newData.get(dims[1],idx,!0)])),nextPoints.push(newData.getItemLayout(idx).slice()),currStackedPoints.push(getStackedOnPoint(oldCoordSys,newData,idx)),nextStackedPoints.push(newStackedOnPoints[idx]),rawIndices.push(newData.getRawIndex(idx));break;case"-":var idx=diffItem.idx,rawIndex=oldData.getRawIndex(idx);rawIndex!==idx?(currPoints.push(oldData.getItemLayout(idx)),nextPoints.push(newCoordSys.dataToPoint([oldData.get(dims[0],idx,!0),oldData.get(dims[1],idx,!0)])),currStackedPoints.push(oldStackedOnPoints[idx]),nextStackedPoints.push(getStackedOnPoint(newCoordSys,oldData,idx)),rawIndices.push(rawIndex)):pointAdded=!1}pointAdded&&(status.push(diffItem),sortedIndices.push(sortedIndices.length))}sortedIndices.sort(function(a,b){return rawIndices[a]-rawIndices[b]});for(var sortedCurrPoints=[],sortedNextPoints=[],sortedCurrStackedPoints=[],sortedNextStackedPoints=[],sortedStatus=[],i=0;i<sortedIndices.length;i++){var idx=sortedIndices[i];sortedCurrPoints[i]=currPoints[idx],sortedNextPoints[i]=nextPoints[idx],sortedCurrStackedPoints[i]=currStackedPoints[idx],sortedNextStackedPoints[i]=nextStackedPoints[idx],sortedStatus[i]=status[idx]}return{current:sortedCurrPoints,next:sortedNextPoints,stackedOnCurrent:sortedCurrStackedPoints,stackedOnNext:sortedNextStackedPoints,status:sortedStatus}}},function(module,exports,__webpack_require__){function isPointNull(p){return isNaN(p[0])||isNaN(p[1])}function drawSegment(ctx,points,start,segLen,allLen,dir,smoothMin,smoothMax,smooth,smoothMonotone,connectNulls){for(var prevIdx=0,idx=start,k=0;k<segLen;k++){var p=points[idx];if(idx>=allLen||idx<0)break;if(isPointNull(p)){if(connectNulls){idx+=dir;continue}break}if(idx===start)ctx[dir>0?"moveTo":"lineTo"](p[0],p[1]),v2Copy(cp0,p);else if(smooth>0){var nextIdx=idx+dir,nextP=points[nextIdx];if(connectNulls)for(;nextP&&isPointNull(points[nextIdx]);)nextIdx+=dir,nextP=points[nextIdx];var ratioNextSeg=.5,prevP=points[prevIdx],nextP=points[nextIdx];if(!nextP||isPointNull(nextP))v2Copy(cp1,p);else{isPointNull(nextP)&&!connectNulls&&(nextP=p),vec2.sub(v,nextP,prevP);var lenPrevSeg,lenNextSeg;if("x"===smoothMonotone||"y"===smoothMonotone){var dim="x"===smoothMonotone?0:1;lenPrevSeg=Math.abs(p[dim]-prevP[dim]),lenNextSeg=Math.abs(p[dim]-nextP[dim])}else lenPrevSeg=vec2.dist(p,prevP),lenNextSeg=vec2.dist(p,nextP);ratioNextSeg=lenNextSeg/(lenNextSeg+lenPrevSeg),scaleAndAdd(cp1,p,v,-smooth*(1-ratioNextSeg))}vec2Min(cp0,cp0,smoothMax),vec2Max(cp0,cp0,smoothMin),vec2Min(cp1,cp1,smoothMax),
vec2Max(cp1,cp1,smoothMin),ctx.bezierCurveTo(cp0[0],cp0[1],cp1[0],cp1[1],p[0],p[1]),scaleAndAdd(cp0,p,v,smooth*ratioNextSeg)}else ctx.lineTo(p[0],p[1]);prevIdx=idx,idx+=dir}return k}function getBoundingBox(points,smoothConstraint){var ptMin=[1/0,1/0],ptMax=[-(1/0),-(1/0)];if(smoothConstraint)for(var i=0;i<points.length;i++){var pt=points[i];pt[0]<ptMin[0]&&(ptMin[0]=pt[0]),pt[1]<ptMin[1]&&(ptMin[1]=pt[1]),pt[0]>ptMax[0]&&(ptMax[0]=pt[0]),pt[1]>ptMax[1]&&(ptMax[1]=pt[1])}return{min:smoothConstraint?ptMin:ptMax,max:smoothConstraint?ptMax:ptMin}}var Path=__webpack_require__(45),vec2=__webpack_require__(10),vec2Min=vec2.min,vec2Max=vec2.max,scaleAndAdd=vec2.scaleAndAdd,v2Copy=vec2.copy,v=[],cp0=[],cp1=[];module.exports={Polyline:Path.extend({type:"ec-polyline",shape:{points:[],smooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},style:{fill:null,stroke:"#000"},buildPath:function(ctx,shape){var points=shape.points,i=0,len=points.length,result=getBoundingBox(points,shape.smoothConstraint);if(shape.connectNulls){for(;len>0&&isPointNull(points[len-1]);len--);for(;i<len&&isPointNull(points[i]);i++);}for(;i<len;)i+=drawSegment(ctx,points,i,len,len,1,result.min,result.max,shape.smooth,shape.smoothMonotone,shape.connectNulls)+1}}),Polygon:Path.extend({type:"ec-polygon",shape:{points:[],stackedOnPoints:[],smooth:0,stackedOnSmooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},buildPath:function(ctx,shape){var points=shape.points,stackedOnPoints=shape.stackedOnPoints,i=0,len=points.length,smoothMonotone=shape.smoothMonotone,bbox=getBoundingBox(points,shape.smoothConstraint),stackedOnBBox=getBoundingBox(stackedOnPoints,shape.smoothConstraint);if(shape.connectNulls){for(;len>0&&isPointNull(points[len-1]);len--);for(;i<len&&isPointNull(points[i]);i++);}for(;i<len;){var k=drawSegment(ctx,points,i,len,len,1,bbox.min,bbox.max,shape.smooth,smoothMonotone,shape.connectNulls);drawSegment(ctx,stackedOnPoints,i+k-1,k,len,-1,stackedOnBBox.min,stackedOnBBox.max,shape.stackedOnSmooth,smoothMonotone,shape.connectNulls),i+=k+1,ctx.closePath()}}})}},function(module,exports){module.exports=function(seriesType,defaultSymbolType,legendSymbol,ecModel,api){ecModel.eachRawSeriesByType(seriesType,function(seriesModel){var data=seriesModel.getData(),symbolType=seriesModel.get("symbol")||defaultSymbolType,symbolSize=seriesModel.get("symbolSize");data.setVisual({legendSymbol:legendSymbol||symbolType,symbol:symbolType,symbolSize:symbolSize}),ecModel.isSeriesFiltered(seriesModel)||("function"==typeof symbolSize&&data.each(function(idx){var rawValue=seriesModel.getRawValue(idx),params=seriesModel.getDataParams(idx);data.setItemVisual(idx,"symbolSize",symbolSize(rawValue,params))}),data.each(function(idx){var itemModel=data.getItemModel(idx),itemSymbolType=itemModel.getShallow("symbol",!0),itemSymbolSize=itemModel.getShallow("symbolSize",!0);null!=itemSymbolType&&data.setItemVisual(idx,"symbol",itemSymbolType),null!=itemSymbolSize&&data.setItemVisual(idx,"symbolSize",itemSymbolSize)}))})}},function(module,exports){module.exports=function(seriesType,ecModel){ecModel.eachSeriesByType(seriesType,function(seriesModel){var data=seriesModel.getData(),coordSys=seriesModel.coordinateSystem;if(coordSys){var dims=coordSys.dimensions;"singleAxis"===coordSys.type?data.each(dims[0],function(x,idx){data.setItemLayout(idx,isNaN(x)?[NaN,NaN]:coordSys.dataToPoint(x))}):data.each(dims,function(x,y,idx){data.setItemLayout(idx,isNaN(x)||isNaN(y)?[NaN,NaN]:coordSys.dataToPoint([x,y]))},!0)}})}},function(module,exports){var samplers={average:function(frame){for(var sum=0,count=0,i=0;i<frame.length;i++)isNaN(frame[i])||(sum+=frame[i],count++);return 0===count?NaN:sum/count},sum:function(frame){for(var sum=0,i=0;i<frame.length;i++)sum+=frame[i]||0;return sum},max:function(frame){for(var max=-(1/0),i=0;i<frame.length;i++)frame[i]>max&&(max=frame[i]);return max},min:function(frame){for(var min=1/0,i=0;i<frame.length;i++)frame[i]<min&&(min=frame[i]);return min},nearest:function(frame){return frame[0]}},indexSampler=function(frame,value){return Math.round(frame.length/2)};module.exports=function(seriesType,ecModel,api){ecModel.eachSeriesByType(seriesType,function(seriesModel){var data=seriesModel.getData(),sampling=seriesModel.get("sampling"),coordSys=seriesModel.coordinateSystem;if("cartesian2d"===coordSys.type&&sampling){var baseAxis=coordSys.getBaseAxis(),valueAxis=coordSys.getOtherAxis(baseAxis),extent=baseAxis.getExtent(),size=extent[1]-extent[0],rate=Math.round(data.count()/size);if(rate>1){var sampler;"string"==typeof sampling?sampler=samplers[sampling]:"function"==typeof sampling&&(sampler=sampling),sampler&&(data=data.downSample(valueAxis.dim,1/rate,sampler,indexSampler),seriesModel.setData(data))}}},this)}},function(module,exports,__webpack_require__){"use strict";var graphic=__webpack_require__(43),zrUtil=__webpack_require__(4),echarts=__webpack_require__(1);__webpack_require__(113),__webpack_require__(130),echarts.extendComponentView({type:"grid",render:function(gridModel,ecModel){this.group.removeAll(),gridModel.get("show")&&this.group.add(new graphic.Rect({shape:gridModel.coordinateSystem.getRect(),style:zrUtil.defaults({fill:gridModel.get("backgroundColor")},gridModel.getItemStyle()),silent:!0}))}}),echarts.registerPreprocessor(function(option){option.xAxis&&option.yAxis&&!option.grid&&(option.grid={})})},function(module,exports,__webpack_require__){function isAxisUsedInTheGrid(axisModel,gridModel,ecModel){return axisModel.findGridModel()===gridModel}function getLabelUnionRect(axis){var rect,axisModel=axis.model,labels=axisModel.getFormattedLabels(),step=1,labelCount=labels.length;labelCount>40&&(step=Math.ceil(labelCount/40));for(var i=0;i<labelCount;i+=step)if(!axis.isLabelIgnored(i)){var singleRect=axisModel.getTextRect(labels[i]);rect?rect.union(singleRect):rect=singleRect}return rect}function Grid(gridModel,ecModel,api){this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this._initCartesian(gridModel,ecModel,api),this._model=gridModel}function updateAxisTransfrom(axis,coordBase){var axisExtent=axis.getExtent(),axisExtentSum=axisExtent[0]+axisExtent[1];axis.toGlobalCoord="x"===axis.dim?function(coord){return coord+coordBase}:function(coord){return axisExtentSum-coord+coordBase},axis.toLocalCoord="x"===axis.dim?function(coord){return coord-coordBase}:function(coord){return axisExtentSum-coord+coordBase}}function findAxesModels(seriesModel,ecModel){return zrUtil.map(axesTypes,function(axisType){var axisModel=ecModel.queryComponents({mainType:axisType,index:seriesModel.get(axisType+"Index"),id:seriesModel.get(axisType+"Id")})[0];if(!axisModel)throw new Error(axisType+' "'+zrUtil.retrieve(seriesModel.get(axisType+"Index"),seriesModel.get(axisType+"Id"),0)+'" not found');return axisModel})}function isCartesian2D(seriesModel){return"cartesian2d"===seriesModel.get("coordinateSystem")}var layout=__webpack_require__(21),axisHelper=__webpack_require__(114),zrUtil=__webpack_require__(4),Cartesian2D=__webpack_require__(120),Axis2D=__webpack_require__(122),each=zrUtil.each,ifAxisCrossZero=axisHelper.ifAxisCrossZero,niceScaleExtent=axisHelper.niceScaleExtent;__webpack_require__(125);var gridProto=Grid.prototype;gridProto.type="grid",gridProto.getRect=function(){return this._rect},gridProto.update=function(ecModel,api){function ifAxisCanNotOnZero(otherAxisDim){var axes=axesMap[otherAxisDim];for(var idx in axes){var axis=axes[idx];if(axis&&("category"===axis.type||!ifAxisCrossZero(axis)))return!0}return!1}var axesMap=this._axesMap;this._updateScale(ecModel,this._model),each(axesMap.x,function(xAxis){niceScaleExtent(xAxis,xAxis.model)}),each(axesMap.y,function(yAxis){niceScaleExtent(yAxis,yAxis.model)}),each(axesMap.x,function(xAxis){ifAxisCanNotOnZero("y")&&(xAxis.onZero=!1)}),each(axesMap.y,function(yAxis){ifAxisCanNotOnZero("x")&&(yAxis.onZero=!1)}),this.resize(this._model,api)},gridProto.resize=function(gridModel,api){function adjustAxes(){each(axesList,function(axis){var isHorizontal=axis.isHorizontal(),extent=isHorizontal?[0,gridRect.width]:[0,gridRect.height],idx=axis.inverse?1:0;axis.setExtent(extent[idx],extent[1-idx]),updateAxisTransfrom(axis,isHorizontal?gridRect.x:gridRect.y)})}var gridRect=layout.getLayoutRect(gridModel.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()});this._rect=gridRect;var axesList=this._axesList;adjustAxes(),gridModel.get("containLabel")&&(each(axesList,function(axis){if(!axis.model.get("axisLabel.inside")){var labelUnionRect=getLabelUnionRect(axis);if(labelUnionRect){var dim=axis.isHorizontal()?"height":"width",margin=axis.model.get("axisLabel.margin");gridRect[dim]-=labelUnionRect[dim]+margin,"top"===axis.position?gridRect.y+=labelUnionRect.height+margin:"left"===axis.position&&(gridRect.x+=labelUnionRect.width+margin)}}}),adjustAxes())},gridProto.getAxis=function(axisType,axisIndex){var axesMapOnDim=this._axesMap[axisType];if(null!=axesMapOnDim){if(null==axisIndex)for(var name in axesMapOnDim)return axesMapOnDim[name];return axesMapOnDim[axisIndex]}},gridProto.getCartesian=function(xAxisIndex,yAxisIndex){if(null!=xAxisIndex&&null!=yAxisIndex){var key="x"+xAxisIndex+"y"+yAxisIndex;return this._coordsMap[key]}for(var i=0,coordList=this._coordsList;i<coordList.length;i++)if(coordList[i].getAxis("x").index===xAxisIndex||coordList[i].getAxis("y").index===yAxisIndex)return coordList[i]},gridProto._initCartesian=function(gridModel,ecModel,api){function createAxisCreator(axisType){return function(axisModel,idx){if(isAxisUsedInTheGrid(axisModel,gridModel,ecModel)){var axisPosition=axisModel.get("position");"x"===axisType?"top"!==axisPosition&&"bottom"!==axisPosition&&(axisPosition="bottom",axisPositionUsed[axisPosition]&&(axisPosition="top"===axisPosition?"bottom":"top")):"left"!==axisPosition&&"right"!==axisPosition&&(axisPosition="left",axisPositionUsed[axisPosition]&&(axisPosition="left"===axisPosition?"right":"left")),axisPositionUsed[axisPosition]=!0;var axis=new Axis2D(axisType,axisHelper.createScaleByModel(axisModel),[0,0],axisModel.get("type"),axisPosition),isCategory="category"===axis.type;axis.onBand=isCategory&&axisModel.get("boundaryGap"),axis.inverse=axisModel.get("inverse"),axis.onZero=axisModel.get("axisLine.onZero"),axisModel.axis=axis,axis.model=axisModel,axis.grid=this,axis.index=idx,this._axesList.push(axis),axesMap[axisType][idx]=axis,axesCount[axisType]++}}}var axisPositionUsed={left:!1,right:!1,top:!1,bottom:!1},axesMap={x:{},y:{}},axesCount={x:0,y:0};return ecModel.eachComponent("xAxis",createAxisCreator("x"),this),ecModel.eachComponent("yAxis",createAxisCreator("y"),this),axesCount.x&&axesCount.y?(this._axesMap=axesMap,void each(axesMap.x,function(xAxis,xAxisIndex){each(axesMap.y,function(yAxis,yAxisIndex){var key="x"+xAxisIndex+"y"+yAxisIndex,cartesian=new Cartesian2D(key);cartesian.grid=this,this._coordsMap[key]=cartesian,this._coordsList.push(cartesian),cartesian.addAxis(xAxis),cartesian.addAxis(yAxis)},this)},this)):(this._axesMap={},void(this._axesList=[]))},gridProto._updateScale=function(ecModel,gridModel){function unionExtent(data,axis,seriesModel){each(seriesModel.coordDimToDataDim(axis.dim),function(dim){axis.scale.unionExtent(data.getDataExtent(dim,"ordinal"!==axis.scale.type))})}zrUtil.each(this._axesList,function(axis){axis.scale.setExtent(1/0,-(1/0))}),ecModel.eachSeries(function(seriesModel){if(isCartesian2D(seriesModel)){var axesModels=findAxesModels(seriesModel,ecModel),xAxisModel=axesModels[0],yAxisModel=axesModels[1];if(!isAxisUsedInTheGrid(xAxisModel,gridModel,ecModel)||!isAxisUsedInTheGrid(yAxisModel,gridModel,ecModel))return;var cartesian=this.getCartesian(xAxisModel.componentIndex,yAxisModel.componentIndex),data=seriesModel.getData(),xAxis=cartesian.getAxis("x"),yAxis=cartesian.getAxis("y");"list"===data.type&&(unionExtent(data,xAxis,seriesModel),unionExtent(data,yAxis,seriesModel))}},this)};var axesTypes=["xAxis","yAxis"];Grid.create=function(ecModel,api){var grids=[];return ecModel.eachComponent("grid",function(gridModel,idx){var grid=new Grid(gridModel,ecModel,api);grid.name="grid_"+idx,grid.resize(gridModel,api),gridModel.coordinateSystem=grid,grids.push(grid)}),ecModel.eachSeries(function(seriesModel){if(isCartesian2D(seriesModel)){var axesModels=findAxesModels(seriesModel,ecModel),xAxisModel=axesModels[0],yAxisModel=axesModels[1],gridModel=xAxisModel.findGridModel();if(!gridModel)throw new Error('Grid "'+zrUtil.retrieve(xAxisModel.get("gridIndex"),xAxisModel.get("gridId"),0)+'" not found');if(xAxisModel.findGridModel()!==yAxisModel.findGridModel())throw new Error("xAxis and yAxis must use the same grid");var grid=gridModel.coordinateSystem;seriesModel.coordinateSystem=grid.getCartesian(xAxisModel.componentIndex,yAxisModel.componentIndex)}}),grids},Grid.dimensions=Cartesian2D.prototype.dimensions,__webpack_require__(26).register("cartesian2d",Grid),module.exports=Grid},function(module,exports,__webpack_require__){var OrdinalScale=__webpack_require__(115),IntervalScale=__webpack_require__(117);__webpack_require__(118),__webpack_require__(119);var Scale=__webpack_require__(116),numberUtil=__webpack_require__(7),zrUtil=__webpack_require__(4),textContain=__webpack_require__(8),axisHelper={};axisHelper.getScaleExtent=function(axis,model){var scale=axis.scale,originalExtent=scale.getExtent(),span=originalExtent[1]-originalExtent[0];if("ordinal"===scale.type)return isFinite(span)?originalExtent:[0,0];var min=model.getMin?model.getMin():model.get("min"),max=model.getMax?model.getMax():model.get("max"),crossZero=model.getNeedCrossZero?model.getNeedCrossZero():!model.get("scale"),boundaryGap=model.get("boundaryGap");zrUtil.isArray(boundaryGap)||(boundaryGap=[boundaryGap||0,boundaryGap||0]),boundaryGap[0]=numberUtil.parsePercent(boundaryGap[0],1),boundaryGap[1]=numberUtil.parsePercent(boundaryGap[1],1);var fixMin=!0,fixMax=!0;return null==min&&(min=originalExtent[0]-boundaryGap[0]*span,fixMin=!1),null==max&&(max=originalExtent[1]+boundaryGap[1]*span,fixMax=!1),"dataMin"===min&&(min=originalExtent[0]),"dataMax"===max&&(max=originalExtent[1]),crossZero&&(min>0&&max>0&&!fixMin&&(min=0),min<0&&max<0&&!fixMax&&(max=0)),[min,max]},axisHelper.niceScaleExtent=function(axis,model){var scale=axis.scale,extent=axisHelper.getScaleExtent(axis,model),fixMin=null!=(model.getMin?model.getMin():model.get("min")),fixMax=null!=(model.getMax?model.getMax():model.get("max")),splitNumber=model.get("splitNumber");"log"===scale.type&&(scale.base=model.get("logBase")),scale.setExtent(extent[0],extent[1]),scale.niceExtent(splitNumber,fixMin,fixMax);var minInterval=model.get("minInterval");if(isFinite(minInterval)&&!fixMin&&!fixMax&&"interval"===scale.type){var interval=scale.getInterval(),intervalScale=Math.max(Math.abs(interval),minInterval)/interval;extent=scale.getExtent(),scale.setExtent(intervalScale*extent[0],extent[1]*intervalScale),scale.niceExtent(splitNumber)}var interval=model.get("interval");null!=interval&&scale.setInterval&&scale.setInterval(interval)},axisHelper.createScaleByModel=function(model,axisType){if(axisType=axisType||model.get("type"))switch(axisType){case"category":return new OrdinalScale(model.getCategories(),[1/0,-(1/0)]);case"value":return new IntervalScale;default:return(Scale.getClass(axisType)||IntervalScale).create(model)}},axisHelper.ifAxisCrossZero=function(axis){var dataExtent=axis.scale.getExtent(),min=dataExtent[0],max=dataExtent[1];return!(min>0&&max>0||min<0&&max<0)},axisHelper.getAxisLabelInterval=function(tickCoords,labels,font,isAxisHorizontal){var textSpaceTakenRect,autoLabelInterval=0,accumulatedLabelInterval=0,step=1;labels.length>40&&(step=Math.floor(labels.length/40));for(var i=0;i<tickCoords.length;i+=step){var tickCoord=tickCoords[i],rect=textContain.getBoundingRect(labels[i],font,"center","top");rect[isAxisHorizontal?"x":"y"]+=tickCoord,rect[isAxisHorizontal?"width":"height"]*=1.3,textSpaceTakenRect?textSpaceTakenRect.intersect(rect)?(accumulatedLabelInterval++,autoLabelInterval=Math.max(autoLabelInterval,accumulatedLabelInterval)):(textSpaceTakenRect.union(rect),accumulatedLabelInterval=0):textSpaceTakenRect=rect.clone()}return 0===autoLabelInterval&&step>1?step:(autoLabelInterval+1)*step-1},axisHelper.getFormattedLabels=function(axis,labelFormatter){var scale=axis.scale,labels=scale.getTicksLabels(),ticks=scale.getTicks();return"string"==typeof labelFormatter?(labelFormatter=function(tpl){return function(val){return tpl.replace("{value}",val)}}(labelFormatter),zrUtil.map(labels,labelFormatter)):"function"==typeof labelFormatter?zrUtil.map(ticks,function(tick,idx){return labelFormatter("category"===axis.type?scale.getLabel(tick):tick,idx)},this):labels},module.exports=axisHelper},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4),Scale=__webpack_require__(116),scaleProto=Scale.prototype,OrdinalScale=Scale.extend({type:"ordinal",init:function(data,extent){this._data=data,this._extent=extent||[0,data.length-1]},parse:function(val){return"string"==typeof val?zrUtil.indexOf(this._data,val):Math.round(val)},contain:function(rank){return rank=this.parse(rank),scaleProto.contain.call(this,rank)&&null!=this._data[rank]},normalize:function(val){return scaleProto.normalize.call(this,this.parse(val))},scale:function(val){return Math.round(scaleProto.scale.call(this,val))},getTicks:function(){for(var ticks=[],extent=this._extent,rank=extent[0];rank<=extent[1];)ticks.push(rank),rank++;return ticks},getLabel:function(n){return this._data[n]},count:function(){return this._extent[1]-this._extent[0]+1},niceTicks:zrUtil.noop,niceExtent:zrUtil.noop});OrdinalScale.create=function(){return new OrdinalScale},module.exports=OrdinalScale},function(module,exports,__webpack_require__){function Scale(){this._extent=[1/0,-(1/0)],this._interval=0,this.init&&this.init.apply(this,arguments)}var clazzUtil=__webpack_require__(13),scaleProto=Scale.prototype;scaleProto.parse=function(val){return val},scaleProto.contain=function(val){var extent=this._extent;return val>=extent[0]&&val<=extent[1]},scaleProto.normalize=function(val){var extent=this._extent;return extent[1]===extent[0]?.5:(val-extent[0])/(extent[1]-extent[0])},scaleProto.scale=function(val){var extent=this._extent;return val*(extent[1]-extent[0])+extent[0]},scaleProto.unionExtent=function(other){var extent=this._extent;other[0]<extent[0]&&(extent[0]=other[0]),other[1]>extent[1]&&(extent[1]=other[1])},scaleProto.getExtent=function(){return this._extent.slice()},scaleProto.setExtent=function(start,end){var thisExtent=this._extent;isNaN(start)||(thisExtent[0]=start),isNaN(end)||(thisExtent[1]=end)},scaleProto.getTicksLabels=function(){for(var labels=[],ticks=this.getTicks(),i=0;i<ticks.length;i++)labels.push(this.getLabel(ticks[i]));return labels},clazzUtil.enableClassExtend(Scale),clazzUtil.enableClassManagement(Scale,{registerWhenExtend:!0}),module.exports=Scale},function(module,exports,__webpack_require__){var numberUtil=__webpack_require__(7),formatUtil=__webpack_require__(6),Scale=__webpack_require__(116),mathFloor=Math.floor,mathCeil=Math.ceil,getPrecisionSafe=numberUtil.getPrecisionSafe,roundingErrorFix=numberUtil.round,IntervalScale=Scale.extend({type:"interval",_interval:0,setExtent:function(start,end){var thisExtent=this._extent;isNaN(start)||(thisExtent[0]=parseFloat(start)),isNaN(end)||(thisExtent[1]=parseFloat(end))},unionExtent:function(other){var extent=this._extent;other[0]<extent[0]&&(extent[0]=other[0]),other[1]>extent[1]&&(extent[1]=other[1]),IntervalScale.prototype.setExtent.call(this,extent[0],extent[1])},getInterval:function(){return this._interval||this.niceTicks(),this._interval},setInterval:function(interval){this._interval=interval,this._niceExtent=this._extent.slice()},getTicks:function(){this._interval||this.niceTicks();var interval=this._interval,extent=this._extent,ticks=[],safeLimit=1e4;if(interval){var niceExtent=this._niceExtent,precision=getPrecisionSafe(interval)+2;extent[0]<niceExtent[0]&&ticks.push(extent[0]);for(var tick=niceExtent[0];tick<=niceExtent[1];)if(ticks.push(tick),tick=roundingErrorFix(tick+interval,precision),ticks.length>safeLimit)return[];extent[1]>niceExtent[1]&&ticks.push(extent[1])}return ticks},getTicksLabels:function(){for(var labels=[],ticks=this.getTicks(),i=0;i<ticks.length;i++)labels.push(this.getLabel(ticks[i]));return labels},getLabel:function(data){return formatUtil.addCommas(data)},niceTicks:function(splitNumber){splitNumber=splitNumber||5;var extent=this._extent,span=extent[1]-extent[0];if(isFinite(span)){span<0&&(span=-span,extent.reverse());var step=roundingErrorFix(numberUtil.nice(span/splitNumber,!0),Math.max(getPrecisionSafe(extent[0]),getPrecisionSafe(extent[1]))+2),precision=getPrecisionSafe(step)+2,niceExtent=[roundingErrorFix(mathCeil(extent[0]/step)*step,precision),roundingErrorFix(mathFloor(extent[1]/step)*step,precision)];this._interval=step,this._niceExtent=niceExtent}},niceExtent:function(splitNumber,fixMin,fixMax){var extent=this._extent;if(extent[0]===extent[1])if(0!==extent[0]){var expandSize=extent[0];fixMax?extent[0]-=expandSize/2:(extent[1]+=expandSize/2,extent[0]-=expandSize/2)}else extent[1]=1;var span=extent[1]-extent[0];isFinite(span)||(extent[0]=0,extent[1]=1),this.niceTicks(splitNumber);var interval=this._interval;fixMin||(extent[0]=roundingErrorFix(mathFloor(extent[0]/interval)*interval)),fixMax||(extent[1]=roundingErrorFix(mathCeil(extent[1]/interval)*interval))}});IntervalScale.create=function(){return new IntervalScale},module.exports=IntervalScale},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4),numberUtil=__webpack_require__(7),formatUtil=__webpack_require__(6),IntervalScale=__webpack_require__(117),intervalScaleProto=IntervalScale.prototype,mathCeil=Math.ceil,mathFloor=Math.floor,ONE_SECOND=1e3,ONE_MINUTE=60*ONE_SECOND,ONE_HOUR=60*ONE_MINUTE,ONE_DAY=24*ONE_HOUR,bisect=function(a,x,lo,hi){for(;lo<hi;){var mid=lo+hi>>>1;a[mid][2]<x?lo=mid+1:hi=mid}return lo},TimeScale=IntervalScale.extend({type:"time",getLabel:function(val){var stepLvl=this._stepLvl,date=new Date(val);return formatUtil.formatTime(stepLvl[0],date)},niceExtent:function(approxTickNum,fixMin,fixMax){var extent=this._extent;if(extent[0]===extent[1]&&(extent[0]-=ONE_DAY,extent[1]+=ONE_DAY),extent[1]===-(1/0)&&extent[0]===1/0){var d=new Date;extent[1]=new Date(d.getFullYear(),d.getMonth(),d.getDate()),extent[0]=extent[1]-ONE_DAY}this.niceTicks(approxTickNum);var interval=this._interval;fixMin||(extent[0]=numberUtil.round(mathFloor(extent[0]/interval)*interval)),fixMax||(extent[1]=numberUtil.round(mathCeil(extent[1]/interval)*interval))},niceTicks:function(approxTickNum){approxTickNum=approxTickNum||10;var extent=this._extent,span=extent[1]-extent[0],approxInterval=span/approxTickNum,scaleLevelsLen=scaleLevels.length,idx=bisect(scaleLevels,approxInterval,0,scaleLevelsLen),level=scaleLevels[Math.min(idx,scaleLevelsLen-1)],interval=level[2];if("year"===level[0]){var yearSpan=span/interval,yearStep=numberUtil.nice(yearSpan/approxTickNum,!0);interval*=yearStep}var niceExtent=[mathCeil(extent[0]/interval)*interval,mathFloor(extent[1]/interval)*interval];this._stepLvl=level,this._interval=interval,this._niceExtent=niceExtent},parse:function(val){return+numberUtil.parseDate(val)}});zrUtil.each(["contain","normalize"],function(methodName){TimeScale.prototype[methodName]=function(val){return intervalScaleProto[methodName].call(this,this.parse(val))}});var scaleLevels=[["hh:mm:ss",1,ONE_SECOND],["hh:mm:ss",5,5*ONE_SECOND],["hh:mm:ss",10,10*ONE_SECOND],["hh:mm:ss",15,15*ONE_SECOND],["hh:mm:ss",30,30*ONE_SECOND],["hh:mm\nMM-dd",1,ONE_MINUTE],["hh:mm\nMM-dd",5,5*ONE_MINUTE],["hh:mm\nMM-dd",10,10*ONE_MINUTE],["hh:mm\nMM-dd",15,15*ONE_MINUTE],["hh:mm\nMM-dd",30,30*ONE_MINUTE],["hh:mm\nMM-dd",1,ONE_HOUR],["hh:mm\nMM-dd",2,2*ONE_HOUR],["hh:mm\nMM-dd",6,6*ONE_HOUR],["hh:mm\nMM-dd",12,12*ONE_HOUR],["MM-dd\nyyyy",1,ONE_DAY],["week",7,7*ONE_DAY],["month",1,31*ONE_DAY],["quarter",3,380*ONE_DAY/4],["half-year",6,380*ONE_DAY/2],["year",1,380*ONE_DAY]];TimeScale.create=function(){return new TimeScale},module.exports=TimeScale},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4),Scale=__webpack_require__(116),numberUtil=__webpack_require__(7),IntervalScale=__webpack_require__(117),scaleProto=Scale.prototype,intervalScaleProto=IntervalScale.prototype,mathFloor=Math.floor,mathCeil=Math.ceil,mathPow=Math.pow,mathLog=Math.log,LogScale=Scale.extend({type:"log",base:10,getTicks:function(){return zrUtil.map(intervalScaleProto.getTicks.call(this),function(val){return numberUtil.round(mathPow(this.base,val))},this)},getLabel:intervalScaleProto.getLabel,scale:function(val){return val=scaleProto.scale.call(this,val),mathPow(this.base,val)},setExtent:function(start,end){var base=this.base;start=mathLog(start)/mathLog(base),end=mathLog(end)/mathLog(base),intervalScaleProto.setExtent.call(this,start,end)},getExtent:function(){var base=this.base,extent=scaleProto.getExtent.call(this);return extent[0]=mathPow(base,extent[0]),extent[1]=mathPow(base,extent[1]),extent},unionExtent:function(extent){var base=this.base;extent[0]=mathLog(extent[0])/mathLog(base),extent[1]=mathLog(extent[1])/mathLog(base),scaleProto.unionExtent.call(this,extent)},niceTicks:function(approxTickNum){approxTickNum=approxTickNum||10;var extent=this._extent,span=extent[1]-extent[0];if(!(span===1/0||span<=0)){var interval=numberUtil.quantity(span),err=approxTickNum/span*interval;for(err<=.5&&(interval*=10);!isNaN(interval)&&Math.abs(interval)<1&&Math.abs(interval)>0;)interval*=10;var niceExtent=[numberUtil.round(mathCeil(extent[0]/interval)*interval),numberUtil.round(mathFloor(extent[1]/interval)*interval)];this._interval=interval,this._niceExtent=niceExtent}},niceExtent:intervalScaleProto.niceExtent});zrUtil.each(["contain","normalize"],function(methodName){LogScale.prototype[methodName]=function(val){return val=mathLog(val)/mathLog(this.base),scaleProto[methodName].call(this,val)}}),LogScale.create=function(){return new LogScale},module.exports=LogScale},function(module,exports,__webpack_require__){"use strict";function Cartesian2D(name){Cartesian.call(this,name)}var zrUtil=__webpack_require__(4),Cartesian=__webpack_require__(121);Cartesian2D.prototype={constructor:Cartesian2D,type:"cartesian2d",dimensions:["x","y"],getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},containPoint:function(point){var axisX=this.getAxis("x"),axisY=this.getAxis("y");return axisX.contain(axisX.toLocalCoord(point[0]))&&axisY.contain(axisY.toLocalCoord(point[1]))},containData:function(data){return this.getAxis("x").containData(data[0])&&this.getAxis("y").containData(data[1])},dataToPoints:function(data,stack){return data.mapArray(["x","y"],function(x,y){return this.dataToPoint([x,y])},stack,this)},dataToPoint:function(data,clamp){var xAxis=this.getAxis("x"),yAxis=this.getAxis("y");return[xAxis.toGlobalCoord(xAxis.dataToCoord(data[0],clamp)),yAxis.toGlobalCoord(yAxis.dataToCoord(data[1],clamp))]},pointToData:function(point,clamp){var xAxis=this.getAxis("x"),yAxis=this.getAxis("y");return[xAxis.coordToData(xAxis.toLocalCoord(point[0]),clamp),yAxis.coordToData(yAxis.toLocalCoord(point[1]),clamp)]},getOtherAxis:function(axis){return this.getAxis("x"===axis.dim?"y":"x")}},zrUtil.inherits(Cartesian2D,Cartesian),module.exports=Cartesian2D},function(module,exports,__webpack_require__){"use strict";function dimAxisMapper(dim){return this._axes[dim]}var zrUtil=__webpack_require__(4),Cartesian=function(name){this._axes={},this._dimList=[],this.name=name||""};Cartesian.prototype={constructor:Cartesian,type:"cartesian",getAxis:function(dim){return this._axes[dim]},getAxes:function(){return zrUtil.map(this._dimList,dimAxisMapper,this)},getAxesByScale:function(scaleType){return scaleType=scaleType.toLowerCase(),zrUtil.filter(this.getAxes(),function(axis){return axis.scale.type===scaleType})},addAxis:function(axis){var dim=axis.dim;this._axes[dim]=axis,this._dimList.push(dim)},dataToCoord:function(val){return this._dataCoordConvert(val,"dataToCoord")},coordToData:function(val){return this._dataCoordConvert(val,"coordToData")},_dataCoordConvert:function(input,method){for(var dimList=this._dimList,output=input instanceof Array?[]:{},i=0;i<dimList.length;i++){var dim=dimList[i],axis=this._axes[dim];output[dim]=axis[method](input[dim])}return output}},module.exports=Cartesian},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4),Axis=__webpack_require__(123),axisLabelInterval=__webpack_require__(124),Axis2D=function(dim,scale,coordExtent,axisType,position){Axis.call(this,dim,scale,coordExtent),this.type=axisType||"value",this.position=position||"bottom"};Axis2D.prototype={constructor:Axis2D,index:0,onZero:!1,model:null,isHorizontal:function(){var position=this.position;return"top"===position||"bottom"===position},getGlobalExtent:function(){var ret=this.getExtent();return ret[0]=this.toGlobalCoord(ret[0]),ret[1]=this.toGlobalCoord(ret[1]),ret},getLabelInterval:function(){var labelInterval=this._labelInterval;return labelInterval||(labelInterval=this._labelInterval=axisLabelInterval(this)),labelInterval},isLabelIgnored:function(idx){if("category"===this.type){var labelInterval=this.getLabelInterval();return"function"==typeof labelInterval&&!labelInterval(idx,this.scale.getLabel(idx))||idx%(labelInterval+1)}},toLocalCoord:null,toGlobalCoord:null},zrUtil.inherits(Axis2D,Axis),module.exports=Axis2D},function(module,exports,__webpack_require__){function fixExtentWithBands(extent,nTick){var size=extent[1]-extent[0],len=nTick,margin=size/len/2;extent[0]+=margin,extent[1]-=margin}var numberUtil=__webpack_require__(7),linearMap=numberUtil.linearMap,zrUtil=__webpack_require__(4),normalizedExtent=[0,1],Axis=function(dim,scale,extent){this.dim=dim,this.scale=scale,this._extent=extent||[0,0],this.inverse=!1,this.onBand=!1};Axis.prototype={constructor:Axis,contain:function(coord){var extent=this._extent,min=Math.min(extent[0],extent[1]),max=Math.max(extent[0],extent[1]);return coord>=min&&coord<=max},containData:function(data){return this.contain(this.dataToCoord(data))},getExtent:function(){var ret=this._extent.slice();return ret},getPixelPrecision:function(dataExtent){return numberUtil.getPixelPrecision(dataExtent||this.scale.getExtent(),this._extent)},setExtent:function(start,end){var extent=this._extent;extent[0]=start,extent[1]=end},dataToCoord:function(data,clamp){var extent=this._extent,scale=this.scale;return data=scale.normalize(data),this.onBand&&"ordinal"===scale.type&&(extent=extent.slice(),fixExtentWithBands(extent,scale.count())),linearMap(data,normalizedExtent,extent,clamp)},coordToData:function(coord,clamp){var extent=this._extent,scale=this.scale;this.onBand&&"ordinal"===scale.type&&(extent=extent.slice(),fixExtentWithBands(extent,scale.count()));var t=linearMap(coord,extent,normalizedExtent,clamp);return this.scale.scale(t)},getTicksCoords:function(alignWithLabel){if(this.onBand&&!alignWithLabel){for(var bands=this.getBands(),coords=[],i=0;i<bands.length;i++)coords.push(bands[i][0]);return bands[i-1]&&coords.push(bands[i-1][1]),coords}return zrUtil.map(this.scale.getTicks(),this.dataToCoord,this)},getLabelsCoords:function(){return zrUtil.map(this.scale.getTicks(),this.dataToCoord,this)},getBands:function(){for(var extent=this.getExtent(),bands=[],len=this.scale.count(),start=extent[0],end=extent[1],span=end-start,i=0;i<len;i++)bands.push([span*i/len+start,span*(i+1)/len+start]);return bands},getBandWidth:function(){var axisExtent=this._extent,dataExtent=this.scale.getExtent(),len=dataExtent[1]-dataExtent[0]+(this.onBand?1:0);0===len&&(len=1);var size=Math.abs(axisExtent[1]-axisExtent[0]);return Math.abs(size)/len}},module.exports=Axis},function(module,exports,__webpack_require__){"use strict";var zrUtil=__webpack_require__(4),axisHelper=__webpack_require__(114);module.exports=function(axis){var axisModel=axis.model,labelModel=axisModel.getModel("axisLabel"),labelInterval=labelModel.get("interval");
return"category"!==axis.type||"auto"!==labelInterval?"auto"===labelInterval?0:labelInterval:axisHelper.getAxisLabelInterval(zrUtil.map(axis.scale.getTicks(),axis.dataToCoord,axis),axisModel.getFormattedLabels(),labelModel.getModel("textStyle").getFont(),axis.isHorizontal())}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(126);var ComponentModel=__webpack_require__(19);module.exports=ComponentModel.extend({type:"grid",dependencies:["xAxis","yAxis"],layoutMode:"box",coordinateSystem:null,defaultOption:{show:!1,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:60,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"}})},function(module,exports,__webpack_require__){"use strict";function getAxisType(axisDim,option){return option.type||(option.data?"category":"value")}var ComponentModel=__webpack_require__(19),zrUtil=__webpack_require__(4),axisModelCreator=__webpack_require__(127),AxisModel=ComponentModel.extend({type:"cartesian2dAxis",axis:null,init:function(){AxisModel.superApply(this,"init",arguments),this._resetRange()},mergeOption:function(){AxisModel.superApply(this,"mergeOption",arguments),this._resetRange()},restoreData:function(){AxisModel.superApply(this,"restoreData",arguments),this._resetRange()},setRange:function(rangeStart,rangeEnd){this.option.rangeStart=rangeStart,this.option.rangeEnd=rangeEnd},getMin:function(){var option=this.option;return null!=option.rangeStart?option.rangeStart:option.min},getMax:function(){var option=this.option;return null!=option.rangeEnd?option.rangeEnd:option.max},getNeedCrossZero:function(){var option=this.option;return null==option.rangeStart&&null==option.rangeEnd&&!option.scale},findGridModel:function(){return this.ecModel.queryComponents({mainType:"grid",index:this.get("gridIndex"),id:this.get("gridId")})[0]},_resetRange:function(){this.option.rangeStart=this.option.rangeEnd=null}});zrUtil.merge(AxisModel.prototype,__webpack_require__(129));var extraOption={offset:0};axisModelCreator("x",AxisModel,getAxisType,extraOption),axisModelCreator("y",AxisModel,getAxisType,extraOption),module.exports=AxisModel},function(module,exports,__webpack_require__){var axisDefault=__webpack_require__(128),zrUtil=__webpack_require__(4),ComponentModel=__webpack_require__(19),layout=__webpack_require__(21),AXIS_TYPES=["value","category","time","log"];module.exports=function(axisName,BaseAxisModelClass,axisTypeDefaulter,extraDefaultOption){zrUtil.each(AXIS_TYPES,function(axisType){BaseAxisModelClass.extend({type:axisName+"Axis."+axisType,mergeDefaultAndTheme:function(option,ecModel){var layoutMode=this.layoutMode,inputPositionParams=layoutMode?layout.getLayoutParams(option):{},themeModel=ecModel.getTheme();zrUtil.merge(option,themeModel.get(axisType+"Axis")),zrUtil.merge(option,this.getDefaultOption()),option.type=axisTypeDefaulter(axisName,option),layoutMode&&layout.mergeLayoutParam(option,inputPositionParams,layoutMode)},defaultOption:zrUtil.mergeAll([{},axisDefault[axisType+"Axis"],extraDefaultOption],!0)})}),ComponentModel.registerSubTypeDefaulter(axisName+"Axis",zrUtil.curry(axisTypeDefaulter,axisName))}},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4),defaultOption={show:!0,zlevel:0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisLine:{show:!0,onZero:!0,lineStyle:{color:"#333",width:1,type:"solid"}},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,margin:8,textStyle:{fontSize:12}},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},categoryAxis=zrUtil.merge({boundaryGap:!0,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},defaultOption),valueAxis=zrUtil.merge({boundaryGap:[0,0],splitNumber:5},defaultOption),timeAxis=zrUtil.defaults({scale:!0,min:"dataMin",max:"dataMax"},valueAxis),logAxis=zrUtil.defaults({logBase:10},valueAxis);logAxis.scale=!0,module.exports={categoryAxis:categoryAxis,valueAxis:valueAxis,timeAxis:timeAxis,logAxis:logAxis}},function(module,exports,__webpack_require__){function getName(obj){return zrUtil.isObject(obj)&&null!=obj.value?obj.value:obj}function getCategories(){return"category"===this.get("type")&&zrUtil.map(this.get("data"),getName)}function getFormattedLabels(){return axisHelper.getFormattedLabels(this.axis,this.get("axisLabel.formatter"))}var zrUtil=__webpack_require__(4),axisHelper=__webpack_require__(114);module.exports={getFormattedLabels:getFormattedLabels,getCategories:getCategories}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(126),__webpack_require__(131)},function(module,exports,__webpack_require__){function layoutAxis(gridModel,axisModel){function getZero(dim,val){var theAxis=grid.getAxis(dim);return theAxis.toGlobalCoord(theAxis.dataToCoord(0))}var grid=gridModel.coordinateSystem,axis=axisModel.axis,layout={},rawAxisPosition=axis.position,axisPosition=axis.onZero?"onZero":rawAxisPosition,axisDim=axis.dim,rect=grid.getRect(),rectBound=[rect.x,rect.x+rect.width,rect.y,rect.y+rect.height],axisOffset=axisModel.get("offset")||0,posMap={x:{top:rectBound[2]-axisOffset,bottom:rectBound[3]+axisOffset},y:{left:rectBound[0]-axisOffset,right:rectBound[1]+axisOffset}};posMap.x.onZero=Math.max(Math.min(getZero("y"),posMap.x.bottom),posMap.x.top),posMap.y.onZero=Math.max(Math.min(getZero("x"),posMap.y.right),posMap.y.left),layout.position=["y"===axisDim?posMap.y[axisPosition]:rectBound[0],"x"===axisDim?posMap.x[axisPosition]:rectBound[3]],layout.rotation=Math.PI/2*("x"===axisDim?0:1);var dirMap={top:-1,bottom:1,left:-1,right:1};layout.labelDirection=layout.tickDirection=layout.nameDirection=dirMap[rawAxisPosition],axis.onZero&&(layout.labelOffset=posMap[axisDim][rawAxisPosition]-posMap[axisDim].onZero),axisModel.getModel("axisTick").get("inside")&&(layout.tickDirection=-layout.tickDirection),axisModel.getModel("axisLabel").get("inside")&&(layout.labelDirection=-layout.labelDirection);var labelRotation=axisModel.getModel("axisLabel").get("rotate");return layout.labelRotation="top"===axisPosition?-labelRotation:labelRotation,layout.labelInterval=axis.getLabelInterval(),layout.z2=1,layout}var zrUtil=__webpack_require__(4),graphic=__webpack_require__(43),AxisBuilder=__webpack_require__(132),ifIgnoreOnTick=AxisBuilder.ifIgnoreOnTick,getInterval=AxisBuilder.getInterval,axisBuilderAttrs=["axisLine","axisLabel","axisTick","axisName"],selfBuilderAttrs=["splitArea","splitLine"],AxisView=__webpack_require__(1).extendComponentView({type:"axis",render:function(axisModel,ecModel){this.group.removeAll();var oldAxisGroup=this._axisGroup;if(this._axisGroup=new graphic.Group,this.group.add(this._axisGroup),axisModel.get("show")){var gridModel=axisModel.findGridModel(),layout=layoutAxis(gridModel,axisModel),axisBuilder=new AxisBuilder(axisModel,layout);zrUtil.each(axisBuilderAttrs,axisBuilder.add,axisBuilder),this._axisGroup.add(axisBuilder.getGroup()),zrUtil.each(selfBuilderAttrs,function(name){axisModel.get(name+".show")&&this["_"+name](axisModel,gridModel,layout.labelInterval)},this),graphic.groupTransition(oldAxisGroup,this._axisGroup,axisModel)}},_splitLine:function(axisModel,gridModel,labelInterval){var axis=axisModel.axis,splitLineModel=axisModel.getModel("splitLine"),lineStyleModel=splitLineModel.getModel("lineStyle"),lineColors=lineStyleModel.get("color"),lineInterval=getInterval(splitLineModel,labelInterval);lineColors=zrUtil.isArray(lineColors)?lineColors:[lineColors];for(var gridRect=gridModel.coordinateSystem.getRect(),isHorizontal=axis.isHorizontal(),lineCount=0,ticksCoords=axis.getTicksCoords(),ticks=axis.scale.getTicks(),p1=[],p2=[],lineStyle=lineStyleModel.getLineStyle(),i=0;i<ticksCoords.length;i++)if(!ifIgnoreOnTick(axis,i,lineInterval)){var tickCoord=axis.toGlobalCoord(ticksCoords[i]);isHorizontal?(p1[0]=tickCoord,p1[1]=gridRect.y,p2[0]=tickCoord,p2[1]=gridRect.y+gridRect.height):(p1[0]=gridRect.x,p1[1]=tickCoord,p2[0]=gridRect.x+gridRect.width,p2[1]=tickCoord);var colorIndex=lineCount++%lineColors.length;this._axisGroup.add(new graphic.Line(graphic.subPixelOptimizeLine({anid:"line_"+ticks[i],shape:{x1:p1[0],y1:p1[1],x2:p2[0],y2:p2[1]},style:zrUtil.defaults({stroke:lineColors[colorIndex]},lineStyle),silent:!0})))}},_splitArea:function(axisModel,gridModel,labelInterval){var axis=axisModel.axis,splitAreaModel=axisModel.getModel("splitArea"),areaStyleModel=splitAreaModel.getModel("areaStyle"),areaColors=areaStyleModel.get("color"),gridRect=gridModel.coordinateSystem.getRect(),ticksCoords=axis.getTicksCoords(),ticks=axis.scale.getTicks(),prevX=axis.toGlobalCoord(ticksCoords[0]),prevY=axis.toGlobalCoord(ticksCoords[0]),count=0,areaInterval=getInterval(splitAreaModel,labelInterval),areaStyle=areaStyleModel.getAreaStyle();areaColors=zrUtil.isArray(areaColors)?areaColors:[areaColors];for(var i=1;i<ticksCoords.length;i++)if(!ifIgnoreOnTick(axis,i,areaInterval)){var x,y,width,height,tickCoord=axis.toGlobalCoord(ticksCoords[i]);axis.isHorizontal()?(x=prevX,y=gridRect.y,width=tickCoord-x,height=gridRect.height):(x=gridRect.x,y=prevY,width=gridRect.width,height=tickCoord-y);var colorIndex=count++%areaColors.length;this._axisGroup.add(new graphic.Rect({anid:"area_"+ticks[i],shape:{x:x,y:y,width:width,height:height},style:zrUtil.defaults({fill:areaColors[colorIndex]},areaStyle),silent:!0})),prevX=x+width,prevY=y+height}}});AxisView.extend({type:"xAxis"}),AxisView.extend({type:"yAxis"})},function(module,exports,__webpack_require__){function makeAxisEventDataBase(axisModel){var eventData={componentType:axisModel.mainType};return eventData[axisModel.mainType+"Index"]=axisModel.componentIndex,eventData}function innerTextLayout(opt,textRotation,direction){var textAlign,verticalAlign,rotationDiff=remRadian(textRotation-opt.rotation);return isRadianAroundZero(rotationDiff)?(verticalAlign=direction>0?"top":"bottom",textAlign="center"):isRadianAroundZero(rotationDiff-PI)?(verticalAlign=direction>0?"bottom":"top",textAlign="center"):(verticalAlign="middle",textAlign=rotationDiff>0&&rotationDiff<PI?direction>0?"right":"left":direction>0?"left":"right"),{rotation:rotationDiff,textAlign:textAlign,verticalAlign:verticalAlign}}function endTextLayout(opt,textPosition,textRotate,extent){var textAlign,verticalAlign,rotationDiff=remRadian(textRotate-opt.rotation),inverse=extent[0]>extent[1],onLeft="start"===textPosition&&!inverse||"start"!==textPosition&&inverse;return isRadianAroundZero(rotationDiff-PI/2)?(verticalAlign=onLeft?"bottom":"top",textAlign="center"):isRadianAroundZero(rotationDiff-1.5*PI)?(verticalAlign=onLeft?"top":"bottom",textAlign="center"):(verticalAlign="middle",textAlign=rotationDiff<1.5*PI&&rotationDiff>PI/2?onLeft?"left":"right":onLeft?"right":"left"),{rotation:rotationDiff,textAlign:textAlign,verticalAlign:verticalAlign}}function isSilent(axisModel){var tooltipOpt=axisModel.get("tooltip");return axisModel.get("silent")||!(axisModel.get("triggerEvent")||tooltipOpt&&tooltipOpt.show)}var zrUtil=__webpack_require__(4),formatUtil=__webpack_require__(6),graphic=__webpack_require__(43),Model=__webpack_require__(12),numberUtil=__webpack_require__(7),remRadian=numberUtil.remRadian,isRadianAroundZero=numberUtil.isRadianAroundZero,vec2=__webpack_require__(10),v2ApplyTransform=vec2.applyTransform,retrieve=zrUtil.retrieve,PI=Math.PI,AxisBuilder=function(axisModel,opt){this.opt=opt,this.axisModel=axisModel,zrUtil.defaults(opt,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0}),this.group=new graphic.Group;var dumbGroup=new graphic.Group({position:opt.position.slice(),rotation:opt.rotation});dumbGroup.updateTransform(),this._transform=dumbGroup.transform,this._dumbGroup=dumbGroup};AxisBuilder.prototype={constructor:AxisBuilder,hasBuilder:function(name){return!!builders[name]},add:function(name){builders[name].call(this)},getGroup:function(){return this.group}};var builders={axisLine:function(){var opt=this.opt,axisModel=this.axisModel;if(axisModel.get("axisLine.show")){var extent=this.axisModel.axis.getExtent(),matrix=this._transform,pt1=[extent[0],0],pt2=[extent[1],0];matrix&&(v2ApplyTransform(pt1,pt1,matrix),v2ApplyTransform(pt2,pt2,matrix)),this.group.add(new graphic.Line(graphic.subPixelOptimizeLine({anid:"line",shape:{x1:pt1[0],y1:pt1[1],x2:pt2[0],y2:pt2[1]},style:zrUtil.extend({lineCap:"round"},axisModel.getModel("axisLine.lineStyle").getLineStyle()),strokeContainThreshold:opt.strokeContainThreshold||5,silent:!0,z2:1})))}},axisTick:function(){var axisModel=this.axisModel;if(axisModel.get("axisTick.show"))for(var axis=axisModel.axis,tickModel=axisModel.getModel("axisTick"),opt=this.opt,lineStyleModel=tickModel.getModel("lineStyle"),tickLen=tickModel.get("length"),tickInterval=getInterval(tickModel,opt.labelInterval),ticksCoords=axis.getTicksCoords(tickModel.get("alignWithLabel")),ticks=axis.scale.getTicks(),pt1=[],pt2=[],matrix=this._transform,i=0;i<ticksCoords.length;i++)if(!ifIgnoreOnTick(axis,i,tickInterval)){var tickCoord=ticksCoords[i];pt1[0]=tickCoord,pt1[1]=0,pt2[0]=tickCoord,pt2[1]=opt.tickDirection*tickLen,matrix&&(v2ApplyTransform(pt1,pt1,matrix),v2ApplyTransform(pt2,pt2,matrix)),this.group.add(new graphic.Line(graphic.subPixelOptimizeLine({anid:"tick_"+ticks[i],shape:{x1:pt1[0],y1:pt1[1],x2:pt2[0],y2:pt2[1]},style:zrUtil.defaults(lineStyleModel.getLineStyle(),{stroke:axisModel.get("axisLine.lineStyle.color")}),z2:2,silent:!0})))}},axisLabel:function(){function isTwoLabelOverlapped(current,next){var firstRect=current&&current.getBoundingRect().clone(),nextRect=next&&next.getBoundingRect().clone();if(firstRect&&nextRect)return firstRect.applyTransform(current.getLocalTransform()),nextRect.applyTransform(next.getLocalTransform()),firstRect.intersect(nextRect)}var opt=this.opt,axisModel=this.axisModel,show=retrieve(opt.axisLabelShow,axisModel.get("axisLabel.show"));if(show){var axis=axisModel.axis,labelModel=axisModel.getModel("axisLabel"),textStyleModel=labelModel.getModel("textStyle"),labelMargin=labelModel.get("margin"),ticks=axis.scale.getTicks(),labels=axisModel.getFormattedLabels(),labelRotation=retrieve(opt.labelRotation,labelModel.get("rotate"))||0;labelRotation=labelRotation*PI/180;for(var labelLayout=innerTextLayout(opt,labelRotation,opt.labelDirection),categoryData=axisModel.get("data"),textEls=[],silent=isSilent(axisModel),triggerEvent=axisModel.get("triggerEvent"),i=0;i<ticks.length;i++)if(!ifIgnoreOnTick(axis,i,opt.labelInterval)){var itemTextStyleModel=textStyleModel;categoryData&&categoryData[i]&&categoryData[i].textStyle&&(itemTextStyleModel=new Model(categoryData[i].textStyle,textStyleModel,axisModel.ecModel));var textColor=itemTextStyleModel.getTextColor()||axisModel.get("axisLine.lineStyle.color"),tickCoord=axis.dataToCoord(ticks[i]),pos=[tickCoord,opt.labelOffset+opt.labelDirection*labelMargin],labelBeforeFormat=axis.scale.getLabel(ticks[i]),textEl=new graphic.Text({anid:"label_"+ticks[i],style:{text:labels[i],textAlign:itemTextStyleModel.get("align",!0)||labelLayout.textAlign,textVerticalAlign:itemTextStyleModel.get("baseline",!0)||labelLayout.verticalAlign,textFont:itemTextStyleModel.getFont(),fill:"function"==typeof textColor?textColor(labelBeforeFormat):textColor},position:pos,rotation:labelLayout.rotation,silent:silent,z2:10});triggerEvent&&(textEl.eventData=makeAxisEventDataBase(axisModel),textEl.eventData.targetType="axisLabel",textEl.eventData.value=labelBeforeFormat),this._dumbGroup.add(textEl),textEl.updateTransform(),textEls.push(textEl),this.group.add(textEl),textEl.decomposeTransform()}if("category"!==axis.type){if(axisModel.getMin?axisModel.getMin():axisModel.get("min")){var firstLabel=textEls[0],nextLabel=textEls[1];isTwoLabelOverlapped(firstLabel,nextLabel)&&(firstLabel.ignore=!0)}if(axisModel.getMax?axisModel.getMax():axisModel.get("max")){var lastLabel=textEls[textEls.length-1],prevLabel=textEls[textEls.length-2];isTwoLabelOverlapped(prevLabel,lastLabel)&&(lastLabel.ignore=!0)}}}},axisName:function(){var opt=this.opt,axisModel=this.axisModel,name=retrieve(opt.axisName,axisModel.get("name"));if(name){var labelLayout,nameLocation=axisModel.get("nameLocation"),nameDirection=opt.nameDirection,textStyleModel=axisModel.getModel("nameTextStyle"),gap=axisModel.get("nameGap")||0,extent=this.axisModel.axis.getExtent(),gapSignal=extent[0]>extent[1]?-1:1,pos=["start"===nameLocation?extent[0]-gapSignal*gap:"end"===nameLocation?extent[1]+gapSignal*gap:(extent[0]+extent[1])/2,"middle"===nameLocation?opt.labelOffset+nameDirection*gap:0],nameRotation=axisModel.get("nameRotate");null!=nameRotation&&(nameRotation=nameRotation*PI/180);var axisNameAvailableWidth;"middle"===nameLocation?labelLayout=innerTextLayout(opt,null!=nameRotation?nameRotation:opt.rotation,nameDirection):(labelLayout=endTextLayout(opt,nameLocation,nameRotation||0,extent),axisNameAvailableWidth=opt.axisNameAvailableWidth,null!=axisNameAvailableWidth&&(axisNameAvailableWidth=Math.abs(axisNameAvailableWidth/Math.sin(labelLayout.rotation)),!isFinite(axisNameAvailableWidth)&&(axisNameAvailableWidth=null)));var textFont=textStyleModel.getFont(),truncateOpt=axisModel.get("nameTruncate",!0)||{},ellipsis=truncateOpt.ellipsis,maxWidth=retrieve(truncateOpt.maxWidth,axisNameAvailableWidth),truncatedText=null!=ellipsis&&null!=maxWidth?formatUtil.truncateText(name,maxWidth,textFont,ellipsis,{minChar:2,placeholder:truncateOpt.placeholder}):name,tooltipOpt=axisModel.get("tooltip",!0),mainType=axisModel.mainType,formatterParams={componentType:mainType,name:name,$vars:["name"]};formatterParams[mainType+"Index"]=axisModel.componentIndex;var textEl=new graphic.Text({anid:"name",__fullText:name,__truncatedText:truncatedText,style:{text:truncatedText,textFont:textFont,fill:textStyleModel.getTextColor()||axisModel.get("axisLine.lineStyle.color"),textAlign:labelLayout.textAlign,textVerticalAlign:labelLayout.verticalAlign},position:pos,rotation:labelLayout.rotation,silent:isSilent(axisModel),z2:1,tooltip:tooltipOpt&&tooltipOpt.show?zrUtil.extend({content:name,formatter:function(){return name},formatterParams:formatterParams},tooltipOpt):null});axisModel.get("triggerEvent")&&(textEl.eventData=makeAxisEventDataBase(axisModel),textEl.eventData.targetType="axisName",textEl.eventData.name=name),this._dumbGroup.add(textEl),textEl.updateTransform(),this.group.add(textEl),textEl.decomposeTransform()}}},ifIgnoreOnTick=AxisBuilder.ifIgnoreOnTick=function(axis,i,interval){var rawTick,scale=axis.scale;return"ordinal"===scale.type&&("function"==typeof interval?(rawTick=scale.getTicks()[i],!interval(rawTick,scale.getLabel(rawTick))):i%(interval+1))},getInterval=AxisBuilder.getInterval=function(model,labelInterval){var interval=model.get("interval");return null!=interval&&"auto"!=interval||(interval=labelInterval),interval};module.exports=AxisBuilder},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);__webpack_require__(113),__webpack_require__(134),__webpack_require__(135);var barLayoutGrid=__webpack_require__(137),echarts=__webpack_require__(1);echarts.registerLayout(zrUtil.curry(barLayoutGrid,"bar")),echarts.registerVisual(function(ecModel){ecModel.eachSeriesByType("bar",function(seriesModel){var data=seriesModel.getData();data.setVisual("legendSymbol","roundRect")})}),__webpack_require__(112)},function(module,exports,__webpack_require__){"use strict";var SeriesModel=__webpack_require__(28),createListFromArray=__webpack_require__(101);module.exports=SeriesModel.extend({type:"series.bar",dependencies:["grid","polar"],getInitialData:function(option,ecModel){var coordSys=option.coordinateSystem;if("cartesian2d"!==coordSys)throw new Error("Bar only support cartesian2d coordinateSystem");return createListFromArray(option.data,this,ecModel)},getMarkerPosition:function(value){var coordSys=this.coordinateSystem;if(coordSys){var pt=coordSys.dataToPoint(value,!0),data=this.getData(),offset=data.getLayout("offset"),size=data.getLayout("size"),offsetIndex=coordSys.getBaseAxis().isHorizontal()?0:1;return pt[offsetIndex]+=offset+size/2,pt}return[NaN,NaN]},brushSelector:"rect",defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,itemStyle:{normal:{},emphasis:{}}}})},function(module,exports,__webpack_require__){"use strict";function fixLayoutWithLineWidth(layout,lineWidth){var signX=layout.width>0?1:-1,signY=layout.height>0?1:-1;lineWidth=Math.min(lineWidth,Math.abs(layout.width),Math.abs(layout.height)),layout.x+=signX*lineWidth/2,layout.y+=signY*lineWidth/2,layout.width-=signX*lineWidth,layout.height-=signY*lineWidth}var zrUtil=__webpack_require__(4),graphic=__webpack_require__(43);zrUtil.extend(__webpack_require__(12).prototype,__webpack_require__(136)),module.exports=__webpack_require__(1).extendChartView({type:"bar",render:function(seriesModel,ecModel,api){var coordinateSystemType=seriesModel.get("coordinateSystem");return"cartesian2d"===coordinateSystemType&&this._renderOnCartesian(seriesModel,ecModel,api),this.group},_renderOnCartesian:function(seriesModel,ecModel,api){function createRect(dataIndex,isUpdate){var layout=data.getItemLayout(dataIndex),lineWidth=data.getItemModel(dataIndex).get(barBorderWidthQuery)||0;fixLayoutWithLineWidth(layout,lineWidth);var rect=new graphic.Rect({shape:zrUtil.extend({},layout)});if(enableAnimation){var rectShape=rect.shape,animateProperty=isHorizontal?"height":"width",animateTarget={};rectShape[animateProperty]=0,animateTarget[animateProperty]=layout[animateProperty],graphic[isUpdate?"updateProps":"initProps"](rect,{shape:animateTarget},seriesModel,dataIndex)}return rect}var group=this.group,data=seriesModel.getData(),oldData=this._data,cartesian=seriesModel.coordinateSystem,baseAxis=cartesian.getBaseAxis(),isHorizontal=baseAxis.isHorizontal(),enableAnimation=seriesModel.get("animation"),barBorderWidthQuery=["itemStyle","normal","barBorderWidth"];data.diff(oldData).add(function(dataIndex){if(data.hasValue(dataIndex)){var rect=createRect(dataIndex);data.setItemGraphicEl(dataIndex,rect),group.add(rect)}}).update(function(newIndex,oldIndex){var rect=oldData.getItemGraphicEl(oldIndex);if(!data.hasValue(newIndex))return void group.remove(rect);rect||(rect=createRect(newIndex,!0));var layout=data.getItemLayout(newIndex),lineWidth=data.getItemModel(newIndex).get(barBorderWidthQuery)||0;fixLayoutWithLineWidth(layout,lineWidth),graphic.updateProps(rect,{shape:layout},seriesModel,newIndex),data.setItemGraphicEl(newIndex,rect),group.add(rect)}).remove(function(idx){var rect=oldData.getItemGraphicEl(idx);rect&&(rect.style.text="",graphic.updateProps(rect,{shape:{width:0}},seriesModel,idx,function(){group.remove(rect)}))}).execute(),this._updateStyle(seriesModel,data,isHorizontal),this._data=data},_updateStyle:function(seriesModel,data,isHorizontal){function setLabel(style,model,color,labelText,labelPositionOutside){graphic.setText(style,model,color),style.text=labelText,"outside"===style.textPosition&&(style.textPosition=labelPositionOutside)}data.eachItemGraphicEl(function(rect,idx){var itemModel=data.getItemModel(idx),color=data.getItemVisual(idx,"color"),opacity=data.getItemVisual(idx,"opacity"),layout=data.getItemLayout(idx),itemStyleModel=itemModel.getModel("itemStyle.normal"),hoverStyle=itemModel.getModel("itemStyle.emphasis").getBarItemStyle();rect.setShape("r",itemStyleModel.get("barBorderRadius")||0),rect.useStyle(zrUtil.defaults({fill:color,opacity:opacity},itemStyleModel.getBarItemStyle()));var labelPositionOutside=isHorizontal?layout.height>0?"bottom":"top":layout.width>0?"left":"right",labelModel=itemModel.getModel("label.normal"),hoverLabelModel=itemModel.getModel("label.emphasis"),rectStyle=rect.style;labelModel.get("show")?setLabel(rectStyle,labelModel,color,zrUtil.retrieve(seriesModel.getFormattedLabel(idx,"normal"),seriesModel.getRawValue(idx)),labelPositionOutside):rectStyle.text="",hoverLabelModel.get("show")?setLabel(hoverStyle,hoverLabelModel,color,zrUtil.retrieve(seriesModel.getFormattedLabel(idx,"emphasis"),seriesModel.getRawValue(idx)),labelPositionOutside):hoverStyle.text="",graphic.setHoverStyle(rect,hoverStyle)})},remove:function(ecModel,api){var group=this.group;ecModel.get("animation")?this._data&&this._data.eachItemGraphicEl(function(el){el.style.text="",graphic.updateProps(el,{shape:{width:0}},ecModel,el.dataIndex,function(){group.remove(el)})}):group.removeAll()}})},function(module,exports,__webpack_require__){var getBarItemStyle=__webpack_require__(15)([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["stroke","barBorderColor"],["lineWidth","barBorderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]);module.exports={getBarItemStyle:function(excludes){var style=getBarItemStyle.call(this,excludes);if(this.getBorderLineDash){var lineDash=this.getBorderLineDash();lineDash&&(style.lineDash=lineDash)}return style}}},function(module,exports,__webpack_require__){"use strict";function getSeriesStackId(seriesModel){return seriesModel.get("stack")||"__ec_stack_"+seriesModel.seriesIndex}function getAxisKey(axis){return axis.dim+axis.index}function calBarWidthAndOffset(barSeries,api){var columnsMap={};zrUtil.each(barSeries,function(seriesModel,idx){var data=seriesModel.getData(),cartesian=seriesModel.coordinateSystem,baseAxis=cartesian.getBaseAxis(),axisExtent=baseAxis.getExtent(),bandWidth="category"===baseAxis.type?baseAxis.getBandWidth():Math.abs(axisExtent[1]-axisExtent[0])/data.count(),columnsOnAxis=columnsMap[getAxisKey(baseAxis)]||{bandWidth:bandWidth,remainedWidth:bandWidth,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},stacks=columnsOnAxis.stacks;columnsMap[getAxisKey(baseAxis)]=columnsOnAxis;var stackId=getSeriesStackId(seriesModel);stacks[stackId]||columnsOnAxis.autoWidthCount++,stacks[stackId]=stacks[stackId]||{width:0,maxWidth:0};var barWidth=parsePercent(seriesModel.get("barWidth"),bandWidth),barMaxWidth=parsePercent(seriesModel.get("barMaxWidth"),bandWidth),barGap=seriesModel.get("barGap"),barCategoryGap=seriesModel.get("barCategoryGap");barWidth&&!stacks[stackId].width&&(barWidth=Math.min(columnsOnAxis.remainedWidth,barWidth),stacks[stackId].width=barWidth,columnsOnAxis.remainedWidth-=barWidth),barMaxWidth&&(stacks[stackId].maxWidth=barMaxWidth),null!=barGap&&(columnsOnAxis.gap=barGap),null!=barCategoryGap&&(columnsOnAxis.categoryGap=barCategoryGap)});var result={};return zrUtil.each(columnsMap,function(columnsOnAxis,coordSysName){result[coordSysName]={};var stacks=columnsOnAxis.stacks,bandWidth=columnsOnAxis.bandWidth,categoryGap=parsePercent(columnsOnAxis.categoryGap,bandWidth),barGapPercent=parsePercent(columnsOnAxis.gap,1),remainedWidth=columnsOnAxis.remainedWidth,autoWidthCount=columnsOnAxis.autoWidthCount,autoWidth=(remainedWidth-categoryGap)/(autoWidthCount+(autoWidthCount-1)*barGapPercent);autoWidth=Math.max(autoWidth,0),zrUtil.each(stacks,function(column,stack){var maxWidth=column.maxWidth;!column.width&&maxWidth&&maxWidth<autoWidth&&(maxWidth=Math.min(maxWidth,remainedWidth),remainedWidth-=maxWidth,column.width=maxWidth,autoWidthCount--)}),autoWidth=(remainedWidth-categoryGap)/(autoWidthCount+(autoWidthCount-1)*barGapPercent),autoWidth=Math.max(autoWidth,0);var lastColumn,widthSum=0;zrUtil.each(stacks,function(column,idx){column.width||(column.width=autoWidth),lastColumn=column,widthSum+=column.width*(1+barGapPercent)}),lastColumn&&(widthSum-=lastColumn.width*barGapPercent);var offset=-widthSum/2;zrUtil.each(stacks,function(column,stackId){result[coordSysName][stackId]=result[coordSysName][stackId]||{offset:offset,width:column.width},offset+=column.width*(1+barGapPercent)})}),result}function barLayoutGrid(seriesType,ecModel,api){var barWidthAndOffset=calBarWidthAndOffset(zrUtil.filter(ecModel.getSeriesByType(seriesType),function(seriesModel){return!ecModel.isSeriesFiltered(seriesModel)&&seriesModel.coordinateSystem&&"cartesian2d"===seriesModel.coordinateSystem.type})),lastStackCoords={};ecModel.eachSeriesByType(seriesType,function(seriesModel){var data=seriesModel.getData(),cartesian=seriesModel.coordinateSystem,baseAxis=cartesian.getBaseAxis(),stackId=getSeriesStackId(seriesModel),columnLayoutInfo=barWidthAndOffset[getAxisKey(baseAxis)][stackId],columnOffset=columnLayoutInfo.offset,columnWidth=columnLayoutInfo.width,valueAxis=cartesian.getOtherAxis(baseAxis),barMinHeight=seriesModel.get("barMinHeight")||0,valueAxisStart=baseAxis.onZero?valueAxis.toGlobalCoord(valueAxis.dataToCoord(0)):valueAxis.getGlobalExtent()[0],coords=cartesian.dataToPoints(data,!0);lastStackCoords[stackId]=lastStackCoords[stackId]||[],data.setLayout({offset:columnOffset,size:columnWidth}),data.each(valueAxis.dim,function(value,idx){if(!isNaN(value)){lastStackCoords[stackId][idx]||(lastStackCoords[stackId][idx]={p:valueAxisStart,n:valueAxisStart});var x,y,width,height,sign=value>=0?"p":"n",coord=coords[idx],lastCoord=lastStackCoords[stackId][idx][sign];valueAxis.isHorizontal()?(x=lastCoord,y=coord[1]+columnOffset,width=coord[0]-lastCoord,height=columnWidth,Math.abs(width)<barMinHeight&&(width=(width<0?-1:1)*barMinHeight),lastStackCoords[stackId][idx][sign]+=width):(x=coord[0]+columnOffset,y=lastCoord,width=columnWidth,height=coord[1]-lastCoord,Math.abs(height)<barMinHeight&&(height=(height<=0?-1:1)*barMinHeight),lastStackCoords[stackId][idx][sign]+=height),data.setItemLayout(idx,{x:x,y:y,width:width,height:height})}},!0)},this)}var zrUtil=__webpack_require__(4),numberUtil=__webpack_require__(7),parsePercent=numberUtil.parsePercent;module.exports=barLayoutGrid},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4),echarts=__webpack_require__(1);__webpack_require__(139),__webpack_require__(141),__webpack_require__(142)("pie",[{type:"pieToggleSelect",event:"pieselectchanged",method:"toggleSelected"},{type:"pieSelect",event:"pieselected",method:"select"},{type:"pieUnSelect",event:"pieunselected",method:"unSelect"}]),echarts.registerVisual(zrUtil.curry(__webpack_require__(143),"pie")),echarts.registerLayout(zrUtil.curry(__webpack_require__(144),"pie")),echarts.registerProcessor(zrUtil.curry(__webpack_require__(146),"pie"))},function(module,exports,__webpack_require__){"use strict";var List=__webpack_require__(97),zrUtil=__webpack_require__(4),modelUtil=__webpack_require__(5),completeDimensions=__webpack_require__(102),dataSelectableMixin=__webpack_require__(140),PieSeries=__webpack_require__(1).extendSeriesModel({type:"series.pie",init:function(option){PieSeries.superApply(this,"init",arguments),this.legendDataProvider=function(){return this._dataBeforeProcessed},this.updateSelectedMap(option.data),this._defaultLabelLine(option)},mergeOption:function(newOption){PieSeries.superCall(this,"mergeOption",newOption),this.updateSelectedMap(this.option.data)},getInitialData:function(option,ecModel){var dimensions=completeDimensions(["value"],option.data),list=new List(dimensions,this);return list.initData(option.data),list},getDataParams:function(dataIndex){var data=this._data,params=PieSeries.superCall(this,"getDataParams",dataIndex),sum=data.getSum("value");return params.percent=sum?+(data.get("value",dataIndex)/sum*100).toFixed(2):0,params.$vars.push("percent"),params},_defaultLabelLine:function(option){modelUtil.defaultEmphasis(option.labelLine,["show"]);var labelLineNormalOpt=option.labelLine.normal,labelLineEmphasisOpt=option.labelLine.emphasis;labelLineNormalOpt.show=labelLineNormalOpt.show&&option.label.normal.show,labelLineEmphasisOpt.show=labelLineEmphasisOpt.show&&option.label.emphasis.show},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,selectedOffset:10,avoidLabelOverlap:!0,label:{normal:{rotate:!1,show:!0,position:"outer"},emphasis:{}},labelLine:{normal:{show:!0,length:15,length2:15,smooth:!1,lineStyle:{width:1,type:"solid"
}}},itemStyle:{normal:{borderWidth:1},emphasis:{}},animationEasing:"cubicOut",data:[]}});zrUtil.mixin(PieSeries,dataSelectableMixin),module.exports=PieSeries},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);module.exports={updateSelectedMap:function(targetList){this._selectTargetMap=zrUtil.reduce(targetList||[],function(targetMap,target){return targetMap[target.name]=target,targetMap},{})},select:function(name){var targetMap=this._selectTargetMap,target=targetMap[name],selectedMode=this.get("selectedMode");"single"===selectedMode&&zrUtil.each(targetMap,function(target){target.selected=!1}),target&&(target.selected=!0)},unSelect:function(name){var target=this._selectTargetMap[name];target&&(target.selected=!1)},toggleSelected:function(name){var target=this._selectTargetMap[name];if(null!=target)return this[target.selected?"unSelect":"select"](name),target.selected},isSelected:function(name){var target=this._selectTargetMap[name];return target&&target.selected}}},function(module,exports,__webpack_require__){function updateDataSelected(uid,seriesModel,hasAnimation,api){var data=seriesModel.getData(),dataIndex=this.dataIndex,name=data.getName(dataIndex),selectedOffset=seriesModel.get("selectedOffset");api.dispatchAction({type:"pieToggleSelect",from:uid,name:name,seriesId:seriesModel.id}),data.each(function(idx){toggleItemSelected(data.getItemGraphicEl(idx),data.getItemLayout(idx),seriesModel.isSelected(data.getName(idx)),selectedOffset,hasAnimation)})}function toggleItemSelected(el,layout,isSelected,selectedOffset,hasAnimation){var midAngle=(layout.startAngle+layout.endAngle)/2,dx=Math.cos(midAngle),dy=Math.sin(midAngle),offset=isSelected?selectedOffset:0,position=[dx*offset,dy*offset];hasAnimation?el.animate().when(200,{position:position}).start("bounceOut"):el.attr("position",position)}function PiePiece(data,idx){function onEmphasis(){polyline.ignore=polyline.hoverIgnore,text.ignore=text.hoverIgnore}function onNormal(){polyline.ignore=polyline.normalIgnore,text.ignore=text.normalIgnore}graphic.Group.call(this);var sector=new graphic.Sector({z2:2}),polyline=new graphic.Polyline,text=new graphic.Text;this.add(sector),this.add(polyline),this.add(text),this.updateData(data,idx,!0),this.on("emphasis",onEmphasis).on("normal",onNormal).on("mouseover",onEmphasis).on("mouseout",onNormal)}function getLabelStyle(data,idx,state,labelModel,labelPosition){var textStyleModel=labelModel.getModel("textStyle"),isLabelInside="inside"===labelPosition||"inner"===labelPosition;return{fill:textStyleModel.getTextColor()||(isLabelInside?"#fff":data.getItemVisual(idx,"color")),opacity:data.getItemVisual(idx,"opacity"),textFont:textStyleModel.getFont(),text:zrUtil.retrieve(data.hostModel.getFormattedLabel(idx,state),data.getName(idx))}}var graphic=__webpack_require__(43),zrUtil=__webpack_require__(4),piePieceProto=PiePiece.prototype;piePieceProto.updateData=function(data,idx,firstCreate){function onEmphasis(){sector.stopAnimation(!0),sector.animateTo({shape:{r:layout.r+10}},300,"elasticOut")}function onNormal(){sector.stopAnimation(!0),sector.animateTo({shape:{r:layout.r}},300,"elasticOut")}var sector=this.childAt(0),seriesModel=data.hostModel,itemModel=data.getItemModel(idx),layout=data.getItemLayout(idx),sectorShape=zrUtil.extend({},layout);sectorShape.label=null,firstCreate?(sector.setShape(sectorShape),sector.shape.endAngle=layout.startAngle,graphic.updateProps(sector,{shape:{endAngle:layout.endAngle}},seriesModel,idx)):graphic.updateProps(sector,{shape:sectorShape},seriesModel,idx);var itemStyleModel=itemModel.getModel("itemStyle"),visualColor=data.getItemVisual(idx,"color");sector.useStyle(zrUtil.defaults({lineJoin:"bevel",fill:visualColor},itemStyleModel.getModel("normal").getItemStyle())),sector.hoverStyle=itemStyleModel.getModel("emphasis").getItemStyle(),toggleItemSelected(this,data.getItemLayout(idx),itemModel.get("selected"),seriesModel.get("selectedOffset"),seriesModel.get("animation")),sector.off("mouseover").off("mouseout").off("emphasis").off("normal"),itemModel.get("hoverAnimation")&&seriesModel.ifEnableAnimation()&&sector.on("mouseover",onEmphasis).on("mouseout",onNormal).on("emphasis",onEmphasis).on("normal",onNormal),this._updateLabel(data,idx),graphic.setHoverStyle(this)},piePieceProto._updateLabel=function(data,idx){var labelLine=this.childAt(1),labelText=this.childAt(2),seriesModel=data.hostModel,itemModel=data.getItemModel(idx),layout=data.getItemLayout(idx),labelLayout=layout.label,visualColor=data.getItemVisual(idx,"color");graphic.updateProps(labelLine,{shape:{points:labelLayout.linePoints||[[labelLayout.x,labelLayout.y],[labelLayout.x,labelLayout.y],[labelLayout.x,labelLayout.y]]}},seriesModel,idx),graphic.updateProps(labelText,{style:{x:labelLayout.x,y:labelLayout.y}},seriesModel,idx),labelText.attr({style:{textVerticalAlign:labelLayout.verticalAlign,textAlign:labelLayout.textAlign,textFont:labelLayout.font},rotation:labelLayout.rotation,origin:[labelLayout.x,labelLayout.y],z2:10});var labelModel=itemModel.getModel("label.normal"),labelHoverModel=itemModel.getModel("label.emphasis"),labelLineModel=itemModel.getModel("labelLine.normal"),labelLineHoverModel=itemModel.getModel("labelLine.emphasis"),labelPosition=labelModel.get("position")||labelHoverModel.get("position");labelText.setStyle(getLabelStyle(data,idx,"normal",labelModel,labelPosition)),labelText.ignore=labelText.normalIgnore=!labelModel.get("show"),labelText.hoverIgnore=!labelHoverModel.get("show"),labelLine.ignore=labelLine.normalIgnore=!labelLineModel.get("show"),labelLine.hoverIgnore=!labelLineHoverModel.get("show"),labelLine.setStyle({stroke:visualColor,opacity:data.getItemVisual(idx,"opacity")}),labelLine.setStyle(labelLineModel.getModel("lineStyle").getLineStyle()),labelText.hoverStyle=getLabelStyle(data,idx,"emphasis",labelHoverModel,labelPosition),labelLine.hoverStyle=labelLineHoverModel.getModel("lineStyle").getLineStyle();var smooth=labelLineModel.get("smooth");smooth&&smooth===!0&&(smooth=.4),labelLine.setShape({smooth:smooth})},zrUtil.inherits(PiePiece,graphic.Group);var Pie=__webpack_require__(42).extend({type:"pie",init:function(){var sectorGroup=new graphic.Group;this._sectorGroup=sectorGroup},render:function(seriesModel,ecModel,api,payload){if(!payload||payload.from!==this.uid){var data=seriesModel.getData(),oldData=this._data,group=this.group,hasAnimation=ecModel.get("animation"),isFirstRender=!oldData,onSectorClick=zrUtil.curry(updateDataSelected,this.uid,seriesModel,hasAnimation,api),selectedMode=seriesModel.get("selectedMode");if(data.diff(oldData).add(function(idx){var piePiece=new PiePiece(data,idx);isFirstRender&&piePiece.eachChild(function(child){child.stopAnimation(!0)}),selectedMode&&piePiece.on("click",onSectorClick),data.setItemGraphicEl(idx,piePiece),group.add(piePiece)}).update(function(newIdx,oldIdx){var piePiece=oldData.getItemGraphicEl(oldIdx);piePiece.updateData(data,newIdx),piePiece.off("click"),selectedMode&&piePiece.on("click",onSectorClick),group.add(piePiece),data.setItemGraphicEl(newIdx,piePiece)}).remove(function(idx){var piePiece=oldData.getItemGraphicEl(idx);group.remove(piePiece)}).execute(),hasAnimation&&isFirstRender&&data.count()>0){var shape=data.getItemLayout(0),r=Math.max(api.getWidth(),api.getHeight())/2,removeClipPath=zrUtil.bind(group.removeClipPath,group);group.setClipPath(this._createClipPath(shape.cx,shape.cy,r,shape.startAngle,shape.clockwise,removeClipPath,seriesModel))}this._data=data}},_createClipPath:function(cx,cy,r,startAngle,clockwise,cb,seriesModel){var clipPath=new graphic.Sector({shape:{cx:cx,cy:cy,r0:0,r:r,startAngle:startAngle,endAngle:startAngle,clockwise:clockwise}});return graphic.initProps(clipPath,{shape:{endAngle:startAngle+(clockwise?1:-1)*Math.PI*2}},seriesModel,cb),clipPath}});module.exports=Pie},function(module,exports,__webpack_require__){var echarts=__webpack_require__(1),zrUtil=__webpack_require__(4);module.exports=function(seriesType,actionInfos){zrUtil.each(actionInfos,function(actionInfo){actionInfo.update="updateView",echarts.registerAction(actionInfo,function(payload,ecModel){var selected={};return ecModel.eachComponent({mainType:"series",subType:seriesType,query:payload},function(seriesModel){seriesModel[actionInfo.method]&&seriesModel[actionInfo.method](payload.name);var data=seriesModel.getData();data.each(function(idx){var name=data.getName(idx);selected[name]=seriesModel.isSelected(name)||!1})}),{name:payload.name,selected:selected}})})}},function(module,exports){module.exports=function(seriesType,ecModel){var paletteScope={};ecModel.eachRawSeriesByType(seriesType,function(seriesModel){var dataAll=seriesModel.getRawData(),idxMap={};if(!ecModel.isSeriesFiltered(seriesModel)){var data=seriesModel.getData();data.each(function(idx){var rawIdx=data.getRawIndex(idx);idxMap[rawIdx]=idx}),dataAll.each(function(rawIdx){var itemModel=dataAll.getItemModel(rawIdx),filteredIdx=idxMap[rawIdx],singleDataColor=null!=filteredIdx&&data.getItemVisual(filteredIdx,"color",!0);if(singleDataColor)dataAll.setItemVisual(rawIdx,"color",singleDataColor);else{var color=itemModel.get("itemStyle.normal.color")||seriesModel.getColorFromPalette(dataAll.getName(rawIdx),paletteScope);dataAll.setItemVisual(rawIdx,"color",color),null!=filteredIdx&&data.setItemVisual(filteredIdx,"color",color)}})}})}},function(module,exports,__webpack_require__){var numberUtil=__webpack_require__(7),parsePercent=numberUtil.parsePercent,labelLayout=__webpack_require__(145),zrUtil=__webpack_require__(4),PI2=2*Math.PI,RADIAN=Math.PI/180;module.exports=function(seriesType,ecModel,api,payload){ecModel.eachSeriesByType(seriesType,function(seriesModel){var center=seriesModel.get("center"),radius=seriesModel.get("radius");zrUtil.isArray(radius)||(radius=[0,radius]),zrUtil.isArray(center)||(center=[center,center]);var width=api.getWidth(),height=api.getHeight(),size=Math.min(width,height),cx=parsePercent(center[0],width),cy=parsePercent(center[1],height),r0=parsePercent(radius[0],size/2),r=parsePercent(radius[1],size/2),data=seriesModel.getData(),startAngle=-seriesModel.get("startAngle")*RADIAN,minAngle=seriesModel.get("minAngle")*RADIAN,sum=data.getSum("value"),unitRadian=Math.PI/(sum||data.count())*2,clockwise=seriesModel.get("clockwise"),roseType=seriesModel.get("roseType"),extent=data.getDataExtent("value");extent[0]=0;var restAngle=PI2,valueSumLargerThanMinAngle=0,currentAngle=startAngle,dir=clockwise?1:-1;if(data.each("value",function(value,idx){var angle;angle="area"!==roseType?0===sum?unitRadian:value*unitRadian:PI2/(data.count()||1),angle<minAngle?(angle=minAngle,restAngle-=minAngle):valueSumLargerThanMinAngle+=value;var endAngle=currentAngle+dir*angle;data.setItemLayout(idx,{angle:angle,startAngle:currentAngle,endAngle:endAngle,clockwise:clockwise,cx:cx,cy:cy,r0:r0,r:roseType?numberUtil.linearMap(value,extent,[r0,r]):r}),currentAngle=endAngle},!0),restAngle<PI2)if(restAngle<=.001){var angle=PI2/data.count();data.each(function(idx){var layout=data.getItemLayout(idx);layout.startAngle=startAngle+dir*idx*angle,layout.endAngle=startAngle+dir*(idx+1)*angle})}else unitRadian=restAngle/valueSumLargerThanMinAngle,currentAngle=startAngle,data.each("value",function(value,idx){var layout=data.getItemLayout(idx),angle=layout.angle===minAngle?minAngle:value*unitRadian;layout.startAngle=currentAngle,layout.endAngle=currentAngle+dir*angle,currentAngle+=angle});labelLayout(seriesModel,r,width,height)})}},function(module,exports,__webpack_require__){"use strict";function adjustSingleSide(list,cx,cy,r,dir,viewWidth,viewHeight){function shiftDown(start,end,delta,dir){for(var j=start;j<end;j++)if(list[j].y+=delta,j>start&&j+1<end&&list[j+1].y>list[j].y+list[j].height)return void shiftUp(j,delta/2);shiftUp(end-1,delta/2)}function shiftUp(end,delta){for(var j=end;j>=0&&(list[j].y-=delta,!(j>0&&list[j].y>list[j-1].y+list[j-1].height));j--);}function changeX(list,isDownList,cx,cy,r,dir){for(var lastDeltaX=dir>0?isDownList?Number.MAX_VALUE:0:isDownList?Number.MAX_VALUE:0,i=0,l=list.length;i<l;i++)if("center"!==list[i].position){var deltaY=Math.abs(list[i].y-cy),length=list[i].len,length2=list[i].len2,deltaX=deltaY<r+length?Math.sqrt((r+length+length2)*(r+length+length2)-deltaY*deltaY):Math.abs(list[i].x-cx);isDownList&&deltaX>=lastDeltaX&&(deltaX=lastDeltaX-10),!isDownList&&deltaX<=lastDeltaX&&(deltaX=lastDeltaX+10),list[i].x=cx+deltaX*dir,lastDeltaX=deltaX}}list.sort(function(a,b){return a.y-b.y});for(var delta,lastY=0,len=list.length,upList=[],downList=[],i=0;i<len;i++)delta=list[i].y-lastY,delta<0&&shiftDown(i,len,-delta,dir),lastY=list[i].y+list[i].height;viewHeight-lastY<0&&shiftUp(len-1,lastY-viewHeight);for(var i=0;i<len;i++)list[i].y>=cy?downList.push(list[i]):upList.push(list[i]);changeX(upList,!1,cx,cy,r,dir),changeX(downList,!0,cx,cy,r,dir)}function avoidOverlap(labelLayoutList,cx,cy,r,viewWidth,viewHeight){for(var leftList=[],rightList=[],i=0;i<labelLayoutList.length;i++)labelLayoutList[i].x<cx?leftList.push(labelLayoutList[i]):rightList.push(labelLayoutList[i]);adjustSingleSide(rightList,cx,cy,r,1,viewWidth,viewHeight),adjustSingleSide(leftList,cx,cy,r,-1,viewWidth,viewHeight);for(var i=0;i<labelLayoutList.length;i++){var linePoints=labelLayoutList[i].linePoints;if(linePoints){var dist=linePoints[1][0]-linePoints[2][0];labelLayoutList[i].x<cx?linePoints[2][0]=labelLayoutList[i].x+3:linePoints[2][0]=labelLayoutList[i].x-3,linePoints[1][1]=linePoints[2][1]=labelLayoutList[i].y,linePoints[1][0]=linePoints[2][0]+dist}}}var textContain=__webpack_require__(8);module.exports=function(seriesModel,r,viewWidth,viewHeight){var cx,cy,data=seriesModel.getData(),labelLayoutList=[],hasLabelRotate=!1;data.each(function(idx){var textX,textY,linePoints,textAlign,layout=data.getItemLayout(idx),itemModel=data.getItemModel(idx),labelModel=itemModel.getModel("label.normal"),labelPosition=labelModel.get("position")||itemModel.get("label.emphasis.position"),labelLineModel=itemModel.getModel("labelLine.normal"),labelLineLen=labelLineModel.get("length"),labelLineLen2=labelLineModel.get("length2"),midAngle=(layout.startAngle+layout.endAngle)/2,dx=Math.cos(midAngle),dy=Math.sin(midAngle);cx=layout.cx,cy=layout.cy;var isLabelInside="inside"===labelPosition||"inner"===labelPosition;if("center"===labelPosition)textX=layout.cx,textY=layout.cy,textAlign="center";else{var x1=(isLabelInside?(layout.r+layout.r0)/2*dx:layout.r*dx)+cx,y1=(isLabelInside?(layout.r+layout.r0)/2*dy:layout.r*dy)+cy;if(textX=x1+3*dx,textY=y1+3*dy,!isLabelInside){var x2=x1+dx*(labelLineLen+r-layout.r),y2=y1+dy*(labelLineLen+r-layout.r),x3=x2+(dx<0?-1:1)*labelLineLen2,y3=y2;textX=x3+(dx<0?-5:5),textY=y3,linePoints=[[x1,y1],[x2,y2],[x3,y3]]}textAlign=isLabelInside?"center":dx>0?"left":"right"}var font=labelModel.getModel("textStyle").getFont(),labelRotate=labelModel.get("rotate")?dx<0?-midAngle+Math.PI:-midAngle:0,text=seriesModel.getFormattedLabel(idx,"normal")||data.getName(idx),textRect=textContain.getBoundingRect(text,font,textAlign,"top");hasLabelRotate=!!labelRotate,layout.label={x:textX,y:textY,position:labelPosition,height:textRect.height,len:labelLineLen,len2:labelLineLen2,linePoints:linePoints,textAlign:textAlign,verticalAlign:"middle",font:font,rotation:labelRotate},isLabelInside||labelLayoutList.push(layout.label)}),!hasLabelRotate&&seriesModel.get("avoidLabelOverlap")&&avoidOverlap(labelLayoutList,cx,cy,r,viewWidth,viewHeight)}},function(module,exports){module.exports=function(seriesType,ecModel){var legendModels=ecModel.findComponents({mainType:"legend"});legendModels&&legendModels.length&&ecModel.eachSeriesByType(seriesType,function(series){var data=series.getData();data.filterSelf(function(idx){for(var name=data.getName(idx),i=0;i<legendModels.length;i++)if(!legendModels[i].isSelected(name))return!1;return!0},this)},this)}},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4),echarts=__webpack_require__(1);__webpack_require__(148),__webpack_require__(149),echarts.registerVisual(zrUtil.curry(__webpack_require__(109),"scatter","circle",null)),echarts.registerLayout(zrUtil.curry(__webpack_require__(110),"scatter")),__webpack_require__(112)},function(module,exports,__webpack_require__){"use strict";var createListFromArray=__webpack_require__(101),SeriesModel=__webpack_require__(28);module.exports=SeriesModel.extend({type:"series.scatter",dependencies:["grid","polar"],getInitialData:function(option,ecModel){var list=createListFromArray(option.data,this,ecModel);return list},brushSelector:"point",defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{normal:{opacity:.8}}}})},function(module,exports,__webpack_require__){var SymbolDraw=__webpack_require__(104),LargeSymbolDraw=__webpack_require__(150);__webpack_require__(1).extendChartView({type:"scatter",init:function(){this._normalSymbolDraw=new SymbolDraw,this._largeSymbolDraw=new LargeSymbolDraw},render:function(seriesModel,ecModel,api){var data=seriesModel.getData(),largeSymbolDraw=this._largeSymbolDraw,normalSymbolDraw=this._normalSymbolDraw,group=this.group,symbolDraw=seriesModel.get("large")&&data.count()>seriesModel.get("largeThreshold")?largeSymbolDraw:normalSymbolDraw;this._symbolDraw=symbolDraw,symbolDraw.updateData(data),group.add(symbolDraw.group),group.remove(symbolDraw===largeSymbolDraw?normalSymbolDraw.group:largeSymbolDraw.group)},updateLayout:function(seriesModel){this._symbolDraw.updateLayout(seriesModel)},remove:function(ecModel,api){this._symbolDraw&&this._symbolDraw.remove(api,!0)}})},function(module,exports,__webpack_require__){function LargeSymbolDraw(){this.group=new graphic.Group,this._symbolEl=new LargeSymbolPath({})}var graphic=__webpack_require__(43),symbolUtil=__webpack_require__(106),LargeSymbolPath=graphic.extendShape({shape:{points:null,sizes:null},symbolProxy:null,buildPath:function(path,shape){for(var points=shape.points,sizes=shape.sizes,symbolProxy=this.symbolProxy,symbolProxyShape=symbolProxy.shape,i=0;i<points.length;i++){var pt=points[i],size=sizes[i];size[0]<4?path.rect(pt[0]-size[0]/2,pt[1]-size[1]/2,size[0],size[1]):(symbolProxyShape.x=pt[0]-size[0]/2,symbolProxyShape.y=pt[1]-size[1]/2,symbolProxyShape.width=size[0],symbolProxyShape.height=size[1],symbolProxy.buildPath(path,symbolProxyShape,!0))}},findDataIndex:function(x,y){for(var shape=this.shape,points=shape.points,sizes=shape.sizes,i=points.length-1;i>=0;i--){var pt=points[i],size=sizes[i],x0=pt[0]-size[0]/2,y0=pt[1]-size[1]/2;if(x>=x0&&y>=y0&&x<=x0+size[0]&&y<=y0+size[1])return i}return-1}}),largeSymbolProto=LargeSymbolDraw.prototype;largeSymbolProto.updateData=function(data){this.group.removeAll();var symbolEl=this._symbolEl,seriesModel=data.hostModel;symbolEl.setShape({points:data.mapArray(data.getItemLayout),sizes:data.mapArray(function(idx){var size=data.getItemVisual(idx,"symbolSize");return size instanceof Array||(size=[size,size]),size})}),symbolEl.symbolProxy=symbolUtil.createSymbol(data.getVisual("symbol"),0,0,0,0),symbolEl.setColor=symbolEl.symbolProxy.setColor,symbolEl.useStyle(seriesModel.getModel("itemStyle.normal").getItemStyle(["color"]));var visualColor=data.getVisual("color");visualColor&&symbolEl.setColor(visualColor),symbolEl.seriesIndex=seriesModel.seriesIndex,symbolEl.on("mousemove",function(e){symbolEl.dataIndex=null;var dataIndex=symbolEl.findDataIndex(e.offsetX,e.offsetY);dataIndex>0&&(symbolEl.dataIndex=dataIndex)}),this.group.add(symbolEl)},largeSymbolProto.updateLayout=function(seriesModel){var data=seriesModel.getData();this._symbolEl.setShape({points:data.mapArray(data.getItemLayout)})},largeSymbolProto.remove=function(){this.group.removeAll()},module.exports=LargeSymbolDraw},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4),echarts=__webpack_require__(1);__webpack_require__(152),__webpack_require__(157),__webpack_require__(158),echarts.registerVisual(zrUtil.curry(__webpack_require__(143),"radar")),echarts.registerVisual(zrUtil.curry(__webpack_require__(109),"radar","circle",null)),echarts.registerLayout(__webpack_require__(159)),echarts.registerProcessor(zrUtil.curry(__webpack_require__(146),"radar")),echarts.registerPreprocessor(__webpack_require__(160))},function(module,exports,__webpack_require__){__webpack_require__(153),__webpack_require__(155),__webpack_require__(156)},function(module,exports,__webpack_require__){function Radar(radarModel,ecModel,api){this._model=radarModel,this.dimensions=[],this._indicatorAxes=zrUtil.map(radarModel.getIndicatorModels(),function(indicatorModel,idx){var dim="indicator_"+idx,indicatorAxis=new IndicatorAxis(dim,new IntervalScale);return indicatorAxis.name=indicatorModel.get("name"),indicatorAxis.model=indicatorModel,indicatorModel.axis=indicatorAxis,this.dimensions.push(dim),indicatorAxis},this),this.resize(radarModel,api),this.cx,this.cy,this.r,this.startAngle}var zrUtil=__webpack_require__(4),IndicatorAxis=__webpack_require__(154),IntervalScale=__webpack_require__(117),numberUtil=__webpack_require__(7),axisHelper=__webpack_require__(114);Radar.prototype.getIndicatorAxes=function(){return this._indicatorAxes},Radar.prototype.dataToPoint=function(value,indicatorIndex){var indicatorAxis=this._indicatorAxes[indicatorIndex];return this.coordToPoint(indicatorAxis.dataToCoord(value),indicatorIndex)},Radar.prototype.coordToPoint=function(coord,indicatorIndex){var indicatorAxis=this._indicatorAxes[indicatorIndex],angle=indicatorAxis.angle,x=this.cx+coord*Math.cos(angle),y=this.cy-coord*Math.sin(angle);return[x,y]},Radar.prototype.pointToData=function(pt){var dx=pt[0]-this.cx,dy=pt[1]-this.cy,radius=Math.sqrt(dx*dx+dy*dy);dx/=radius,dy/=radius;for(var closestAxis,radian=Math.atan2(-dy,dx),minRadianDiff=1/0,closestAxisIdx=-1,i=0;i<this._indicatorAxes.length;i++){var indicatorAxis=this._indicatorAxes[i],diff=Math.abs(radian-indicatorAxis.angle);diff<minRadianDiff&&(closestAxis=indicatorAxis,closestAxisIdx=i,minRadianDiff=diff)}return[closestAxisIdx,+(closestAxis&&closestAxis.coodToData(radius))]},Radar.prototype.resize=function(radarModel,api){var center=radarModel.get("center"),viewWidth=api.getWidth(),viewHeight=api.getHeight(),viewSize=Math.min(viewWidth,viewHeight)/2;this.cx=numberUtil.parsePercent(center[0],viewWidth),this.cy=numberUtil.parsePercent(center[1],viewHeight),this.startAngle=radarModel.get("startAngle")*Math.PI/180,this.r=numberUtil.parsePercent(radarModel.get("radius"),viewSize),zrUtil.each(this._indicatorAxes,function(indicatorAxis,idx){indicatorAxis.setExtent(0,this.r);var angle=this.startAngle+idx*Math.PI*2/this._indicatorAxes.length;angle=Math.atan2(Math.sin(angle),Math.cos(angle)),indicatorAxis.angle=angle},this)},Radar.prototype.update=function(ecModel,api){function increaseInterval(interval){var exp10=Math.pow(10,Math.floor(Math.log(interval)/Math.LN10)),f=interval/exp10;return 2===f?f=5:f*=2,f*exp10}var indicatorAxes=this._indicatorAxes,radarModel=this._model;zrUtil.each(indicatorAxes,function(indicatorAxis){indicatorAxis.scale.setExtent(1/0,-(1/0))}),ecModel.eachSeriesByType("radar",function(radarSeries,idx){if("radar"===radarSeries.get("coordinateSystem")&&ecModel.getComponent("radar",radarSeries.get("radarIndex"))===radarModel){var data=radarSeries.getData();zrUtil.each(indicatorAxes,function(indicatorAxis){indicatorAxis.scale.unionExtent(data.getDataExtent(indicatorAxis.dim))})}},this);var splitNumber=radarModel.get("splitNumber");zrUtil.each(indicatorAxes,function(indicatorAxis,idx){var rawExtent=axisHelper.getScaleExtent(indicatorAxis,indicatorAxis.model);axisHelper.niceScaleExtent(indicatorAxis,indicatorAxis.model);var axisModel=indicatorAxis.model,scale=indicatorAxis.scale,fixedMin=axisModel.get("min"),fixedMax=axisModel.get("max"),interval=scale.getInterval();if(null!=fixedMin&&null!=fixedMax)scale.setInterval((fixedMax-fixedMin)/splitNumber);else if(null!=fixedMin){var max;do max=fixedMin+interval*splitNumber,scale.setExtent(+fixedMin,max),scale.setInterval(interval),interval=increaseInterval(interval);while(max<rawExtent[1]&&isFinite(max)&&isFinite(rawExtent[1]))}else if(null!=fixedMax){var min;do min=fixedMax-interval*splitNumber,scale.setExtent(min,+fixedMax),scale.setInterval(interval),interval=increaseInterval(interval);while(min>rawExtent[0]&&isFinite(min)&&isFinite(rawExtent[0]))}else{var nicedSplitNumber=scale.getTicks().length-1;nicedSplitNumber>splitNumber&&(interval=increaseInterval(interval));var center=Math.round((rawExtent[0]+rawExtent[1])/2/interval)*interval,halfSplitNumber=Math.round(splitNumber/2);scale.setExtent(numberUtil.round(center-halfSplitNumber*interval),numberUtil.round(center+(splitNumber-halfSplitNumber)*interval)),scale.setInterval(interval)}})},Radar.dimensions=[],Radar.create=function(ecModel,api){var radarList=[];return ecModel.eachComponent("radar",function(radarModel){var radar=new Radar(radarModel,ecModel,api);radarList.push(radar),radarModel.coordinateSystem=radar}),ecModel.eachSeriesByType("radar",function(radarSeries){"radar"===radarSeries.get("coordinateSystem")&&(radarSeries.coordinateSystem=radarList[radarSeries.get("radarIndex")||0])}),radarList},__webpack_require__(26).register("radar",Radar),module.exports=Radar},function(module,exports,__webpack_require__){function IndicatorAxis(dim,scale,radiusExtent){Axis.call(this,dim,scale,radiusExtent),this.type="value",this.angle=0,this.name="",this.model}var zrUtil=__webpack_require__(4),Axis=__webpack_require__(123);zrUtil.inherits(IndicatorAxis,Axis),module.exports=IndicatorAxis},function(module,exports,__webpack_require__){function defaultsShow(opt,show){return zrUtil.defaults({show:show},opt)}var axisDefault=__webpack_require__(128),valueAxisDefault=axisDefault.valueAxis,Model=__webpack_require__(12),zrUtil=__webpack_require__(4),axisModelCommonMixin=__webpack_require__(129),RadarModel=__webpack_require__(1).extendComponentModel({type:"radar",optionUpdated:function(){var boundaryGap=this.get("boundaryGap"),splitNumber=this.get("splitNumber"),scale=this.get("scale"),axisLine=this.get("axisLine"),axisTick=this.get("axisTick"),axisLabel=this.get("axisLabel"),nameTextStyle=this.get("name.textStyle"),showName=this.get("name.show"),nameFormatter=this.get("name.formatter"),nameGap=this.get("nameGap"),indicatorModels=zrUtil.map(this.get("indicator")||[],function(indicatorOpt){return null!=indicatorOpt.max&&indicatorOpt.max>0&&!indicatorOpt.min?indicatorOpt.min=0:null!=indicatorOpt.min&&indicatorOpt.min<0&&!indicatorOpt.max&&(indicatorOpt.max=0),indicatorOpt=zrUtil.merge(zrUtil.clone(indicatorOpt),{boundaryGap:boundaryGap,splitNumber:splitNumber,scale:scale,axisLine:axisLine,axisTick:axisTick,axisLabel:axisLabel,name:indicatorOpt.text,nameLocation:"end",nameGap:nameGap,nameTextStyle:nameTextStyle},!1),showName||(indicatorOpt.name=""),"string"==typeof nameFormatter?indicatorOpt.name=nameFormatter.replace("{value}",indicatorOpt.name):"function"==typeof nameFormatter&&(indicatorOpt.name=nameFormatter(indicatorOpt.name,indicatorOpt)),zrUtil.extend(new Model(indicatorOpt,null,this.ecModel),axisModelCommonMixin)},this);this.getIndicatorModels=function(){return indicatorModels}},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,name:{show:!0},boundaryGap:[0,0],splitNumber:5,nameGap:15,scale:!1,shape:"polygon",axisLine:zrUtil.merge({lineStyle:{color:"#bbb"}},valueAxisDefault.axisLine),axisLabel:defaultsShow(valueAxisDefault.axisLabel,!1),axisTick:defaultsShow(valueAxisDefault.axisTick,!1),splitLine:defaultsShow(valueAxisDefault.splitLine,!0),splitArea:defaultsShow(valueAxisDefault.splitArea,!0),indicator:[]}});module.exports=RadarModel},function(module,exports,__webpack_require__){var AxisBuilder=__webpack_require__(132),zrUtil=__webpack_require__(4),graphic=__webpack_require__(43),axisBuilderAttrs=["axisLine","axisLabel","axisTick","axisName"];module.exports=__webpack_require__(1).extendComponentView({type:"radar",render:function(radarModel,ecModel,api){var group=this.group;group.removeAll(),this._buildAxes(radarModel),this._buildSplitLineAndArea(radarModel)},_buildAxes:function(radarModel){var radar=radarModel.coordinateSystem,indicatorAxes=radar.getIndicatorAxes(),axisBuilders=zrUtil.map(indicatorAxes,function(indicatorAxis){var axisBuilder=new AxisBuilder(indicatorAxis.model,{position:[radar.cx,radar.cy],rotation:indicatorAxis.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return axisBuilder});zrUtil.each(axisBuilders,function(axisBuilder){zrUtil.each(axisBuilderAttrs,axisBuilder.add,axisBuilder),this.group.add(axisBuilder.getGroup())},this)},_buildSplitLineAndArea:function(radarModel){function getColorIndex(areaOrLine,areaOrLineColorList,idx){var colorIndex=idx%areaOrLineColorList.length;return areaOrLine[colorIndex]=areaOrLine[colorIndex]||[],colorIndex}var radar=radarModel.coordinateSystem,splitNumber=radarModel.get("splitNumber"),indicatorAxes=radar.getIndicatorAxes();if(indicatorAxes.length){var shape=radarModel.get("shape"),splitLineModel=radarModel.getModel("splitLine"),splitAreaModel=radarModel.getModel("splitArea"),lineStyleModel=splitLineModel.getModel("lineStyle"),areaStyleModel=splitAreaModel.getModel("areaStyle"),showSplitLine=splitLineModel.get("show"),showSplitArea=splitAreaModel.get("show"),splitLineColors=lineStyleModel.get("color"),splitAreaColors=areaStyleModel.get("color");splitLineColors=zrUtil.isArray(splitLineColors)?splitLineColors:[splitLineColors],splitAreaColors=zrUtil.isArray(splitAreaColors)?splitAreaColors:[splitAreaColors];var splitLines=[],splitAreas=[];if("circle"===shape)for(var ticksRadius=indicatorAxes[0].getTicksCoords(),cx=radar.cx,cy=radar.cy,i=0;i<ticksRadius.length;i++){if(showSplitLine){var colorIndex=getColorIndex(splitLines,splitLineColors,i);splitLines[colorIndex].push(new graphic.Circle({shape:{cx:cx,cy:cy,r:ticksRadius[i]}}))}if(showSplitArea&&i<ticksRadius.length-1){var colorIndex=getColorIndex(splitAreas,splitAreaColors,i);splitAreas[colorIndex].push(new graphic.Ring({shape:{cx:cx,cy:cy,r0:ticksRadius[i],r:ticksRadius[i+1]}}))}}else for(var axesTicksPoints=zrUtil.map(indicatorAxes,function(indicatorAxis,idx){var ticksCoords=indicatorAxis.getTicksCoords();return zrUtil.map(ticksCoords,function(tickCoord){return radar.coordToPoint(tickCoord,idx)})}),prevPoints=[],i=0;i<=splitNumber;i++){for(var points=[],j=0;j<indicatorAxes.length;j++)points.push(axesTicksPoints[j][i]);if(points[0]){if(points.push(points[0].slice()),showSplitLine){var colorIndex=getColorIndex(splitLines,splitLineColors,i);splitLines[colorIndex].push(new graphic.Polyline({shape:{points:points}}))}if(showSplitArea&&prevPoints){var colorIndex=getColorIndex(splitAreas,splitAreaColors,i-1);splitAreas[colorIndex].push(new graphic.Polygon({shape:{points:points.concat(prevPoints)}}))}prevPoints=points.slice().reverse()}else console.error("Can't draw value axis "+i)}var lineStyle=lineStyleModel.getLineStyle(),areaStyle=areaStyleModel.getAreaStyle();zrUtil.each(splitAreas,function(splitAreas,idx){this.group.add(graphic.mergePath(splitAreas,{style:zrUtil.defaults({stroke:"none",fill:splitAreaColors[idx%splitAreaColors.length]},areaStyle),silent:!0}))},this),zrUtil.each(splitLines,function(splitLines,idx){this.group.add(graphic.mergePath(splitLines,{style:zrUtil.defaults({fill:"none",stroke:splitLineColors[idx%splitLineColors.length]},lineStyle),silent:!0}))},this)}}})},function(module,exports,__webpack_require__){"use strict";var SeriesModel=__webpack_require__(28),List=__webpack_require__(97),completeDimensions=__webpack_require__(102),zrUtil=__webpack_require__(4),RadarSeries=SeriesModel.extend({type:"series.radar",dependencies:["radar"],init:function(option){RadarSeries.superApply(this,"init",arguments),this.legendDataProvider=function(){return this._dataBeforeProcessed}},getInitialData:function(option,ecModel){var data=option.data||[],dimensions=completeDimensions([],data,[],"indicator_"),list=new List(dimensions,this);return list.initData(data),list},formatTooltip:function(dataIndex){var value=this.getRawValue(dataIndex),coordSys=this.coordinateSystem,indicatorAxes=coordSys.getIndicatorAxes();
return(""==this._data.getName(dataIndex)?this.name:this._data.getName(dataIndex))+"<br/>"+zrUtil.map(indicatorAxes,function(axis,idx){return axis.name+" : "+value[idx]}).join("<br />")},defaultOption:{zlevel:0,z:2,coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{normal:{width:2,type:"solid"}},label:{normal:{position:"top"}},symbol:"emptyCircle",symbolSize:4}});module.exports=RadarSeries},function(module,exports,__webpack_require__){function normalizeSymbolSize(symbolSize){return zrUtil.isArray(symbolSize)||(symbolSize=[+symbolSize,+symbolSize]),symbolSize}var graphic=__webpack_require__(43),zrUtil=__webpack_require__(4),symbolUtil=__webpack_require__(106);module.exports=__webpack_require__(1).extendChartView({type:"radar",render:function(seriesModel,ecModel,api){function createSymbol(data,idx){var symbolType=data.getItemVisual(idx,"symbol")||"circle",color=data.getItemVisual(idx,"color");if("none"!==symbolType){var symbolPath=symbolUtil.createSymbol(symbolType,-.5,-.5,1,1,color);return symbolPath.attr({style:{strokeNoScale:!0},z2:100,scale:normalizeSymbolSize(data.getItemVisual(idx,"symbolSize"))}),symbolPath}}function updateSymbols(oldPoints,newPoints,symbolGroup,data,idx,isInit){symbolGroup.removeAll();for(var i=0;i<newPoints.length-1;i++){var symbolPath=createSymbol(data,idx);symbolPath&&(symbolPath.__dimIdx=i,oldPoints[i]?(symbolPath.attr("position",oldPoints[i]),graphic[isInit?"initProps":"updateProps"](symbolPath,{position:newPoints[i]},seriesModel,idx)):symbolPath.attr("position",newPoints[i]),symbolGroup.add(symbolPath))}}function getInitialPoints(points){return zrUtil.map(points,function(pt){return[polar.cx,polar.cy]})}var polar=seriesModel.coordinateSystem,group=this.group,data=seriesModel.getData(),oldData=this._data;data.diff(oldData).add(function(idx){var points=data.getItemLayout(idx);if(points){var polygon=new graphic.Polygon,polyline=new graphic.Polyline,target={shape:{points:points}};polygon.shape.points=getInitialPoints(points),polyline.shape.points=getInitialPoints(points),graphic.initProps(polygon,target,seriesModel,idx),graphic.initProps(polyline,target,seriesModel,idx);var itemGroup=new graphic.Group,symbolGroup=new graphic.Group;itemGroup.add(polyline),itemGroup.add(polygon),itemGroup.add(symbolGroup),updateSymbols(polyline.shape.points,points,symbolGroup,data,idx,!0),data.setItemGraphicEl(idx,itemGroup)}}).update(function(newIdx,oldIdx){var itemGroup=oldData.getItemGraphicEl(oldIdx),polyline=itemGroup.childAt(0),polygon=itemGroup.childAt(1),symbolGroup=itemGroup.childAt(2),target={shape:{points:data.getItemLayout(newIdx)}};target.shape.points&&(updateSymbols(polyline.shape.points,target.shape.points,symbolGroup,data,newIdx,!1),graphic.updateProps(polyline,target,seriesModel),graphic.updateProps(polygon,target,seriesModel),data.setItemGraphicEl(newIdx,itemGroup))}).remove(function(idx){group.remove(oldData.getItemGraphicEl(idx))}).execute(),data.eachItemGraphicEl(function(itemGroup,idx){function onEmphasis(){polygon.attr("ignore",hoverPolygonIgnore)}function onNormal(){polygon.attr("ignore",polygonIgnore)}var itemModel=data.getItemModel(idx),polyline=itemGroup.childAt(0),polygon=itemGroup.childAt(1),symbolGroup=itemGroup.childAt(2),color=data.getItemVisual(idx,"color");group.add(itemGroup),polyline.useStyle(zrUtil.defaults(itemModel.getModel("lineStyle.normal").getLineStyle(),{fill:"none",stroke:color})),polyline.hoverStyle=itemModel.getModel("lineStyle.emphasis").getLineStyle();var areaStyleModel=itemModel.getModel("areaStyle.normal"),hoverAreaStyleModel=itemModel.getModel("areaStyle.emphasis"),polygonIgnore=areaStyleModel.isEmpty()&&areaStyleModel.parentModel.isEmpty(),hoverPolygonIgnore=hoverAreaStyleModel.isEmpty()&&hoverAreaStyleModel.parentModel.isEmpty();hoverPolygonIgnore=hoverPolygonIgnore&&polygonIgnore,polygon.ignore=polygonIgnore,polygon.useStyle(zrUtil.defaults(areaStyleModel.getAreaStyle(),{fill:color,opacity:.7})),polygon.hoverStyle=hoverAreaStyleModel.getAreaStyle();var itemStyle=itemModel.getModel("itemStyle.normal").getItemStyle(["color"]),itemHoverStyle=itemModel.getModel("itemStyle.emphasis").getItemStyle(),labelModel=itemModel.getModel("label.normal"),labelHoverModel=itemModel.getModel("label.emphasis");symbolGroup.eachChild(function(symbolPath){symbolPath.setStyle(itemStyle),symbolPath.hoverStyle=zrUtil.clone(itemHoverStyle);var defaultText=data.get(data.dimensions[symbolPath.__dimIdx],idx);graphic.setText(symbolPath.style,labelModel,color),symbolPath.setStyle({text:labelModel.get("show")?zrUtil.retrieve(seriesModel.getFormattedLabel(idx,"normal",null,symbolPath.__dimIdx),defaultText):""}),graphic.setText(symbolPath.hoverStyle,labelHoverModel,color),symbolPath.hoverStyle.text=labelHoverModel.get("show")?zrUtil.retrieve(seriesModel.getFormattedLabel(idx,"emphasis",null,symbolPath.__dimIdx),defaultText):""}),itemGroup.off("mouseover").off("mouseout").off("normal").off("emphasis"),itemGroup.on("emphasis",onEmphasis).on("mouseover",onEmphasis).on("normal",onNormal).on("mouseout",onNormal),graphic.setHoverStyle(itemGroup)}),this._data=data},remove:function(){this.group.removeAll(),this._data=null}})},function(module,exports){module.exports=function(ecModel){ecModel.eachSeriesByType("radar",function(seriesModel){function pointsConverter(val,idx){points[idx]=points[idx]||[],points[idx][i]=coordSys.dataToPoint(val,i)}var data=seriesModel.getData(),points=[],coordSys=seriesModel.coordinateSystem;if(coordSys){for(var i=0;i<coordSys.getIndicatorAxes().length;i++){var dim=data.dimensions[i];data.each(dim,pointsConverter)}data.each(function(idx){points[idx][0]&&points[idx].push(points[idx][0].slice()),data.setItemLayout(idx,points[idx])})}})}},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);module.exports=function(option){var polarOptArr=option.polar;if(polarOptArr){zrUtil.isArray(polarOptArr)||(polarOptArr=[polarOptArr]);var polarNotRadar=[];zrUtil.each(polarOptArr,function(polarOpt,idx){polarOpt.indicator?(polarOpt.type&&!polarOpt.shape&&(polarOpt.shape=polarOpt.type),option.radar=option.radar||[],zrUtil.isArray(option.radar)||(option.radar=[option.radar]),option.radar.push(polarOpt)):polarNotRadar.push(polarOpt)}),option.polar=polarNotRadar}zrUtil.each(option.series,function(seriesOpt){"radar"===seriesOpt.type&&seriesOpt.polarIndex&&(seriesOpt.radarIndex=seriesOpt.polarIndex)})}},function(module,exports,__webpack_require__){var echarts=__webpack_require__(1),PRIORITY=echarts.PRIORITY;__webpack_require__(162),__webpack_require__(172),__webpack_require__(176),__webpack_require__(163),echarts.registerLayout(__webpack_require__(178)),echarts.registerVisual(__webpack_require__(179)),echarts.registerProcessor(PRIORITY.PROCESSOR.STATISTIC,__webpack_require__(180)),echarts.registerPreprocessor(__webpack_require__(181)),__webpack_require__(142)("map",[{type:"mapToggleSelect",event:"mapselectchanged",method:"toggleSelected"},{type:"mapSelect",event:"mapselected",method:"select"},{type:"mapUnSelect",event:"mapunselected",method:"unSelect"}])},function(module,exports,__webpack_require__){var List=__webpack_require__(97),SeriesModel=__webpack_require__(28),zrUtil=__webpack_require__(4),completeDimensions=__webpack_require__(102),formatUtil=__webpack_require__(6),encodeHTML=formatUtil.encodeHTML,addCommas=formatUtil.addCommas,dataSelectableMixin=__webpack_require__(140),geoCreator=__webpack_require__(163),MapSeries=SeriesModel.extend({type:"series.map",layoutMode:"box",needsDrawMap:!1,seriesGroup:[],init:function(option){option=this._fillOption(option,option.map),this.option=option,MapSeries.superApply(this,"init",arguments),this.updateSelectedMap(option.data)},getInitialData:function(option){var dimensions=completeDimensions(["value"],option.data||[]),list=new List(dimensions,this);return list.initData(option.data),list},mergeOption:function(newOption){newOption.data&&(newOption=this._fillOption(newOption,this.option.map)),MapSeries.superCall(this,"mergeOption",newOption),this.updateSelectedMap(this.option.data)},_fillOption:function(option,mapName){return option=zrUtil.extend({},option),option.data=geoCreator.getFilledRegions(option.data,mapName),option},getRawValue:function(dataIndex){return this._data.get("value",dataIndex)},getRegionModel:function(regionName){var data=this.getData();return data.getItemModel(data.indexOfName(regionName))},formatTooltip:function(dataIndex){for(var data=this.getData(),formattedValue=addCommas(this.getRawValue(dataIndex)),name=data.getName(dataIndex),seriesGroup=this.seriesGroup,seriesNames=[],i=0;i<seriesGroup.length;i++){var otherIndex=seriesGroup[i].originalData.indexOfName(name);isNaN(seriesGroup[i].originalData.get("value",otherIndex))||seriesNames.push(encodeHTML(seriesGroup[i].name))}return seriesNames.join(", ")+"<br />"+name+" : "+formattedValue},defaultOption:{zlevel:0,z:2,coordinateSystem:"geo",map:"china",left:"center",top:"center",aspectScale:.75,showLegendSymbol:!0,dataRangeHoverLink:!0,center:null,zoom:1,scaleLimit:null,label:{normal:{show:!1,textStyle:{color:"#000"}},emphasis:{show:!0,textStyle:{color:"rgb(100,0,0)"}}},itemStyle:{normal:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{areaColor:"rgba(255,215,0,0.8)"}}},setZoom:function(zoom){this.option.zoom=zoom},setCenter:function(center){this.option.center=center}});zrUtil.mixin(MapSeries,dataSelectableMixin),module.exports=MapSeries},function(module,exports,__webpack_require__){function resizeGeo(geoModel,api){var boxLayoutOption,rect=this.getBoundingRect(),center=geoModel.get("layoutCenter"),size=geoModel.get("layoutSize"),viewWidth=api.getWidth(),viewHeight=api.getHeight(),aspectScale=geoModel.get("aspectScale")||.75,aspect=rect.width/rect.height*aspectScale,useCenterAndSize=!1;center&&size&&(center=[numberUtil.parsePercent(center[0],viewWidth),numberUtil.parsePercent(center[1],viewHeight)],size=numberUtil.parsePercent(size,Math.min(viewWidth,viewHeight)),isNaN(center[0])||isNaN(center[1])||isNaN(size)?console.warn("Given layoutCenter or layoutSize data are invalid. Use left/top/width/height instead."):useCenterAndSize=!0);var viewRect;if(useCenterAndSize){var viewRect={};aspect>1?(viewRect.width=size,viewRect.height=size/aspect):(viewRect.height=size,viewRect.width=size*aspect),viewRect.y=center[1]-viewRect.height/2,viewRect.x=center[0]-viewRect.width/2}else boxLayoutOption=geoModel.getBoxLayoutParams(),boxLayoutOption.aspect=aspect,viewRect=layout.getLayoutRect(boxLayoutOption,{width:viewWidth,height:viewHeight});this.setViewRect(viewRect.x,viewRect.y,viewRect.width,viewRect.height),this.setCenter(geoModel.get("center")),this.setZoom(geoModel.get("zoom"))}function setGeoCoords(geo,model){zrUtil.each(model.get("geoCoord"),function(geoCoord,name){geo.addGeoCoord(name,geoCoord)})}var Geo=__webpack_require__(164),layout=__webpack_require__(21),zrUtil=__webpack_require__(4),numberUtil=__webpack_require__(7),mapDataStores={},mapNotExistsError=function(name){console.error("Map "+name+" not exists. You can download map file on http://echarts.baidu.com/download-map.html")},geoCreator={dimensions:Geo.prototype.dimensions,create:function(ecModel,api){var geoList=[];ecModel.eachComponent("geo",function(geoModel,idx){var name=geoModel.get("map"),mapData=mapDataStores[name];mapData||mapNotExistsError(name);var geo=new Geo(name+idx,name,mapData&&mapData.geoJson,mapData&&mapData.specialAreas,geoModel.get("nameMap"));geo.zoomLimit=geoModel.get("scaleLimit"),geoList.push(geo),setGeoCoords(geo,geoModel),geoModel.coordinateSystem=geo,geo.model=geoModel,geo.resize=resizeGeo,geo.resize(geoModel,api)}),ecModel.eachSeries(function(seriesModel){var coordSys=seriesModel.get("coordinateSystem");if("geo"===coordSys){var geoIndex=seriesModel.get("geoIndex")||0;seriesModel.coordinateSystem=geoList[geoIndex]}});var mapModelGroupBySeries={};return ecModel.eachSeriesByType("map",function(seriesModel){var mapType=seriesModel.get("map");mapModelGroupBySeries[mapType]=mapModelGroupBySeries[mapType]||[],mapModelGroupBySeries[mapType].push(seriesModel)}),zrUtil.each(mapModelGroupBySeries,function(mapSeries,mapType){var mapData=mapDataStores[mapType];mapData||mapNotExistsError(mapSeries[0].get("map"));var nameMapList=zrUtil.map(mapSeries,function(singleMapSeries){return singleMapSeries.get("nameMap")}),geo=new Geo(mapType,mapType,mapData&&mapData.geoJson,mapData&&mapData.specialAreas,zrUtil.mergeAll(nameMapList));geo.zoomLimit=zrUtil.retrieve.apply(null,zrUtil.map(mapSeries,function(singleMapSeries){return singleMapSeries.get("scaleLimit")})),geoList.push(geo),geo.resize=resizeGeo,geo.resize(mapSeries[0],api),zrUtil.each(mapSeries,function(singleMapSeries){singleMapSeries.coordinateSystem=geo,setGeoCoords(geo,singleMapSeries)})}),geoList},registerMap:function(mapName,geoJson,specialAreas){geoJson.geoJson&&!geoJson.features&&(specialAreas=geoJson.specialAreas,geoJson=geoJson.geoJson),"string"==typeof geoJson&&(geoJson="undefined"!=typeof JSON&&JSON.parse?JSON.parse(geoJson):new Function("return ("+geoJson+");")()),mapDataStores[mapName]={geoJson:geoJson,specialAreas:specialAreas}},getMap:function(mapName){return mapDataStores[mapName]},getFilledRegions:function(originRegionArr,mapName){var regionsArr=(originRegionArr||[]).slice(),map=geoCreator.getMap(mapName),geoJson=map&&map.geoJson;if(!geoJson)return mapNotExistsError(mapName),originRegionArr;for(var dataNameMap={},features=geoJson.features,i=0;i<regionsArr.length;i++)dataNameMap[regionsArr[i].name]=regionsArr[i];for(var i=0;i<features.length;i++){var name=features[i].properties.name;dataNameMap[name]||regionsArr.push({name:name})}return regionsArr}},echarts=__webpack_require__(1);echarts.registerMap=geoCreator.registerMap,echarts.getMap=geoCreator.getMap,echarts.loadMap=function(){},echarts.registerCoordinateSystem("geo",geoCreator),module.exports=geoCreator},function(module,exports,__webpack_require__){function Geo(name,map,geoJson,specialAreas,nameMap){View.call(this,name),this.map=map,this._nameCoordMap={},this.loadGeoJson(geoJson,specialAreas,nameMap)}var parseGeoJson=__webpack_require__(165),zrUtil=__webpack_require__(4),BoundingRect=__webpack_require__(9),View=__webpack_require__(168),geoFixFuncs=[__webpack_require__(169),__webpack_require__(170),__webpack_require__(171)];Geo.prototype={constructor:Geo,type:"geo",dimensions:["lng","lat"],containCoord:function(coord){for(var regions=this.regions,i=0;i<regions.length;i++)if(regions[i].contain(coord))return!0;return!1},loadGeoJson:function(geoJson,specialAreas,nameMap){try{this.regions=geoJson?parseGeoJson(geoJson):[]}catch(e){throw"Invalid geoJson format\n"+e}specialAreas=specialAreas||{},nameMap=nameMap||{};for(var regions=this.regions,regionsMap={},i=0;i<regions.length;i++){var regionName=regions[i].name;regionName=nameMap[regionName]||regionName,regions[i].name=regionName,regionsMap[regionName]=regions[i],this.addGeoCoord(regionName,regions[i].center);var specialArea=specialAreas[regionName];specialArea&&regions[i].transformTo(specialArea.left,specialArea.top,specialArea.width,specialArea.height)}this._regionsMap=regionsMap,this._rect=null,zrUtil.each(geoFixFuncs,function(fixFunc){fixFunc(this)},this)},transformTo:function(x,y,width,height){var rect=this.getBoundingRect();rect=rect.clone(),rect.y=-rect.y-rect.height;var viewTransform=this._viewTransform;viewTransform.transform=rect.calculateTransform(new BoundingRect(x,y,width,height)),viewTransform.decomposeTransform();var scale=viewTransform.scale;scale[1]=-scale[1],viewTransform.updateTransform(),this._updateTransform()},getRegion:function(name){return this._regionsMap[name]},getRegionByCoord:function(coord){for(var regions=this.regions,i=0;i<regions.length;i++)if(regions[i].contain(coord))return regions[i]},addGeoCoord:function(name,geoCoord){this._nameCoordMap[name]=geoCoord},getGeoCoord:function(name){return this._nameCoordMap[name]},getBoundingRect:function(){if(this._rect)return this._rect;for(var rect,regions=this.regions,i=0;i<regions.length;i++){var regionRect=regions[i].getBoundingRect();rect=rect||regionRect.clone(),rect.union(regionRect)}return this._rect=rect||new BoundingRect(0,0,0,0)},dataToPoints:function(data){var item=[];return data.mapArray(["lng","lat"],function(lon,lat){return item[0]=lon,item[1]=lat,this.dataToPoint(item)},this)},dataToPoint:function(data){if("string"==typeof data&&(data=this.getGeoCoord(data)),data)return View.prototype.dataToPoint.call(this,data)}},zrUtil.mixin(Geo,View),module.exports=Geo},function(module,exports,__webpack_require__){function decode(json){if(!json.UTF8Encoding)return json;for(var features=json.features,f=0;f<features.length;f++)for(var feature=features[f],geometry=feature.geometry,coordinates=geometry.coordinates,encodeOffsets=geometry.encodeOffsets,c=0;c<coordinates.length;c++){var coordinate=coordinates[c];if("Polygon"===geometry.type)coordinates[c]=decodePolygon(coordinate,encodeOffsets[c]);else if("MultiPolygon"===geometry.type)for(var c2=0;c2<coordinate.length;c2++){var polygon=coordinate[c2];coordinate[c2]=decodePolygon(polygon,encodeOffsets[c][c2])}}return json.UTF8Encoding=!1,json}function decodePolygon(coordinate,encodeOffsets){for(var result=[],prevX=encodeOffsets[0],prevY=encodeOffsets[1],i=0;i<coordinate.length;i+=2){var x=coordinate.charCodeAt(i)-64,y=coordinate.charCodeAt(i+1)-64;x=x>>1^-(1&x),y=y>>1^-(1&y),x+=prevX,y+=prevY,prevX=x,prevY=y,result.push([x/1024,y/1024])}return result}function flattern2D(array){for(var ret=[],i=0;i<array.length;i++)for(var k=0;k<array[i].length;k++)ret.push(array[i][k]);return ret}var zrUtil=__webpack_require__(4),Region=__webpack_require__(166);module.exports=function(geoJson){return decode(geoJson),zrUtil.map(zrUtil.filter(geoJson.features,function(featureObj){return featureObj.geometry&&featureObj.properties}),function(featureObj){var properties=featureObj.properties,geometry=featureObj.geometry,coordinates=geometry.coordinates;return"MultiPolygon"===geometry.type&&(coordinates=flattern2D(coordinates)),new Region(properties.name,coordinates,properties.cp)})}},function(module,exports,__webpack_require__){function Region(name,contours,cp){if(this.name=name,this.contours=contours,cp)cp=[cp[0],cp[1]];else{var rect=this.getBoundingRect();cp=[rect.x+rect.width/2,rect.y+rect.height/2]}this.center=cp}var polygonContain=__webpack_require__(167),BoundingRect=__webpack_require__(9),bbox=__webpack_require__(51),vec2=__webpack_require__(10);Region.prototype={constructor:Region,getBoundingRect:function(){var rect=this._rect;if(rect)return rect;for(var MAX_NUMBER=Number.MAX_VALUE,min=[MAX_NUMBER,MAX_NUMBER],max=[-MAX_NUMBER,-MAX_NUMBER],min2=[],max2=[],contours=this.contours,i=0;i<contours.length;i++)bbox.fromPoints(contours[i],min2,max2),vec2.min(min,min,min2),vec2.max(max,max,max2);return 0===i&&(min[0]=min[1]=max[0]=max[1]=0),this._rect=new BoundingRect(min[0],min[1],max[0]-min[0],max[1]-min[1])},contain:function(coord){var rect=this.getBoundingRect(),contours=this.contours;if(rect.contain(coord[0],coord[1]))for(var i=0,len=contours.length;i<len;i++)if(polygonContain.contain(contours[i],coord[0],coord[1]))return!0;return!1},transformTo:function(x,y,width,height){var rect=this.getBoundingRect(),aspect=rect.width/rect.height;width?height||(height=width/aspect):width=aspect*height;for(var target=new BoundingRect(x,y,width,height),transform=rect.calculateTransform(target),contours=this.contours,i=0;i<contours.length;i++)for(var p=0;p<contours[i].length;p++)vec2.applyTransform(contours[i][p],contours[i][p],transform);rect=this._rect,rect.copy(target),this.center=[rect.x+rect.width/2,rect.y+rect.height/2]}},module.exports=Region},function(module,exports,__webpack_require__){function isAroundEqual(a,b){return Math.abs(a-b)<EPSILON}function contain(points,x,y){var w=0,p=points[0];if(!p)return!1;for(var i=1;i<points.length;i++){var p2=points[i];w+=windingLine(p[0],p[1],p2[0],p2[1],x,y),p=p2}var p0=points[0];return isAroundEqual(p[0],p0[0])&&isAroundEqual(p[1],p0[1])||(w+=windingLine(p[0],p[1],p0[0],p0[1],x,y)),0!==w}var windingLine=__webpack_require__(58),EPSILON=1e-8;module.exports={contain:contain}},function(module,exports,__webpack_require__){function TransformDummy(){Transformable.call(this)}function View(name){this.name=name,this.zoomLimit,Transformable.call(this),this._roamTransform=new TransformDummy,this._viewTransform=new TransformDummy,this._center,this._zoom}var vector=__webpack_require__(10),matrix=__webpack_require__(11),Transformable=__webpack_require__(34),zrUtil=__webpack_require__(4),BoundingRect=__webpack_require__(9),v2ApplyTransform=vector.applyTransform;zrUtil.mixin(TransformDummy,Transformable),View.prototype={constructor:View,type:"view",dimensions:["x","y"],setBoundingRect:function(x,y,width,height){return this._rect=new BoundingRect(x,y,width,height),this._rect},getBoundingRect:function(){return this._rect},setViewRect:function(x,y,width,height){width=width,height=height,this.transformTo(x,y,width,height),this._viewRect=new BoundingRect(x,y,width,height)},transformTo:function(x,y,width,height){var rect=this.getBoundingRect(),viewTransform=this._viewTransform;viewTransform.transform=rect.calculateTransform(new BoundingRect(x,y,width,height)),viewTransform.decomposeTransform(),this._updateTransform()},setCenter:function(centerCoord){centerCoord&&(this._center=centerCoord,this._updateCenterAndZoom())},setZoom:function(zoom){zoom=zoom||1;var zoomLimit=this.zoomLimit;zoomLimit&&(null!=zoomLimit.max&&(zoom=Math.min(zoomLimit.max,zoom)),null!=zoomLimit.min&&(zoom=Math.max(zoomLimit.min,zoom))),this._zoom=zoom,this._updateCenterAndZoom()},getDefaultCenter:function(){var rawRect=this.getBoundingRect(),cx=rawRect.x+rawRect.width/2,cy=rawRect.y+rawRect.height/2;return[cx,cy]},getCenter:function(){return this._center||this.getDefaultCenter()},getZoom:function(){return this._zoom||1},getRoamTransform:function(){return this._roamTransform},_updateCenterAndZoom:function(){var viewTransformMatrix=this._viewTransform.getLocalTransform(),roamTransform=this._roamTransform,defaultCenter=this.getDefaultCenter(),center=this.getCenter(),zoom=this.getZoom();center=vector.applyTransform([],center,viewTransformMatrix),defaultCenter=vector.applyTransform([],defaultCenter,viewTransformMatrix),roamTransform.origin=center,roamTransform.position=[defaultCenter[0]-center[0],defaultCenter[1]-center[1]],roamTransform.scale=[zoom,zoom],this._updateTransform()},_updateTransform:function(){var roamTransform=this._roamTransform,viewTransform=this._viewTransform;viewTransform.parent=roamTransform,roamTransform.updateTransform(),viewTransform.updateTransform(),viewTransform.transform&&matrix.copy(this.transform||(this.transform=[]),viewTransform.transform),this.transform?(this.invTransform=this.invTransform||[],matrix.invert(this.invTransform,this.transform)):this.invTransform=null,this.decomposeTransform()},getViewRect:function(){return this._viewRect},getViewRectAfterRoam:function(){var rect=this.getBoundingRect().clone();return rect.applyTransform(this.transform),rect},dataToPoint:function(data){var transform=this.transform;return transform?v2ApplyTransform([],data,transform):[data[0],data[1]]},pointToData:function(point){var invTransform=this.invTransform;return invTransform?v2ApplyTransform([],point,invTransform):[point[0],point[1]]}},zrUtil.mixin(View,Transformable),module.exports=View},function(module,exports,__webpack_require__){for(var Region=__webpack_require__(166),geoCoord=[126,25],points=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],i=0;i<points.length;i++)for(var k=0;k<points[i].length;k++)points[i][k][0]/=10.5,points[i][k][1]/=-14,points[i][k][0]+=geoCoord[0],points[i][k][1]+=geoCoord[1];module.exports=function(geo){"china"===geo.map&&geo.regions.push(new Region("南海诸岛",points,geoCoord))}},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4),coordsOffsetMap={"南海诸岛":[32,80],"广东":[0,-10],"香港":[10,5],"澳门":[-10,10],"天津":[5,5]};module.exports=function(geo){zrUtil.each(geo.regions,function(region){var coordFix=coordsOffsetMap[region.name];if(coordFix){var cp=region.center;cp[0]+=coordFix[0]/10.5,cp[1]+=-coordFix[1]/14}})}},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4),geoCoordMap={Russia:[100,60],"United States of America":[-99,38]};module.exports=function(geo){zrUtil.each(geo.regions,function(region){var geoCoord=geoCoordMap[region.name];if(geoCoord){var cp=region.center;cp[0]=geoCoord[0],cp[1]=geoCoord[1]}})}},function(module,exports,__webpack_require__){var graphic=__webpack_require__(43),MapDraw=__webpack_require__(173);__webpack_require__(1).extendChartView({type:"map",render:function(mapModel,ecModel,api,payload){if(!payload||"mapToggleSelect"!==payload.type||payload.from!==this.uid){var group=this.group;if(group.removeAll(),payload&&"geoRoam"===payload.type&&"series"===payload.componentType&&payload.seriesId===mapModel.id){var mapDraw=this._mapDraw;mapDraw&&group.add(mapDraw.group)}else if(mapModel.needsDrawMap){var mapDraw=this._mapDraw||new MapDraw(api,!0);group.add(mapDraw.group),mapDraw.draw(mapModel,ecModel,api,this,payload),this._mapDraw=mapDraw}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;mapModel.get("showLegendSymbol")&&ecModel.getComponent("legend")&&this._renderSymbols(mapModel,ecModel,api)}},remove:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},_renderSymbols:function(mapModel,ecModel,api){var originalData=mapModel.originalData,group=this.group;originalData.each("value",function(value,idx){if(!isNaN(value)){var layout=originalData.getItemLayout(idx);if(layout&&layout.point){var point=layout.point,offset=layout.offset,circle=new graphic.Circle({style:{fill:mapModel.getData().getVisual("color")},shape:{cx:point[0]+9*offset,cy:point[1],r:3},silent:!0,z2:10});if(!offset){var fullData=mapModel.mainSeries.getData(),name=originalData.getName(idx),labelText=name,fullIndex=fullData.indexOfName(name),itemModel=originalData.getItemModel(idx),labelModel=itemModel.getModel("label.normal"),hoverLabelModel=itemModel.getModel("label.emphasis"),textStyleModel=labelModel.getModel("textStyle"),hoverTextStyleModel=hoverLabelModel.getModel("textStyle"),polygonGroups=fullData.getItemGraphicEl(fullIndex);circle.setStyle({textPosition:"bottom"});var onEmphasis=function(){circle.setStyle({text:hoverLabelModel.get("show")?labelText:"",textFill:hoverTextStyleModel.getTextColor(),textFont:hoverTextStyleModel.getFont()})},onNormal=function(){circle.setStyle({text:labelModel.get("show")?labelText:"",textFill:textStyleModel.getTextColor(),textFont:textStyleModel.getFont()})};polygonGroups.on("mouseover",onEmphasis).on("mouseout",onNormal).on("emphasis",onEmphasis).on("normal",onNormal),onNormal()}group.add(circle)}}})}})},function(module,exports,__webpack_require__){function getFixedItemStyle(model,scale){var itemStyle=model.getItemStyle(),areaColor=model.get("areaColor");return areaColor&&(itemStyle.fill=areaColor),itemStyle}function updateMapSelectHandler(mapOrGeoModel,group,api,fromView){group.off("click"),mapOrGeoModel.get("selectedMode")&&group.on("click",function(e){for(var el=e.target;!el.__region;)el=el.parent;if(el){var region=el.__region,action={type:("geo"===mapOrGeoModel.mainType?"geo":"map")+"ToggleSelect",name:region.name,from:fromView.uid};action[mapOrGeoModel.mainType+"Id"]=mapOrGeoModel.id,api.dispatchAction(action),updateMapSelected(mapOrGeoModel,group)}})}function updateMapSelected(mapOrGeoModel,group){group.eachChild(function(otherRegionEl){otherRegionEl.__region&&otherRegionEl.trigger(mapOrGeoModel.isSelected(otherRegionEl.__region.name)?"emphasis":"normal")})}function MapDraw(api,updateGroup){var group=new graphic.Group;this._controller=new RoamController(api.getZr(),updateGroup?group:null,null),this.group=group,this._updateGroup=updateGroup}var RoamController=__webpack_require__(174),graphic=__webpack_require__(43),zrUtil=__webpack_require__(4);MapDraw.prototype={constructor:MapDraw,draw:function(mapOrGeoModel,ecModel,api,fromView,payload){var data=mapOrGeoModel.getData&&mapOrGeoModel.getData(),geo=mapOrGeoModel.coordinateSystem,group=this.group,scale=geo.scale,groupNewProp={position:geo.position,scale:scale};!group.childAt(0)||payload?group.attr(groupNewProp):graphic.updateProps(group,groupNewProp,mapOrGeoModel),group.removeAll();var itemStyleAccessPath=["itemStyle","normal"],hoverItemStyleAccessPath=["itemStyle","emphasis"],labelAccessPath=["label","normal"],hoverLabelAccessPath=["label","emphasis"];zrUtil.each(geo.regions,function(region){var regionGroup=new graphic.Group,compoundPath=new graphic.CompoundPath({shape:{paths:[]}});regionGroup.add(compoundPath);var dataIdx,regionModel=mapOrGeoModel.getRegionModel(region.name)||mapOrGeoModel,itemStyleModel=regionModel.getModel(itemStyleAccessPath),hoverItemStyleModel=regionModel.getModel(hoverItemStyleAccessPath),itemStyle=getFixedItemStyle(itemStyleModel,scale),hoverItemStyle=getFixedItemStyle(hoverItemStyleModel,scale),labelModel=regionModel.getModel(labelAccessPath),hoverLabelModel=regionModel.getModel(hoverLabelAccessPath);if(data){dataIdx=data.indexOfName(region.name);var visualColor=data.getItemVisual(dataIdx,"color",!0);visualColor&&(itemStyle.fill=visualColor)}var textStyleModel=labelModel.getModel("textStyle"),hoverTextStyleModel=hoverLabelModel.getModel("textStyle");zrUtil.each(region.contours,function(contour){var polygon=new graphic.Polygon({shape:{points:contour}});compoundPath.shape.paths.push(polygon)}),compoundPath.setStyle(itemStyle),compoundPath.style.strokeNoScale=!0,compoundPath.culling=!0;var showLabel=labelModel.get("show"),hoverShowLabel=hoverLabelModel.get("show"),isDataNaN=data&&isNaN(data.get("value",dataIdx)),itemLayout=data&&data.getItemLayout(dataIdx);if(!data||isDataNaN&&(showLabel||hoverShowLabel)||itemLayout&&itemLayout.showLabel){var query=data?dataIdx:region.name,formattedStr=mapOrGeoModel.getFormattedLabel(query,"normal"),hoverFormattedStr=mapOrGeoModel.getFormattedLabel(query,"emphasis"),text=new graphic.Text({style:{text:showLabel?formattedStr||region.name:"",fill:textStyleModel.getTextColor(),textFont:textStyleModel.getFont(),textAlign:"center",textVerticalAlign:"middle"},hoverStyle:{text:hoverShowLabel?hoverFormattedStr||region.name:"",fill:hoverTextStyleModel.getTextColor(),textFont:hoverTextStyleModel.getFont()},position:region.center.slice(),scale:[1/scale[0],1/scale[1]],z2:10,silent:!0});regionGroup.add(text)}if(data)data.setItemGraphicEl(dataIdx,regionGroup);else{var regionModel=mapOrGeoModel.getRegionModel(region.name);compoundPath.eventData={componentType:"geo",geoIndex:mapOrGeoModel.componentIndex,name:region.name,region:regionModel&&regionModel.option||{}}}regionGroup.__region=region,graphic.setHoverStyle(regionGroup,hoverItemStyle),group.add(regionGroup)}),this._updateController(mapOrGeoModel,ecModel,api),updateMapSelectHandler(mapOrGeoModel,group,api,fromView),updateMapSelected(mapOrGeoModel,group)},remove:function(){this.group.removeAll(),this._controller.dispose()},_updateController:function(mapOrGeoModel,ecModel,api){function makeActionBase(){var action={type:"geoRoam",componentType:mainType};return action[mainType+"Id"]=mapOrGeoModel.id,action}var geo=mapOrGeoModel.coordinateSystem,controller=this._controller;controller.zoomLimit=mapOrGeoModel.get("scaleLimit"),controller.zoom=geo.getZoom(),controller.enable(mapOrGeoModel.get("roam")||!1);
var mainType=mapOrGeoModel.mainType;controller.off("pan").on("pan",function(dx,dy){api.dispatchAction(zrUtil.extend(makeActionBase(),{dx:dx,dy:dy}))}),controller.off("zoom").on("zoom",function(zoom,mouseX,mouseY){if(api.dispatchAction(zrUtil.extend(makeActionBase(),{zoom:zoom,originX:mouseX,originY:mouseY})),this._updateGroup){var group=this.group,scale=group.scale;group.traverse(function(el){"text"===el.type&&el.attr("scale",[1/scale[0],1/scale[1]])})}},this),controller.rectProvider=function(){return geo.getViewRectAfterRoam()}}},module.exports=MapDraw},function(module,exports,__webpack_require__){function mousedown(e){if(!e.target||!e.target.draggable){var x=e.offsetX,y=e.offsetY,rect=this.rectProvider&&this.rectProvider();rect&&rect.contain(x,y)&&(this._x=x,this._y=y,this._dragging=!0)}}function mousemove(e){if(this._dragging&&(eventTool.stop(e.event),"pinch"!==e.gestureEvent)){if(interactionMutex.isTaken(this._zr,"globalPan"))return;var x=e.offsetX,y=e.offsetY,dx=x-this._x,dy=y-this._y;this._x=x,this._y=y;var target=this.target;if(target){var pos=target.position;pos[0]+=dx,pos[1]+=dy,target.dirty()}eventTool.stop(e.event),this.trigger("pan",dx,dy)}}function mouseup(e){this._dragging=!1}function mousewheel(e){var zoomDelta=e.wheelDelta>0?1.1:1/1.1;zoom.call(this,e,zoomDelta,e.offsetX,e.offsetY)}function pinch(e){if(!interactionMutex.isTaken(this._zr,"globalPan")){var zoomDelta=e.pinchScale>1?1.1:1/1.1;zoom.call(this,e,zoomDelta,e.pinchX,e.pinchY)}}function zoom(e,zoomDelta,zoomX,zoomY){var rect=this.rectProvider&&this.rectProvider();if(rect&&rect.contain(zoomX,zoomY)){eventTool.stop(e.event);var target=this.target,zoomLimit=this.zoomLimit;if(target){var pos=target.position,scale=target.scale,newZoom=this.zoom=this.zoom||1;if(newZoom*=zoomDelta,zoomLimit){var zoomMin=zoomLimit.min||0,zoomMax=zoomLimit.max||1/0;newZoom=Math.max(Math.min(zoomMax,newZoom),zoomMin)}var zoomScale=newZoom/this.zoom;this.zoom=newZoom,pos[0]-=(zoomX-pos[0])*(zoomScale-1),pos[1]-=(zoomY-pos[1])*(zoomScale-1),scale[0]*=zoomScale,scale[1]*=zoomScale,target.dirty()}this.trigger("zoom",zoomDelta,zoomX,zoomY)}}function RoamController(zr,target,rectProvider){this.target=target,this.rectProvider=rectProvider,this.zoomLimit,this.zoom,this._zr=zr;var bind=zrUtil.bind,mousedownHandler=bind(mousedown,this),mousemoveHandler=bind(mousemove,this),mouseupHandler=bind(mouseup,this),mousewheelHandler=bind(mousewheel,this),pinchHandler=bind(pinch,this);Eventful.call(this),this.enable=function(controlType){this.disable(),null==controlType&&(controlType=!0),controlType!==!0&&"move"!==controlType&&"pan"!==controlType||(zr.on("mousedown",mousedownHandler),zr.on("mousemove",mousemoveHandler),zr.on("mouseup",mouseupHandler)),controlType!==!0&&"scale"!==controlType&&"zoom"!==controlType||(zr.on("mousewheel",mousewheelHandler),zr.on("pinch",pinchHandler))},this.disable=function(){zr.off("mousedown",mousedownHandler),zr.off("mousemove",mousemoveHandler),zr.off("mouseup",mouseupHandler),zr.off("mousewheel",mousewheelHandler),zr.off("pinch",pinchHandler)},this.dispose=this.disable,this.isDragging=function(){return this._dragging},this.isPinching=function(){return this._pinching}}var Eventful=__webpack_require__(33),zrUtil=__webpack_require__(4),eventTool=__webpack_require__(87),interactionMutex=__webpack_require__(175);zrUtil.mixin(RoamController,Eventful),module.exports=RoamController},function(module,exports,__webpack_require__){function getStore(zr){return zr[ATTR]||(zr[ATTR]={})}var ATTR="\0_ec_interaction_mutex",interactionMutex={take:function(zr,resourceKey,userKey){var store=getStore(zr);store[resourceKey]=userKey},release:function(zr,resourceKey,userKey){var store=getStore(zr),uKey=store[resourceKey];uKey===userKey&&(store[resourceKey]=null)},isTaken:function(zr,resourceKey){return!!getStore(zr)[resourceKey]}};__webpack_require__(1).registerAction({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},function(){}),module.exports=interactionMutex},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4),roamHelper=__webpack_require__(177),echarts=__webpack_require__(1);echarts.registerAction({type:"geoRoam",event:"geoRoam",update:"updateLayout"},function(payload,ecModel){var componentType=payload.componentType||"series";ecModel.eachComponent({mainType:componentType,query:payload},function(componentModel){var geo=componentModel.coordinateSystem;if("geo"===geo.type){var res=roamHelper.updateCenterAndZoom(geo,payload,componentModel.get("scaleLimit"));componentModel.setCenter&&componentModel.setCenter(res.center),componentModel.setZoom&&componentModel.setZoom(res.zoom),"series"===componentType&&zrUtil.each(componentModel.seriesGroup,function(seriesModel){seriesModel.setCenter(res.center),seriesModel.setZoom(res.zoom)})}})})},function(module,exports){var roamHelper={};roamHelper.updateCenterAndZoom=function(view,payload,zoomLimit){var previousZoom=view.getZoom(),center=view.getCenter(),zoom=payload.zoom,point=view.dataToPoint(center);if(null!=payload.dx&&null!=payload.dy){point[0]-=payload.dx,point[1]-=payload.dy;var center=view.pointToData(point);view.setCenter(center)}if(null!=zoom){if(zoomLimit){var zoomMin=zoomLimit.min||0,zoomMax=zoomLimit.max||1/0;zoom=Math.max(Math.min(previousZoom*zoom,zoomMax),zoomMin)/previousZoom}view.scale[0]*=zoom,view.scale[1]*=zoom;var position=view.position,fixX=(payload.originX-position[0])*(zoom-1),fixY=(payload.originY-position[1])*(zoom-1);position[0]-=fixX,position[1]-=fixY,view.updateTransform();var center=view.pointToData(point);view.setCenter(center),view.setZoom(zoom*previousZoom)}return{center:view.getCenter(),zoom:view.getZoom()}},module.exports=roamHelper},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);module.exports=function(ecModel){var processedMapType={};ecModel.eachSeriesByType("map",function(mapSeries){var mapType=mapSeries.get("map");if(!processedMapType[mapType]){var mapSymbolOffsets={};zrUtil.each(mapSeries.seriesGroup,function(subMapSeries){var geo=subMapSeries.coordinateSystem,data=subMapSeries.originalData;subMapSeries.get("showLegendSymbol")&&ecModel.getComponent("legend")&&data.each("value",function(value,idx){var name=data.getName(idx),region=geo.getRegion(name);if(region&&!isNaN(value)){var offset=mapSymbolOffsets[name]||0,point=geo.dataToPoint(region.center);mapSymbolOffsets[name]=offset+1,data.setItemLayout(idx,{point:point,offset:offset})}})});var data=mapSeries.getData();data.each(function(idx){var name=data.getName(idx),layout=data.getItemLayout(idx)||{};layout.showLabel=!mapSymbolOffsets[name],data.setItemLayout(idx,layout)}),processedMapType[mapType]=!0}})}},function(module,exports){module.exports=function(ecModel){ecModel.eachSeriesByType("map",function(seriesModel){var colorList=seriesModel.get("color"),itemStyleModel=seriesModel.getModel("itemStyle.normal"),areaColor=itemStyleModel.get("areaColor"),color=itemStyleModel.get("color")||colorList[seriesModel.seriesIndex%colorList.length];seriesModel.getData().setVisual({areaColor:areaColor,color:color})})}},function(module,exports,__webpack_require__){function dataStatistics(datas,statisticType){for(var dataNameMap={},dims=["value"],i=0;i<datas.length;i++)datas[i].each(dims,function(value,idx){var name=datas[i].getName(idx);dataNameMap[name]=dataNameMap[name]||[],isNaN(value)||dataNameMap[name].push(value)});return datas[0].map(dims,function(value,idx){for(var name=datas[0].getName(idx),sum=0,min=1/0,max=-(1/0),len=dataNameMap[name].length,i=0;i<len;i++)min=Math.min(min,dataNameMap[name][i]),max=Math.max(max,dataNameMap[name][i]),sum+=dataNameMap[name][i];var result;return result="min"===statisticType?min:"max"===statisticType?max:"average"===statisticType?sum/len:sum,0===len?NaN:result})}var zrUtil=__webpack_require__(4);module.exports=function(ecModel){var seriesGroupByMapType={};ecModel.eachSeriesByType("map",function(seriesModel){var mapType=seriesModel.get("map");seriesGroupByMapType[mapType]=seriesGroupByMapType[mapType]||[],seriesGroupByMapType[mapType].push(seriesModel)}),zrUtil.each(seriesGroupByMapType,function(seriesList,mapType){for(var data=dataStatistics(zrUtil.map(seriesList,function(seriesModel){return seriesModel.getData()}),seriesList[0].get("mapValueCalculation")),i=0;i<seriesList.length;i++)seriesList[i].originalData=seriesList[i].getData();for(var i=0;i<seriesList.length;i++)seriesList[i].seriesGroup=seriesList,seriesList[i].needsDrawMap=0===i,seriesList[i].setData(data.cloneShallow()),seriesList[i].mainSeries=seriesList[0]})}},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);module.exports=function(option){var mapSeries=[];zrUtil.each(option.series,function(seriesOpt){"map"===seriesOpt.type&&mapSeries.push(seriesOpt)}),zrUtil.each(mapSeries,function(seriesOpt){seriesOpt.map=seriesOpt.map||seriesOpt.mapType,zrUtil.defaults(seriesOpt,seriesOpt.mapLocation)})}},function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);__webpack_require__(183),__webpack_require__(186),__webpack_require__(190),echarts.registerVisual(__webpack_require__(191)),echarts.registerLayout(__webpack_require__(193))},function(module,exports,__webpack_require__){function completeTreeValue(dataNode,arrValueLength){var sum=0;zrUtil.each(dataNode.children,function(child){completeTreeValue(child,arrValueLength);var childValue=child.value;zrUtil.isArray(childValue)&&(childValue=childValue[0]),sum+=childValue});var thisValue=dataNode.value;arrValueLength>=0&&(zrUtil.isArray(thisValue)?thisValue=thisValue[0]:dataNode.value=new Array(arrValueLength)),(null==thisValue||isNaN(thisValue))&&(thisValue=sum),thisValue<0&&(thisValue=0),arrValueLength>=0?dataNode.value[0]=thisValue:dataNode.value=thisValue}function setDefault(levels,ecModel){var globalColorList=ecModel.get("color");if(globalColorList){levels=levels||[];var hasColorDefine;if(zrUtil.each(levels,function(levelDefine){var model=new Model(levelDefine),modelColor=model.get("color");(model.get("itemStyle.normal.color")||modelColor&&"none"!==modelColor)&&(hasColorDefine=!0)}),!hasColorDefine){var level0=levels[0]||(levels[0]={});level0.color=globalColorList.slice()}return levels}}var SeriesModel=__webpack_require__(28),Tree=__webpack_require__(184),zrUtil=__webpack_require__(4),Model=__webpack_require__(12),formatUtil=__webpack_require__(6),encodeHTML=formatUtil.encodeHTML,addCommas=formatUtil.addCommas;module.exports=SeriesModel.extend({type:"series.treemap",dependencies:["grid","polar"],_viewRoot:null,defaultOption:{progressive:0,hoverLayerThreshold:1/0,left:"center",top:"middle",right:null,bottom:null,width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",visualDimension:0,zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{normal:{color:"rgba(0,0,0,0.7)",borderColor:"rgba(255,255,255,0.7)",borderWidth:1,shadowColor:"rgba(150,150,150,1)",shadowBlur:3,shadowOffsetX:0,shadowOffsetY:0,textStyle:{color:"#fff"}},emphasis:{textStyle:{}}}},label:{normal:{show:!0,position:"inside",textStyle:{color:"#fff",ellipsis:!0}}},itemStyle:{normal:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{}},color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},getInitialData:function(option,ecModel){var data=option.data||[],rootName=option.name;null==rootName&&(rootName=option.name);var root={name:rootName,children:option.data},value0=(data[0]||{}).value;completeTreeValue(root,zrUtil.isArray(value0)?value0.length:-1);var levels=option.levels||[];return levels=option.levels=setDefault(levels,ecModel),Tree.createTree(root,this,levels).data},optionUpdated:function(){this.resetViewRoot()},formatTooltip:function(dataIndex){var data=this.getData(),value=this.getRawValue(dataIndex),formattedValue=addCommas(zrUtil.isArray(value)?value[0]:value),name=data.getName(dataIndex);return encodeHTML(name)+": "+formattedValue},getDataParams:function(dataIndex){for(var params=SeriesModel.prototype.getDataParams.apply(this,arguments),data=this.getData(),node=data.tree.getNodeByDataIndex(dataIndex),treePathInfo=params.treePathInfo=[];node;){var nodeDataIndex=node.dataIndex;treePathInfo.push({name:node.name,dataIndex:nodeDataIndex,value:this.getRawValue(nodeDataIndex)}),node=node.parentNode}return treePathInfo.reverse(),params},setLayoutInfo:function(layoutInfo){this.layoutInfo=this.layoutInfo||{},zrUtil.extend(this.layoutInfo,layoutInfo)},mapIdToIndex:function(id){var idIndexMap=this._idIndexMap;idIndexMap||(idIndexMap=this._idIndexMap={},this._idIndexMapCount=0);var index=idIndexMap[id];return null==index&&(idIndexMap[id]=index=this._idIndexMapCount++),index},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(viewRoot){viewRoot?this._viewRoot=viewRoot:viewRoot=this._viewRoot;var root=this.getData().tree.root;viewRoot&&(viewRoot===root||root.contains(viewRoot))||(this._viewRoot=root)}})},function(module,exports,__webpack_require__){function Tree(hostModel,levelOptions){this.root,this.data,this._nodes=[],this.hostModel=hostModel,this.levelModels=zrUtil.map(levelOptions||[],function(levelDefine){return new Model(levelDefine,hostModel,hostModel.ecModel)})}function addChild(child,node){var children=node.children;child.parentNode!==node&&(children.push(child),child.parentNode=node)}var zrUtil=__webpack_require__(4),Model=__webpack_require__(12),List=__webpack_require__(97),linkList=__webpack_require__(185),completeDimensions=__webpack_require__(102),TreeNode=function(name,hostTree){this.name=name||"",this.depth=0,this.height=0,this.parentNode=null,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.hostTree=hostTree};TreeNode.prototype={constructor:TreeNode,isRemoved:function(){return this.dataIndex<0},eachNode:function(options,cb,context){"function"==typeof options&&(context=cb,cb=options,options=null),options=options||{},zrUtil.isString(options)&&(options={order:options});var suppressVisitSub,order=options.order||"preorder",children=this[options.attr||"children"];"preorder"===order&&(suppressVisitSub=cb.call(context,this));for(var i=0;!suppressVisitSub&&i<children.length;i++)children[i].eachNode(options,cb,context);"postorder"===order&&cb.call(context,this)},updateDepthAndHeight:function(depth){var height=0;this.depth=depth;for(var i=0;i<this.children.length;i++){var child=this.children[i];child.updateDepthAndHeight(depth+1),child.height>height&&(height=child.height)}this.height=height+1},getNodeById:function(id){if(this.getId()===id)return this;for(var i=0,children=this.children,len=children.length;i<len;i++){var res=children[i].getNodeById(id);if(res)return res}},contains:function(node){if(node===this)return!0;for(var i=0,children=this.children,len=children.length;i<len;i++){var res=children[i].contains(node);if(res)return res}},getAncestors:function(includeSelf){for(var ancestors=[],node=includeSelf?this:this.parentNode;node;)ancestors.push(node),node=node.parentNode;return ancestors.reverse(),ancestors},getValue:function(dimension){var data=this.hostTree.data;return data.get(data.getDimension(dimension||"value"),this.dataIndex)},setLayout:function(layout,merge){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,layout,merge)},getLayout:function(){return this.hostTree.data.getItemLayout(this.dataIndex)},getModel:function(path){if(!(this.dataIndex<0)){var hostTree=this.hostTree,itemModel=hostTree.data.getItemModel(this.dataIndex),levelModel=this.getLevelModel();return itemModel.getModel(path,(levelModel||hostTree.hostModel).getModel(path))}},getLevelModel:function(){return(this.hostTree.levelModels||[])[this.depth]},setVisual:function(key,value){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,key,value)},getVisual:function(key,ignoreParent){return this.hostTree.data.getItemVisual(this.dataIndex,key,ignoreParent)},getRawIndex:function(){return this.hostTree.data.getRawIndex(this.dataIndex)},getId:function(){return this.hostTree.data.getId(this.dataIndex)}},Tree.prototype={constructor:Tree,type:"tree",eachNode:function(options,cb,context){this.root.eachNode(options,cb,context)},getNodeByDataIndex:function(dataIndex){var rawIndex=this.data.getRawIndex(dataIndex);return this._nodes[rawIndex]},getNodeByName:function(name){return this.root.getNodeByName(name)},update:function(){for(var data=this.data,nodes=this._nodes,i=0,len=nodes.length;i<len;i++)nodes[i].dataIndex=-1;for(var i=0,len=data.count();i<len;i++)nodes[data.getRawIndex(i)].dataIndex=i},clearLayouts:function(){this.data.clearItemLayouts()}},Tree.createTree=function(dataRoot,hostModel,levelOptions){function buildHierarchy(dataNode,parentNode){listData.push(dataNode);var node=new TreeNode(dataNode.name,tree);parentNode?addChild(node,parentNode):tree.root=node,tree._nodes.push(node);var children=dataNode.children;if(children)for(var i=0;i<children.length;i++)buildHierarchy(children[i],node)}var tree=new Tree(hostModel,levelOptions),listData=[];buildHierarchy(dataRoot),tree.root.updateDepthAndHeight(0);var dimensions=completeDimensions([{name:"value"}],listData),list=new List(dimensions,hostModel);return list.initData(listData),linkList({mainData:list,struct:tree,structAttr:"tree"}),tree.update(),tree},module.exports=Tree},function(module,exports,__webpack_require__){function linkList(opt){var mainData=opt.mainData,datas=opt.datas;datas||(datas={main:mainData},opt.datasAttr={main:"data"}),opt.datas=opt.mainData=null,linkAll(mainData,datas,opt),each(datas,function(data){each(mainData.TRANSFERABLE_METHODS,function(methodName){data.wrapMethod(methodName,zrUtil.curry(transferInjection,opt))})}),mainData.wrapMethod("cloneShallow",zrUtil.curry(cloneShallowInjection,opt)),each(mainData.CHANGABLE_METHODS,function(methodName){mainData.wrapMethod(methodName,zrUtil.curry(changeInjection,opt))}),zrUtil.assert(datas[mainData.dataType]===mainData)}function transferInjection(opt,res){if(isMainData(this)){var datas=zrUtil.extend({},this[DATAS]);datas[this.dataType]=res,linkAll(res,datas,opt)}else linkSingle(res,this.dataType,this[MAIN_DATA],opt);return res}function changeInjection(opt,res){return opt.struct&&opt.struct.update(this),res}function cloneShallowInjection(opt,res){return each(res[DATAS],function(data,dataType){data!==res&&linkSingle(data.cloneShallow(),dataType,res,opt)}),res}function getLinkedData(dataType){var mainData=this[MAIN_DATA];return null==dataType||null==mainData?mainData:mainData[DATAS][dataType]}function isMainData(data){return data[MAIN_DATA]===data}function linkAll(mainData,datas,opt){mainData[DATAS]={},each(datas,function(data,dataType){linkSingle(data,dataType,mainData,opt)})}function linkSingle(data,dataType,mainData,opt){mainData[DATAS][dataType]=data,data[MAIN_DATA]=mainData,data.dataType=dataType,opt.struct&&(data[opt.structAttr]=opt.struct,opt.struct[opt.datasAttr[dataType]]=data),data.getLinkedData=getLinkedData}var zrUtil=__webpack_require__(4),each=zrUtil.each,DATAS="\0__link_datas",MAIN_DATA="\0__link_mainData";module.exports=linkList},function(module,exports,__webpack_require__){function createStorage(){return{nodeGroup:[],background:[],content:[]}}function renderNode(seriesModel,thisStorage,oldStorage,reRoot,lastsForAnimation,willInvisibleEls,thisNode,oldNode,parentGroup,depth){function renderContent(group){content.dataIndex=thisNode.dataIndex,content.seriesIndex=seriesModel.seriesIndex;var borderWidth=thisLayout.borderWidth,contentWidth=Math.max(thisWidth-2*borderWidth,0),contentHeight=Math.max(thisHeight-2*borderWidth,0);content.culling=!0,content.setShape({x:borderWidth,y:borderWidth,width:contentWidth,height:contentHeight});var visualColor=thisNode.getVisual("color",!0);updateStyle(content,function(){var normalStyle={fill:visualColor},emphasisStyle=thisNode.getModel("itemStyle.emphasis").getItemStyle();prepareText(normalStyle,emphasisStyle,visualColor,contentWidth,contentHeight),content.setStyle(normalStyle),graphic.setHoverStyle(content,emphasisStyle)}),group.add(content)}function updateStyle(element,cb){thisInvisible?!element.invisible&&willInvisibleEls.push(element):(cb(),element.__tmWillVisible||(element.invisible=!1))}function prepareText(normalStyle,emphasisStyle,visualColor,contentWidth,contentHeight){var nodeModel=thisNode.getModel(),text=nodeModel.get("name");if(thisLayout.isLeafRoot){var iconChar=seriesModel.get("drillDownIcon",!0);text=iconChar?iconChar+" "+text:test}setText(text,normalStyle,nodeModel,PATH_LABEL_NORMAL,visualColor,contentWidth,contentHeight),setText(text,emphasisStyle,nodeModel,PATH_LABEL_EMPHASIS,visualColor,contentWidth,contentHeight)}function setText(text,style,nodeModel,labelPath,visualColor,contentWidth,contentHeight){var labelModel=nodeModel.getModel(labelPath),labelTextStyleModel=labelModel.getModel("textStyle");graphic.setText(style,labelModel,visualColor),style.textAlign=labelTextStyleModel.get("align"),style.textVerticalAlign=labelTextStyleModel.get("baseline");var textRect=labelTextStyleModel.getTextRect(text);!labelModel.getShallow("show")||textRect.height>contentHeight?style.text="":textRect.width>contentWidth?style.text=labelTextStyleModel.get("ellipsis")?labelTextStyleModel.truncateText(text,contentWidth,null,{minChar:2}):"":style.text=text}function giveGraphic(storageName,Ctor,depth,z){var element=null!=oldRawIndex&&oldStorage[storageName][oldRawIndex],lasts=lastsForAnimation[storageName];return element?(oldStorage[storageName][oldRawIndex]=null,prepareAnimationWhenHasOld(lasts,element,storageName)):thisInvisible||(element=new Ctor({z:calculateZ(depth,z)}),element.__tmDepth=depth,element.__tmStorageName=storageName,prepareAnimationWhenNoOld(lasts,element,storageName)),thisStorage[storageName][thisRawIndex]=element}function prepareAnimationWhenHasOld(lasts,element,storageName){var lastCfg=lasts[thisRawIndex]={};lastCfg.old="nodeGroup"===storageName?element.position.slice():zrUtil.extend({},element.shape)}function prepareAnimationWhenNoOld(lasts,element,storageName){var lastCfg=lasts[thisRawIndex]={},parentNode=thisNode.parentNode;if(parentNode&&(!reRoot||"drillDown"===reRoot.direction)){var parentOldX=0,parentOldY=0,parentOldBg=lastsForAnimation.background[parentNode.getRawIndex()];!reRoot&&parentOldBg&&parentOldBg.old&&(parentOldX=parentOldBg.old.width,parentOldY=parentOldBg.old.height),lastCfg.old="nodeGroup"===storageName?[0,parentOldY]:{x:parentOldX,y:parentOldY,width:0,height:0}}lastCfg.fadein="nodeGroup"!==storageName}if(thisNode){var thisLayout=thisNode.getLayout();if(thisLayout&&thisLayout.isInView){var thisWidth=thisLayout.width,thisHeight=thisLayout.height,thisInvisible=thisLayout.invisible,thisRawIndex=thisNode.getRawIndex(),oldRawIndex=oldNode&&oldNode.getRawIndex(),group=giveGraphic("nodeGroup",Group);if(group){if(parentGroup.add(group),group.attr("position",[thisLayout.x||0,thisLayout.y||0]),group.__tmNodeWidth=thisWidth,group.__tmNodeHeight=thisHeight,thisLayout.isAboveViewRoot)return group;var bg=giveGraphic("background",Rect,depth,Z_BG);bg&&(bg.setShape({x:0,y:0,width:thisWidth,height:thisHeight}),updateStyle(bg,function(){bg.setStyle("fill",thisNode.getVisual("borderColor",!0))}),group.add(bg));var thisViewChildren=thisNode.viewChildren;if(!thisViewChildren||!thisViewChildren.length){var content=giveGraphic("content",Rect,depth,Z_CONTENT);content&&renderContent(group)}return group}}}}function calculateZ(depth,zInLevel){var zb=depth*Z_BASE+zInLevel;return(zb-1)/zb}var zrUtil=__webpack_require__(4),graphic=__webpack_require__(43),DataDiffer=__webpack_require__(98),helper=__webpack_require__(187),Breadcrumb=__webpack_require__(188),RoamController=__webpack_require__(174),BoundingRect=__webpack_require__(9),matrix=__webpack_require__(11),animationUtil=__webpack_require__(189),bind=zrUtil.bind,Group=graphic.Group,Rect=graphic.Rect,each=zrUtil.each,DRAG_THRESHOLD=3,PATH_LABEL_NORMAL=["label","normal"],PATH_LABEL_EMPHASIS=["label","emphasis"],Z_BASE=10,Z_BG=1,Z_CONTENT=2;module.exports=__webpack_require__(1).extendChartView({type:"treemap",init:function(o,api){this._containerGroup,this._storage=createStorage(),this._oldTree,this._breadcrumb,this._controller,this._state="ready",this._mayClick},render:function(seriesModel,ecModel,api,payload){var models=ecModel.findComponents({mainType:"series",subType:"treemap",query:payload});if(!(zrUtil.indexOf(models,seriesModel)<0)){this.seriesModel=seriesModel,this.api=api,this.ecModel=ecModel;var targetInfo=helper.retrieveTargetInfo(payload,seriesModel),payloadType=payload&&payload.type,layoutInfo=seriesModel.layoutInfo,isInit=!this._oldTree,thisStorage=this._storage,reRoot="treemapRootToNode"===payloadType&&targetInfo&&thisStorage?{rootNodeGroup:thisStorage.nodeGroup[targetInfo.node.getRawIndex()],direction:payload.direction}:null,containerGroup=this._giveContainerGroup(layoutInfo),renderResult=this._doRender(containerGroup,seriesModel,reRoot);isInit||payloadType&&"treemapZoomToNode"!==payloadType&&"treemapRootToNode"!==payloadType?renderResult.renderFinally():this._doAnimation(containerGroup,renderResult,seriesModel,reRoot),this._resetController(api),this._renderBreadcrumb(seriesModel,api,targetInfo)}},_giveContainerGroup:function(layoutInfo){var containerGroup=this._containerGroup;return containerGroup||(containerGroup=this._containerGroup=new Group,this._initEvents(containerGroup),this.group.add(containerGroup)),containerGroup.attr("position",[layoutInfo.x,layoutInfo.y]),containerGroup},_doRender:function(containerGroup,seriesModel,reRoot){function dualTravel(thisViewChildren,oldViewChildren,parentGroup,sameTree,depth){function getKey(node){return node.getId()}function processNode(newIndex,oldIndex){var thisNode=null!=newIndex?thisViewChildren[newIndex]:null,oldNode=null!=oldIndex?oldViewChildren[oldIndex]:null,group=doRenderNode(thisNode,oldNode,parentGroup,depth);group&&dualTravel(thisNode&&thisNode.viewChildren||[],oldNode&&oldNode.viewChildren||[],group,sameTree,depth+1)}sameTree?(oldViewChildren=thisViewChildren,each(thisViewChildren,function(child,index){!child.isRemoved()&&processNode(index,index)})):new DataDiffer(oldViewChildren,thisViewChildren,getKey,getKey).add(processNode).update(processNode).remove(zrUtil.curry(processNode,null)).execute()}function clearStorage(storage){var willDeleteEls=createStorage();return storage&&each(storage,function(store,storageName){var delEls=willDeleteEls[storageName];each(store,function(el){el&&(delEls.push(el),el.__tmWillDelete=1)})}),willDeleteEls}function renderFinally(){each(willDeleteEls,function(els){each(els,function(el){el.parent&&el.parent.remove(el)})}),each(willInvisibleEls,function(el){el.invisible=!0,el.dirty()})}var thisTree=seriesModel.getData().tree,oldTree=this._oldTree,lastsForAnimation=createStorage(),thisStorage=createStorage(),oldStorage=this._storage,willInvisibleEls=[],doRenderNode=zrUtil.curry(renderNode,seriesModel,thisStorage,oldStorage,reRoot,lastsForAnimation,willInvisibleEls);dualTravel(thisTree.root?[thisTree.root]:[],oldTree&&oldTree.root?[oldTree.root]:[],containerGroup,thisTree===oldTree||!oldTree,0);var willDeleteEls=clearStorage(oldStorage);return this._oldTree=thisTree,this._storage=thisStorage,{lastsForAnimation:lastsForAnimation,willDeleteEls:willDeleteEls,renderFinally:renderFinally}},_doAnimation:function(containerGroup,renderResult,seriesModel,reRoot){if(seriesModel.get("animation")){var duration=seriesModel.get("animationDurationUpdate"),easing=seriesModel.get("animationEasing"),animationWrap=animationUtil.createWrap();each(renderResult.willDeleteEls,function(store,storageName){each(store,function(el,rawIndex){if(!el.invisible){var target,parent=el.parent;if(reRoot&&"drillDown"===reRoot.direction)target=parent===reRoot.rootNodeGroup?{shape:{x:0,y:0,width:parent.__tmNodeWidth,height:parent.__tmNodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var targetX=0,targetY=0;parent.__tmWillDelete||(targetX=parent.__tmNodeWidth/2,targetY=parent.__tmNodeHeight/2),target="nodeGroup"===storageName?{position:[targetX,targetY],style:{opacity:0}}:{shape:{x:targetX,y:targetY,width:0,height:0},style:{opacity:0}}}target&&animationWrap.add(el,target,duration,easing)}})}),each(this._storage,function(store,storageName){each(store,function(el,rawIndex){var last=renderResult.lastsForAnimation[storageName][rawIndex],target={};last&&("nodeGroup"===storageName?last.old&&(target.position=el.position.slice(),el.attr("position",last.old)):(last.old&&(target.shape=zrUtil.extend({},el.shape),el.setShape(last.old)),last.fadein?(el.setStyle("opacity",0),target.style={opacity:1}):1!==el.style.opacity&&(target.style={opacity:1})),animationWrap.add(el,target,duration,easing))})},this),this._state="animating",animationWrap.done(bind(function(){this._state="ready",renderResult.renderFinally()},this)).start()}},_resetController:function(api){var controller=this._controller;controller||(controller=this._controller=new RoamController(api.getZr()),controller.enable(this.seriesModel.get("roam")),controller.on("pan",bind(this._onPan,this)),controller.on("zoom",bind(this._onZoom,this)));var rect=new BoundingRect(0,0,api.getWidth(),api.getHeight());controller.rectProvider=function(){return rect}},_clearController:function(){var controller=this._controller;controller&&(controller.off("pan").off("zoom"),controller=null)},_onPan:function(dx,dy){if(this._mayClick=!1,"animating"!==this._state&&(Math.abs(dx)>DRAG_THRESHOLD||Math.abs(dy)>DRAG_THRESHOLD)){var root=this.seriesModel.getData().tree.root;if(!root)return;var rootLayout=root.getLayout();if(!rootLayout)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:rootLayout.x+dx,y:rootLayout.y+dy,width:rootLayout.width,height:rootLayout.height}})}},_onZoom:function(scale,mouseX,mouseY){if(this._mayClick=!1,"animating"!==this._state){var root=this.seriesModel.getData().tree.root;if(!root)return;var rootLayout=root.getLayout();if(!rootLayout)return;var rect=new BoundingRect(rootLayout.x,rootLayout.y,rootLayout.width,rootLayout.height),layoutInfo=this.seriesModel.layoutInfo;mouseX-=layoutInfo.x,mouseY-=layoutInfo.y;var m=matrix.create();matrix.translate(m,m,[-mouseX,-mouseY]),matrix.scale(m,m,[scale,scale]),matrix.translate(m,m,[mouseX,mouseY]),rect.applyTransform(m),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:rect.x,y:rect.y,width:rect.width,height:rect.height}})}},_initEvents:function(containerGroup){function onClick(e){var nodeClick=this.seriesModel.get("nodeClick",!0);if(nodeClick){var targetInfo=this.findTarget(e.offsetX,e.offsetY);if(targetInfo){var node=targetInfo.node;if(node.getLayout().isLeafRoot)this._rootToNode(targetInfo);else if("zoomToNode"===nodeClick)this._zoomToNode(targetInfo);else if("link"===nodeClick){var itemModel=node.hostTree.data.getItemModel(node.dataIndex),link=itemModel.get("link",!0),linkTarget=itemModel.get("target",!0)||"blank";link&&window.open(link,linkTarget)}}}}containerGroup.on("mousedown",function(e){"ready"===this._state&&(this._mayClick=!0)},this),containerGroup.on("mouseup",function(e){this._mayClick&&(this._mayClick=!1,"ready"===this._state&&onClick.call(this,e))},this)},_renderBreadcrumb:function(seriesModel,api,targetInfo){function onSelect(node){"animating"!==this._state&&(helper.aboveViewRoot(seriesModel.getViewRoot(),node)?this._rootToNode({node:node}):this._zoomToNode({node:node}))}targetInfo||(targetInfo=this.findTarget(api.getWidth()/2,api.getHeight()/2),targetInfo||(targetInfo={node:seriesModel.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new Breadcrumb(this.group,bind(onSelect,this)))).render(seriesModel,api,targetInfo.node)},remove:function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=createStorage(),this._state="ready",
this._breadcrumb&&this._breadcrumb.remove()},dispose:function(){this._clearController()},_zoomToNode:function(targetInfo){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:targetInfo.node})},_rootToNode:function(targetInfo){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:targetInfo.node})},findTarget:function(x,y){var targetInfo,viewRoot=this.seriesModel.getViewRoot();return viewRoot.eachNode({attr:"viewChildren",order:"preorder"},function(node){var bgEl=this._storage.background[node.getRawIndex()];if(bgEl){var point=bgEl.transformCoordToLocal(x,y),shape=bgEl.shape;if(!(shape.x<=point[0]&&point[0]<=shape.x+shape.width&&shape.y<=point[1]&&point[1]<=shape.y+shape.height))return!1;targetInfo={node:node,offsetX:point[0],offsetY:point[1]}}},this),targetInfo}})},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4),helper={retrieveTargetInfo:function(payload,seriesModel){if(payload&&("treemapZoomToNode"===payload.type||"treemapRootToNode"===payload.type)){var root=seriesModel.getData().tree.root,targetNode=payload.targetNode;if(targetNode&&root.contains(targetNode))return{node:targetNode};var targetNodeId=payload.targetNodeId;if(null!=targetNodeId&&(targetNode=root.getNodeById(targetNodeId)))return{node:targetNode}}},getPathToRoot:function(node){for(var path=[];node;)node=node.parentNode,node&&path.push(node);return path.reverse()},aboveViewRoot:function(viewRoot,node){var viewPath=helper.getPathToRoot(viewRoot);return zrUtil.indexOf(viewPath,node)>=0}};module.exports=helper},function(module,exports,__webpack_require__){function Breadcrumb(containerGroup,onSelect){this.group=new graphic.Group,containerGroup.add(this.group),this._onSelect=onSelect||zrUtil.noop}function makeItemPoints(x,y,itemWidth,itemHeight,head,tail){var points=[[head?x:x-ARRAY_LENGTH,y],[x+itemWidth,y],[x+itemWidth,y+itemHeight],[head?x:x-ARRAY_LENGTH,y+itemHeight]];return!tail&&points.splice(2,0,[x+itemWidth+ARRAY_LENGTH,y+itemHeight/2]),!head&&points.push([x,y+itemHeight/2]),points}var graphic=__webpack_require__(43),layout=__webpack_require__(21),zrUtil=__webpack_require__(4),TEXT_PADDING=8,ITEM_GAP=8,ARRAY_LENGTH=5;Breadcrumb.prototype={constructor:Breadcrumb,render:function(seriesModel,api,targetNode){var model=seriesModel.getModel("breadcrumb"),thisGroup=this.group;if(thisGroup.removeAll(),model.get("show")&&targetNode){var normalStyleModel=model.getModel("itemStyle.normal"),textStyleModel=normalStyleModel.getModel("textStyle"),layoutParam={pos:{left:model.get("left"),right:model.get("right"),top:model.get("top"),bottom:model.get("bottom")},box:{width:api.getWidth(),height:api.getHeight()},emptyItemWidth:model.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(model,targetNode,layoutParam,textStyleModel),this._renderContent(model,targetNode,layoutParam,normalStyleModel,textStyleModel),layout.positionGroup(thisGroup,layoutParam.pos,layoutParam.box)}},_prepare:function(model,targetNode,layoutParam,textStyleModel){for(var node=targetNode;node;node=node.parentNode){var text=node.getModel().get("name"),textRect=textStyleModel.getTextRect(text),itemWidth=Math.max(textRect.width+2*TEXT_PADDING,layoutParam.emptyItemWidth);layoutParam.totalWidth+=itemWidth+ITEM_GAP,layoutParam.renderList.push({node:node,text:text,width:itemWidth})}},_renderContent:function(model,targetNode,layoutParam,normalStyleModel,textStyleModel){for(var lastX=0,emptyItemWidth=layoutParam.emptyItemWidth,height=model.get("height"),availableSize=layout.getAvailableSize(layoutParam.pos,layoutParam.box),totalWidth=layoutParam.totalWidth,renderList=layoutParam.renderList,i=renderList.length-1;i>=0;i--){var item=renderList[i],itemWidth=item.width,text=item.text;totalWidth>availableSize.width&&(totalWidth-=itemWidth-emptyItemWidth,itemWidth=emptyItemWidth,text=""),this.group.add(new graphic.Polygon({shape:{points:makeItemPoints(lastX,0,itemWidth,height,i===renderList.length-1,0===i)},style:zrUtil.defaults(normalStyleModel.getItemStyle(),{lineJoin:"bevel",text:text,textFill:textStyleModel.getTextColor(),textFont:textStyleModel.getFont()}),z:10,onclick:zrUtil.bind(this._onSelect,this,item.node)})),lastX+=itemWidth+ITEM_GAP}},remove:function(){this.group.removeAll()}},module.exports=Breadcrumb},function(module,exports,__webpack_require__){function createWrap(){var doneCallback,storage=[],elExistsMap={};return{add:function(el,target,time,delay,easing){return zrUtil.isString(delay)&&(easing=delay,delay=0),!elExistsMap[el.id]&&(elExistsMap[el.id]=1,storage.push({el:el,target:target,time:time,delay:delay,easing:easing}),!0)},done:function(callback){return doneCallback=callback,this},start:function(){function done(){count--,count||(storage.length=0,elExistsMap={},doneCallback&&doneCallback())}for(var count=storage.length,i=0,len=storage.length;i<len;i++){var item=storage[i];item.el.animateTo(item.target,item.time,item.delay,item.easing,done)}return this}}}var zrUtil=__webpack_require__(4);module.exports={createWrap:createWrap}},function(module,exports,__webpack_require__){for(var echarts=__webpack_require__(1),helper=__webpack_require__(187),noop=function(){},actionTypes=["treemapZoomToNode","treemapRender","treemapMove"],i=0;i<actionTypes.length;i++)echarts.registerAction({type:actionTypes[i],update:"updateView"},noop);echarts.registerAction({type:"treemapRootToNode",update:"updateView"},function(payload,ecModel){function handleRootToNode(model,index){var targetInfo=helper.retrieveTargetInfo(payload,model);if(targetInfo){var originViewRoot=model.getViewRoot();originViewRoot&&(payload.direction=helper.aboveViewRoot(originViewRoot,targetInfo.node)?"rollUp":"drillDown"),model.resetViewRoot(targetInfo.node)}}ecModel.eachComponent({mainType:"series",subType:"treemap",query:payload},handleRootToNode)})},function(module,exports,__webpack_require__){function travelTree(node,designatedVisual,levelItemStyles,seriesItemStyleModel,viewRootAncestors,seriesModel){var nodeModel=node.getModel(),nodeLayout=node.getLayout();if(nodeLayout&&!nodeLayout.invisible&&nodeLayout.isInView){var thisNodeColor,nodeItemStyleModel=node.getModel(ITEM_STYLE_NORMAL),levelItemStyle=levelItemStyles[node.depth],visuals=buildVisuals(nodeItemStyleModel,designatedVisual,levelItemStyle,seriesItemStyleModel),borderColor=nodeItemStyleModel.get("borderColor"),borderColorSaturation=nodeItemStyleModel.get("borderColorSaturation");null!=borderColorSaturation&&(thisNodeColor=calculateColor(visuals,node),borderColor=calculateBorderColor(borderColorSaturation,thisNodeColor)),node.setVisual("borderColor",borderColor);var viewChildren=node.viewChildren;if(viewChildren&&viewChildren.length){var mapping=buildVisualMapping(node,nodeModel,nodeLayout,nodeItemStyleModel,visuals,viewChildren);zrUtil.each(viewChildren,function(child,index){if(child.depth>=viewRootAncestors.length||child===viewRootAncestors[child.depth]){var childVisual=mapVisual(nodeModel,visuals,child,index,mapping,seriesModel);travelTree(child,childVisual,levelItemStyles,seriesItemStyleModel,viewRootAncestors,seriesModel)}})}else thisNodeColor=calculateColor(visuals,node),node.setVisual("color",thisNodeColor)}}function buildVisuals(nodeItemStyleModel,designatedVisual,levelItemStyle,seriesItemStyleModel){var visuals=zrUtil.extend({},designatedVisual);return zrUtil.each(["color","colorAlpha","colorSaturation"],function(visualName){var val=nodeItemStyleModel.get(visualName,!0);null==val&&levelItemStyle&&(val=levelItemStyle[visualName]),null==val&&(val=designatedVisual[visualName]),null==val&&(val=seriesItemStyleModel.get(visualName)),null!=val&&(visuals[visualName]=val)}),visuals}function calculateColor(visuals){var color=getValueVisualDefine(visuals,"color");if(color){var colorAlpha=getValueVisualDefine(visuals,"colorAlpha"),colorSaturation=getValueVisualDefine(visuals,"colorSaturation");return colorSaturation&&(color=zrColor.modifyHSL(color,null,null,colorSaturation)),colorAlpha&&(color=zrColor.modifyAlpha(color,colorAlpha)),color}}function calculateBorderColor(borderColorSaturation,thisNodeColor){return null!=thisNodeColor?zrColor.modifyHSL(thisNodeColor,null,null,borderColorSaturation):null}function getValueVisualDefine(visuals,name){var value=visuals[name];if(null!=value&&"none"!==value)return value}function buildVisualMapping(node,nodeModel,nodeLayout,nodeItemStyleModel,visuals,viewChildren){if(viewChildren&&viewChildren.length){var rangeVisual=getRangeVisual(nodeModel,"color")||null!=visuals.color&&"none"!==visuals.color&&(getRangeVisual(nodeModel,"colorAlpha")||getRangeVisual(nodeModel,"colorSaturation"));if(rangeVisual){var colorMappingBy=nodeModel.get("colorMappingBy"),opt={type:rangeVisual.name,dataExtent:nodeLayout.dataExtent,visual:rangeVisual.range};"color"!==opt.type||"index"!==colorMappingBy&&"id"!==colorMappingBy?opt.mappingMethod="linear":(opt.mappingMethod="category",opt.loop=!0);var mapping=new VisualMapping(opt);return mapping.__drColorMappingBy=colorMappingBy,mapping}}}function getRangeVisual(nodeModel,name){var range=nodeModel.get(name);return isArray(range)&&range.length?{name:name,range:range}:null}function mapVisual(nodeModel,visuals,child,index,mapping,seriesModel){var childVisuals=zrUtil.extend({},visuals);if(mapping){var mappingType=mapping.type,colorMappingBy="color"===mappingType&&mapping.__drColorMappingBy,value="index"===colorMappingBy?index:"id"===colorMappingBy?seriesModel.mapIdToIndex(child.getId()):child.getValue(nodeModel.get("visualDimension"));childVisuals[mappingType]=mapping.mapValueToVisual(value)}return childVisuals}var VisualMapping=__webpack_require__(192),zrColor=__webpack_require__(39),zrUtil=__webpack_require__(4),isArray=zrUtil.isArray,ITEM_STYLE_NORMAL="itemStyle.normal";module.exports=function(ecModel,api,payload){var condition={mainType:"series",subType:"treemap",query:payload};ecModel.eachComponent(condition,function(seriesModel){var tree=seriesModel.getData().tree,root=tree.root,seriesItemStyleModel=seriesModel.getModel(ITEM_STYLE_NORMAL);if(!root.isRemoved()){var levelItemStyles=zrUtil.map(tree.levelModels,function(levelModel){return levelModel?levelModel.get(ITEM_STYLE_NORMAL):null});travelTree(root,{},levelItemStyles,seriesItemStyleModel,seriesModel.getViewRoot().getAncestors(),seriesModel)}})}},function(module,exports,__webpack_require__){function preprocessForPiecewise(thisOption){var pieceList=thisOption.pieceList;thisOption.hasSpecialVisual=!1,zrUtil.each(pieceList,function(piece,index){piece.originIndex=index,null!=piece.visual&&(thisOption.hasSpecialVisual=!0)})}function preprocessForSpecifiedCategory(thisOption){var categories=thisOption.categories,visual=thisOption.visual,categoryMap=thisOption.categoryMap={};if(each(categories,function(cate,index){categoryMap[cate]=index}),!zrUtil.isArray(visual)){var visualArr=[];zrUtil.isObject(visual)?each(visual,function(v,cate){var index=categoryMap[cate];visualArr[null!=index?index:CATEGORY_DEFAULT_VISUAL_INDEX]=v}):visualArr[CATEGORY_DEFAULT_VISUAL_INDEX]=visual,visual=thisOption.visual=visualArr}for(var i=categories.length-1;i>=0;i--)null==visual[i]&&(delete categoryMap[categories[i]],categories.pop())}function normalizeVisualRange(thisOption,isCategory){var visual=thisOption.visual,visualArr=[];zrUtil.isObject(visual)?each(visual,function(v){visualArr.push(v)}):null!=visual&&visualArr.push(visual);var doNotNeedPair={color:1,symbol:1};isCategory||1!==visualArr.length||thisOption.type in doNotNeedPair||(visualArr[1]=visualArr[0]),thisOption.visual=visualArr}function makePartialColorVisualHandler(applyValue){return{applyVisual:function(value,getter,setter){value=this.mapValueToVisual(value),setter("color",applyValue(getter("color"),value))},_doMap:makeDoMap([0,1])}}function doMapToArray(arr,normalized){var visual=this.option.visual;return visual[Math.round(linearMap(normalized,[0,1],[0,visual.length-1],!0))]||{}}function makeApplyVisual(visualType){return function(value,getter,setter){setter(visualType,this.mapValueToVisual(value))}}function doMapCategory(normalized){var visual=this.option.visual;return visual[this.option.loop&&normalized!==CATEGORY_DEFAULT_VISUAL_INDEX?normalized%visual.length:normalized]}function doMapFixed(){return this.option.visual[0]}function makeDoMap(sourceExtent){return{linear:function(normalized){return linearMap(normalized,sourceExtent,this.option.visual,!0)},category:doMapCategory,piecewise:function(normalized,value){var result=getSpecifiedVisual.call(this,value);return null==result&&(result=linearMap(normalized,sourceExtent,this.option.visual,!0)),result},fixed:doMapFixed}}function getSpecifiedVisual(value){var thisOption=this.option,pieceList=thisOption.pieceList;if(thisOption.hasSpecialVisual){var pieceIndex=VisualMapping.findPieceIndex(value,pieceList),piece=pieceList[pieceIndex];if(piece&&piece.visual)return piece.visual[this.type]}}function littleThan(close,a,b){return close?a<=b:a<b}var zrUtil=__webpack_require__(4),zrColor=__webpack_require__(39),linearMap=__webpack_require__(7).linearMap,each=zrUtil.each,isObject=zrUtil.isObject,CATEGORY_DEFAULT_VISUAL_INDEX=-1,VisualMapping=function(option){var mappingMethod=option.mappingMethod,visualType=option.type,thisOption=this.option=zrUtil.clone(option);this.type=visualType,this.mappingMethod=mappingMethod,this._normalizeData=normalizers[mappingMethod];var visualHandler=visualHandlers[visualType];this.applyVisual=visualHandler.applyVisual,this.getColorMapper=visualHandler.getColorMapper,this._doMap=visualHandler._doMap[mappingMethod],"piecewise"===mappingMethod?(normalizeVisualRange(thisOption),preprocessForPiecewise(thisOption)):"category"===mappingMethod?thisOption.categories?preprocessForSpecifiedCategory(thisOption):normalizeVisualRange(thisOption,!0):(zrUtil.assert("linear"!==mappingMethod||thisOption.dataExtent),normalizeVisualRange(thisOption))};VisualMapping.prototype={constructor:VisualMapping,mapValueToVisual:function(value){var normalized=this._normalizeData(value);return this._doMap(normalized,value)},getNormalizer:function(){return zrUtil.bind(this._normalizeData,this)}};var visualHandlers=VisualMapping.visualHandlers={color:{applyVisual:makeApplyVisual("color"),getColorMapper:function(){var thisOption=this.option,parsedVisual=zrUtil.map(thisOption.visual,zrColor.parse);return zrUtil.bind("category"===thisOption.mappingMethod?function(value,isNormalized){return!isNormalized&&(value=this._normalizeData(value)),doMapCategory(this,value)}:function(value,isNormalized,out){var returnRGBArray=!!out;return!isNormalized&&(value=this._normalizeData(value)),out=zrColor.fastMapToColor(value,parsedVisual,out),returnRGBArray?out:zrUtil.stringify(out,"rgba")},this)},_doMap:{linear:function(normalized){return zrColor.mapToColor(normalized,this.option.visual)},category:doMapCategory,piecewise:function(normalized,value){var result=getSpecifiedVisual.call(this,value);return null==result&&(result=zrColor.mapToColor(normalized,this.option.visual)),result},fixed:doMapFixed}},colorHue:makePartialColorVisualHandler(function(color,value){return zrColor.modifyHSL(color,value)}),colorSaturation:makePartialColorVisualHandler(function(color,value){return zrColor.modifyHSL(color,null,value)}),colorLightness:makePartialColorVisualHandler(function(color,value){return zrColor.modifyHSL(color,null,null,value)}),colorAlpha:makePartialColorVisualHandler(function(color,value){return zrColor.modifyAlpha(color,value)}),opacity:{applyVisual:makeApplyVisual("opacity"),_doMap:makeDoMap([0,1])},symbol:{applyVisual:function(value,getter,setter){var symbolCfg=this.mapValueToVisual(value);if(zrUtil.isString(symbolCfg))setter("symbol",symbolCfg);else if(isObject(symbolCfg))for(var name in symbolCfg)symbolCfg.hasOwnProperty(name)&&setter(name,symbolCfg[name])},_doMap:{linear:doMapToArray,category:doMapCategory,piecewise:function(normalized,value){var result=getSpecifiedVisual.call(this,value);return null==result&&(result=doMapToArray.call(this,normalized)),result},fixed:doMapFixed}},symbolSize:{applyVisual:makeApplyVisual("symbolSize"),_doMap:makeDoMap([0,1])}},normalizers={linear:function(value){return linearMap(value,this.option.dataExtent,[0,1],!0)},piecewise:function(value){var pieceList=this.option.pieceList,pieceIndex=VisualMapping.findPieceIndex(value,pieceList,!0);if(null!=pieceIndex)return linearMap(pieceIndex,[0,pieceList.length-1],[0,1],!0)},category:function(value){var index=this.option.categories?this.option.categoryMap[value]:value;return null==index?CATEGORY_DEFAULT_VISUAL_INDEX:index},fixed:zrUtil.noop};VisualMapping.addVisualHandler=function(name,handler){visualHandlers[name]=handler},VisualMapping.isValidType=function(visualType){return visualHandlers.hasOwnProperty(visualType)},VisualMapping.eachVisual=function(visual,callback,context){zrUtil.isObject(visual)?zrUtil.each(visual,callback,context):callback.call(context,visual)},VisualMapping.mapVisual=function(visual,callback,context){var isPrimary,newVisual=zrUtil.isArray(visual)?[]:zrUtil.isObject(visual)?{}:(isPrimary=!0,null);return VisualMapping.eachVisual(visual,function(v,key){var newVal=callback.call(context,v,key);isPrimary?newVisual=newVal:newVisual[key]=newVal}),newVisual},VisualMapping.retrieveVisuals=function(obj){var hasVisual,ret={};return obj&&each(visualHandlers,function(h,visualType){obj.hasOwnProperty(visualType)&&(ret[visualType]=obj[visualType],hasVisual=!0)}),hasVisual?ret:null},VisualMapping.prepareVisualTypes=function(visualTypes){if(isObject(visualTypes)){var types=[];each(visualTypes,function(item,type){types.push(type)}),visualTypes=types}else{if(!zrUtil.isArray(visualTypes))return[];visualTypes=visualTypes.slice()}return visualTypes.sort(function(type1,type2){return"color"===type2&&"color"!==type1&&0===type1.indexOf("color")?1:-1}),visualTypes},VisualMapping.dependsOn=function(visualType1,visualType2){return"color"===visualType2?!(!visualType1||0!==visualType1.indexOf(visualType2)):visualType1===visualType2},VisualMapping.findPieceIndex=function(value,pieceList,findClosestWhenOutside){function updatePossible(val,index){var newAbs=Math.abs(val-value);newAbs<abs&&(abs=newAbs,possibleI=index)}for(var possibleI,abs=1/0,i=0,len=pieceList.length;i<len;i++){var pieceValue=pieceList[i].value;if(null!=pieceValue){if(pieceValue===value)return i;findClosestWhenOutside&&updatePossible(pieceValue,i)}}for(var i=0,len=pieceList.length;i<len;i++){var piece=pieceList[i],interval=piece.interval,close=piece.close;if(interval){if(interval[0]===-(1/0)){if(littleThan(close[1],value,interval[1]))return i}else if(interval[1]===1/0){if(littleThan(close[0],interval[0],value))return i}else if(littleThan(close[0],interval[0],value)&&littleThan(close[1],value,interval[1]))return i;findClosestWhenOutside&&updatePossible(interval[0],i),findClosestWhenOutside&&updatePossible(interval[1],i)}}if(findClosestWhenOutside)return value===1/0?pieceList.length-1:value===-(1/0)?0:possibleI},module.exports=VisualMapping},function(module,exports,__webpack_require__){function update(ecModel,api,payload){var condition={mainType:"series",subType:"treemap",query:payload};ecModel.eachComponent(condition,function(seriesModel){var ecWidth=api.getWidth(),ecHeight=api.getHeight(),seriesOption=seriesModel.option,size=seriesOption.size||[],containerWidth=parsePercent(retrieveValue(seriesOption.width,size[0]),ecWidth),containerHeight=parsePercent(retrieveValue(seriesOption.height,size[1]),ecHeight),layoutInfo=layout.getLayoutRect(seriesModel.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()}),payloadType=payload&&payload.type,targetInfo=helper.retrieveTargetInfo(payload,seriesModel),rootRect="treemapRender"===payloadType||"treemapMove"===payloadType?payload.rootRect:null,viewRoot=seriesModel.getViewRoot(),viewAbovePath=helper.getPathToRoot(viewRoot);if("treemapMove"!==payloadType){var rootSize="treemapZoomToNode"===payloadType?estimateRootSize(seriesModel,targetInfo,viewRoot,containerWidth,containerHeight):rootRect?[rootRect.width,rootRect.height]:[containerWidth,containerHeight],sort=seriesOption.sort;sort&&"asc"!==sort&&"desc"!==sort&&(sort="desc");var options={squareRatio:seriesOption.squareRatio,sort:sort,leafDepth:seriesOption.leafDepth};viewRoot.hostTree.clearLayouts();var viewRootLayout={x:0,y:0,width:rootSize[0],height:rootSize[1],area:rootSize[0]*rootSize[1]};viewRoot.setLayout(viewRootLayout),squarify(viewRoot,options,!1,0);var viewRootLayout=viewRoot.getLayout();each(viewAbovePath,function(node,index){var childValue=(viewAbovePath[index+1]||viewRoot).getValue();node.setLayout(zrUtil.extend({dataExtent:[childValue,childValue],borderWidth:0},viewRootLayout))})}var treeRoot=seriesModel.getData().tree.root;treeRoot.setLayout(calculateRootPosition(layoutInfo,rootRect,targetInfo),!0),seriesModel.setLayoutInfo(layoutInfo),prunning(treeRoot,new BoundingRect(-layoutInfo.x,-layoutInfo.y,ecWidth,ecHeight),viewAbovePath,viewRoot,0)})}function squarify(node,options,hideChildren,depth){var width,height;if(!node.isRemoved()){var thisLayout=node.getLayout();width=thisLayout.width,height=thisLayout.height;var itemStyleModel=node.getModel("itemStyle.normal"),borderWidth=itemStyleModel.get("borderWidth"),halfGapWidth=itemStyleModel.get("gapWidth")/2,layoutOffset=borderWidth-halfGapWidth,nodeModel=node.getModel();node.setLayout({borderWidth:borderWidth},!0),width=mathMax(width-2*layoutOffset,0),height=mathMax(height-2*layoutOffset,0);var totalArea=width*height,viewChildren=initChildren(node,nodeModel,totalArea,options,hideChildren,depth);if(viewChildren.length){var rect={x:layoutOffset,y:layoutOffset,width:width,height:height},rowFixedLength=mathMin(width,height),best=1/0,row=[];row.area=0;for(var i=0,len=viewChildren.length;i<len;){var child=viewChildren[i];row.push(child),row.area+=child.getLayout().area;var score=worst(row,rowFixedLength,options.squareRatio);score<=best?(i++,best=score):(row.area-=row.pop().getLayout().area,position(row,rowFixedLength,rect,halfGapWidth,!1),rowFixedLength=mathMin(rect.width,rect.height),row.length=row.area=0,best=1/0)}if(row.length&&position(row,rowFixedLength,rect,halfGapWidth,!0),!hideChildren){var childrenVisibleMin=nodeModel.get("childrenVisibleMin");null!=childrenVisibleMin&&totalArea<childrenVisibleMin&&(hideChildren=!0)}for(var i=0,len=viewChildren.length;i<len;i++)squarify(viewChildren[i],options,hideChildren,depth+1)}}}function initChildren(node,nodeModel,totalArea,options,hideChildren,depth){var viewChildren=node.children||[],orderBy=options.sort;"asc"!==orderBy&&"desc"!==orderBy&&(orderBy=null);var overLeafDepth=null!=options.leafDepth&&options.leafDepth<=depth;if(hideChildren&&!overLeafDepth)return node.viewChildren=[];viewChildren=zrUtil.filter(viewChildren,function(child){return!child.isRemoved()}),sort(viewChildren,orderBy);var info=statistic(nodeModel,viewChildren,orderBy);if(0===info.sum)return node.viewChildren=[];if(info.sum=filterByThreshold(nodeModel,totalArea,info.sum,orderBy,viewChildren),0===info.sum)return node.viewChildren=[];for(var i=0,len=viewChildren.length;i<len;i++){var area=viewChildren[i].getValue()/info.sum*totalArea;viewChildren[i].setLayout({area:area})}return overLeafDepth&&(viewChildren.length&&node.setLayout({isLeafRoot:!0},!0),viewChildren.length=0),node.viewChildren=viewChildren,node.setLayout({dataExtent:info.dataExtent},!0),viewChildren}function filterByThreshold(nodeModel,totalArea,sum,orderBy,orderedChildren){if(!orderBy)return sum;for(var visibleMin=nodeModel.get("visibleMin"),len=orderedChildren.length,deletePoint=len,i=len-1;i>=0;i--){var value=orderedChildren["asc"===orderBy?len-i-1:i].getValue();value/sum*totalArea<visibleMin&&(deletePoint=i,sum-=value)}return"asc"===orderBy?orderedChildren.splice(0,len-deletePoint):orderedChildren.splice(deletePoint,len-deletePoint),sum}function sort(viewChildren,orderBy){return orderBy&&viewChildren.sort(function(a,b){return"asc"===orderBy?a.getValue()-b.getValue():b.getValue()-a.getValue()}),viewChildren}function statistic(nodeModel,children,orderBy){for(var sum=0,i=0,len=children.length;i<len;i++)sum+=children[i].getValue();var dataExtent,dimension=nodeModel.get("visualDimension");if(children&&children.length)if("value"===dimension&&orderBy)dataExtent=[children[children.length-1].getValue(),children[0].getValue()],"asc"===orderBy&&dataExtent.reverse();else{var dataExtent=[1/0,-(1/0)];each(children,function(child){var value=child.getValue(dimension);value<dataExtent[0]&&(dataExtent[0]=value),value>dataExtent[1]&&(dataExtent[1]=value)})}else dataExtent=[NaN,NaN];return{sum:sum,dataExtent:dataExtent}}function worst(row,rowFixedLength,ratio){for(var area,areaMax=0,areaMin=1/0,i=0,len=row.length;i<len;i++)area=row[i].getLayout().area,area&&(area<areaMin&&(areaMin=area),area>areaMax&&(areaMax=area));var squareArea=row.area*row.area,f=rowFixedLength*rowFixedLength*ratio;return squareArea?mathMax(f*areaMax/squareArea,squareArea/(f*areaMin)):1/0}function position(row,rowFixedLength,rect,halfGapWidth,flush){var idx0WhenH=rowFixedLength===rect.width?0:1,idx1WhenH=1-idx0WhenH,xy=["x","y"],wh=["width","height"],last=rect[xy[idx0WhenH]],rowOtherLength=rowFixedLength?row.area/rowFixedLength:0;(flush||rowOtherLength>rect[wh[idx1WhenH]])&&(rowOtherLength=rect[wh[idx1WhenH]]);for(var i=0,rowLen=row.length;i<rowLen;i++){var node=row[i],nodeLayout={},step=rowOtherLength?node.getLayout().area/rowOtherLength:0,wh1=nodeLayout[wh[idx1WhenH]]=mathMax(rowOtherLength-2*halfGapWidth,0),remain=rect[xy[idx0WhenH]]+rect[wh[idx0WhenH]]-last,modWH=i===rowLen-1||remain<step?remain:step,wh0=nodeLayout[wh[idx0WhenH]]=mathMax(modWH-2*halfGapWidth,0);nodeLayout[xy[idx1WhenH]]=rect[xy[idx1WhenH]]+mathMin(halfGapWidth,wh1/2),nodeLayout[xy[idx0WhenH]]=last+mathMin(halfGapWidth,wh0/2),last+=modWH,node.setLayout(nodeLayout,!0)}rect[xy[idx1WhenH]]+=rowOtherLength,rect[wh[idx1WhenH]]-=rowOtherLength}function estimateRootSize(seriesModel,targetInfo,viewRoot,containerWidth,containerHeight){var currNode=(targetInfo||{}).node,defaultSize=[containerWidth,containerHeight];if(!currNode||currNode===viewRoot)return defaultSize;for(var parent,viewArea=containerWidth*containerHeight,area=viewArea*seriesModel.option.zoomToNodeRatio;parent=currNode.parentNode;){for(var sum=0,siblings=parent.children,i=0,len=siblings.length;i<len;i++)sum+=siblings[i].getValue();var currNodeValue=currNode.getValue();if(0===currNodeValue)return defaultSize;area*=sum/currNodeValue;var borderWidth=parent.getModel("itemStyle.normal").get("borderWidth");isFinite(borderWidth)&&(area+=4*borderWidth*borderWidth+4*borderWidth*Math.pow(area,.5)),area>numberUtil.MAX_SAFE_INTEGER&&(area=numberUtil.MAX_SAFE_INTEGER),currNode=parent}area<viewArea&&(area=viewArea);var scale=Math.pow(area/viewArea,.5);return[containerWidth*scale,containerHeight*scale]}function calculateRootPosition(layoutInfo,rootRect,targetInfo){if(rootRect)return{x:rootRect.x,y:rootRect.y};var defaultPosition={x:0,y:0};if(!targetInfo)return defaultPosition;var targetNode=targetInfo.node,layout=targetNode.getLayout();if(!layout)return defaultPosition;for(var targetCenter=[layout.width/2,layout.height/2],node=targetNode;node;){var nodeLayout=node.getLayout();targetCenter[0]+=nodeLayout.x,targetCenter[1]+=nodeLayout.y,node=node.parentNode}return{x:layoutInfo.width/2-targetCenter[0],y:layoutInfo.height/2-targetCenter[1]}}function prunning(node,clipRect,viewAbovePath,viewRoot,depth){var nodeLayout=node.getLayout(),nodeInViewAbovePath=viewAbovePath[depth],isAboveViewRoot=nodeInViewAbovePath&&nodeInViewAbovePath===node;if(!(nodeInViewAbovePath&&!isAboveViewRoot||depth===viewAbovePath.length&&node!==viewRoot)){node.setLayout({isInView:!0,invisible:!isAboveViewRoot&&!clipRect.intersect(nodeLayout),isAboveViewRoot:isAboveViewRoot},!0);var childClipRect=new BoundingRect(clipRect.x-nodeLayout.x,clipRect.y-nodeLayout.y,clipRect.width,clipRect.height);each(node.viewChildren||[],function(child){prunning(child,childClipRect,viewAbovePath,viewRoot,depth+1)})}}var zrUtil=__webpack_require__(4),numberUtil=__webpack_require__(7),layout=__webpack_require__(21),helper=__webpack_require__(187),BoundingRect=__webpack_require__(9),helper=__webpack_require__(187),mathMax=Math.max,mathMin=Math.min,parsePercent=numberUtil.parsePercent,retrieveValue=zrUtil.retrieve,each=zrUtil.each;module.exports=update},function(module,exports,__webpack_require__){var echarts=__webpack_require__(1),zrUtil=__webpack_require__(4);__webpack_require__(195),__webpack_require__(198),__webpack_require__(203),echarts.registerProcessor(__webpack_require__(204)),echarts.registerVisual(zrUtil.curry(__webpack_require__(109),"graph","circle",null)),echarts.registerVisual(__webpack_require__(205)),echarts.registerVisual(__webpack_require__(206)),echarts.registerLayout(__webpack_require__(207)),echarts.registerLayout(__webpack_require__(210)),echarts.registerLayout(__webpack_require__(212)),echarts.registerCoordinateSystem("graphView",{create:__webpack_require__(214)})},function(module,exports,__webpack_require__){"use strict";var List=__webpack_require__(97),zrUtil=__webpack_require__(4),modelUtil=__webpack_require__(5),Model=__webpack_require__(12),createGraphFromNodeEdge=__webpack_require__(196),GraphSeries=__webpack_require__(1).extendSeriesModel({type:"series.graph",init:function(option){GraphSeries.superApply(this,"init",arguments),this.legendDataProvider=function(){return this._categoriesData},this.fillDataTextStyle(option.edges||option.links),this._updateCategoriesData()},mergeOption:function(option){GraphSeries.superApply(this,"mergeOption",arguments),this.fillDataTextStyle(option.edges||option.links),this._updateCategoriesData()},mergeDefaultAndTheme:function(option){GraphSeries.superApply(this,"mergeDefaultAndTheme",arguments),modelUtil.defaultEmphasis(option.edgeLabel,modelUtil.LABEL_OPTIONS)},getInitialData:function(option,ecModel){function beforeLink(nodeData,edgeData){nodeData.wrapMethod("getItemModel",function(model){var categoriesModels=self._categoriesModels,categoryIdx=model.getShallow("category"),categoryModel=categoriesModels[categoryIdx];return categoryModel&&(categoryModel.parentModel=model.parentModel,model.parentModel=categoryModel),model});var edgeLabelModel=self.getModel("edgeLabel"),wrappedGetEdgeModel=function(path,parentModel){var pathArr=(path||"").split(".");"label"===pathArr[0]&&(parentModel=parentModel||edgeLabelModel.getModel(pathArr.slice(1)));var model=Model.prototype.getModel.call(this,pathArr,parentModel);return model.getModel=wrappedGetEdgeModel,model};edgeData.wrapMethod("getItemModel",function(model){return model.getModel=wrappedGetEdgeModel,model})}var edges=option.edges||option.links||[],nodes=option.data||option.nodes||[],self=this;if(nodes&&edges)return createGraphFromNodeEdge(nodes,edges,this,!0,beforeLink).data},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(dataIndex,multipleSeries,dataType){if("edge"===dataType){var nodeData=this.getData(),params=this.getDataParams(dataIndex,dataType),edge=nodeData.graph.getEdgeByIndex(dataIndex),sourceName=nodeData.getName(edge.node1.dataIndex),targetName=nodeData.getName(edge.node2.dataIndex),html=sourceName+" > "+targetName;return params.value&&(html+=" : "+params.value),html}return GraphSeries.superApply(this,"formatTooltip",arguments)},_updateCategoriesData:function(){var categories=zrUtil.map(this.option.categories||[],function(category){return null!=category.value?category:zrUtil.extend({value:0},category)}),categoriesData=new List(["value"],this);categoriesData.initData(categories),this._categoriesData=categoriesData,this._categoriesModels=categoriesData.mapArray(function(idx){return categoriesData.getItemModel(idx,!0)})},setZoom:function(zoom){this.option.zoom=zoom},setCenter:function(center){this.option.center=center},ifEnableAnimation:function(){return GraphSeries.superCall(this,"ifEnableAnimation")&&!("force"===this.get("layout")&&this.get("force.layoutAnimation"));
},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",legendHoverLink:!0,hoverAnimation:!0,layout:null,focusNodeAdjacency:!1,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{normal:{position:"middle"},emphasis:{}},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{normal:{show:!1,formatter:"{b}"},emphasis:{show:!0}},itemStyle:{normal:{},emphasis:{}},lineStyle:{normal:{color:"#aaa",width:1,curveness:0,opacity:.5},emphasis:{}}}});module.exports=GraphSeries},function(module,exports,__webpack_require__){var List=__webpack_require__(97),Graph=__webpack_require__(197),linkList=__webpack_require__(185),completeDimensions=__webpack_require__(102),CoordinateSystem=__webpack_require__(26),zrUtil=__webpack_require__(4),createListFromArray=__webpack_require__(101);module.exports=function(nodes,edges,hostModel,directed,beforeLink){for(var graph=new Graph(directed),i=0;i<nodes.length;i++)graph.addNode(zrUtil.retrieve(nodes[i].id,nodes[i].name,i),i);for(var linkNameList=[],validEdges=[],linkCount=0,i=0;i<edges.length;i++){var link=edges[i],source=link.source,target=link.target;graph.addEdge(source,target,linkCount)&&(validEdges.push(link),linkNameList.push(zrUtil.retrieve(link.id,source+" > "+target)),linkCount++)}var nodeData,coordSys=hostModel.get("coordinateSystem");if("cartesian2d"===coordSys||"polar"===coordSys)nodeData=createListFromArray(nodes,hostModel,hostModel.ecModel);else{var coordSysCtor=CoordinateSystem.get(coordSys),dimensionNames=completeDimensions((coordSysCtor&&"view"!==coordSysCtor.type?coordSysCtor.dimensions||[]:[]).concat(["value"]),nodes);nodeData=new List(dimensionNames,hostModel),nodeData.initData(nodes)}var edgeData=new List(["value"],hostModel);return edgeData.initData(validEdges,linkNameList),beforeLink&&beforeLink(nodeData,edgeData),linkList({mainData:nodeData,struct:graph,structAttr:"graph",datas:{node:nodeData,edge:edgeData},datasAttr:{node:"data",edge:"edgeData"}}),graph.update(),graph}},function(module,exports,__webpack_require__){"use strict";function Node(id,dataIndex){this.id=null==id?"":id,this.inEdges=[],this.outEdges=[],this.edges=[],this.hostGraph,this.dataIndex=null==dataIndex?-1:dataIndex}function Edge(n1,n2,dataIndex){this.node1=n1,this.node2=n2,this.dataIndex=null==dataIndex?-1:dataIndex}var zrUtil=__webpack_require__(4),Graph=function(directed){this._directed=directed||!1,this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this.data,this.edgeData},graphProto=Graph.prototype;graphProto.type="graph",graphProto.isDirected=function(){return this._directed},graphProto.addNode=function(id,dataIndex){id=id||""+dataIndex;var nodesMap=this._nodesMap;if(!nodesMap[id]){var node=new Node(id,dataIndex);return node.hostGraph=this,this.nodes.push(node),nodesMap[id]=node,node}},graphProto.getNodeByIndex=function(dataIndex){var rawIdx=this.data.getRawIndex(dataIndex);return this.nodes[rawIdx]},graphProto.getNodeById=function(id){return this._nodesMap[id]},graphProto.addEdge=function(n1,n2,dataIndex){var nodesMap=this._nodesMap,edgesMap=this._edgesMap;if("number"==typeof n1&&(n1=this.nodes[n1]),"number"==typeof n2&&(n2=this.nodes[n2]),n1 instanceof Node||(n1=nodesMap[n1]),n2 instanceof Node||(n2=nodesMap[n2]),n1&&n2){var key=n1.id+"-"+n2.id;if(!edgesMap[key]){var edge=new Edge(n1,n2,dataIndex);return edge.hostGraph=this,this._directed&&(n1.outEdges.push(edge),n2.inEdges.push(edge)),n1.edges.push(edge),n1!==n2&&n2.edges.push(edge),this.edges.push(edge),edgesMap[key]=edge,edge}}},graphProto.getEdgeByIndex=function(dataIndex){var rawIdx=this.edgeData.getRawIndex(dataIndex);return this.edges[rawIdx]},graphProto.getEdge=function(n1,n2){n1 instanceof Node&&(n1=n1.id),n2 instanceof Node&&(n2=n2.id);var edgesMap=this._edgesMap;return this._directed?edgesMap[n1+"-"+n2]:edgesMap[n1+"-"+n2]||edgesMap[n2+"-"+n1]},graphProto.eachNode=function(cb,context){for(var nodes=this.nodes,len=nodes.length,i=0;i<len;i++)nodes[i].dataIndex>=0&&cb.call(context,nodes[i],i)},graphProto.eachEdge=function(cb,context){for(var edges=this.edges,len=edges.length,i=0;i<len;i++)edges[i].dataIndex>=0&&edges[i].node1.dataIndex>=0&&edges[i].node2.dataIndex>=0&&cb.call(context,edges[i],i)},graphProto.breadthFirstTraverse=function(cb,startNode,direction,context){if(startNode instanceof Node||(startNode=this._nodesMap[startNode]),startNode){for(var edgeType="out"===direction?"outEdges":"in"===direction?"inEdges":"edges",i=0;i<this.nodes.length;i++)this.nodes[i].__visited=!1;if(!cb.call(context,startNode,null))for(var queue=[startNode];queue.length;)for(var currentNode=queue.shift(),edges=currentNode[edgeType],i=0;i<edges.length;i++){var e=edges[i],otherNode=e.node1===currentNode?e.node2:e.node1;if(!otherNode.__visited){if(cb.call(otherNode,otherNode,currentNode))return;queue.push(otherNode),otherNode.__visited=!0}}}},graphProto.update=function(){for(var data=this.data,edgeData=this.edgeData,nodes=this.nodes,edges=this.edges,i=0,len=nodes.length;i<len;i++)nodes[i].dataIndex=-1;for(var i=0,len=data.count();i<len;i++)nodes[data.getRawIndex(i)].dataIndex=i;edgeData.filterSelf(function(idx){var edge=edges[edgeData.getRawIndex(idx)];return edge.node1.dataIndex>=0&&edge.node2.dataIndex>=0});for(var i=0,len=edges.length;i<len;i++)edges[i].dataIndex=-1;for(var i=0,len=edgeData.count();i<len;i++)edges[edgeData.getRawIndex(i)].dataIndex=i},graphProto.clone=function(){for(var graph=new Graph(this._directed),nodes=this.nodes,edges=this.edges,i=0;i<nodes.length;i++)graph.addNode(nodes[i].id,nodes[i].dataIndex);for(var i=0;i<edges.length;i++){var e=edges[i];graph.addEdge(e.node1.id,e.node2.id,e.dataIndex)}return graph},Node.prototype={constructor:Node,degree:function(){return this.edges.length},inDegree:function(){return this.inEdges.length},outDegree:function(){return this.outEdges.length},getModel:function(path){if(!(this.dataIndex<0)){var graph=this.hostGraph,itemModel=graph.data.getItemModel(this.dataIndex);return itemModel.getModel(path)}}},Edge.prototype.getModel=function(path){if(!(this.dataIndex<0)){var graph=this.hostGraph,itemModel=graph.edgeData.getItemModel(this.dataIndex);return itemModel.getModel(path)}};var createGraphDataProxyMixin=function(hostName,dataName){return{getValue:function(dimension){var data=this[hostName][dataName];return data.get(data.getDimension(dimension||"value"),this.dataIndex)},setVisual:function(key,value){this.dataIndex>=0&&this[hostName][dataName].setItemVisual(this.dataIndex,key,value)},getVisual:function(key,ignoreParent){return this[hostName][dataName].getItemVisual(this.dataIndex,key,ignoreParent)},setLayout:function(layout,merge){this.dataIndex>=0&&this[hostName][dataName].setItemLayout(this.dataIndex,layout,merge)},getLayout:function(){return this[hostName][dataName].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[hostName][dataName].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[hostName][dataName].getRawIndex(this.dataIndex)}}};zrUtil.mixin(Node,createGraphDataProxyMixin("hostGraph","data")),zrUtil.mixin(Edge,createGraphDataProxyMixin("hostGraph","edgeData")),Graph.Node=Node,Graph.Edge=Edge,module.exports=Graph},function(module,exports,__webpack_require__){function getItemOpacity(item,opacityPath){return item.getVisual("opacity")||item.getModel().get(opacityPath)}var SymbolDraw=__webpack_require__(104),LineDraw=__webpack_require__(199),RoamController=__webpack_require__(174),graphic=__webpack_require__(43),adjustEdge=__webpack_require__(202),zrUtil=__webpack_require__(4),nodeOpacityPath=["itemStyle","normal","opacity"],lineOpacityPath=["lineStyle","normal","opacity"];__webpack_require__(1).extendChartView({type:"graph",init:function(ecModel,api){var symbolDraw=new SymbolDraw,lineDraw=new LineDraw,group=this.group,controller=new RoamController(api.getZr(),group);group.add(symbolDraw.group),group.add(lineDraw.group),this._symbolDraw=symbolDraw,this._lineDraw=lineDraw,this._controller=controller,this._firstRender=!0},render:function(seriesModel,ecModel,api){var coordSys=seriesModel.coordinateSystem;this._model=seriesModel,this._nodeScaleRatio=seriesModel.get("nodeScaleRatio");var symbolDraw=this._symbolDraw,lineDraw=this._lineDraw,group=this.group;if("view"===coordSys.type){var groupNewProp={position:coordSys.position,scale:coordSys.scale};this._firstRender?group.attr(groupNewProp):graphic.updateProps(group,groupNewProp,seriesModel)}adjustEdge(seriesModel.getGraph(),this._getNodeGlobalScale(seriesModel));var data=seriesModel.getData();symbolDraw.updateData(data);var edgeData=seriesModel.getEdgeData();lineDraw.updateData(edgeData),this._updateNodeAndLinkScale(),this._updateController(seriesModel,api),clearTimeout(this._layoutTimeout);var forceLayout=seriesModel.forceLayout,layoutAnimation=seriesModel.get("force.layoutAnimation");forceLayout&&this._startForceLayoutIteration(forceLayout,layoutAnimation),data.eachItemGraphicEl(function(el,idx){var itemModel=data.getItemModel(idx);el.off("drag").off("dragend");var draggable=data.getItemModel(idx).get("draggable");draggable&&el.on("drag",function(){forceLayout&&(forceLayout.warmUp(),!this._layouting&&this._startForceLayoutIteration(forceLayout,layoutAnimation),forceLayout.setFixed(idx),data.setItemLayout(idx,el.position))},this).on("dragend",function(){forceLayout&&forceLayout.setUnfixed(idx)},this),el.setDraggable(draggable&&forceLayout),el.off("mouseover",this._focusNodeAdjacency),el.off("mouseout",this._unfocusAll),itemModel.get("focusNodeAdjacency")&&(el.on("mouseover",this._focusNodeAdjacency,this),el.on("mouseout",this._unfocusAll,this))},this);var circularRotateLabel="circular"===seriesModel.get("layout")&&seriesModel.get("circular.rotateLabel"),cx=data.getLayout("cx"),cy=data.getLayout("cy");data.eachItemGraphicEl(function(el,idx){var symbolPath=el.getSymbolPath();if(circularRotateLabel){var pos=data.getItemLayout(idx),rad=Math.atan2(pos[1]-cy,pos[0]-cx);rad<0&&(rad=2*Math.PI+rad);var isLeft=pos[0]<cx;isLeft&&(rad-=Math.PI);var textPosition=isLeft?"left":"right";symbolPath.setStyle({textRotation:rad,textPosition:textPosition}),symbolPath.hoverStyle&&(symbolPath.hoverStyle.textPosition=textPosition)}else symbolPath.setStyle({textRotation:0})}),this._firstRender=!1},_focusNodeAdjacency:function(e){function fadeOutItem(item,opacityPath){var opacity=getItemOpacity(item,opacityPath),el=item.getGraphicEl();null==opacity&&(opacity=1),el.traverse(function(child){child.trigger("normal"),"group"!==child.type&&child.setStyle("opacity",.1*opacity)})}function fadeInItem(item,opacityPath){var opacity=getItemOpacity(item,opacityPath),el=item.getGraphicEl();el.traverse(function(child){child.trigger("emphasis"),"group"!==child.type&&child.setStyle("opacity",opacity)})}var data=this._model.getData(),graph=data.graph,el=e.target,dataIndex=el.dataIndex,dataType=el.dataType;if(null!==dataIndex&&"edge"!==dataType){graph.eachNode(function(node){fadeOutItem(node,nodeOpacityPath)}),graph.eachEdge(function(edge){fadeOutItem(edge,lineOpacityPath)});var node=graph.getNodeByIndex(dataIndex);fadeInItem(node,nodeOpacityPath),zrUtil.each(node.edges,function(edge){edge.dataIndex<0||(fadeInItem(edge,lineOpacityPath),fadeInItem(edge.node1,nodeOpacityPath),fadeInItem(edge.node2,nodeOpacityPath))})}},_unfocusAll:function(){var data=this._model.getData(),graph=data.graph;graph.eachNode(function(node){var opacity=getItemOpacity(node,nodeOpacityPath);node.getGraphicEl().traverse(function(child){child.trigger("normal"),"group"!==child.type&&child.setStyle("opacity",opacity)})}),graph.eachEdge(function(edge){var opacity=getItemOpacity(edge,lineOpacityPath);edge.getGraphicEl().traverse(function(child){child.trigger("normal"),"group"!==child.type&&child.setStyle("opacity",opacity)})})},_startForceLayoutIteration:function(forceLayout,layoutAnimation){var self=this;!function step(){forceLayout.step(function(stopped){self.updateLayout(self._model),(self._layouting=!stopped)&&(layoutAnimation?self._layoutTimeout=setTimeout(step,16):step())})}()},_updateController:function(seriesModel,api){var controller=this._controller,group=this.group;return controller.rectProvider=function(){var rect=group.getBoundingRect();return rect.applyTransform(group.transform),rect},"view"!==seriesModel.coordinateSystem.type?void controller.disable():(controller.enable(seriesModel.get("roam")),controller.zoomLimit=seriesModel.get("scaleLimit"),controller.zoom=seriesModel.coordinateSystem.getZoom(),void controller.off("pan").off("zoom").on("pan",function(dx,dy){api.dispatchAction({seriesId:seriesModel.id,type:"graphRoam",dx:dx,dy:dy})}).on("zoom",function(zoom,mouseX,mouseY){api.dispatchAction({seriesId:seriesModel.id,type:"graphRoam",zoom:zoom,originX:mouseX,originY:mouseY}),this._updateNodeAndLinkScale(),adjustEdge(seriesModel.getGraph(),this._getNodeGlobalScale(seriesModel)),this._lineDraw.updateLayout()},this))},_updateNodeAndLinkScale:function(){var seriesModel=this._model,data=seriesModel.getData(),nodeScale=this._getNodeGlobalScale(seriesModel),invScale=[nodeScale,nodeScale];data.eachItemGraphicEl(function(el,idx){el.attr("scale",invScale)})},_getNodeGlobalScale:function(seriesModel){var coordSys=seriesModel.coordinateSystem;if("view"!==coordSys.type)return 1;var nodeScaleRatio=this._nodeScaleRatio,groupScale=coordSys.scale,groupZoom=groupScale&&groupScale[0]||1,roamZoom=coordSys.getZoom(),nodeScale=(roamZoom-1)*nodeScaleRatio+1;return nodeScale/groupZoom},updateLayout:function(seriesModel){adjustEdge(seriesModel.getGraph(),this._getNodeGlobalScale(seriesModel)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},remove:function(ecModel,api){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()}})},function(module,exports,__webpack_require__){function isPointNaN(pt){return isNaN(pt[0])||isNaN(pt[1])}function lineNeedsDraw(pts){return!isPointNaN(pts[0])&&!isPointNaN(pts[1])}function LineDraw(ctor){this._ctor=ctor||LineGroup,this.group=new graphic.Group}var graphic=__webpack_require__(43),LineGroup=__webpack_require__(200),lineDrawProto=LineDraw.prototype;lineDrawProto.updateData=function(lineData){var oldLineData=this._lineData,group=this.group,LineCtor=this._ctor,hostModel=lineData.hostModel,seriesScope={lineStyle:hostModel.getModel("lineStyle.normal").getLineStyle(),hoverLineStyle:hostModel.getModel("lineStyle.emphasis").getLineStyle(),labelModel:hostModel.getModel("label.normal"),hoverLabelModel:hostModel.getModel("label.emphasis")};lineData.diff(oldLineData).add(function(idx){if(lineNeedsDraw(lineData.getItemLayout(idx))){var lineGroup=new LineCtor(lineData,idx,seriesScope);lineData.setItemGraphicEl(idx,lineGroup),group.add(lineGroup)}}).update(function(newIdx,oldIdx){var lineGroup=oldLineData.getItemGraphicEl(oldIdx);return lineNeedsDraw(lineData.getItemLayout(newIdx))?(lineGroup?lineGroup.updateData(lineData,newIdx,seriesScope):lineGroup=new LineCtor(lineData,newIdx,seriesScope),lineData.setItemGraphicEl(newIdx,lineGroup),void group.add(lineGroup)):void group.remove(lineGroup)}).remove(function(idx){group.remove(oldLineData.getItemGraphicEl(idx))}).execute(),this._lineData=lineData},lineDrawProto.updateLayout=function(){var lineData=this._lineData;lineData.eachItemGraphicEl(function(el,idx){el.updateLayout(lineData,idx)},this)},lineDrawProto.remove=function(){this.group.removeAll()},module.exports=LineDraw},function(module,exports,__webpack_require__){function makeSymbolTypeKey(symbolCategory){return"_"+symbolCategory+"Type"}function createSymbol(name,lineData,idx){var color=lineData.getItemVisual(idx,"color"),symbolType=lineData.getItemVisual(idx,name),symbolSize=lineData.getItemVisual(idx,name+"Size");if(symbolType&&"none"!==symbolType){zrUtil.isArray(symbolSize)||(symbolSize=[symbolSize,symbolSize]);var symbolPath=symbolUtil.createSymbol(symbolType,-symbolSize[0]/2,-symbolSize[1]/2,symbolSize[0],symbolSize[1],color);return symbolPath.name=name,symbolPath}}function createLine(points){var line=new LinePath({name:"line"});return setLinePoints(line.shape,points),line}function setLinePoints(targetShape,points){var p1=points[0],p2=points[1],cp1=points[2];targetShape.x1=p1[0],targetShape.y1=p1[1],targetShape.x2=p2[0],targetShape.y2=p2[1],targetShape.percent=1,cp1?(targetShape.cpx1=cp1[0],targetShape.cpy1=cp1[1]):(targetShape.cpx1=NaN,targetShape.cpy1=NaN)}function updateSymbolAndLabelBeforeLineUpdate(){var lineGroup=this,symbolFrom=lineGroup.childOfName("fromSymbol"),symbolTo=lineGroup.childOfName("toSymbol"),label=lineGroup.childOfName("label");if(symbolFrom||symbolTo||!label.ignore){for(var invScale=1,parentNode=this.parent;parentNode;)parentNode.scale&&(invScale/=parentNode.scale[0]),parentNode=parentNode.parent;var line=lineGroup.childOfName("line");if(this.__dirty||line.__dirty){var percent=line.shape.percent,fromPos=line.pointAt(0),toPos=line.pointAt(percent),d=vector.sub([],toPos,fromPos);if(vector.normalize(d,d),symbolFrom){symbolFrom.attr("position",fromPos);var tangent=line.tangentAt(0);symbolFrom.attr("rotation",Math.PI/2-Math.atan2(tangent[1],tangent[0])),symbolFrom.attr("scale",[invScale*percent,invScale*percent])}if(symbolTo){symbolTo.attr("position",toPos);var tangent=line.tangentAt(1);symbolTo.attr("rotation",-Math.PI/2-Math.atan2(tangent[1],tangent[0])),symbolTo.attr("scale",[invScale*percent,invScale*percent])}if(!label.ignore){label.attr("position",toPos);var textPosition,textAlign,textVerticalAlign,distance=5*invScale;if("end"===label.__position)textPosition=[d[0]*distance+toPos[0],d[1]*distance+toPos[1]],textAlign=d[0]>.8?"left":d[0]<-.8?"right":"center",textVerticalAlign=d[1]>.8?"top":d[1]<-.8?"bottom":"middle";else if("middle"===label.__position){var halfPercent=percent/2,tangent=line.tangentAt(halfPercent),n=[tangent[1],-tangent[0]],cp=line.pointAt(halfPercent);n[1]>0&&(n[0]=-n[0],n[1]=-n[1]),textPosition=[cp[0]+n[0]*distance,cp[1]+n[1]*distance],textAlign="center",textVerticalAlign="bottom";var rotation=-Math.atan2(tangent[1],tangent[0]);toPos[0]<fromPos[0]&&(rotation=Math.PI+rotation),label.attr("rotation",rotation)}else textPosition=[-d[0]*distance+fromPos[0],-d[1]*distance+fromPos[1]],textAlign=d[0]>.8?"right":d[0]<-.8?"left":"center",textVerticalAlign=d[1]>.8?"bottom":d[1]<-.8?"top":"middle";label.attr({style:{textVerticalAlign:label.__verticalAlign||textVerticalAlign,textAlign:label.__textAlign||textAlign},position:textPosition,scale:[invScale,invScale]})}}}}function Line(lineData,idx,seriesScope){graphic.Group.call(this),this._createLine(lineData,idx,seriesScope)}var symbolUtil=__webpack_require__(106),vector=__webpack_require__(10),LinePath=__webpack_require__(201),graphic=__webpack_require__(43),zrUtil=__webpack_require__(4),numberUtil=__webpack_require__(7),SYMBOL_CATEGORIES=["fromSymbol","toSymbol"],lineProto=Line.prototype;lineProto.beforeUpdate=updateSymbolAndLabelBeforeLineUpdate,lineProto._createLine=function(lineData,idx,seriesScope){var seriesModel=lineData.hostModel,linePoints=lineData.getItemLayout(idx),line=createLine(linePoints);line.shape.percent=0,graphic.initProps(line,{shape:{percent:1}},seriesModel,idx),this.add(line);var label=new graphic.Text({name:"label"});this.add(label),zrUtil.each(SYMBOL_CATEGORIES,function(symbolCategory){var symbol=createSymbol(symbolCategory,lineData,idx);this.add(symbol),this[makeSymbolTypeKey(symbolCategory)]=lineData.getItemVisual(idx,symbolCategory)},this),this._updateCommonStl(lineData,idx,seriesScope)},lineProto.updateData=function(lineData,idx,seriesScope){var seriesModel=lineData.hostModel,line=this.childOfName("line"),linePoints=lineData.getItemLayout(idx),target={shape:{}};setLinePoints(target.shape,linePoints),graphic.updateProps(line,target,seriesModel,idx),zrUtil.each(SYMBOL_CATEGORIES,function(symbolCategory){var symbolType=lineData.getItemVisual(idx,symbolCategory),key=makeSymbolTypeKey(symbolCategory);if(this[key]!==symbolType){this.remove(this.childOfName(symbolCategory));var symbol=createSymbol(symbolCategory,lineData,idx);this.add(symbol)}this[key]=symbolType},this),this._updateCommonStl(lineData,idx,seriesScope)},lineProto._updateCommonStl=function(lineData,idx,seriesScope){var seriesModel=lineData.hostModel,line=this.childOfName("line"),lineStyle=seriesScope&&seriesScope.lineStyle,hoverLineStyle=seriesScope&&seriesScope.hoverLineStyle,labelModel=seriesScope&&seriesScope.labelModel,hoverLabelModel=seriesScope&&seriesScope.hoverLabelModel;if(!seriesScope||lineData.hasItemOption){var itemModel=lineData.getItemModel(idx);lineStyle=itemModel.getModel("lineStyle.normal").getLineStyle(),hoverLineStyle=itemModel.getModel("lineStyle.emphasis").getLineStyle(),labelModel=itemModel.getModel("label.normal"),hoverLabelModel=itemModel.getModel("label.emphasis")}var visualColor=lineData.getItemVisual(idx,"color"),visualOpacity=zrUtil.retrieve(lineData.getItemVisual(idx,"opacity"),lineStyle.opacity,1);isNaN(defaultText)&&(defaultText=lineData.getName(idx)),line.useStyle(zrUtil.defaults({strokeNoScale:!0,fill:"none",stroke:visualColor,opacity:visualOpacity},lineStyle)),line.hoverStyle=hoverLineStyle,zrUtil.each(SYMBOL_CATEGORIES,function(symbolCategory){var symbol=this.childOfName(symbolCategory);symbol&&(symbol.setColor(visualColor),symbol.setStyle({opacity:visualOpacity}))},this);var defaultText,defaultLabelColor,showLabel=labelModel.getShallow("show"),hoverShowLabel=hoverLabelModel.getShallow("show"),label=this.childOfName("label");if((showLabel||hoverShowLabel)&&(defaultText=numberUtil.round(seriesModel.getRawValue(idx)),defaultLabelColor=visualColor||"#000"),showLabel){var textStyleModel=labelModel.getModel("textStyle");label.setStyle({text:zrUtil.retrieve(seriesModel.getFormattedLabel(idx,"normal",lineData.dataType),defaultText),textFont:textStyleModel.getFont(),fill:textStyleModel.getTextColor()||defaultLabelColor}),label.__textAlign=textStyleModel.get("align"),label.__verticalAlign=textStyleModel.get("baseline"),label.__position=labelModel.get("position")}else label.setStyle("text","");if(hoverShowLabel){var textStyleHoverModel=hoverLabelModel.getModel("textStyle");label.hoverStyle={text:zrUtil.retrieve(seriesModel.getFormattedLabel(idx,"emphasis",lineData.dataType),defaultText),textFont:textStyleHoverModel.getFont(),fill:textStyleHoverModel.getTextColor()||defaultLabelColor}}else label.hoverStyle={text:""};label.ignore=!showLabel&&!hoverShowLabel,graphic.setHoverStyle(this)},lineProto.updateLayout=function(lineData,idx){this.setLinePoints(lineData.getItemLayout(idx))},lineProto.setLinePoints=function(points){var linePath=this.childOfName("line");setLinePoints(linePath.shape,points),linePath.dirty()},zrUtil.inherits(Line,graphic.Group),module.exports=Line},function(module,exports,__webpack_require__){function isLine(shape){return isNaN(+shape.cpx1)||isNaN(+shape.cpy1)}var graphic=__webpack_require__(43),vec2=__webpack_require__(10),straightLineProto=graphic.Line.prototype,bezierCurveProto=graphic.BezierCurve.prototype;module.exports=graphic.extendShape({type:"ec-line",style:{stroke:"#000",fill:null},shape:{x1:0,y1:0,x2:0,y2:0,percent:1,cpx1:null,cpy1:null},buildPath:function(ctx,shape){(isLine(shape)?straightLineProto:bezierCurveProto).buildPath(ctx,shape)},pointAt:function(t){return isLine(this.shape)?straightLineProto.pointAt.call(this,t):bezierCurveProto.pointAt.call(this,t)},tangentAt:function(t){var shape=this.shape,p=isLine(shape)?[shape.x2-shape.x1,shape.y2-shape.y1]:bezierCurveProto.tangentAt.call(this,t);return vec2.normalize(p,p)}})},function(module,exports,__webpack_require__){function intersectCurveCircle(curvePoints,center,radius){for(var t,p0=curvePoints[0],p1=curvePoints[1],p2=curvePoints[2],d=1/0,radiusSquare=radius*radius,interval=.1,_t=.1;_t<=.9;_t+=.1){v1[0]=quadraticAt(p0[0],p1[0],p2[0],_t),v1[1]=quadraticAt(p0[1],p1[1],p2[1],_t);var diff=mathAbs(v2DistSquare(v1,center)-radiusSquare);diff<d&&(d=diff,t=_t)}for(var i=0;i<32;i++){var next=t+interval;v2[0]=quadraticAt(p0[0],p1[0],p2[0],t),v2[1]=quadraticAt(p0[1],p1[1],p2[1],t),v3[0]=quadraticAt(p0[0],p1[0],p2[0],next),v3[1]=quadraticAt(p0[1],p1[1],p2[1],next);var diff=v2DistSquare(v2,center)-radiusSquare;if(mathAbs(diff)<.01)break;var nextDiff=v2DistSquare(v3,center)-radiusSquare;interval/=2,diff<0?nextDiff>=0?t+=interval:t-=interval:nextDiff>=0?t-=interval:t+=interval}return t}var curveTool=__webpack_require__(50),vec2=__webpack_require__(10),v1=[],v2=[],v3=[],quadraticAt=curveTool.quadraticAt,v2DistSquare=vec2.distSquare,mathAbs=Math.abs;module.exports=function(graph,scale){function getSymbolSize(node){var symbolSize=node.getVisual("symbolSize");return symbolSize instanceof Array&&(symbolSize=(symbolSize[0]+symbolSize[1])/2),symbolSize}var tmp0=[],quadraticSubdivide=curveTool.quadraticSubdivide,pts=[[],[],[]],pts2=[[],[]],v=[];scale/=2,graph.eachEdge(function(edge,idx){var linePoints=edge.getLayout(),fromSymbol=edge.getVisual("fromSymbol"),toSymbol=edge.getVisual("toSymbol");linePoints.__original||(linePoints.__original=[vec2.clone(linePoints[0]),vec2.clone(linePoints[1])],linePoints[2]&&linePoints.__original.push(vec2.clone(linePoints[2])));var originalPoints=linePoints.__original;if(null!=linePoints[2]){if(vec2.copy(pts[0],originalPoints[0]),vec2.copy(pts[1],originalPoints[2]),vec2.copy(pts[2],originalPoints[1]),fromSymbol&&"none"!=fromSymbol){var symbolSize=getSymbolSize(edge.node1),t=intersectCurveCircle(pts,originalPoints[0],symbolSize*scale);quadraticSubdivide(pts[0][0],pts[1][0],pts[2][0],t,tmp0),pts[0][0]=tmp0[3],pts[1][0]=tmp0[4],quadraticSubdivide(pts[0][1],pts[1][1],pts[2][1],t,tmp0),pts[0][1]=tmp0[3],pts[1][1]=tmp0[4]}if(toSymbol&&"none"!=toSymbol){var symbolSize=getSymbolSize(edge.node2),t=intersectCurveCircle(pts,originalPoints[1],symbolSize*scale);quadraticSubdivide(pts[0][0],pts[1][0],pts[2][0],t,tmp0),pts[1][0]=tmp0[1],pts[2][0]=tmp0[2],quadraticSubdivide(pts[0][1],pts[1][1],pts[2][1],t,tmp0),pts[1][1]=tmp0[1],pts[2][1]=tmp0[2]}vec2.copy(linePoints[0],pts[0]),vec2.copy(linePoints[1],pts[2]),vec2.copy(linePoints[2],pts[1])}else{if(vec2.copy(pts2[0],originalPoints[0]),vec2.copy(pts2[1],originalPoints[1]),vec2.sub(v,pts2[1],pts2[0]),vec2.normalize(v,v),fromSymbol&&"none"!=fromSymbol){var symbolSize=getSymbolSize(edge.node1);vec2.scaleAndAdd(pts2[0],pts2[0],v,symbolSize*scale)}if(toSymbol&&"none"!=toSymbol){var symbolSize=getSymbolSize(edge.node2);vec2.scaleAndAdd(pts2[1],pts2[1],v,-symbolSize*scale)}vec2.copy(linePoints[0],pts2[0]),vec2.copy(linePoints[1],pts2[1])}})}},function(module,exports,__webpack_require__){var echarts=__webpack_require__(1),roamHelper=__webpack_require__(177),actionInfo={type:"graphRoam",event:"graphRoam",update:"none"};echarts.registerAction(actionInfo,function(payload,ecModel){ecModel.eachComponent({mainType:"series",query:payload},function(seriesModel){var coordSys=seriesModel.coordinateSystem,res=roamHelper.updateCenterAndZoom(coordSys,payload);seriesModel.setCenter&&seriesModel.setCenter(res.center),seriesModel.setZoom&&seriesModel.setZoom(res.zoom)})})},function(module,exports){module.exports=function(ecModel){var legendModels=ecModel.findComponents({mainType:"legend"});legendModels&&legendModels.length&&ecModel.eachSeriesByType("graph",function(graphSeries){var categoriesData=graphSeries.getCategoriesData(),graph=graphSeries.getGraph(),data=graph.data,categoryNames=categoriesData.mapArray(categoriesData.getName);data.filterSelf(function(idx){var model=data.getItemModel(idx),category=model.getShallow("category");if(null!=category){"number"==typeof category&&(category=categoryNames[category]);for(var i=0;i<legendModels.length;i++)if(!legendModels[i].isSelected(category))return!1}return!0})},this)}},function(module,exports){module.exports=function(ecModel){var paletteScope={};ecModel.eachSeriesByType("graph",function(seriesModel){var categoriesData=seriesModel.getCategoriesData(),data=seriesModel.getData(),categoryNameIdxMap={};categoriesData.each(function(idx){var name=categoriesData.getName(idx);categoryNameIdxMap[name]=idx;var itemModel=categoriesData.getItemModel(idx),color=itemModel.get("itemStyle.normal.color")||seriesModel.getColorFromPalette(name,paletteScope);categoriesData.setItemVisual(idx,"color",color)}),categoriesData.count()&&data.each(function(idx){var model=data.getItemModel(idx),category=model.getShallow("category");null!=category&&("string"==typeof category&&(category=categoryNameIdxMap[category]),data.getItemVisual(idx,"color",!0)||data.setItemVisual(idx,"color",categoriesData.getItemVisual(category,"color")))})})}},function(module,exports){function normalize(a){return a instanceof Array||(a=[a,a]),a}module.exports=function(ecModel){ecModel.eachSeriesByType("graph",function(seriesModel){var graph=seriesModel.getGraph(),edgeData=seriesModel.getEdgeData(),symbolType=normalize(seriesModel.get("edgeSymbol")),symbolSize=normalize(seriesModel.get("edgeSymbolSize")),colorQuery="lineStyle.normal.color".split("."),opacityQuery="lineStyle.normal.opacity".split(".");edgeData.setVisual("fromSymbol",symbolType&&symbolType[0]),edgeData.setVisual("toSymbol",symbolType&&symbolType[1]),edgeData.setVisual("fromSymbolSize",symbolSize&&symbolSize[0]),edgeData.setVisual("toSymbolSize",symbolSize&&symbolSize[1]),edgeData.setVisual("color",seriesModel.get(colorQuery)),edgeData.setVisual("opacity",seriesModel.get(opacityQuery)),edgeData.each(function(idx){var itemModel=edgeData.getItemModel(idx),edge=graph.getEdgeByIndex(idx),symbolType=normalize(itemModel.getShallow("symbol",!0)),symbolSize=normalize(itemModel.getShallow("symbolSize",!0)),color=itemModel.get(colorQuery),opacity=itemModel.get(opacityQuery);switch(color){case"source":color=edge.node1.getVisual("color");break;case"target":color=edge.node2.getVisual("color")}symbolType[0]&&edge.setVisual("fromSymbol",symbolType[0]),symbolType[1]&&edge.setVisual("toSymbol",symbolType[1]),symbolSize[0]&&edge.setVisual("fromSymbolSize",symbolSize[0]),symbolSize[1]&&edge.setVisual("toSymbolSize",symbolSize[1]),edge.setVisual("color",color),edge.setVisual("opacity",opacity)})})}},function(module,exports,__webpack_require__){var simpleLayoutHelper=__webpack_require__(208),simpleLayoutEdge=__webpack_require__(209);module.exports=function(ecModel,api){ecModel.eachSeriesByType("graph",function(seriesModel){var layout=seriesModel.get("layout"),coordSys=seriesModel.coordinateSystem;if(coordSys&&"view"!==coordSys.type){var data=seriesModel.getData();data.each(coordSys.dimensions,function(x,y,idx){isNaN(x)||isNaN(y)?data.setItemLayout(idx,[NaN,NaN]):data.setItemLayout(idx,coordSys.dataToPoint([x,y]))}),simpleLayoutEdge(data.graph)}else layout&&"none"!==layout||simpleLayoutHelper(seriesModel)})}},function(module,exports,__webpack_require__){var simpleLayoutEdge=__webpack_require__(209);module.exports=function(seriesModel){var coordSys=seriesModel.coordinateSystem;if(!coordSys||"view"===coordSys.type){var graph=seriesModel.getGraph();graph.eachNode(function(node){var model=node.getModel();node.setLayout([+model.get("x"),+model.get("y")])}),simpleLayoutEdge(graph)}}},function(module,exports,__webpack_require__){var vec2=__webpack_require__(10);module.exports=function(graph){graph.eachEdge(function(edge){var curveness=edge.getModel().get("lineStyle.normal.curveness")||0,p1=vec2.clone(edge.node1.getLayout()),p2=vec2.clone(edge.node2.getLayout()),points=[p1,p2];+curveness&&points.push([(p1[0]+p2[0])/2-(p1[1]-p2[1])*curveness,(p1[1]+p2[1])/2-(p2[0]-p1[0])*curveness]),edge.setLayout(points)})}},function(module,exports,__webpack_require__){var circularLayoutHelper=__webpack_require__(211);module.exports=function(ecModel){ecModel.eachSeriesByType("graph",function(seriesModel){"circular"===seriesModel.get("layout")&&circularLayoutHelper(seriesModel)})}},function(module,exports,__webpack_require__){var vec2=__webpack_require__(10);module.exports=function(seriesModel){var coordSys=seriesModel.coordinateSystem;if(!coordSys||"view"===coordSys.type){var rect=coordSys.getBoundingRect(),nodeData=seriesModel.getData(),graph=nodeData.graph,angle=0,sum=nodeData.getSum("value"),unitAngle=2*Math.PI/(sum||nodeData.count()),cx=rect.width/2+rect.x,cy=rect.height/2+rect.y,r=Math.min(rect.width,rect.height)/2;
graph.eachNode(function(node){var value=node.getValue("value");angle+=unitAngle*(sum?value:2)/2,node.setLayout([r*Math.cos(angle)+cx,r*Math.sin(angle)+cy]),angle+=unitAngle*(sum?value:2)/2}),nodeData.setLayout({cx:cx,cy:cy}),graph.eachEdge(function(edge){var cp1,curveness=edge.getModel().get("lineStyle.normal.curveness")||0,p1=vec2.clone(edge.node1.getLayout()),p2=vec2.clone(edge.node2.getLayout()),x12=(p1[0]+p2[0])/2,y12=(p1[1]+p2[1])/2;+curveness&&(curveness*=3,cp1=[cx*curveness+x12*(1-curveness),cy*curveness+y12*(1-curveness)]),edge.setLayout([p1,p2,cp1])})}}},function(module,exports,__webpack_require__){var forceHelper=__webpack_require__(213),numberUtil=__webpack_require__(7),simpleLayoutHelper=__webpack_require__(208),circularLayoutHelper=__webpack_require__(211),vec2=__webpack_require__(10),zrUtil=__webpack_require__(4);module.exports=function(ecModel){ecModel.eachSeriesByType("graph",function(graphSeries){var coordSys=graphSeries.coordinateSystem;if(!coordSys||"view"===coordSys.type)if("force"===graphSeries.get("layout")){var preservedPoints=graphSeries.preservedPoints||{},graph=graphSeries.getGraph(),nodeData=graph.data,edgeData=graph.edgeData,forceModel=graphSeries.getModel("force"),initLayout=forceModel.get("initLayout");graphSeries.preservedPoints?nodeData.each(function(idx){var id=nodeData.getId(idx);nodeData.setItemLayout(idx,preservedPoints[id]||[NaN,NaN])}):initLayout&&"none"!==initLayout?"circular"===initLayout&&circularLayoutHelper(graphSeries):simpleLayoutHelper(graphSeries);var nodeDataExtent=nodeData.getDataExtent("value"),edgeDataExtent=edgeData.getDataExtent("value"),repulsion=forceModel.get("repulsion"),edgeLength=forceModel.get("edgeLength");zrUtil.isArray(repulsion)||(repulsion=[repulsion,repulsion]),zrUtil.isArray(edgeLength)||(edgeLength=[edgeLength,edgeLength]),edgeLength=[edgeLength[1],edgeLength[0]];var nodes=nodeData.mapArray("value",function(value,idx){var point=nodeData.getItemLayout(idx),rep=numberUtil.linearMap(value,nodeDataExtent,repulsion);return isNaN(rep)&&(rep=(repulsion[0]+repulsion[1])/2),{w:rep,rep:rep,p:!point||isNaN(point[0])||isNaN(point[1])?null:point}}),edges=edgeData.mapArray("value",function(value,idx){var edge=graph.getEdgeByIndex(idx),d=numberUtil.linearMap(value,edgeDataExtent,edgeLength);return isNaN(d)&&(d=(edgeLength[0]+edgeLength[1])/2),{n1:nodes[edge.node1.dataIndex],n2:nodes[edge.node2.dataIndex],d:d,curveness:edge.getModel().get("lineStyle.normal.curveness")||0}}),coordSys=graphSeries.coordinateSystem,rect=coordSys.getBoundingRect(),forceInstance=forceHelper(nodes,edges,{rect:rect,gravity:forceModel.get("gravity")}),oldStep=forceInstance.step;forceInstance.step=function(cb){for(var i=0,l=nodes.length;i<l;i++)nodes[i].fixed&&vec2.copy(nodes[i].p,graph.getNodeByIndex(i).getLayout());oldStep(function(nodes,edges,stopped){for(var i=0,l=nodes.length;i<l;i++)nodes[i].fixed||graph.getNodeByIndex(i).setLayout(nodes[i].p),preservedPoints[nodeData.getId(i)]=nodes[i].p;for(var i=0,l=edges.length;i<l;i++){var e=edges[i],edge=graph.getEdgeByIndex(i),p1=e.n1.p,p2=e.n2.p,points=edge.getLayout();points=points?points.slice():[],points[0]=points[0]||[],points[1]=points[1]||[],vec2.copy(points[0],p1),vec2.copy(points[1],p2),+e.curveness&&(points[2]=[(p1[0]+p2[0])/2-(p1[1]-p2[1])*e.curveness,(p1[1]+p2[1])/2-(p2[0]-p1[0])*e.curveness]),edge.setLayout(points)}cb&&cb(stopped)})},graphSeries.forceLayout=forceInstance,graphSeries.preservedPoints=preservedPoints,forceInstance.step()}else graphSeries.forceLayout=null})}},function(module,exports,__webpack_require__){var vec2=__webpack_require__(10),scaleAndAdd=vec2.scaleAndAdd;module.exports=function(nodes,edges,opts){for(var rect=opts.rect,width=rect.width,height=rect.height,center=[rect.x+width/2,rect.y+height/2],gravity=null==opts.gravity?.1:opts.gravity,i=0;i<nodes.length;i++){var n=nodes[i];n.p||(n.p=vec2.create(width*(Math.random()-.5)+center[0],height*(Math.random()-.5)+center[1])),n.pp=vec2.clone(n.p),n.edges=null}var friction=.6;return{warmUp:function(){friction=.5},setFixed:function(idx){nodes[idx].fixed=!0},setUnfixed:function(idx){nodes[idx].fixed=!1},step:function(cb){for(var v12=[],nLen=nodes.length,i=0;i<edges.length;i++){var e=edges[i],n1=e.n1,n2=e.n2;vec2.sub(v12,n2.p,n1.p);var d=vec2.len(v12)-e.d,w=n2.w/(n1.w+n2.w);vec2.normalize(v12,v12),!n1.fixed&&scaleAndAdd(n1.p,n1.p,v12,w*d*friction),!n2.fixed&&scaleAndAdd(n2.p,n2.p,v12,-(1-w)*d*friction)}for(var i=0;i<nLen;i++){var n=nodes[i];n.fixed||(vec2.sub(v12,center,n.p),vec2.scaleAndAdd(n.p,n.p,v12,gravity*friction))}for(var i=0;i<nLen;i++)for(var n1=nodes[i],j=i+1;j<nLen;j++){var n2=nodes[j];vec2.sub(v12,n2.p,n1.p);var d=vec2.len(v12);0===d&&(vec2.set(v12,Math.random()-.5,Math.random()-.5),d=1);var repFact=(n1.rep+n2.rep)/d/d;!n1.fixed&&scaleAndAdd(n1.pp,n1.pp,v12,repFact),!n2.fixed&&scaleAndAdd(n2.pp,n2.pp,v12,-repFact)}for(var v=[],i=0;i<nLen;i++){var n=nodes[i];n.fixed||(vec2.sub(v,n.p,n.pp),vec2.scaleAndAdd(n.p,n.p,v,friction),vec2.copy(n.pp,n.p))}friction=.992*friction,cb&&cb(nodes,edges,friction<.01)}}}},function(module,exports,__webpack_require__){function getViewRect(seriesModel,api,aspect){var option=seriesModel.getBoxLayoutParams();return option.aspect=aspect,layout.getLayoutRect(option,{width:api.getWidth(),height:api.getHeight()})}var View=__webpack_require__(168),layout=__webpack_require__(21),bbox=__webpack_require__(51);module.exports=function(ecModel,api){var viewList=[];return ecModel.eachSeriesByType("graph",function(seriesModel){var coordSysType=seriesModel.get("coordinateSystem");if(!coordSysType||"view"===coordSysType){var viewCoordSys=new View;viewList.push(viewCoordSys);var data=seriesModel.getData(),positions=data.mapArray(function(idx){var itemModel=data.getItemModel(idx);return[+itemModel.get("x"),+itemModel.get("y")]}),min=[],max=[];bbox.fromPoints(positions,min,max),max[0]-min[0]===0&&(max[0]+=1,min[0]-=1),max[1]-min[1]===0&&(max[1]+=1,min[1]-=1);var aspect=(max[0]-min[0])/(max[1]-min[1]),viewRect=getViewRect(seriesModel,api,aspect);isNaN(aspect)&&(min=[viewRect.x,viewRect.y],max=[viewRect.x+viewRect.width,viewRect.y+viewRect.height]);var bbWidth=max[0]-min[0],bbHeight=max[1]-min[1],viewWidth=viewRect.width,viewHeight=viewRect.height;viewCoordSys=seriesModel.coordinateSystem=new View,viewCoordSys.zoomLimit=seriesModel.get("scaleLimit"),viewCoordSys.setBoundingRect(min[0],min[1],bbWidth,bbHeight),viewCoordSys.setViewRect(viewRect.x,viewRect.y,viewWidth,viewHeight),viewCoordSys.setCenter(seriesModel.get("center")),viewCoordSys.setZoom(seriesModel.get("zoom"))}}),viewList}},function(module,exports,__webpack_require__){__webpack_require__(216),__webpack_require__(217)},function(module,exports,__webpack_require__){var List=__webpack_require__(97),SeriesModel=__webpack_require__(28),zrUtil=__webpack_require__(4),GaugeSeries=SeriesModel.extend({type:"series.gauge",getInitialData:function(option,ecModel){var list=new List(["value"],this),dataOpt=option.data||[];return zrUtil.isArray(dataOpt)||(dataOpt=[dataOpt]),list.initData(dataOpt),list},defaultOption:{zlevel:0,z:2,center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,lineStyle:{color:[[.2,"#91c7ae"],[.8,"#63869e"],[1,"#c23531"]],width:30}},splitLine:{show:!0,length:30,lineStyle:{color:"#eee",width:2,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:8,lineStyle:{color:"#eee",width:1,type:"solid"}},axisLabel:{show:!0,distance:5,textStyle:{color:"auto"}},pointer:{show:!0,length:"80%",width:8},itemStyle:{normal:{color:"auto"}},title:{show:!0,offsetCenter:[0,"-40%"],textStyle:{color:"#333",fontSize:15}},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:40,offsetCenter:[0,"40%"],textStyle:{color:"auto",fontSize:30}}}});module.exports=GaugeSeries},function(module,exports,__webpack_require__){function parsePosition(seriesModel,api){var center=seriesModel.get("center"),width=api.getWidth(),height=api.getHeight(),size=Math.min(width,height),cx=parsePercent(center[0],api.getWidth()),cy=parsePercent(center[1],api.getHeight()),r=parsePercent(seriesModel.get("radius"),size/2);return{cx:cx,cy:cy,r:r}}function formatLabel(label,labelFormatter){return labelFormatter&&("string"==typeof labelFormatter?label=labelFormatter.replace("{value}",label):"function"==typeof labelFormatter&&(label=labelFormatter(label))),label}var PointerPath=__webpack_require__(218),graphic=__webpack_require__(43),numberUtil=__webpack_require__(7),parsePercent=numberUtil.parsePercent,PI2=2*Math.PI,GaugeView=__webpack_require__(42).extend({type:"gauge",render:function(seriesModel,ecModel,api){this.group.removeAll();var colorList=seriesModel.get("axisLine.lineStyle.color"),posInfo=parsePosition(seriesModel,api);this._renderMain(seriesModel,ecModel,api,colorList,posInfo)},_renderMain:function(seriesModel,ecModel,api,colorList,posInfo){for(var group=this.group,axisLineModel=seriesModel.getModel("axisLine"),lineStyleModel=axisLineModel.getModel("lineStyle"),clockwise=seriesModel.get("clockwise"),startAngle=-seriesModel.get("startAngle")/180*Math.PI,endAngle=-seriesModel.get("endAngle")/180*Math.PI,angleRangeSpan=(endAngle-startAngle)%PI2,prevEndAngle=startAngle,axisLineWidth=lineStyleModel.get("width"),i=0;i<colorList.length;i++){var percent=Math.min(Math.max(colorList[i][0],0),1),endAngle=startAngle+angleRangeSpan*percent,sector=new graphic.Sector({shape:{startAngle:prevEndAngle,endAngle:endAngle,cx:posInfo.cx,cy:posInfo.cy,clockwise:clockwise,r0:posInfo.r-axisLineWidth,r:posInfo.r},silent:!0});sector.setStyle({fill:colorList[i][1]}),sector.setStyle(lineStyleModel.getLineStyle(["color","borderWidth","borderColor"])),group.add(sector),prevEndAngle=endAngle}var getColor=function(percent){if(percent<=0)return colorList[0][1];for(var i=0;i<colorList.length;i++)if(colorList[i][0]>=percent&&(0===i?0:colorList[i-1][0])<percent)return colorList[i][1];return colorList[i-1][1]};if(!clockwise){var tmp=startAngle;startAngle=endAngle,endAngle=tmp}this._renderTicks(seriesModel,ecModel,api,getColor,posInfo,startAngle,endAngle,clockwise),this._renderPointer(seriesModel,ecModel,api,getColor,posInfo,startAngle,endAngle,clockwise),this._renderTitle(seriesModel,ecModel,api,getColor,posInfo),this._renderDetail(seriesModel,ecModel,api,getColor,posInfo)},_renderTicks:function(seriesModel,ecModel,api,getColor,posInfo,startAngle,endAngle,clockwise){for(var group=this.group,cx=posInfo.cx,cy=posInfo.cy,r=posInfo.r,minVal=seriesModel.get("min"),maxVal=seriesModel.get("max"),splitLineModel=seriesModel.getModel("splitLine"),tickModel=seriesModel.getModel("axisTick"),labelModel=seriesModel.getModel("axisLabel"),splitNumber=seriesModel.get("splitNumber"),subSplitNumber=tickModel.get("splitNumber"),splitLineLen=parsePercent(splitLineModel.get("length"),r),tickLen=parsePercent(tickModel.get("length"),r),angle=startAngle,step=(endAngle-startAngle)/splitNumber,subStep=step/subSplitNumber,splitLineStyle=splitLineModel.getModel("lineStyle").getLineStyle(),tickLineStyle=tickModel.getModel("lineStyle").getLineStyle(),textStyleModel=labelModel.getModel("textStyle"),i=0;i<=splitNumber;i++){var unitX=Math.cos(angle),unitY=Math.sin(angle);if(splitLineModel.get("show")){var splitLine=new graphic.Line({shape:{x1:unitX*r+cx,y1:unitY*r+cy,x2:unitX*(r-splitLineLen)+cx,y2:unitY*(r-splitLineLen)+cy},style:splitLineStyle,silent:!0});"auto"===splitLineStyle.stroke&&splitLine.setStyle({stroke:getColor(i/splitNumber)}),group.add(splitLine)}if(labelModel.get("show")){var label=formatLabel(numberUtil.round(i/splitNumber*(maxVal-minVal)+minVal),labelModel.get("formatter")),distance=labelModel.get("distance"),text=new graphic.Text({style:{text:label,x:unitX*(r-splitLineLen-distance)+cx,y:unitY*(r-splitLineLen-distance)+cy,fill:textStyleModel.getTextColor(),textFont:textStyleModel.getFont(),textVerticalAlign:unitY<-.4?"top":unitY>.4?"bottom":"middle",textAlign:unitX<-.4?"left":unitX>.4?"right":"center"},silent:!0});"auto"===text.style.fill&&text.setStyle({fill:getColor(i/splitNumber)}),group.add(text)}if(tickModel.get("show")&&i!==splitNumber){for(var j=0;j<=subSplitNumber;j++){var unitX=Math.cos(angle),unitY=Math.sin(angle),tickLine=new graphic.Line({shape:{x1:unitX*r+cx,y1:unitY*r+cy,x2:unitX*(r-tickLen)+cx,y2:unitY*(r-tickLen)+cy},silent:!0,style:tickLineStyle});"auto"===tickLineStyle.stroke&&tickLine.setStyle({stroke:getColor((i+j/subSplitNumber)/splitNumber)}),group.add(tickLine),angle+=subStep}angle-=subStep}else angle+=step}},_renderPointer:function(seriesModel,ecModel,api,getColor,posInfo,startAngle,endAngle,clockwise){var valueExtent=[+seriesModel.get("min"),+seriesModel.get("max")],angleExtent=[startAngle,endAngle];clockwise||(angleExtent=angleExtent.reverse());var data=seriesModel.getData(),oldData=this._data,group=this.group;data.diff(oldData).add(function(idx){var pointer=new PointerPath({shape:{angle:startAngle}});graphic.updateProps(pointer,{shape:{angle:numberUtil.linearMap(data.get("value",idx),valueExtent,angleExtent,!0)}},seriesModel),group.add(pointer),data.setItemGraphicEl(idx,pointer)}).update(function(newIdx,oldIdx){var pointer=oldData.getItemGraphicEl(oldIdx);graphic.updateProps(pointer,{shape:{angle:numberUtil.linearMap(data.get("value",newIdx),valueExtent,angleExtent,!0)}},seriesModel),group.add(pointer),data.setItemGraphicEl(newIdx,pointer)}).remove(function(idx){var pointer=oldData.getItemGraphicEl(idx);group.remove(pointer)}).execute(),data.eachItemGraphicEl(function(pointer,idx){var itemModel=data.getItemModel(idx),pointerModel=itemModel.getModel("pointer");pointer.setShape({x:posInfo.cx,y:posInfo.cy,width:parsePercent(pointerModel.get("width"),posInfo.r),r:parsePercent(pointerModel.get("length"),posInfo.r)}),pointer.useStyle(itemModel.getModel("itemStyle.normal").getItemStyle()),"auto"===pointer.style.fill&&pointer.setStyle("fill",getColor((data.get("value",idx)-valueExtent[0])/(valueExtent[1]-valueExtent[0]))),graphic.setHoverStyle(pointer,itemModel.getModel("itemStyle.emphasis").getItemStyle())}),this._data=data},_renderTitle:function(seriesModel,ecModel,api,getColor,posInfo){var titleModel=seriesModel.getModel("title");if(titleModel.get("show")){var textStyleModel=titleModel.getModel("textStyle"),offsetCenter=titleModel.get("offsetCenter"),x=posInfo.cx+parsePercent(offsetCenter[0],posInfo.r),y=posInfo.cy+parsePercent(offsetCenter[1],posInfo.r),text=new graphic.Text({style:{x:x,y:y,text:seriesModel.getData().getName(0),fill:textStyleModel.getTextColor(),textFont:textStyleModel.getFont(),textAlign:"center",textVerticalAlign:"middle"}});this.group.add(text)}},_renderDetail:function(seriesModel,ecModel,api,getColor,posInfo){var detailModel=seriesModel.getModel("detail"),minVal=seriesModel.get("min"),maxVal=seriesModel.get("max");if(detailModel.get("show")){var textStyleModel=detailModel.getModel("textStyle"),offsetCenter=detailModel.get("offsetCenter"),x=posInfo.cx+parsePercent(offsetCenter[0],posInfo.r),y=posInfo.cy+parsePercent(offsetCenter[1],posInfo.r),width=parsePercent(detailModel.get("width"),posInfo.r),height=parsePercent(detailModel.get("height"),posInfo.r),value=seriesModel.getData().get("value",0),rect=new graphic.Rect({shape:{x:x-width/2,y:y-height/2,width:width,height:height},style:{text:formatLabel(value,detailModel.get("formatter")),fill:detailModel.get("backgroundColor"),textFill:textStyleModel.getTextColor(),textFont:textStyleModel.getFont()}});"auto"===rect.style.textFill&&rect.setStyle("textFill",getColor(numberUtil.linearMap(value,[minVal,maxVal],[0,1],!0))),rect.setStyle(detailModel.getItemStyle(["color"])),this.group.add(rect)}}});module.exports=GaugeView},function(module,exports,__webpack_require__){module.exports=__webpack_require__(45).extend({type:"echartsGaugePointer",shape:{angle:0,width:10,r:10,x:0,y:0},buildPath:function(ctx,shape){var mathCos=Math.cos,mathSin=Math.sin,r=shape.r,width=shape.width,angle=shape.angle,x=shape.x-mathCos(angle)*width*(width>=r/3?1:2),y=shape.y-mathSin(angle)*width*(width>=r/3?1:2);angle=shape.angle-Math.PI/2,ctx.moveTo(x,y),ctx.lineTo(shape.x+mathCos(angle)*width,shape.y+mathSin(angle)*width),ctx.lineTo(shape.x+mathCos(shape.angle)*r,shape.y+mathSin(shape.angle)*r),ctx.lineTo(shape.x-mathCos(angle)*width,shape.y-mathSin(angle)*width),ctx.lineTo(x,y)}})},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4),echarts=__webpack_require__(1);__webpack_require__(220),__webpack_require__(221),echarts.registerVisual(zrUtil.curry(__webpack_require__(143),"funnel")),echarts.registerLayout(__webpack_require__(222)),echarts.registerProcessor(zrUtil.curry(__webpack_require__(146),"funnel"))},function(module,exports,__webpack_require__){"use strict";var List=__webpack_require__(97),modelUtil=__webpack_require__(5),completeDimensions=__webpack_require__(102),FunnelSeries=__webpack_require__(1).extendSeriesModel({type:"series.funnel",init:function(option){FunnelSeries.superApply(this,"init",arguments),this.legendDataProvider=function(){return this._dataBeforeProcessed},this._defaultLabelLine(option)},getInitialData:function(option,ecModel){var dimensions=completeDimensions(["value"],option.data),list=new List(dimensions,this);return list.initData(option.data),list},_defaultLabelLine:function(option){modelUtil.defaultEmphasis(option.labelLine,["show"]);var labelLineNormalOpt=option.labelLine.normal,labelLineEmphasisOpt=option.labelLine.emphasis;labelLineNormalOpt.show=labelLineNormalOpt.show&&option.label.normal.show,labelLineEmphasisOpt.show=labelLineEmphasisOpt.show&&option.label.emphasis.show},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",gap:0,funnelAlign:"center",label:{normal:{show:!0,position:"outer"},emphasis:{show:!0}},labelLine:{normal:{show:!0,length:20,lineStyle:{width:1,type:"solid"}},emphasis:{}},itemStyle:{normal:{borderColor:"#fff",borderWidth:1},emphasis:{}}}});module.exports=FunnelSeries},function(module,exports,__webpack_require__){function FunnelPiece(data,idx){function onEmphasis(){labelLine.ignore=labelLine.hoverIgnore,text.ignore=text.hoverIgnore}function onNormal(){labelLine.ignore=labelLine.normalIgnore,text.ignore=text.normalIgnore}graphic.Group.call(this);var polygon=new graphic.Polygon,labelLine=new graphic.Polyline,text=new graphic.Text;this.add(polygon),this.add(labelLine),this.add(text),this.updateData(data,idx,!0),this.on("emphasis",onEmphasis).on("normal",onNormal).on("mouseover",onEmphasis).on("mouseout",onNormal)}function getLabelStyle(data,idx,state,labelModel){var textStyleModel=labelModel.getModel("textStyle"),position=labelModel.get("position"),isLabelInside="inside"===position||"inner"===position||"center"===position;return{fill:textStyleModel.getTextColor()||(isLabelInside?"#fff":data.getItemVisual(idx,"color")),textFont:textStyleModel.getFont(),text:zrUtil.retrieve(data.hostModel.getFormattedLabel(idx,state),data.getName(idx))}}var graphic=__webpack_require__(43),zrUtil=__webpack_require__(4),funnelPieceProto=FunnelPiece.prototype,opacityAccessPath=["itemStyle","normal","opacity"];funnelPieceProto.updateData=function(data,idx,firstCreate){var polygon=this.childAt(0),seriesModel=data.hostModel,itemModel=data.getItemModel(idx),layout=data.getItemLayout(idx),opacity=data.getItemModel(idx).get(opacityAccessPath);opacity=null==opacity?1:opacity,polygon.useStyle({}),firstCreate?(polygon.setShape({points:layout.points}),polygon.setStyle({opacity:0}),graphic.initProps(polygon,{style:{opacity:opacity}},seriesModel,idx)):graphic.updateProps(polygon,{style:{opacity:opacity},shape:{points:layout.points}},seriesModel,idx);var itemStyleModel=itemModel.getModel("itemStyle"),visualColor=data.getItemVisual(idx,"color");polygon.setStyle(zrUtil.defaults({lineJoin:"round",fill:visualColor},itemStyleModel.getModel("normal").getItemStyle(["opacity"]))),polygon.hoverStyle=itemStyleModel.getModel("emphasis").getItemStyle(),this._updateLabel(data,idx),graphic.setHoverStyle(this)},funnelPieceProto._updateLabel=function(data,idx){var labelLine=this.childAt(1),labelText=this.childAt(2),seriesModel=data.hostModel,itemModel=data.getItemModel(idx),layout=data.getItemLayout(idx),labelLayout=layout.label,visualColor=data.getItemVisual(idx,"color");graphic.updateProps(labelLine,{shape:{points:labelLayout.linePoints||labelLayout.linePoints}},seriesModel,idx),graphic.updateProps(labelText,{style:{x:labelLayout.x,y:labelLayout.y}},seriesModel,idx),labelText.attr({style:{textAlign:labelLayout.textAlign,textVerticalAlign:labelLayout.verticalAlign,textFont:labelLayout.font},rotation:labelLayout.rotation,origin:[labelLayout.x,labelLayout.y],z2:10});var labelModel=itemModel.getModel("label.normal"),labelHoverModel=itemModel.getModel("label.emphasis"),labelLineModel=itemModel.getModel("labelLine.normal"),labelLineHoverModel=itemModel.getModel("labelLine.emphasis");labelText.setStyle(getLabelStyle(data,idx,"normal",labelModel)),labelText.ignore=labelText.normalIgnore=!labelModel.get("show"),labelText.hoverIgnore=!labelHoverModel.get("show"),labelLine.ignore=labelLine.normalIgnore=!labelLineModel.get("show"),labelLine.hoverIgnore=!labelLineHoverModel.get("show"),labelLine.setStyle({stroke:visualColor}),labelLine.setStyle(labelLineModel.getModel("lineStyle").getLineStyle()),labelText.hoverStyle=getLabelStyle(data,idx,"emphasis",labelHoverModel),labelLine.hoverStyle=labelLineHoverModel.getModel("lineStyle").getLineStyle()},zrUtil.inherits(FunnelPiece,graphic.Group);var Funnel=__webpack_require__(42).extend({type:"funnel",render:function(seriesModel,ecModel,api){var data=seriesModel.getData(),oldData=this._data,group=this.group;data.diff(oldData).add(function(idx){var funnelPiece=new FunnelPiece(data,idx);data.setItemGraphicEl(idx,funnelPiece),group.add(funnelPiece)}).update(function(newIdx,oldIdx){var piePiece=oldData.getItemGraphicEl(oldIdx);piePiece.updateData(data,newIdx),group.add(piePiece),data.setItemGraphicEl(newIdx,piePiece)}).remove(function(idx){var piePiece=oldData.getItemGraphicEl(idx);group.remove(piePiece)}).execute(),this._data=data},remove:function(){this.group.removeAll(),this._data=null}});module.exports=Funnel},function(module,exports,__webpack_require__){function getViewRect(seriesModel,api){return layout.getLayoutRect(seriesModel.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()})}function getSortedIndices(data,sort){for(var valueArr=data.mapArray("value",function(val){return val}),indices=[],isAscending="ascending"===sort,i=0,len=data.count();i<len;i++)indices[i]=i;return indices.sort(function(a,b){return isAscending?valueArr[a]-valueArr[b]:valueArr[b]-valueArr[a]}),indices}function labelLayout(data){data.each(function(idx){var textAlign,textX,textY,linePoints,itemModel=data.getItemModel(idx),labelModel=itemModel.getModel("label.normal"),labelPosition=labelModel.get("position"),labelLineModel=itemModel.getModel("labelLine.normal"),layout=data.getItemLayout(idx),points=layout.points,isLabelInside="inner"===labelPosition||"inside"===labelPosition||"center"===labelPosition;if(isLabelInside)textX=(points[0][0]+points[1][0]+points[2][0]+points[3][0])/4,textY=(points[0][1]+points[1][1]+points[2][1]+points[3][1])/4,textAlign="center",linePoints=[[textX,textY],[textX,textY]];else{var x1,y1,x2,labelLineLen=labelLineModel.get("length");"left"===labelPosition?(x1=(points[3][0]+points[0][0])/2,y1=(points[3][1]+points[0][1])/2,x2=x1-labelLineLen,textX=x2-5,textAlign="right"):(x1=(points[1][0]+points[2][0])/2,y1=(points[1][1]+points[2][1])/2,x2=x1+labelLineLen,textX=x2+5,textAlign="left");var y2=y1;linePoints=[[x1,y1],[x2,y2]],textY=y2}layout.label={linePoints:linePoints,x:textX,y:textY,verticalAlign:"middle",textAlign:textAlign,inside:isLabelInside}})}var layout=__webpack_require__(21),number=__webpack_require__(7),parsePercent=number.parsePercent;module.exports=function(ecModel,api,payload){ecModel.eachSeriesByType("funnel",function(seriesModel){var data=seriesModel.getData(),sort=seriesModel.get("sort"),viewRect=getViewRect(seriesModel,api),indices=getSortedIndices(data,sort),sizeExtent=[parsePercent(seriesModel.get("minSize"),viewRect.width),parsePercent(seriesModel.get("maxSize"),viewRect.width)],dataExtent=data.getDataExtent("value"),min=seriesModel.get("min"),max=seriesModel.get("max");null==min&&(min=Math.min(dataExtent[0],0)),null==max&&(max=dataExtent[1]);var funnelAlign=seriesModel.get("funnelAlign"),gap=seriesModel.get("gap"),itemHeight=(viewRect.height-gap*(data.count()-1))/data.count(),y=viewRect.y,getLinePoints=function(idx,offY){var x0,val=data.get("value",idx)||0,itemWidth=number.linearMap(val,[min,max],sizeExtent,!0);switch(funnelAlign){case"left":x0=viewRect.x;break;case"center":x0=viewRect.x+(viewRect.width-itemWidth)/2;break;case"right":x0=viewRect.x+viewRect.width-itemWidth}return[[x0,offY],[x0+itemWidth,offY]]};"ascending"===sort&&(itemHeight=-itemHeight,gap=-gap,y+=viewRect.height,indices=indices.reverse());for(var i=0;i<indices.length;i++){var idx=indices[i],nextIdx=indices[i+1],start=getLinePoints(idx,y),end=getLinePoints(nextIdx,y+itemHeight);y+=itemHeight+gap,data.setItemLayout(idx,{points:start.concat(end.slice().reverse())})}labelLayout(data)})}},function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);__webpack_require__(224),__webpack_require__(235),__webpack_require__(236),echarts.registerVisual(__webpack_require__(237))},function(module,exports,__webpack_require__){__webpack_require__(225),__webpack_require__(228),__webpack_require__(230);var echarts=__webpack_require__(1),zrUtil=__webpack_require__(4),CLICK_THRESHOLD=5;echarts.extendComponentView({type:"parallel",render:function(parallelModel,ecModel,api){var zr=api.getZr();if(!this.__onMouseDown){var mousedownPoint;zr.on("mousedown",this.__onMouseDown=function(e){mousedownPoint=[e.offsetX,e.offsetY]}),zr.on("mouseup",this.__onMouseUp=function(e){var point=[e.offsetX,e.offsetY],dist=Math.pow(mousedownPoint[0]-point[0],2)+Math.pow(mousedownPoint[1]-point[1],2);if(parallelModel.get("axisExpandable")&&!(dist>CLICK_THRESHOLD)){var coordSys=parallelModel.coordinateSystem,closestDim=coordSys.findClosestAxisDim(point);if(closestDim){var axisIndex=zrUtil.indexOf(coordSys.dimensions,closestDim);api.dispatchAction({type:"parallelAxisExpand",axisExpandCenter:axisIndex})}}})}},dispose:function(ecModel,api){api.getZr().off(this.__onMouseDown),api.getZr().off(this.__onMouseUp)}}),echarts.registerPreprocessor(__webpack_require__(234))},function(module,exports,__webpack_require__){function create(ecModel,api){var coordSysList=[];return ecModel.eachComponent("parallel",function(parallelModel,idx){var coordSys=new Parallel(parallelModel,ecModel,api);coordSys.name="parallel_"+idx,coordSys.resize(parallelModel,api),parallelModel.coordinateSystem=coordSys,coordSys.model=parallelModel,coordSysList.push(coordSys)}),ecModel.eachSeries(function(seriesModel){if("parallel"===seriesModel.get("coordinateSystem")){var parallelModel=ecModel.queryComponents({mainType:"parallel",index:seriesModel.get("parallelIndex"),id:seriesModel.get("parallelId")})[0];seriesModel.coordinateSystem=parallelModel.coordinateSystem}}),coordSysList}var Parallel=__webpack_require__(226);__webpack_require__(26).register("parallel",{create:create})},function(module,exports,__webpack_require__){function Parallel(parallelModel,ecModel,api){this._axesMap={},this._axesLayout={},this.dimensions=parallelModel.dimensions,this._rect,this._model=parallelModel,this._init(parallelModel,ecModel,api)}var layout=__webpack_require__(21),axisHelper=__webpack_require__(114),zrUtil=__webpack_require__(4),ParallelAxis=__webpack_require__(227),graphic=__webpack_require__(43),matrix=__webpack_require__(11),each=zrUtil.each,PI=Math.PI;Parallel.prototype={type:"parallel",constructor:Parallel,_init:function(parallelModel,ecModel,api){var dimensions=parallelModel.dimensions,parallelAxisIndex=parallelModel.parallelAxisIndex;each(dimensions,function(dim,idx){var axisIndex=parallelAxisIndex[idx],axisModel=ecModel.getComponent("parallelAxis",axisIndex),axis=this._axesMap[dim]=new ParallelAxis(dim,axisHelper.createScaleByModel(axisModel),[0,0],axisModel.get("type"),axisIndex),isCategory="category"===axis.type;axis.onBand=isCategory&&axisModel.get("boundaryGap"),axis.inverse=axisModel.get("inverse"),axisModel.axis=axis,axis.model=axisModel},this)},update:function(ecModel,api){this._updateAxesFromSeries(this._model,ecModel)},_updateAxesFromSeries:function(parallelModel,ecModel){ecModel.eachSeries(function(seriesModel){if(parallelModel.contains(seriesModel,ecModel)){var data=seriesModel.getData();each(this.dimensions,function(dim){var axis=this._axesMap[dim];axis.scale.unionExtent(data.getDataExtent(dim)),axisHelper.niceScaleExtent(axis,axis.model)},this)}},this)},resize:function(parallelModel,api){this._rect=layout.getLayoutRect(parallelModel.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()}),this._layoutAxes(parallelModel)},getRect:function(){return this._rect},_layoutAxes:function(parallelModel){var rect=this._rect,layout=parallelModel.get("layout"),axes=this._axesMap,dimensions=this.dimensions,size=[rect.width,rect.height],sizeIdx="horizontal"===layout?0:1,layoutLength=size[sizeIdx],axisLength=size[1-sizeIdx],axisExtent=[0,axisLength];each(axes,function(axis){var idx=axis.inverse?1:0;axis.setExtent(axisExtent[idx],axisExtent[1-idx])});var axisExpandWindow,axisExpandable=parallelModel.get("axisExpandable"),axisExpandWidth=parallelModel.get("axisExpandWidth"),axisExpandCenter=parallelModel.get("axisExpandCenter"),axisExpandCount=parallelModel.get("axisExpandCount")||0;if(null!=axisExpandCenter){var left=Math.max(0,Math.floor(axisExpandCenter-(axisExpandCount-1)/2)),right=left+axisExpandCount-1;right>=dimensions.length&&(right=dimensions.length-1,left=Math.max(0,Math.floor(right-axisExpandCount+1))),axisExpandWindow=[left,right]}var calcPos=axisExpandable&&axisExpandWindow&&axisExpandWidth?function(axisIndex,layoutLength,axisCount){var position,peekIntervalCount=axisExpandWindow[1]-axisExpandWindow[0],otherWidth=(layoutLength-axisExpandWidth*peekIntervalCount)/(axisCount-1-peekIntervalCount);return position=axisIndex<axisExpandWindow[0]?(axisIndex-1)*otherWidth:axisIndex<=axisExpandWindow[1]?axisExpandWindow[0]*otherWidth+(axisIndex-axisExpandWindow[0])*axisExpandWidth:axisIndex===axisCount-1?layoutLength:axisExpandWindow[0]*otherWidth+peekIntervalCount*axisExpandWidth+(axisIndex-axisExpandWindow[1])*otherWidth,{position:position,axisNameAvailableWidth:axisExpandWindow[0]<axisIndex&&axisIndex<axisExpandWindow[1]?axisExpandWidth:otherWidth}}:function(axisIndex,layoutLength,axisCount){var step=layoutLength/(axisCount-1);return{position:step*axisIndex,axisNameAvailableWidth:step}};each(dimensions,function(dim,idx){var posInfo=calcPos(idx,layoutLength,dimensions.length),positionTable={horizontal:{x:posInfo.position,y:axisLength},vertical:{x:0,y:posInfo.position}},rotationTable={horizontal:PI/2,vertical:0},position=[positionTable[layout].x+rect.x,positionTable[layout].y+rect.y],rotation=rotationTable[layout],transform=matrix.create();matrix.rotate(transform,transform,rotation),matrix.translate(transform,transform,position),this._axesLayout[dim]={position:position,rotation:rotation,transform:transform,axisNameAvailableWidth:posInfo.axisNameAvailableWidth,tickDirection:1,labelDirection:1,axisExpandWindow:axisExpandWindow}},this)},getAxis:function(dim){return this._axesMap[dim]},dataToPoint:function(value,dim){return this.axisCoordToPoint(this._axesMap[dim].dataToCoord(value),dim)},eachActiveState:function(data,callback,context){for(var dimensions=this.dimensions,axesMap=this._axesMap,hasActiveSet=this.hasAxisbrushed(),i=0,len=data.count();i<len;i++){var activeState,values=data.getValues(dimensions,i);if(hasActiveSet){activeState="active";for(var j=0,lenj=dimensions.length;j<lenj;j++){var dimName=dimensions[j],state=axesMap[dimName].model.getActiveState(values[j],j);if("inactive"===state){activeState="inactive";
break}}}else activeState="normal";callback.call(context,activeState,i)}},hasAxisbrushed:function(){for(var dimensions=this.dimensions,axesMap=this._axesMap,hasActiveSet=!1,j=0,lenj=dimensions.length;j<lenj;j++)"normal"!==axesMap[dimensions[j]].model.getActiveState()&&(hasActiveSet=!0);return hasActiveSet},axisCoordToPoint:function(coord,dim){var axisLayout=this._axesLayout[dim];return graphic.applyTransform([coord,0],axisLayout.transform)},getAxisLayout:function(dim){return zrUtil.clone(this._axesLayout[dim])},findClosestAxisDim:function(point){var axisDim,minDist=1/0;return zrUtil.each(this._axesLayout,function(axisLayout,dim){var localPoint=graphic.applyTransform(point,axisLayout.transform,!0),extent=this._axesMap[dim].getExtent();if(!(localPoint[0]<extent[0]||localPoint[0]>extent[1])){var dist=Math.abs(localPoint[1]);dist<minDist&&(minDist=dist,axisDim=dim)}},this),axisDim}},module.exports=Parallel},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4),Axis=__webpack_require__(123),ParallelAxis=function(dim,scale,coordExtent,axisType,axisIndex){Axis.call(this,dim,scale,coordExtent),this.type=axisType||"value",this.axisIndex=axisIndex};ParallelAxis.prototype={constructor:ParallelAxis,model:null},zrUtil.inherits(ParallelAxis,Axis),module.exports=ParallelAxis},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4),Component=__webpack_require__(19);__webpack_require__(229),Component.extend({type:"parallel",dependencies:["parallelAxis"],coordinateSystem:null,dimensions:null,parallelAxisIndex:null,layoutMode:"box",defaultOption:{zlevel:0,z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,parallelAxisDefault:null},init:function(){Component.prototype.init.apply(this,arguments),this.mergeOption({})},mergeOption:function(newOption){var thisOption=this.option;newOption&&zrUtil.merge(thisOption,newOption,!0),this._initDimensions()},contains:function(model,ecModel){var parallelIndex=model.get("parallelIndex");return null!=parallelIndex&&ecModel.getComponent("parallel",parallelIndex)===this},setAxisExpand:function(opt){zrUtil.each(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth"],function(name){opt.hasOwnProperty(name)&&(this.option[name]=opt[name])},this)},_initDimensions:function(){var dimensions=this.dimensions=[],parallelAxisIndex=this.parallelAxisIndex=[],axisModels=zrUtil.filter(this.dependentModels.parallelAxis,function(axisModel){return axisModel.get("parallelIndex")===this.componentIndex});zrUtil.each(axisModels,function(axisModel){dimensions.push("dim"+axisModel.get("dim")),parallelAxisIndex.push(axisModel.componentIndex)})}})},function(module,exports,__webpack_require__){function getAxisType(axisName,option){return option.type||(option.data?"category":"value")}var ComponentModel=__webpack_require__(19),zrUtil=__webpack_require__(4),makeStyleMapper=__webpack_require__(15),axisModelCreator=__webpack_require__(127),numberUtil=__webpack_require__(7),AxisModel=ComponentModel.extend({type:"baseParallelAxis",axis:null,activeIntervals:[],getAreaSelectStyle:function(){return makeStyleMapper([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]]).call(this.getModel("areaSelectStyle"))},setActiveIntervals:function(intervals){var activeIntervals=this.activeIntervals=zrUtil.clone(intervals);if(activeIntervals)for(var i=activeIntervals.length-1;i>=0;i--)numberUtil.asc(activeIntervals[i])},getActiveState:function(value){var activeIntervals=this.activeIntervals;if(!activeIntervals.length)return"normal";if(null==value)return"inactive";for(var i=0,len=activeIntervals.length;i<len;i++)if(activeIntervals[i][0]<=value&&value<=activeIntervals[i][1])return"active";return"inactive"}}),defaultOption={type:"value",dim:null,areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};zrUtil.merge(AxisModel.prototype,__webpack_require__(129)),axisModelCreator("parallel",AxisModel,getAxisType,defaultOption),module.exports=AxisModel},function(module,exports,__webpack_require__){__webpack_require__(225),__webpack_require__(231),__webpack_require__(232)},function(module,exports,__webpack_require__){var echarts=__webpack_require__(1),actionInfo={type:"axisAreaSelect",event:"axisAreaSelected",update:"updateVisual"};echarts.registerAction(actionInfo,function(payload,ecModel){ecModel.eachComponent({mainType:"parallelAxis",query:payload},function(parallelAxisModel){parallelAxisModel.axis.model.setActiveIntervals(payload.intervals)})}),echarts.registerAction("parallelAxisExpand",function(payload,ecModel){ecModel.eachComponent({mainType:"parallel",query:payload},function(parallelModel){parallelModel.setAxisExpand(payload)})})},function(module,exports,__webpack_require__){function fromAxisAreaSelect(axisModel,ecModel,payload){return payload&&"axisAreaSelect"===payload.type&&ecModel.findComponents({mainType:"parallelAxis",query:payload})[0]===axisModel}var zrUtil=__webpack_require__(4),AxisBuilder=__webpack_require__(132),BrushController=__webpack_require__(233),graphic=__webpack_require__(43),elementList=["axisLine","axisLabel","axisTick","axisName"],AxisView=__webpack_require__(1).extendComponentView({type:"parallelAxis",init:function(ecModel,api){AxisView.superApply(this,"init",arguments),(this._brushController=new BrushController(api.getZr())).on("brush",zrUtil.bind(this._onBrush,this))},render:function(axisModel,ecModel,api,payload){if(!fromAxisAreaSelect(axisModel,ecModel,payload)){this.axisModel=axisModel,this.api=api,this.group.removeAll();var oldAxisGroup=this._axisGroup;if(this._axisGroup=new graphic.Group,this.group.add(this._axisGroup),axisModel.get("show")){var axisLabelShow,coordSys=ecModel.getComponent("parallel",axisModel.get("parallelIndex")).coordinateSystem,areaSelectStyle=axisModel.getAreaSelectStyle(),areaWidth=areaSelectStyle.width,dim=axisModel.axis.dim,axisLayout=coordSys.getAxisLayout(dim),axisIndex=zrUtil.indexOf(coordSys.dimensions,dim),axisExpandWindow=axisLayout.axisExpandWindow;axisExpandWindow&&(axisIndex<=axisExpandWindow[0]||axisIndex>=axisExpandWindow[1])&&(axisLabelShow=!1);var builderOpt=zrUtil.extend({axisLabelShow:axisLabelShow,strokeContainThreshold:areaWidth},axisLayout),axisBuilder=new AxisBuilder(axisModel,builderOpt);zrUtil.each(elementList,axisBuilder.add,axisBuilder),this._axisGroup.add(axisBuilder.getGroup()),this._refreshBrushController(builderOpt,areaSelectStyle,axisModel,areaWidth),graphic.groupTransition(oldAxisGroup,this._axisGroup,axisModel)}}},_refreshBrushController:function(builderOpt,areaSelectStyle,axisModel,areaWidth){var axis=axisModel.axis,coverInfoList=zrUtil.map(axisModel.activeIntervals,function(interval){return{brushType:"lineX",panelId:"pl",range:[axis.dataToCoord(interval[0],!0),axis.dataToCoord(interval[1],!0)]}}),extent=axis.getExtent(),extra=30,rect={x:extent[0]-extra,y:-areaWidth/2,width:extent[1]-extent[0]+2*extra,height:areaWidth};this._brushController.mount({enableGlobalPan:!0,rotation:builderOpt.rotation,position:builderOpt.position}).setPanels([{panelId:"pl",rect:rect}]).enableBrush({brushType:"lineX",brushStyle:areaSelectStyle,removeOnClick:!0}).updateCovers(coverInfoList)},_onBrush:function(coverInfoList,opt){var axisModel=this.axisModel,axis=axisModel.axis,intervals=zrUtil.map(coverInfoList,function(coverInfo){return[axis.coordToData(coverInfo.range[0],!0),axis.coordToData(coverInfo.range[1],!0)]});(!axisModel.option.realtime===opt.isEnd||opt.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:axisModel.id,intervals:intervals})},dispose:function(){this._brushController.dispose()}});module.exports=AxisView},function(module,exports,__webpack_require__){function BrushController(zr){zrUtil.assert(zr),Eventful.call(this),this._zr=zr,this.group=new graphic.Group,this._brushType,this._brushOption,this._panels,this._track=[],this._dragging,this._covers=[],this._creatingCover,this._creatingPanel,this._enableGlobalPan,this._mounted,this._uid="brushController_"+baseUID++,this._handlers={},each(mouseHandlers,function(handler,eventName){this._handlers[eventName]=zrUtil.bind(handler,this)},this)}function doEnableBrush(controller,brushOption){var zr=controller._zr;controller._enableGlobalPan||interactionMutex.take(zr,MUTEX_RESOURCE_KEY,controller._uid),each(controller._handlers,function(handler,eventName){zr.on(eventName,handler)}),controller._brushType=brushOption.brushType,controller._brushOption=zrUtil.merge(zrUtil.clone(DEFAULT_BRUSH_OPT),brushOption,!0)}function doDisableBrush(controller){var zr=controller._zr;interactionMutex.release(zr,MUTEX_RESOURCE_KEY,controller._uid),each(controller._handlers,function(handler,eventName){zr.off(eventName,handler)}),controller._brushType=controller._brushOption=null}function createCover(controller,brushOption){var cover=coverRenderers[brushOption.brushType].createCover(controller,brushOption);return updateZ(cover),cover.__brushOption=brushOption,controller.group.add(cover),cover}function endCreating(controller,creatingCover){var coverRenderer=getCoverRenderer(creatingCover);return coverRenderer.endCreating&&(coverRenderer.endCreating(controller,creatingCover),updateZ(creatingCover)),creatingCover}function updateCoverShape(controller,cover){var brushOption=cover.__brushOption;getCoverRenderer(cover).updateCoverShape(controller,cover,brushOption.range,brushOption)}function updateZ(group){group.traverse(function(el){el.z=COVER_Z,el.z2=COVER_Z})}function updateCoverAfterCreation(controller,cover){getCoverRenderer(cover).updateCommon(controller,cover),updateCoverShape(controller,cover)}function getCoverRenderer(cover){return coverRenderers[cover.__brushOption.brushType]}function getPanelByPoint(controller,x,y){var panels=controller._panels;if(!panels)return!0;var panel;return each(panels,function(pn){pn.contain(x,y)&&(panel=pn)}),panel}function getPanelByCover(controller,cover){var panels=controller._panels;if(!panels)return!0;var panelId=cover.__brushOption.panelId;return null==panelId||panels[panelId]}function clearCovers(controller){var covers=controller._covers,originalLength=covers.length;return each(covers,function(cover){controller.group.remove(cover)},controller),covers.length=0,!!originalLength}function trigger(controller,opt){var areas=map(controller._covers,function(cover){var brushOption=cover.__brushOption,range=zrUtil.clone(brushOption.range);return{brushType:brushOption.brushType,panelId:brushOption.panelId,range:range}});controller.trigger("brush",areas,{isEnd:!!opt.isEnd,removeOnClick:!!opt.removeOnClick})}function shouldShowCover(controller){var track=controller._track;if(!track.length)return!1;var p2=track[track.length-1],p1=track[0],dx=p2[0]-p1[0],dy=p2[1]-p1[1],dist=mathPow(dx*dx+dy*dy,.5);return dist>UNSELECT_THRESHOLD}function getTrackEnds(track){var tail=track.length-1;return tail<0&&(tail=0),[track[0],track[tail]]}function createBaseRectCover(doDrift,controller,brushOption,edgeNames){var cover=new graphic.Group;return cover.add(new graphic.Rect({name:"main",style:makeStyle(brushOption),silent:!0,draggable:!0,cursor:"move",drift:curry(doDrift,controller,cover,"nswe"),ondragend:curry(trigger,controller,{isEnd:!0})})),each(edgeNames,function(name){cover.add(new graphic.Rect({name:name,style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:curry(doDrift,controller,cover,name),ondragend:curry(trigger,controller,{isEnd:!0})}))}),cover}function updateBaseRect(controller,cover,localRange,brushOption){var lineWidth=brushOption.brushStyle.lineWidth||0,handleSize=mathMax(lineWidth,MIN_RESIZE_LINE_WIDTH),x=localRange[0][0],y=localRange[1][0],xa=x-lineWidth/2,ya=y-lineWidth/2,x2=localRange[0][1],y2=localRange[1][1],x2a=x2-handleSize+lineWidth/2,y2a=y2-handleSize+lineWidth/2,width=x2-x,height=y2-y,widtha=width+lineWidth,heighta=height+lineWidth;updateRectShape(controller,cover,"main",x,y,width,height),brushOption.transformable&&(updateRectShape(controller,cover,"w",xa,ya,handleSize,heighta),updateRectShape(controller,cover,"e",x2a,ya,handleSize,heighta),updateRectShape(controller,cover,"n",xa,ya,widtha,handleSize),updateRectShape(controller,cover,"s",xa,y2a,widtha,handleSize),updateRectShape(controller,cover,"nw",xa,ya,handleSize,handleSize),updateRectShape(controller,cover,"ne",x2a,ya,handleSize,handleSize),updateRectShape(controller,cover,"sw",xa,y2a,handleSize,handleSize),updateRectShape(controller,cover,"se",x2a,y2a,handleSize,handleSize))}function updateCommon(controller,cover){var brushOption=cover.__brushOption,transformable=brushOption.transformable,mainEl=cover.childAt(0);mainEl.useStyle(makeStyle(brushOption)),mainEl.attr({silent:!transformable,cursor:transformable?"move":"default"}),each(["w","e","n","s","se","sw","ne","nw"],function(name){var el=cover.childOfName(name),globalDir=getGlobalDirection(controller,name);el&&el.attr({silent:!transformable,invisible:!transformable,cursor:transformable?CURSOR_MAP[globalDir]+"-resize":null})})}function updateRectShape(controller,cover,name,x,y,w,h){var el=cover.childOfName(name);el&&el.setShape(pointsToRect(clipByPanel(controller,cover,[[x,y],[x+w,y+h]])))}function makeStyle(brushOption){return zrUtil.defaults({strokeNoScale:!0},brushOption.brushStyle)}function formatRectRange(x,y,x2,y2){var min=[mathMin(x,x2),mathMin(y,y2)],max=[mathMax(x,x2),mathMax(y,y2)];return[[min[0],max[0]],[min[1],max[1]]]}function getTransform(controller){return graphic.getTransform(controller.group)}function getGlobalDirection(controller,localDirection){if(localDirection.length>1){localDirection=localDirection.split("");var globalDir=[getGlobalDirection(controller,localDirection[0]),getGlobalDirection(controller,localDirection[1])];return("e"===globalDir[0]||"w"===globalDir[0])&&globalDir.reverse(),globalDir.join("")}var map={w:"left",e:"right",n:"top",s:"bottom"},inverseMap={left:"w",right:"e",top:"n",bottom:"s"},globalDir=graphic.transformDirection(map[localDirection],getTransform(controller));return inverseMap[globalDir]}function driftRect(toRectRange,fromRectRange,controller,cover,name,dx,dy,e){var brushOption=cover.__brushOption,rectRange=toRectRange(brushOption.range),localDelta=toLocalDelta(controller,dx,dy);each(name.split(""),function(namePart){var ind=DIRECTION_MAP[namePart];rectRange[ind[0]][ind[1]]+=localDelta[ind[0]]}),brushOption.range=fromRectRange(formatRectRange(rectRange[0][0],rectRange[1][0],rectRange[0][1],rectRange[1][1])),updateCoverAfterCreation(controller,cover),trigger(controller,{isEnd:!1})}function driftPolygon(controller,cover,dx,dy,e){var range=cover.__brushOption.range,localDelta=toLocalDelta(controller,dx,dy);each(range,function(point){point[0]+=localDelta[0],point[1]+=localDelta[1]}),updateCoverAfterCreation(controller,cover),trigger(controller,{isEnd:!1})}function toLocalDelta(controller,dx,dy){var thisGroup=controller.group,localD=thisGroup.transformCoordToLocal(dx,dy),localZero=thisGroup.transformCoordToLocal(0,0);return[localD[0]-localZero[0],localD[1]-localZero[1]]}function clipByPanel(controller,cover,data){var panel=getPanelByCover(controller,cover);if(panel===!0)return zrUtil.clone(data);var panelRect=panel.getBoundingRect();return zrUtil.map(data,function(point){var x=point[0];x=mathMax(x,panelRect.x),x=mathMin(x,panelRect.x+panelRect.width);var y=point[1];return y=mathMax(y,panelRect.y),y=mathMin(y,panelRect.y+panelRect.height),[x,y]})}function pointsToRect(points){var xmin=mathMin(points[0][0],points[1][0]),ymin=mathMin(points[0][1],points[1][1]),xmax=mathMax(points[0][0],points[1][0]),ymax=mathMax(points[0][1],points[1][1]);return{x:xmin,y:ymin,width:xmax-xmin,height:ymax-ymin}}function resetCursor(controller,e){var x=e.offsetX,y=e.offsetY,zr=controller._zr;if(controller._brushType){for(var inCover,panels=controller._panels,covers=controller._covers,i=0;i<covers.length;i++)if(coverRenderers[covers[i].__brushOption.brushType].contain(covers[i],x,y)){inCover=!0;break}inCover||(panels?each(panels,function(panel){panel.contain(x,y)&&zr.setCursorStyle("crosshair")}):zr.setCursorStyle("crosshair"))}}function preventDefault(e){var rawE=e.event;rawE.preventDefault&&rawE.preventDefault()}function mainShapeContain(cover,x,y){return cover.childOfName("main").contain(x,y)}function updateCoverByMouse(controller,e,isEnd){var eventParams,x=e.offsetX,y=e.offsetY,creatingCover=controller._creatingCover,panel=controller._creatingPanel,thisBrushOption=controller._brushOption;if(controller._track.push(controller.group.transformCoordToLocal(x,y)),shouldShowCover(controller)||creatingCover){if(panel&&!creatingCover){"single"===thisBrushOption.brushMode&&clearCovers(controller);var brushOption=zrUtil.clone(thisBrushOption);brushOption.panelId=panel===!0?null:panel.__brushPanelId,creatingCover=controller._creatingCover=createCover(controller,brushOption),controller._covers.push(creatingCover)}if(creatingCover){var coverRenderer=coverRenderers[controller._brushType],coverBrushOption=creatingCover.__brushOption;coverBrushOption.range=coverRenderer.getCreatingRange(clipByPanel(controller,creatingCover,controller._track)),isEnd&&(endCreating(controller,creatingCover),coverRenderer.updateCommon(controller,creatingCover)),updateCoverShape(controller,creatingCover),eventParams={isEnd:isEnd}}}else isEnd&&"single"===thisBrushOption.brushMode&&thisBrushOption.removeOnClick&&getPanelByPoint(controller,x,y)&&clearCovers(controller)&&(eventParams={isEnd:isEnd,removeOnClick:!0});return eventParams}function handleDragEnd(e){if(this._dragging){preventDefault(e);var eventParams=updateCoverByMouse(this,e,!0);this._dragging=!1,this._track=[],this._creatingCover=null,eventParams&&trigger(this,eventParams)}}function getLineRenderer(xyIndex){return{createCover:function(controller,brushOption){return createBaseRectCover(curry(driftRect,function(range){var rectRange=[range,[0,100]];return xyIndex&&rectRange.reverse(),rectRange},function(rectRange){return rectRange[xyIndex]}),controller,brushOption,[["w","e"],["n","s"]][xyIndex])},getCreatingRange:function(localTrack){var ends=getTrackEnds(localTrack),min=mathMin(ends[0][xyIndex],ends[1][xyIndex]),max=mathMax(ends[0][xyIndex],ends[1][xyIndex]);return[min,max]},updateCoverShape:function(controller,cover,localRange,brushOption){var otherExtent,brushWidth=brushOption.brushStyle.width;if(null==brushWidth){var panel=getPanelByCover(controller,cover),base=0;if(panel!==!0){var rect=panel.getBoundingRect();brushWidth=xyIndex?rect.width:rect.height,base=xyIndex?rect.x:rect.y}otherExtent=[base,base+(brushWidth||0)]}else otherExtent=[-brushWidth/2,brushWidth/2];var rectRange=[localRange,otherExtent];xyIndex&&rectRange.reverse(),updateBaseRect(controller,cover,rectRange,brushOption)},updateCommon:updateCommon,contain:mainShapeContain}}var Eventful=__webpack_require__(33),zrUtil=__webpack_require__(4),graphic=__webpack_require__(43),interactionMutex=__webpack_require__(175),DataDiffer=__webpack_require__(98),curry=zrUtil.curry,each=zrUtil.each,map=zrUtil.map,mathMin=Math.min,mathMax=Math.max,mathPow=Math.pow,COVER_Z=1e4,UNSELECT_THRESHOLD=6,MIN_RESIZE_LINE_WIDTH=6,MUTEX_RESOURCE_KEY="globalPan",DIRECTION_MAP={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},CURSOR_MAP={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},DEFAULT_BRUSH_OPT={brushStyle:{lineWidth:2,stroke:"rgba(0,0,0,0.3)",fill:"rgba(0,0,0,0.1)"},transformable:!0,brushMode:"single",removeOnClick:!1},baseUID=0;BrushController.prototype={constructor:BrushController,enableBrush:function(brushOption){return zrUtil.assert(this._mounted),this._brushType&&doDisableBrush(this),brushOption.brushType&&doEnableBrush(this,brushOption),this},setPanels:function(panelOpts){var oldPanels=this._panels||{},newPanels=this._panels=panelOpts&&panelOpts.length&&{},thisGroup=this.group;return newPanels&&each(panelOpts,function(panelOpt){var panelId=panelOpt.panelId,panel=oldPanels[panelId];panel||(panel=new graphic.Rect({silent:!0,invisible:!0}),thisGroup.add(panel)),panel.attr("shape",panelOpt.rect),panel.__brushPanelId=panelId,newPanels[panelId]=panel,oldPanels[panelId]=null}),each(oldPanels,function(panel){panel&&thisGroup.remove(panel)}),this},mount:function(opt){opt=opt||{},this._mounted=!0,this._enableGlobalPan=opt.enableGlobalPan;var thisGroup=this.group;return this._zr.add(thisGroup),thisGroup.attr({position:opt.position||[0,0],rotation:opt.rotation||0,scale:opt.scale||[1,1]}),this},eachCover:function(cb,context){each(this._covers,cb,context)},updateCovers:function(brushOptionList){function getKey(brushOption,index){return(null!=brushOption.id?brushOption.id:tmpIdPrefix+index)+"-"+brushOption.brushType}function oldGetKey(cover,index){return getKey(cover.__brushOption,index)}function addOrUpdate(newIndex,oldIndex){var newBrushOption=brushOptionList[newIndex];if(null!=oldIndex&&oldCovers[oldIndex]===creatingCover)newCovers[newIndex]=oldCovers[oldIndex];else{var cover=newCovers[newIndex]=null!=oldIndex?(oldCovers[oldIndex].__brushOption=newBrushOption,oldCovers[oldIndex]):endCreating(controller,createCover(controller,newBrushOption));updateCoverAfterCreation(controller,cover)}}function remove(oldIndex){oldCovers[oldIndex]!==creatingCover&&controller.group.remove(oldCovers[oldIndex])}zrUtil.assert(this._mounted),brushOptionList=zrUtil.map(brushOptionList,function(brushOption){return zrUtil.merge(zrUtil.clone(DEFAULT_BRUSH_OPT),brushOption,!0)});var tmpIdPrefix="\0-brush-index-",oldCovers=this._covers,newCovers=this._covers=[],controller=this,creatingCover=this._creatingCover;return new DataDiffer(oldCovers,brushOptionList,oldGetKey,getKey).add(addOrUpdate).update(addOrUpdate).remove(remove).execute(),this},unmount:function(){return this.enableBrush(!1),clearCovers(this),this._zr.remove(this.group),this._mounted=!1,this},dispose:function(){this.unmount(),this.off()}},zrUtil.mixin(BrushController,Eventful);var mouseHandlers={mousedown:function(e){if(this._dragging)handleDragEnd.call(this,e);else if(!e.target||!e.target.draggable){preventDefault(e);var x=e.offsetX,y=e.offsetY;this._creatingCover=null;var panel=this._creatingPanel=getPanelByPoint(this,x,y);panel&&(this._dragging=!0,this._track=[this.group.transformCoordToLocal(x,y)])}},mousemove:function(e){if(resetCursor(this,e),this._dragging){preventDefault(e);var eventParams=updateCoverByMouse(this,e,!1);eventParams&&trigger(this,eventParams)}},mouseup:handleDragEnd},coverRenderers={lineX:getLineRenderer(0),lineY:getLineRenderer(1),rect:{createCover:function(controller,brushOption){return createBaseRectCover(curry(driftRect,function(range){return range},function(range){return range}),controller,brushOption,["w","e","n","s","se","sw","ne","nw"])},getCreatingRange:function(localTrack){var ends=getTrackEnds(localTrack);return formatRectRange(ends[1][0],ends[1][1],ends[0][0],ends[0][1])},updateCoverShape:function(controller,cover,localRange,brushOption){updateBaseRect(controller,cover,localRange,brushOption)},updateCommon:updateCommon,contain:mainShapeContain},polygon:{createCover:function(controller,brushOption){var cover=new graphic.Group;return cover.add(new graphic.Polyline({name:"main",style:makeStyle(brushOption),silent:!0})),cover},getCreatingRange:function(localTrack){return localTrack},endCreating:function(controller,cover){cover.remove(cover.childAt(0)),cover.add(new graphic.Polygon({name:"main",draggable:!0,drift:curry(driftPolygon,controller,cover),ondragend:curry(trigger,controller,{isEnd:!0})}))},updateCoverShape:function(controller,cover,localRange,brushOption){cover.childAt(0).setShape({points:clipByPanel(controller,cover,localRange)})},updateCommon:updateCommon,contain:mainShapeContain}};module.exports=BrushController},function(module,exports,__webpack_require__){function createParallelIfNeeded(option){if(!option.parallel){var hasParallelSeries=!1;zrUtil.each(option.series,function(seriesOpt){seriesOpt&&"parallel"===seriesOpt.type&&(hasParallelSeries=!0)}),hasParallelSeries&&(option.parallel=[{}])}}function mergeAxisOptionFromParallel(option){var axes=modelUtil.normalizeToArray(option.parallelAxis);zrUtil.each(axes,function(axisOption){if(zrUtil.isObject(axisOption)){var parallelIndex=axisOption.parallelIndex||0,parallelOption=modelUtil.normalizeToArray(option.parallel)[parallelIndex];parallelOption&&parallelOption.parallelAxisDefault&&zrUtil.merge(axisOption,parallelOption.parallelAxisDefault,!1)}})}var zrUtil=__webpack_require__(4),modelUtil=__webpack_require__(5);module.exports=function(option){createParallelIfNeeded(option),mergeAxisOptionFromParallel(option)}},function(module,exports,__webpack_require__){function translateCategoryValue(axisModel,dim,rawData){var axisData=axisModel.get("data"),numberDim=convertDimNameToNumber(dim);axisData&&axisData.length&&zrUtil.each(rawData,function(dataItem){if(dataItem){var index=zrUtil.indexOf(axisData,dataItem[numberDim]);dataItem[numberDim]=index>=0?index:NaN}})}function convertDimNameToNumber(dimName){return+dimName.replace("dim","")}function generateDataDims(modelDims,rawData){var maxDimNum=0;zrUtil.each(modelDims,function(dimName){var numberDim=convertDimNameToNumber(dimName);numberDim>maxDimNum&&(maxDimNum=numberDim)});var firstItem=rawData[0];firstItem&&firstItem.length-1>maxDimNum&&(maxDimNum=firstItem.length-1);for(var dataDims=[],i=0;i<=maxDimNum;i++)dataDims.push("dim"+i);return dataDims}var List=__webpack_require__(97),zrUtil=__webpack_require__(4),SeriesModel=__webpack_require__(28),completeDimensions=__webpack_require__(102);module.exports=SeriesModel.extend({type:"series.parallel",dependencies:["parallel"],getInitialData:function(option,ecModel){var parallelModel=ecModel.getComponent("parallel",this.get("parallelIndex")),parallelAxisIndices=parallelModel.parallelAxisIndex,rawData=option.data,modelDims=parallelModel.dimensions,dataDims=generateDataDims(modelDims,rawData),dataDimsInfo=zrUtil.map(dataDims,function(dim,dimIndex){var modelDimsIndex=zrUtil.indexOf(modelDims,dim),axisModel=modelDimsIndex>=0&&ecModel.getComponent("parallelAxis",parallelAxisIndices[modelDimsIndex]);return axisModel&&"category"===axisModel.get("type")?(translateCategoryValue(axisModel,dim,rawData),{name:dim,type:"ordinal"}):modelDimsIndex<0&&completeDimensions.guessOrdinal(rawData,dimIndex)?{name:dim,type:"ordinal"}:dim}),list=new List(dataDimsInfo,this);return list.initData(rawData),this.option.progressive&&(this.option.animation=!1),list},getRawIndicesByActiveState:function(activeState){var coordSys=this.coordinateSystem,data=this.getData(),indices=[];return coordSys.eachActiveState(data,function(theActiveState,dataIndex){activeState===theActiveState&&indices.push(data.getRawIndex(dataIndex))}),indices},defaultOption:{zlevel:0,z:2,coordinateSystem:"parallel",parallelIndex:0,label:{normal:{show:!1},emphasis:{show:!1}},inactiveOpacity:.05,activeOpacity:1,lineStyle:{normal:{width:1,opacity:.45,type:"solid"}},progressive:!1,smooth:!1,animationEasing:"linear"}})},function(module,exports,__webpack_require__){function createGridClipShape(coordSys,seriesModel,cb){var parallelModel=coordSys.model,rect=coordSys.getRect(),rectEl=new graphic.Rect({shape:{x:rect.x,y:rect.y,width:rect.width,height:rect.height}}),dim="horizontal"===parallelModel.get("layout")?"width":"height";return rectEl.setShape(dim,0),graphic.initProps(rectEl,{shape:{width:rect.width,height:rect.height}},seriesModel,cb),rectEl}function createLinePoints(data,dataIndex,dimensions,coordSys){for(var points=[],i=0;i<dimensions.length;i++){var dimName=dimensions[i],value=data.get(dimName,dataIndex);isEmptyValue(value,coordSys.getAxis(dimName).type)||points.push(coordSys.dataToPoint(value,dimName))}return points}function addEl(data,dataGroup,dataIndex,dimensions,coordSys){var points=createLinePoints(data,dataIndex,dimensions,coordSys),line=new graphic.Polyline({shape:{points:points},silent:!0,z2:10});dataGroup.add(line),data.setItemGraphicEl(dataIndex,line)}function updateElCommon(data,smooth){var seriesStyleModel=data.hostModel.getModel("lineStyle.normal"),lineStyle=seriesStyleModel.getLineStyle();data.eachItemGraphicEl(function(line,dataIndex){if(data.hasItemOption){var itemModel=data.getItemModel(dataIndex),lineStyleModel=itemModel.getModel("lineStyle.normal",seriesStyleModel);lineStyle=lineStyleModel.getLineStyle()}line.useStyle(zrUtil.extend(lineStyle,{fill:null,stroke:data.getItemVisual(dataIndex,"color"),opacity:data.getItemVisual(dataIndex,"opacity")})),line.shape.smooth=smooth})}function isEmptyValue(val,axisType){return"category"===axisType?null==val:null==val||isNaN(val)}var graphic=__webpack_require__(43),zrUtil=__webpack_require__(4),SMOOTH=.3,ParallelView=__webpack_require__(42).extend({type:"parallel",init:function(){this._dataGroup=new graphic.Group,this.group.add(this._dataGroup),this._data},render:function(seriesModel,ecModel,api,payload){this._renderForNormal(seriesModel)},_renderForNormal:function(seriesModel){function add(newDataIndex){addEl(data,dataGroup,newDataIndex,dimensions,coordSys,null,smooth)}function update(newDataIndex,oldDataIndex){var line=oldData.getItemGraphicEl(oldDataIndex),points=createLinePoints(data,newDataIndex,dimensions,coordSys);data.setItemGraphicEl(newDataIndex,line),graphic.updateProps(line,{shape:{points:points}},seriesModel,newDataIndex)}function remove(oldDataIndex){var line=oldData.getItemGraphicEl(oldDataIndex);dataGroup.remove(line)}var dataGroup=this._dataGroup,data=seriesModel.getData(),oldData=this._data,coordSys=seriesModel.coordinateSystem,dimensions=coordSys.dimensions,option=seriesModel.option,smooth=option.smooth?SMOOTH:null;if(data.diff(oldData).add(add).update(update).remove(remove).execute(),updateElCommon(data,smooth),!this._data){var clipPath=createGridClipShape(coordSys,seriesModel,function(){setTimeout(function(){dataGroup.removeClipPath()})});dataGroup.setClipPath(clipPath)}this._data=data},remove:function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null}});module.exports=ParallelView},function(module,exports){module.exports=function(ecModel){ecModel.eachSeriesByType("parallel",function(seriesModel){var itemStyleModel=seriesModel.getModel("itemStyle.normal"),lineStyleModel=seriesModel.getModel("lineStyle.normal"),globalColors=ecModel.get("color"),color=lineStyleModel.get("color")||itemStyleModel.get("color")||globalColors[seriesModel.seriesIndex%globalColors.length],inactiveOpacity=seriesModel.get("inactiveOpacity"),activeOpacity=seriesModel.get("activeOpacity"),lineStyle=seriesModel.getModel("lineStyle.normal").getLineStyle(),coordSys=seriesModel.coordinateSystem,data=seriesModel.getData(),opacityMap={normal:lineStyle.opacity,active:activeOpacity,inactive:inactiveOpacity};coordSys.eachActiveState(data,function(activeState,dataIndex){data.setItemVisual(dataIndex,"opacity",opacityMap[activeState])}),data.setVisual("color",color)})}},function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);__webpack_require__(239),__webpack_require__(240),echarts.registerLayout(__webpack_require__(241)),echarts.registerVisual(__webpack_require__(243))},function(module,exports,__webpack_require__){var SeriesModel=__webpack_require__(28),createGraphFromNodeEdge=__webpack_require__(196),SankeySeries=SeriesModel.extend({type:"series.sankey",layoutInfo:null,getInitialData:function(option){var links=option.edges||option.links,nodes=option.data||option.nodes;if(nodes&&links){var graph=createGraphFromNodeEdge(nodes,links,this,!0);return graph.data}},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},formatTooltip:function(dataIndex,multipleSeries,dataType){if("edge"===dataType){var params=this.getDataParams(dataIndex,dataType),rawDataOpt=params.data,html=rawDataOpt.source+" -- "+rawDataOpt.target;return params.value&&(html+=" : "+params.value),html}return SankeySeries.superCall(this,"formatTooltip",dataIndex,multipleSeries)},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",layout:null,left:"5%",top:"5%",right:"20%",bottom:"5%",
nodeWidth:20,nodeGap:8,layoutIterations:32,label:{normal:{show:!0,position:"right",textStyle:{color:"#000",fontSize:12}},emphasis:{show:!0}},itemStyle:{normal:{borderWidth:1,borderColor:"#333"}},lineStyle:{normal:{color:"#314656",opacity:.2,curveness:.5},emphasis:{opacity:.6}},animationEasing:"linear",animationDuration:1e3}});module.exports=SankeySeries},function(module,exports,__webpack_require__){function createGridClipShape(rect,seriesModel,cb){var rectEl=new graphic.Rect({shape:{x:rect.x-10,y:rect.y-10,width:0,height:rect.height+20}});return graphic.initProps(rectEl,{shape:{width:rect.width+20,height:rect.height+20}},seriesModel,cb),rectEl}var graphic=__webpack_require__(43),zrUtil=__webpack_require__(4),SankeyShape=graphic.extendShape({shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,extent:0},buildPath:function(ctx,shape){var halfExtent=shape.extent/2;ctx.moveTo(shape.x1,shape.y1-halfExtent),ctx.bezierCurveTo(shape.cpx1,shape.cpy1-halfExtent,shape.cpx2,shape.cpy2-halfExtent,shape.x2,shape.y2-halfExtent),ctx.lineTo(shape.x2,shape.y2+halfExtent),ctx.bezierCurveTo(shape.cpx2,shape.cpy2+halfExtent,shape.cpx1,shape.cpy1+halfExtent,shape.x1,shape.y1+halfExtent),ctx.closePath()}});module.exports=__webpack_require__(1).extendChartView({type:"sankey",_model:null,render:function(seriesModel,ecModel,api){var graph=seriesModel.getGraph(),group=this.group,layoutInfo=seriesModel.layoutInfo,nodeData=seriesModel.getData(),edgeData=seriesModel.getData("edge");this._model=seriesModel,group.removeAll(),group.position=[layoutInfo.x,layoutInfo.y],graph.eachEdge(function(edge){var curve=new SankeyShape;curve.dataIndex=edge.dataIndex,curve.seriesIndex=seriesModel.seriesIndex,curve.dataType="edge";var lineStyleModel=edge.getModel("lineStyle.normal"),curvature=lineStyleModel.get("curveness"),n1Layout=edge.node1.getLayout(),n2Layout=edge.node2.getLayout(),edgeLayout=edge.getLayout();curve.shape.extent=Math.max(1,edgeLayout.dy);var x1=n1Layout.x+n1Layout.dx,y1=n1Layout.y+edgeLayout.sy+edgeLayout.dy/2,x2=n2Layout.x,y2=n2Layout.y+edgeLayout.ty+edgeLayout.dy/2,cpx1=x1*(1-curvature)+x2*curvature,cpy1=y1,cpx2=x1*curvature+x2*(1-curvature),cpy2=y2;switch(curve.setShape({x1:x1,y1:y1,x2:x2,y2:y2,cpx1:cpx1,cpy1:cpy1,cpx2:cpx2,cpy2:cpy2}),curve.setStyle(lineStyleModel.getItemStyle()),curve.style.fill){case"source":curve.style.fill=edge.node1.getVisual("color");break;case"target":curve.style.fill=edge.node2.getVisual("color")}graphic.setHoverStyle(curve,edge.getModel("lineStyle.emphasis").getItemStyle()),group.add(curve),edgeData.setItemGraphicEl(edge.dataIndex,curve)}),graph.eachNode(function(node){var layout=node.getLayout(),itemModel=node.getModel(),labelModel=itemModel.getModel("label.normal"),textStyleModel=labelModel.getModel("textStyle"),labelHoverModel=itemModel.getModel("label.emphasis"),textStyleHoverModel=labelHoverModel.getModel("textStyle"),rect=new graphic.Rect({shape:{x:layout.x,y:layout.y,width:node.getLayout().dx,height:node.getLayout().dy},style:{text:labelModel.get("show")?seriesModel.getFormattedLabel(node.dataIndex,"normal")||node.id:"",textFont:textStyleModel.getFont(),textFill:textStyleModel.getTextColor(),textPosition:labelModel.get("position")}});rect.setStyle(zrUtil.defaults({fill:node.getVisual("color")},itemModel.getModel("itemStyle.normal").getItemStyle())),graphic.setHoverStyle(rect,zrUtil.extend(node.getModel("itemStyle.emphasis"),{text:labelHoverModel.get("show")?seriesModel.getFormattedLabel(node.dataIndex,"emphasis")||node.id:"",textFont:textStyleHoverModel.getFont(),textFill:textStyleHoverModel.getTextColor(),textPosition:labelHoverModel.get("position")})),group.add(rect),nodeData.setItemGraphicEl(node.dataIndex,rect),rect.dataType="node"}),!this._data&&seriesModel.get("animation")&&group.setClipPath(createGridClipShape(group.getBoundingRect(),seriesModel,function(){group.removeClipPath()})),this._data=seriesModel.getData()}})},function(module,exports,__webpack_require__){function getViewRect(seriesModel,api){return layout.getLayoutRect(seriesModel.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()})}function layoutSankey(nodes,edges,nodeWidth,nodeGap,width,height,iterations){computeNodeBreadths(nodes,nodeWidth,width),computeNodeDepths(nodes,edges,height,nodeGap,iterations),computeEdgeDepths(nodes)}function computeNodeValues(nodes){zrUtil.each(nodes,function(node){var value1=sum(node.outEdges,getEdgeValue),value2=sum(node.inEdges,getEdgeValue),value=Math.max(value1,value2);node.setLayout({value:value},!0)})}function computeNodeBreadths(nodes,nodeWidth,width){for(var remainNodes=nodes,nextNode=null,x=0,kx=0;remainNodes.length;){nextNode=[];for(var i=0,len=remainNodes.length;i<len;i++){var node=remainNodes[i];node.setLayout({x:x},!0),node.setLayout({dx:nodeWidth},!0);for(var j=0,lenj=node.outEdges.length;j<lenj;j++)nextNode.push(node.outEdges[j].node2)}remainNodes=nextNode,++x}moveSinksRight(nodes,x),kx=(width-nodeWidth)/(x-1),scaleNodeBreadths(nodes,kx)}function moveSinksRight(nodes,x){zrUtil.each(nodes,function(node){node.outEdges.length||node.setLayout({x:x-1},!0)})}function scaleNodeBreadths(nodes,kx){zrUtil.each(nodes,function(node){var nodeX=node.getLayout().x*kx;node.setLayout({x:nodeX},!0)})}function computeNodeDepths(nodes,edges,height,nodeGap,iterations){var nodesByBreadth=nest().key(function(d){return d.getLayout().x}).sortKeys(ascending).entries(nodes).map(function(d){return d.values});initializeNodeDepth(nodes,nodesByBreadth,edges,height,nodeGap),resolveCollisions(nodesByBreadth,nodeGap,height);for(var alpha=1;iterations>0;iterations--)alpha*=.99,relaxRightToLeft(nodesByBreadth,alpha),resolveCollisions(nodesByBreadth,nodeGap,height),relaxLeftToRight(nodesByBreadth,alpha),resolveCollisions(nodesByBreadth,nodeGap,height)}function initializeNodeDepth(nodes,nodesByBreadth,edges,height,nodeGap){var kyArray=[];zrUtil.each(nodesByBreadth,function(nodes){var n=nodes.length,sum=0;zrUtil.each(nodes,function(node){sum+=node.getLayout().value});var ky=(height-(n-1)*nodeGap)/sum;kyArray.push(ky)}),kyArray.sort(function(a,b){return a-b});var ky0=kyArray[0];zrUtil.each(nodesByBreadth,function(nodes){zrUtil.each(nodes,function(node,i){node.setLayout({y:i},!0);var nodeDy=node.getLayout().value*ky0;node.setLayout({dy:nodeDy},!0)})}),zrUtil.each(edges,function(edge){var edgeDy=+edge.getValue()*ky0;edge.setLayout({dy:edgeDy},!0)})}function resolveCollisions(nodesByBreadth,nodeGap,height){zrUtil.each(nodesByBreadth,function(nodes){var node,dy,i,y0=0,n=nodes.length;for(nodes.sort(ascendingDepth),i=0;i<n;i++){if(node=nodes[i],dy=y0-node.getLayout().y,dy>0){var nodeY=node.getLayout().y+dy;node.setLayout({y:nodeY},!0)}y0=node.getLayout().y+node.getLayout().dy+nodeGap}if(dy=y0-nodeGap-height,dy>0){var nodeY=node.getLayout().y-dy;for(node.setLayout({y:nodeY},!0),y0=node.getLayout().y,i=n-2;i>=0;--i)node=nodes[i],dy=node.getLayout().y+node.getLayout().dy+nodeGap-y0,dy>0&&(nodeY=node.getLayout().y-dy,node.setLayout({y:nodeY},!0)),y0=node.getLayout().y}})}function relaxRightToLeft(nodesByBreadth,alpha){zrUtil.each(nodesByBreadth.slice().reverse(),function(nodes){zrUtil.each(nodes,function(node){if(node.outEdges.length){var y=sum(node.outEdges,weightedTarget)/sum(node.outEdges,getEdgeValue),nodeY=node.getLayout().y+(y-center(node))*alpha;node.setLayout({y:nodeY},!0)}})})}function weightedTarget(edge){return center(edge.node2)*edge.getValue()}function relaxLeftToRight(nodesByBreadth,alpha){zrUtil.each(nodesByBreadth,function(nodes){zrUtil.each(nodes,function(node){if(node.inEdges.length){var y=sum(node.inEdges,weightedSource)/sum(node.inEdges,getEdgeValue),nodeY=node.getLayout().y+(y-center(node))*alpha;node.setLayout({y:nodeY},!0)}})})}function weightedSource(edge){return center(edge.node1)*edge.getValue()}function computeEdgeDepths(nodes){zrUtil.each(nodes,function(node){node.outEdges.sort(ascendingTargetDepth),node.inEdges.sort(ascendingSourceDepth)}),zrUtil.each(nodes,function(node){var sy=0,ty=0;zrUtil.each(node.outEdges,function(edge){edge.setLayout({sy:sy},!0),sy+=edge.getLayout().dy}),zrUtil.each(node.inEdges,function(edge){edge.setLayout({ty:ty},!0),ty+=edge.getLayout().dy})})}function ascendingTargetDepth(a,b){return a.node2.getLayout().y-b.node2.getLayout().y}function ascendingSourceDepth(a,b){return a.node1.getLayout().y-b.node1.getLayout().y}function sum(array,f){for(var sum=0,len=array.length,i=-1;++i<len;){var value=+f.call(array,array[i],i);isNaN(value)||(sum+=value)}return sum}function center(node){return node.getLayout().y+node.getLayout().dy/2}function ascendingDepth(a,b){return a.getLayout().y-b.getLayout().y}function ascending(a,b){return a<b?-1:a>b?1:a===b?0:NaN}function getEdgeValue(edge){return edge.getValue()}var layout=__webpack_require__(21),nest=__webpack_require__(242),zrUtil=__webpack_require__(4);module.exports=function(ecModel,api,payload){ecModel.eachSeriesByType("sankey",function(seriesModel){var nodeWidth=seriesModel.get("nodeWidth"),nodeGap=seriesModel.get("nodeGap"),layoutInfo=getViewRect(seriesModel,api);seriesModel.layoutInfo=layoutInfo;var width=layoutInfo.width,height=layoutInfo.height,graph=seriesModel.getGraph(),nodes=graph.nodes,edges=graph.edges;computeNodeValues(nodes);var filteredNodes=nodes.filter(function(node){return 0===node.getLayout().value}),iterations=0!==filteredNodes.length?0:seriesModel.get("layoutIterations");layoutSankey(nodes,edges,nodeWidth,nodeGap,width,height,iterations)})}},function(module,exports,__webpack_require__){function nest(){function map(array,depth){if(depth>=keysFunction.length)return array;for(var i=-1,n=array.length,keyFunction=keysFunction[depth++],mapObject={},valuesByKey={};++i<n;){var keyValue=keyFunction(array[i]),values=valuesByKey[keyValue];values?values.push(array[i]):valuesByKey[keyValue]=[array[i]]}return zrUtil.each(valuesByKey,function(value,key){mapObject[key]=map(value,depth)}),mapObject}function entriesMap(mapObject,depth){if(depth>=keysFunction.length)return mapObject;var array=[],sortKeyFunction=sortKeysFunction[depth++];return zrUtil.each(mapObject,function(value,key){array.push({key:key,values:entriesMap(value,depth)})}),sortKeyFunction?array.sort(function(a,b){return sortKeyFunction(a.key,b.key)}):array}var keysFunction=[],sortKeysFunction=[];return{key:function(d){return keysFunction.push(d),this},sortKeys:function(order){return sortKeysFunction[keysFunction.length-1]=order,this},entries:function(array){return entriesMap(map(array,0),0)}}}var zrUtil=__webpack_require__(4);module.exports=nest},function(module,exports,__webpack_require__){var VisualMapping=__webpack_require__(192);module.exports=function(ecModel,payload){ecModel.eachSeriesByType("sankey",function(seriesModel){var graph=seriesModel.getGraph(),nodes=graph.nodes;nodes.sort(function(a,b){return a.getLayout().value-b.getLayout().value});var minValue=nodes[0].getLayout().value,maxValue=nodes[nodes.length-1].getLayout().value;nodes.forEach(function(node){var mapping=new VisualMapping({type:"color",mappingMethod:"linear",dataExtent:[minValue,maxValue],visual:seriesModel.get("color")}),mapValueToColor=mapping.mapValueToVisual(node.getLayout().value);node.setVisual("color",mapValueToColor);var itemModel=node.getModel(),customColor=itemModel.get("itemStyle.normal.color");null!=customColor&&node.setVisual("color",customColor)})})}},function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);__webpack_require__(245),__webpack_require__(248),echarts.registerVisual(__webpack_require__(249)),echarts.registerLayout(__webpack_require__(250))},function(module,exports,__webpack_require__){"use strict";var zrUtil=__webpack_require__(4),SeriesModel=__webpack_require__(28),whiskerBoxCommon=__webpack_require__(246),BoxplotSeries=SeriesModel.extend({type:"series.boxplot",dependencies:["xAxis","yAxis","grid"],valueDimensions:["min","Q1","median","Q3","max"],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,boxWidth:[7,50],itemStyle:{normal:{color:"#fff",borderWidth:1},emphasis:{borderWidth:2,shadowBlur:5,shadowOffsetX:2,shadowOffsetY:2,shadowColor:"rgba(0,0,0,0.4)"}},animationEasing:"elasticOut",animationDuration:800}});zrUtil.mixin(BoxplotSeries,whiskerBoxCommon.seriesModelMixin,!0),module.exports=BoxplotSeries},function(module,exports,__webpack_require__){"use strict";function getItemValue(item){return null==item.value?item:item.value}var List=__webpack_require__(97),completeDimensions=__webpack_require__(102),WhiskerBoxDraw=__webpack_require__(247),zrUtil=__webpack_require__(4),seriesModelMixin={_baseAxisDim:null,getInitialData:function(option,ecModel){var categories,addOrdinal,xAxisModel=ecModel.getComponent("xAxis",this.get("xAxisIndex")),yAxisModel=ecModel.getComponent("yAxis",this.get("yAxisIndex")),xAxisType=xAxisModel.get("type"),yAxisType=yAxisModel.get("type");"category"===xAxisType?(option.layout="horizontal",categories=xAxisModel.getCategories(),addOrdinal=!0):"category"===yAxisType?(option.layout="vertical",categories=yAxisModel.getCategories(),addOrdinal=!0):option.layout=option.layout||"horizontal",this._baseAxisDim="horizontal"===option.layout?"x":"y";var data=option.data,dimensions=this.dimensions=["base"].concat(this.valueDimensions);completeDimensions(dimensions,data);var list=new List(dimensions,this);return list.initData(data,categories?categories.slice():null,function(dataItem,dimName,idx,dimIdx){var value=getItemValue(dataItem);return addOrdinal?"base"===dimName?idx:value[dimIdx-1]:value[dimIdx]}),list},coordDimToDataDim:function(axisDim){var dims=this.valueDimensions.slice(),baseDim=["base"],map={horizontal:{x:baseDim,y:dims},vertical:{x:dims,y:baseDim}};return map[this.get("layout")][axisDim]},dataDimToCoordDim:function(dataDim){var dim;return zrUtil.each(["x","y"],function(coordDim,index){var dataDims=this.coordDimToDataDim(coordDim);zrUtil.indexOf(dataDims,dataDim)>=0&&(dim=coordDim)},this),dim},getBaseAxis:function(){var dim=this._baseAxisDim;return this.ecModel.getComponent(dim+"Axis",this.get(dim+"AxisIndex")).axis}},viewMixin={init:function(){var whiskerBoxDraw=this._whiskerBoxDraw=new WhiskerBoxDraw(this.getStyleUpdater());this.group.add(whiskerBoxDraw.group)},render:function(seriesModel,ecModel,api){this._whiskerBoxDraw.updateData(seriesModel.getData())},remove:function(ecModel){this._whiskerBoxDraw.remove()}};module.exports={seriesModelMixin:seriesModelMixin,viewMixin:viewMixin}},function(module,exports,__webpack_require__){function WhiskerBox(data,idx,styleUpdater,isInit){graphic.Group.call(this),this.bodyIndex,this.whiskerIndex,this.styleUpdater=styleUpdater,this._createContent(data,idx,isInit),this.updateData(data,idx,isInit),this._seriesModel}function transInit(points,dim,itemLayout){return zrUtil.map(points,function(point){return point=point.slice(),point[dim]=itemLayout.initBaseline,point})}function makeWhiskerEndsShape(whiskerEnds){var shape={};return zrUtil.each(whiskerEnds,function(ends,i){shape["ends"+i]=ends}),shape}function WhiskerBoxDraw(styleUpdater){this.group=new graphic.Group,this.styleUpdater=styleUpdater}var zrUtil=__webpack_require__(4),graphic=__webpack_require__(43),Path=__webpack_require__(45),WhiskerPath=Path.extend({type:"whiskerInBox",shape:{},buildPath:function(ctx,shape){for(var i in shape)if(0===i.indexOf("ends")){var pts=shape[i];ctx.moveTo(pts[0][0],pts[0][1]),ctx.lineTo(pts[1][0],pts[1][1])}}}),whiskerBoxProto=WhiskerBox.prototype;whiskerBoxProto._createContent=function(data,idx,isInit){var itemLayout=data.getItemLayout(idx),constDim="horizontal"===itemLayout.chartLayout?1:0,count=0;this.add(new graphic.Polygon({shape:{points:isInit?transInit(itemLayout.bodyEnds,constDim,itemLayout):itemLayout.bodyEnds},style:{strokeNoScale:!0},z2:100})),this.bodyIndex=count++;var whiskerEnds=zrUtil.map(itemLayout.whiskerEnds,function(ends){return isInit?transInit(ends,constDim,itemLayout):ends});this.add(new WhiskerPath({shape:makeWhiskerEndsShape(whiskerEnds),style:{strokeNoScale:!0},z2:100})),this.whiskerIndex=count++},whiskerBoxProto.updateData=function(data,idx,isInit){var seriesModel=this._seriesModel=data.hostModel,itemLayout=data.getItemLayout(idx),updateMethod=graphic[isInit?"initProps":"updateProps"];updateMethod(this.childAt(this.bodyIndex),{shape:{points:itemLayout.bodyEnds}},seriesModel,idx),updateMethod(this.childAt(this.whiskerIndex),{shape:makeWhiskerEndsShape(itemLayout.whiskerEnds)},seriesModel,idx),this.styleUpdater.call(null,this,data,idx)},zrUtil.inherits(WhiskerBox,graphic.Group);var whiskerBoxDrawProto=WhiskerBoxDraw.prototype;whiskerBoxDrawProto.updateData=function(data){var group=this.group,oldData=this._data,styleUpdater=this.styleUpdater;data.diff(oldData).add(function(newIdx){if(data.hasValue(newIdx)){var symbolEl=new WhiskerBox(data,newIdx,styleUpdater,!0);data.setItemGraphicEl(newIdx,symbolEl),group.add(symbolEl)}}).update(function(newIdx,oldIdx){var symbolEl=oldData.getItemGraphicEl(oldIdx);return data.hasValue(newIdx)?(symbolEl?symbolEl.updateData(data,newIdx):symbolEl=new WhiskerBox(data,newIdx,styleUpdater),group.add(symbolEl),void data.setItemGraphicEl(newIdx,symbolEl)):void group.remove(symbolEl)}).remove(function(oldIdx){var el=oldData.getItemGraphicEl(oldIdx);el&&group.remove(el)}).execute(),this._data=data},whiskerBoxDrawProto.remove=function(){var group=this.group,data=this._data;this._data=null,data&&data.eachItemGraphicEl(function(el){el&&group.remove(el)})},module.exports=WhiskerBoxDraw},function(module,exports,__webpack_require__){"use strict";function updateStyle(itemGroup,data,idx){var itemModel=data.getItemModel(idx),normalItemStyleModel=itemModel.getModel(normalStyleAccessPath),borderColor=data.getItemVisual(idx,"color"),itemStyle=normalItemStyleModel.getItemStyle(["borderColor"]),whiskerEl=itemGroup.childAt(itemGroup.whiskerIndex);whiskerEl.style.set(itemStyle),whiskerEl.style.stroke=borderColor,whiskerEl.dirty();var bodyEl=itemGroup.childAt(itemGroup.bodyIndex);bodyEl.style.set(itemStyle),bodyEl.style.stroke=borderColor,bodyEl.dirty();var hoverStyle=itemModel.getModel(emphasisStyleAccessPath).getItemStyle();graphic.setHoverStyle(itemGroup,hoverStyle)}var zrUtil=__webpack_require__(4),ChartView=__webpack_require__(42),graphic=__webpack_require__(43),whiskerBoxCommon=__webpack_require__(246),BoxplotView=ChartView.extend({type:"boxplot",getStyleUpdater:function(){return updateStyle}});zrUtil.mixin(BoxplotView,whiskerBoxCommon.viewMixin,!0);var normalStyleAccessPath=["itemStyle","normal"],emphasisStyleAccessPath=["itemStyle","emphasis"];module.exports=BoxplotView},function(module,exports){var borderColorQuery=["itemStyle","normal","borderColor"];module.exports=function(ecModel,api){var globalColors=ecModel.get("color");ecModel.eachRawSeriesByType("boxplot",function(seriesModel){var defaulColor=globalColors[seriesModel.seriesIndex%globalColors.length],data=seriesModel.getData();data.setVisual({legendSymbol:"roundRect",color:seriesModel.get(borderColorQuery)||defaulColor}),ecModel.isSeriesFiltered(seriesModel)||data.each(function(idx){var itemModel=data.getItemModel(idx);data.setItemVisual(idx,{color:itemModel.get(borderColorQuery,!0)})})})}},function(module,exports,__webpack_require__){function groupSeriesByAxis(ecModel){var result=[],axisList=[];return ecModel.eachSeriesByType("boxplot",function(seriesModel){var baseAxis=seriesModel.getBaseAxis(),idx=zrUtil.indexOf(axisList,baseAxis);idx<0&&(idx=axisList.length,axisList[idx]=baseAxis,result[idx]={axis:baseAxis,seriesModels:[]}),result[idx].seriesModels.push(seriesModel)}),result}function calculateBase(groupItem){var extent,bandWidth,baseAxis=groupItem.axis,seriesModels=groupItem.seriesModels,seriesCount=seriesModels.length,boxWidthList=groupItem.boxWidthList=[],boxOffsetList=groupItem.boxOffsetList=[],boundList=[];if("category"===baseAxis.type)bandWidth=baseAxis.getBandWidth();else{var maxDataCount=0;each(seriesModels,function(seriesModel){maxDataCount=Math.max(maxDataCount,seriesModel.getData().count())}),extent=baseAxis.getExtent(),Math.abs(extent[1]-extent[0])/maxDataCount}each(seriesModels,function(seriesModel){var boxWidthBound=seriesModel.get("boxWidth");zrUtil.isArray(boxWidthBound)||(boxWidthBound=[boxWidthBound,boxWidthBound]),boundList.push([parsePercent(boxWidthBound[0],bandWidth)||0,parsePercent(boxWidthBound[1],bandWidth)||0])});var availableWidth=.8*bandWidth-2,boxGap=availableWidth/seriesCount*.3,boxWidth=(availableWidth-boxGap*(seriesCount-1))/seriesCount,base=boxWidth/2-availableWidth/2;each(seriesModels,function(seriesModel,idx){boxOffsetList.push(base),base+=boxGap+boxWidth,boxWidthList.push(Math.min(Math.max(boxWidth,boundList[idx][0]),boundList[idx][1]))})}function layoutSingleSeries(seriesModel,offset,boxWidth){var coordSys=seriesModel.coordinateSystem,data=seriesModel.getData(),dimensions=seriesModel.dimensions,chartLayout=seriesModel.get("layout"),halfWidth=boxWidth/2;data.each(dimensions,function(){function getPoint(val){var p=[];p[variableDim]=axisDimVal,p[constDim]=val;var point;return isNaN(axisDimVal)||isNaN(val)?point=[NaN,NaN]:(point=coordSys.dataToPoint(p),point[variableDim]+=offset),point}function addBodyEnd(point,start){var point1=point.slice(),point2=point.slice();point1[variableDim]+=halfWidth,point2[variableDim]-=halfWidth,start?bodyEnds.push(point1,point2):bodyEnds.push(point2,point1)}function layEndLine(endCenter){var line=[endCenter.slice(),endCenter.slice()];line[0][variableDim]-=halfWidth,line[1][variableDim]+=halfWidth,whiskerEnds.push(line)}var args=arguments,dimLen=dimensions.length,axisDimVal=args[0],idx=args[dimLen],variableDim="horizontal"===chartLayout?0:1,constDim=1-variableDim,median=getPoint(args[3]),end1=getPoint(args[1]),end5=getPoint(args[5]),whiskerEnds=[[end1,getPoint(args[2])],[end5,getPoint(args[4])]];layEndLine(end1),layEndLine(end5),layEndLine(median);var bodyEnds=[];addBodyEnd(whiskerEnds[0][1],0),addBodyEnd(whiskerEnds[1][1],1),data.setItemLayout(idx,{chartLayout:chartLayout,initBaseline:median[constDim],median:median,bodyEnds:bodyEnds,whiskerEnds:whiskerEnds})})}var zrUtil=__webpack_require__(4),numberUtil=__webpack_require__(7),parsePercent=numberUtil.parsePercent,each=zrUtil.each;module.exports=function(ecModel){var groupResult=groupSeriesByAxis(ecModel);each(groupResult,function(groupItem){var seriesModels=groupItem.seriesModels;seriesModels.length&&(calculateBase(groupItem),each(seriesModels,function(seriesModel,idx){layoutSingleSeries(seriesModel,groupItem.boxOffsetList[idx],groupItem.boxWidthList[idx])}))})}},function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);__webpack_require__(252),__webpack_require__(253),echarts.registerPreprocessor(__webpack_require__(254)),echarts.registerVisual(__webpack_require__(255)),echarts.registerLayout(__webpack_require__(256))},function(module,exports,__webpack_require__){"use strict";var zrUtil=__webpack_require__(4),SeriesModel=__webpack_require__(28),whiskerBoxCommon=__webpack_require__(246),formatUtil=__webpack_require__(6),encodeHTML=formatUtil.encodeHTML,addCommas=formatUtil.addCommas,CandlestickSeries=SeriesModel.extend({type:"series.candlestick",dependencies:["xAxis","yAxis","grid"],valueDimensions:["open","close","lowest","highest"],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,itemStyle:{normal:{color:"#c23531",color0:"#314656",borderWidth:1,borderColor:"#c23531",borderColor0:"#314656"},emphasis:{borderWidth:2}},animationUpdate:!1,animationEasing:"linear",animationDuration:300},getShadowDim:function(){return"open"},formatTooltip:function(dataIndex,mutipleSeries){var valueHTMLArr=zrUtil.map(this.valueDimensions,function(dim){return dim+": "+addCommas(this._data.get(dim,dataIndex))},this);return encodeHTML(this.name)+"<br />"+valueHTMLArr.join("<br />")},brushSelector:function(itemLayout,selectors){return selectors.rect(itemLayout.brushRect)}});zrUtil.mixin(CandlestickSeries,whiskerBoxCommon.seriesModelMixin,!0),module.exports=CandlestickSeries},function(module,exports,__webpack_require__){"use strict";function updateStyle(itemGroup,data,idx){var itemModel=data.getItemModel(idx),normalItemStyleModel=itemModel.getModel(normalStyleAccessPath),color=data.getItemVisual(idx,"color"),borderColor=data.getItemVisual(idx,"borderColor")||color,itemStyle=normalItemStyleModel.getItemStyle(["color","color0","borderColor","borderColor0"]),whiskerEl=itemGroup.childAt(itemGroup.whiskerIndex);whiskerEl.useStyle(itemStyle),whiskerEl.style.stroke=borderColor;var bodyEl=itemGroup.childAt(itemGroup.bodyIndex);bodyEl.useStyle(itemStyle),bodyEl.style.fill=color,bodyEl.style.stroke=borderColor;var hoverStyle=itemModel.getModel(emphasisStyleAccessPath).getItemStyle();graphic.setHoverStyle(itemGroup,hoverStyle)}var zrUtil=__webpack_require__(4),ChartView=__webpack_require__(42),graphic=__webpack_require__(43),whiskerBoxCommon=__webpack_require__(246),CandlestickView=ChartView.extend({type:"candlestick",getStyleUpdater:function(){return updateStyle}});zrUtil.mixin(CandlestickView,whiskerBoxCommon.viewMixin,!0);var normalStyleAccessPath=["itemStyle","normal"],emphasisStyleAccessPath=["itemStyle","emphasis"];module.exports=CandlestickView},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4);module.exports=function(option){option&&zrUtil.isArray(option.series)&&zrUtil.each(option.series,function(seriesItem){zrUtil.isObject(seriesItem)&&"k"===seriesItem.type&&(seriesItem.type="candlestick")})}},function(module,exports){var positiveBorderColorQuery=["itemStyle","normal","borderColor"],negativeBorderColorQuery=["itemStyle","normal","borderColor0"],positiveColorQuery=["itemStyle","normal","color"],negativeColorQuery=["itemStyle","normal","color0"];module.exports=function(ecModel,api){ecModel.eachRawSeriesByType("candlestick",function(seriesModel){var data=seriesModel.getData();data.setVisual({legendSymbol:"roundRect"}),ecModel.isSeriesFiltered(seriesModel)||data.each(function(idx){var itemModel=data.getItemModel(idx),sign=data.getItemLayout(idx).sign;data.setItemVisual(idx,{color:itemModel.get(sign>0?positiveColorQuery:negativeColorQuery),borderColor:itemModel.get(sign>0?positiveBorderColorQuery:negativeBorderColorQuery)})})})}},function(module,exports){function calculateCandleWidth(seriesModel,data){var extent,baseAxis=seriesModel.getBaseAxis(),bandWidth="category"===baseAxis.type?baseAxis.getBandWidth():(extent=baseAxis.getExtent(),Math.abs(extent[1]-extent[0])/data.count());return bandWidth/2-2>CANDLE_MIN_NICE_WIDTH?bandWidth/2-2:bandWidth-CANDLE_MIN_NICE_WIDTH>GPA_MIN?CANDLE_MIN_NICE_WIDTH:Math.max(bandWidth-GPA_MIN,CANDLE_MIN_WIDTH)}var CANDLE_MIN_WIDTH=2,CANDLE_MIN_NICE_WIDTH=5,GPA_MIN=4;module.exports=function(ecModel){ecModel.eachSeriesByType("candlestick",function(seriesModel){var coordSys=seriesModel.coordinateSystem,data=seriesModel.getData(),dimensions=seriesModel.dimensions,chartLayout=seriesModel.get("layout"),candleWidth=calculateCandleWidth(seriesModel,data);data.each(dimensions,function(){function getPoint(val){var p=[];return p[variableDim]=axisDimVal,p[constDim]=val,isNaN(axisDimVal)||isNaN(val)?[NaN,NaN]:coordSys.dataToPoint(p)}function addBodyEnd(point,start){var point1=point.slice(),point2=point.slice();point1[variableDim]+=candleWidth/2,point2[variableDim]-=candleWidth/2,start?bodyEnds.push(point1,point2):bodyEnds.push(point2,point1)}function makeBrushRect(){var pmin=getPoint(Math.min(openVal,closeVal,lowestVal,highestVal)),pmax=getPoint(Math.max(openVal,closeVal,lowestVal,highestVal));return pmin[variableDim]-=candleWidth/2,pmax[variableDim]-=candleWidth/2,{x:pmin[0],y:pmin[1],width:constDim?candleWidth:pmax[0]-pmin[0],height:constDim?pmax[1]-pmin[1]:candleWidth}}var args=arguments,dimLen=dimensions.length,axisDimVal=args[0],idx=args[dimLen],variableDim="horizontal"===chartLayout?0:1,constDim=1-variableDim,openVal=args[1],closeVal=args[2],lowestVal=args[3],highestVal=args[4],ocLow=Math.min(openVal,closeVal),ocHigh=Math.max(openVal,closeVal),ocLowPoint=getPoint(ocLow),ocHighPoint=getPoint(ocHigh),lowestPoint=getPoint(lowestVal),highestPoint=getPoint(highestVal),whiskerEnds=[[highestPoint,ocHighPoint],[lowestPoint,ocLowPoint]],bodyEnds=[];addBodyEnd(ocHighPoint,0),addBodyEnd(ocLowPoint,1),data.setItemLayout(idx,{chartLayout:chartLayout,sign:openVal>closeVal?-1:openVal<closeVal?1:0,initBaseline:openVal>closeVal?ocHighPoint[constDim]:ocLowPoint[constDim],bodyEnds:bodyEnds,whiskerEnds:whiskerEnds,brushRect:makeBrushRect()})},!0)})}},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4),echarts=__webpack_require__(1);__webpack_require__(258),__webpack_require__(259),echarts.registerVisual(zrUtil.curry(__webpack_require__(109),"effectScatter","circle",null)),echarts.registerLayout(zrUtil.curry(__webpack_require__(110),"effectScatter"))},function(module,exports,__webpack_require__){"use strict";var createListFromArray=__webpack_require__(101),SeriesModel=__webpack_require__(28);module.exports=SeriesModel.extend({type:"series.effectScatter",dependencies:["grid","polar"],getInitialData:function(option,ecModel){var list=createListFromArray(option.data,this,ecModel);return list},brushSelector:"point",defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,effectType:"ripple",showEffectOn:"render",rippleEffect:{period:4,scale:2.5,brushType:"fill"},symbolSize:10}})},function(module,exports,__webpack_require__){var SymbolDraw=__webpack_require__(104),EffectSymbol=__webpack_require__(260);__webpack_require__(1).extendChartView({type:"effectScatter",init:function(){this._symbolDraw=new SymbolDraw(EffectSymbol)},render:function(seriesModel,ecModel,api){var data=seriesModel.getData(),effectSymbolDraw=this._symbolDraw;effectSymbolDraw.updateData(data),this.group.add(effectSymbolDraw.group)},updateLayout:function(){this._symbolDraw.updateLayout()},remove:function(ecModel,api){this._symbolDraw&&this._symbolDraw.remove(api)}})},function(module,exports,__webpack_require__){function normalizeSymbolSize(symbolSize){return zrUtil.isArray(symbolSize)||(symbolSize=[+symbolSize,+symbolSize]),symbolSize}function updateRipplePath(rippleGroup,effectCfg){rippleGroup.eachChild(function(ripplePath){ripplePath.attr({z:effectCfg.z,zlevel:effectCfg.zlevel,style:{stroke:"stroke"===effectCfg.brushType?effectCfg.color:null,fill:"fill"===effectCfg.brushType?effectCfg.color:null}})})}function EffectSymbol(data,idx){Group.call(this);var symbol=new Symbol(data,idx),rippleGroup=new Group;this.add(symbol),this.add(rippleGroup),rippleGroup.beforeUpdate=function(){this.attr(symbol.getScale())},this.updateData(data,idx)}var zrUtil=__webpack_require__(4),symbolUtil=__webpack_require__(106),graphic=__webpack_require__(43),numberUtil=__webpack_require__(7),Symbol=__webpack_require__(105),Group=graphic.Group,EFFECT_RIPPLE_NUMBER=3,effectSymbolProto=EffectSymbol.prototype;effectSymbolProto.stopEffectAnimation=function(){this.childAt(1).removeAll()},effectSymbolProto.startEffectAnimation=function(effectCfg){for(var symbolType=effectCfg.symbolType,color=effectCfg.color,rippleGroup=this.childAt(1),i=0;i<EFFECT_RIPPLE_NUMBER;i++){var ripplePath=symbolUtil.createSymbol(symbolType,-.5,-.5,1,1,color);ripplePath.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scale:[1,1]});var delay=-i/EFFECT_RIPPLE_NUMBER*effectCfg.period+effectCfg.effectOffset;ripplePath.animate("",!0).when(effectCfg.period,{scale:[effectCfg.rippleScale,effectCfg.rippleScale]}).delay(delay).start(),ripplePath.animateStyle(!0).when(effectCfg.period,{opacity:0}).delay(delay).start(),rippleGroup.add(ripplePath)}updateRipplePath(rippleGroup,effectCfg)},effectSymbolProto.updateEffectAnimation=function(effectCfg){for(var oldEffectCfg=this._effectCfg,rippleGroup=this.childAt(1),DIFFICULT_PROPS=["symbolType","period","rippleScale"],i=0;i<DIFFICULT_PROPS;i++){var propName=DIFFICULT_PROPS[i];if(oldEffectCfg[propName]!==effectCfg[propName])return this.stopEffectAnimation(),void this.startEffectAnimation(effectCfg)}updateRipplePath(rippleGroup,effectCfg);
},effectSymbolProto.highlight=function(){this.trigger("emphasis")},effectSymbolProto.downplay=function(){this.trigger("normal")},effectSymbolProto.updateData=function(data,idx){var seriesModel=data.hostModel;this.childAt(0).updateData(data,idx);var rippleGroup=this.childAt(1),itemModel=data.getItemModel(idx),symbolType=data.getItemVisual(idx,"symbol"),symbolSize=normalizeSymbolSize(data.getItemVisual(idx,"symbolSize")),color=data.getItemVisual(idx,"color");rippleGroup.attr("scale",symbolSize),rippleGroup.traverse(function(ripplePath){ripplePath.attr({fill:color})});var symbolOffset=itemModel.getShallow("symbolOffset");if(symbolOffset){var pos=rippleGroup.position;pos[0]=numberUtil.parsePercent(symbolOffset[0],symbolSize[0]),pos[1]=numberUtil.parsePercent(symbolOffset[1],symbolSize[1])}rippleGroup.rotation=(itemModel.getShallow("symbolRotate")||0)*Math.PI/180||0;var effectCfg={};if(effectCfg.showEffectOn=seriesModel.get("showEffectOn"),effectCfg.rippleScale=itemModel.get("rippleEffect.scale"),effectCfg.brushType=itemModel.get("rippleEffect.brushType"),effectCfg.period=1e3*itemModel.get("rippleEffect.period"),effectCfg.effectOffset=idx/data.count(),effectCfg.z=itemModel.getShallow("z")||0,effectCfg.zlevel=itemModel.getShallow("zlevel")||0,effectCfg.symbolType=symbolType,effectCfg.color=color,this.off("mouseover").off("mouseout").off("emphasis").off("normal"),"render"===effectCfg.showEffectOn)this._effectCfg?this.updateEffectAnimation(effectCfg):this.startEffectAnimation(effectCfg),this._effectCfg=effectCfg;else{this._effectCfg=null,this.stopEffectAnimation();var symbol=this.childAt(0),onEmphasis=function(){symbol.trigger("emphasis"),"render"!==effectCfg.showEffectOn&&this.startEffectAnimation(effectCfg)},onNormal=function(){symbol.trigger("normal"),"render"!==effectCfg.showEffectOn&&this.stopEffectAnimation()};this.on("mouseover",onEmphasis,this).on("mouseout",onNormal,this).on("emphasis",onEmphasis,this).on("normal",onNormal,this)}this._effectCfg=effectCfg},effectSymbolProto.fadeOut=function(cb){this.off("mouseover").off("mouseout").off("emphasis").off("normal"),cb&&cb()},zrUtil.inherits(EffectSymbol,Group),module.exports=EffectSymbol},function(module,exports,__webpack_require__){__webpack_require__(262),__webpack_require__(263);var echarts=__webpack_require__(1);echarts.registerLayout(__webpack_require__(268))},function(module,exports,__webpack_require__){"use strict";function preprocessOption(seriesOpt){var data=seriesOpt.data;data&&data[0]&&data[0][0]&&data[0][0].coord&&(console.warn("Lines data configuration has been changed to { coords:[[1,2],[2,3]] }"),seriesOpt.data=zrUtil.map(data,function(itemOpt){var coords=[itemOpt[0].coord,itemOpt[1].coord],target={coords:coords};return itemOpt[0].name&&(target.fromName=itemOpt[0].name),itemOpt[1].name&&(target.toName=itemOpt[1].name),zrUtil.mergeAll([target,itemOpt[0],itemOpt[1]])}))}var SeriesModel=__webpack_require__(28),List=__webpack_require__(97),zrUtil=__webpack_require__(4),CoordinateSystem=__webpack_require__(26),LinesSeries=SeriesModel.extend({type:"series.lines",dependencies:["grid","polar"],visualColorAccessPath:"lineStyle.normal.color",init:function(option){preprocessOption(option),LinesSeries.superApply(this,"init",arguments)},mergeOption:function(option){preprocessOption(option),LinesSeries.superApply(this,"mergeOption",arguments)},getInitialData:function(option,ecModel){var CoordSys=CoordinateSystem.get(option.coordinateSystem);if(!CoordSys)throw new Error("Unkown coordinate system "+option.coordinateSystem);var lineData=new List(["value"],this);return lineData.hasItemOption=!1,lineData.initData(option.data,[],function(dataItem,dimName,dataIndex,dimIndex){if(dataItem instanceof Array)return NaN;lineData.hasItemOption=!0;var value=dataItem.value;return value?value instanceof Array?value[dimIndex]:value:void 0}),lineData},formatTooltip:function(dataIndex){var data=this.getData(),itemModel=data.getItemModel(dataIndex),name=itemModel.get("name");if(name)return name;var fromName=itemModel.get("fromName"),toName=itemModel.get("toName");return fromName+" > "+toName},defaultOption:{coordinateSystem:"geo",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,xAxisIndex:0,yAxisIndex:0,geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,label:{normal:{show:!1,position:"end"}},lineStyle:{normal:{opacity:.5}}}})},function(module,exports,__webpack_require__){var LineDraw=__webpack_require__(199),EffectLine=__webpack_require__(264),Line=__webpack_require__(200),Polyline=__webpack_require__(265),EffectPolyline=__webpack_require__(266),LargeLineDraw=__webpack_require__(267);__webpack_require__(1).extendChartView({type:"lines",init:function(){},render:function(seriesModel,ecModel,api){var data=seriesModel.getData(),lineDraw=this._lineDraw,hasEffect=seriesModel.get("effect.show"),isPolyline=seriesModel.get("polyline"),isLarge=seriesModel.get("large")&&data.count()>=seriesModel.get("largeThreshold");hasEffect&&isLarge&&console.warn("Large lines not support effect"),hasEffect===this._hasEffet&&isPolyline===this._isPolyline&&isLarge===this._isLarge||(lineDraw&&lineDraw.remove(),lineDraw=this._lineDraw=isLarge?new LargeLineDraw:new LineDraw(isPolyline?hasEffect?EffectPolyline:Polyline:hasEffect?EffectLine:Line),this._hasEffet=hasEffect,this._isPolyline=isPolyline,this._isLarge=isLarge);var zlevel=seriesModel.get("zlevel"),trailLength=seriesModel.get("effect.trailLength"),zr=api.getZr();if(zr.painter.getLayer(zlevel).clear(!0),null!=this._lastZlevel&&zr.configLayer(this._lastZlevel,{motionBlur:!1}),hasEffect&&trailLength){var notInIndividual=!1;ecModel.eachSeries(function(otherSeriesModel){otherSeriesModel!==seriesModel&&otherSeriesModel.get("zlevel")===zlevel&&(notInIndividual=!0)}),notInIndividual&&console.warn("Lines with trail effect should have an individual zlevel"),zr.configLayer(zlevel,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(trailLength/10+.9,1),0)})}this.group.add(lineDraw.group),lineDraw.updateData(data),this._lastZlevel=zlevel},updateLayout:function(seriesModel,ecModel,api){this._lineDraw.updateLayout(seriesModel);var zr=api.getZr();zr.painter.getLayer(this._lastZlevel).clear(!0)},remove:function(ecModel,api){this._lineDraw&&this._lineDraw.remove(api,!0)}})},function(module,exports,__webpack_require__){function EffectLine(lineData,idx,seriesScope){graphic.Group.call(this),this.add(this.createLine(lineData,idx,seriesScope)),this._updateEffectSymbol(lineData,idx)}var graphic=__webpack_require__(43),Line=__webpack_require__(200),zrUtil=__webpack_require__(4),symbolUtil=__webpack_require__(106),vec2=__webpack_require__(10),curveUtil=__webpack_require__(50),effectLineProto=EffectLine.prototype;effectLineProto.createLine=function(lineData,idx,seriesScope){return new Line(lineData,idx,seriesScope)},effectLineProto._updateEffectSymbol=function(lineData,idx){var itemModel=lineData.getItemModel(idx),effectModel=itemModel.getModel("effect"),size=effectModel.get("symbolSize"),symbolType=effectModel.get("symbol");zrUtil.isArray(size)||(size=[size,size]);var color=effectModel.get("color")||lineData.getItemVisual(idx,"color"),symbol=this.childAt(1);this._symbolType!==symbolType&&(this.remove(symbol),symbol=symbolUtil.createSymbol(symbolType,-.5,-.5,1,1,color),symbol.z2=100,symbol.culling=!0,this.add(symbol)),symbol&&(symbol.setStyle("shadowColor",color),symbol.setStyle(effectModel.getItemStyle(["color"])),symbol.attr("scale",size),symbol.setColor(color),symbol.attr("scale",size),this._symbolType=symbolType,this._updateEffectAnimation(lineData,effectModel,idx))},effectLineProto._updateEffectAnimation=function(lineData,effectModel,idx){var symbol=this.childAt(1);if(symbol){var self=this,points=lineData.getItemLayout(idx),period=1e3*effectModel.get("period"),loop=effectModel.get("loop"),constantSpeed=effectModel.get("constantSpeed"),delayExpr=effectModel.get("delay")||function(idx){return idx/lineData.count()*period/3},isDelayFunc="function"==typeof delayExpr;if(symbol.ignore=!0,this.updateAnimationPoints(symbol,points),constantSpeed>0&&(period=this.getLineLength(symbol)/constantSpeed*1e3),period!==this._period||loop!==this._loop){symbol.stopAnimation();var delay=delayExpr;isDelayFunc&&(delay=delayExpr(idx)),symbol.__t>0&&(delay=-period*symbol.__t),symbol.__t=0;var animator=symbol.animate("",loop).when(period,{__t:1}).delay(delay).during(function(){self.updateSymbolPosition(symbol)});loop||animator.done(function(){self.remove(symbol)}),animator.start()}this._period=period,this._loop=loop}},effectLineProto.getLineLength=function(symbol){return vec2.dist(symbol.__p1,symbol.__cp1)+vec2.dist(symbol.__cp1,symbol.__p2)},effectLineProto.updateAnimationPoints=function(symbol,points){symbol.__p1=points[0],symbol.__p2=points[1],symbol.__cp1=points[2]||[(points[0][0]+points[1][0])/2,(points[0][1]+points[1][1])/2]},effectLineProto.updateData=function(lineData,idx,seriesScope){this.childAt(0).updateData(lineData,idx,seriesScope),this._updateEffectSymbol(lineData,idx)},effectLineProto.updateSymbolPosition=function(symbol){var p1=symbol.__p1,p2=symbol.__p2,cp1=symbol.__cp1,t=symbol.__t,pos=symbol.position,quadraticAt=curveUtil.quadraticAt,quadraticDerivativeAt=curveUtil.quadraticDerivativeAt;pos[0]=quadraticAt(p1[0],cp1[0],p2[0],t),pos[1]=quadraticAt(p1[1],cp1[1],p2[1],t);var tx=quadraticDerivativeAt(p1[0],cp1[0],p2[0],t),ty=quadraticDerivativeAt(p1[1],cp1[1],p2[1],t);symbol.rotation=-Math.atan2(ty,tx)-Math.PI/2,symbol.ignore=!1},effectLineProto.updateLayout=function(lineData,idx){this.childAt(0).updateLayout(lineData,idx);var effectModel=lineData.getItemModel(idx).getModel("effect");this._updateEffectAnimation(lineData,effectModel,idx)},zrUtil.inherits(EffectLine,graphic.Group),module.exports=EffectLine},function(module,exports,__webpack_require__){function Polyline(lineData,idx,seriesScope){graphic.Group.call(this),this._createPolyline(lineData,idx,seriesScope)}var graphic=__webpack_require__(43),zrUtil=__webpack_require__(4),polylineProto=Polyline.prototype;polylineProto._createPolyline=function(lineData,idx,seriesScope){var points=lineData.getItemLayout(idx),line=new graphic.Polyline({shape:{points:points}});this.add(line),this._updateCommonStl(lineData,idx,seriesScope)},polylineProto.updateData=function(lineData,idx,seriesScope){var seriesModel=lineData.hostModel,line=this.childAt(0),target={shape:{points:lineData.getItemLayout(idx)}};graphic.updateProps(line,target,seriesModel,idx),this._updateCommonStl(lineData,idx,seriesScope)},polylineProto._updateCommonStl=function(lineData,idx,seriesScope){var line=this.childAt(0),itemModel=lineData.getItemModel(idx),visualColor=lineData.getItemVisual(idx,"color"),lineStyle=seriesScope&&seriesScope.lineStyle,hoverLineStyle=seriesScope&&seriesScope.hoverLineStyle;seriesScope&&!lineData.hasItemOption||(lineStyle=itemModel.getModel("lineStyle.normal").getLineStyle(),hoverLineStyle=itemModel.getModel("lineStyle.emphasis").getLineStyle()),line.useStyle(zrUtil.defaults({strokeNoScale:!0,fill:"none",stroke:visualColor},lineStyle)),line.hoverStyle=hoverLineStyle,graphic.setHoverStyle(this)},polylineProto.updateLayout=function(lineData,idx){var polyline=this.childAt(0);polyline.setShape("points",lineData.getItemLayout(idx))},zrUtil.inherits(Polyline,graphic.Group),module.exports=Polyline},function(module,exports,__webpack_require__){function EffectPolyline(lineData,idx,seriesScope){EffectLine.call(this,lineData,idx,seriesScope),this._lastFrame=0,this._lastFramePercent=0}var Polyline=__webpack_require__(265),zrUtil=__webpack_require__(4),EffectLine=__webpack_require__(264),vec2=__webpack_require__(10),effectPolylineProto=EffectPolyline.prototype;effectPolylineProto.createLine=function(lineData,idx,seriesScope){return new Polyline(lineData,idx,seriesScope)},effectPolylineProto.updateAnimationPoints=function(symbol,points){this._points=points;for(var accLenArr=[0],len=0,i=1;i<points.length;i++){var p1=points[i-1],p2=points[i];len+=vec2.dist(p1,p2),accLenArr.push(len)}if(0!==len){for(var i=0;i<accLenArr.length;i++)accLenArr[i]/=len;this._offsets=accLenArr,this._length=len}},effectPolylineProto.getLineLength=function(symbol){return this._length},effectPolylineProto.updateSymbolPosition=function(symbol){var t=symbol.__t,points=this._points,offsets=this._offsets,len=points.length;if(offsets){var frame,lastFrame=this._lastFrame;if(t<this._lastFramePercent){var start=Math.min(lastFrame+1,len-1);for(frame=start;frame>=0&&!(offsets[frame]<=t);frame--);frame=Math.min(frame,len-2)}else{for(var frame=lastFrame;frame<len&&!(offsets[frame]>t);frame++);frame=Math.min(frame-1,len-2)}vec2.lerp(symbol.position,points[frame],points[frame+1],(t-offsets[frame])/(offsets[frame+1]-offsets[frame])),this._lastFrame=frame,this._lastFramePercent=t,symbol.ignore=!1}},zrUtil.inherits(EffectPolyline,EffectLine),module.exports=EffectPolyline},function(module,exports,__webpack_require__){function LargeLineDraw(){this.group=new graphic.Group,this._lineEl=new LargeLineShape}var graphic=__webpack_require__(43),quadraticContain=__webpack_require__(55),lineContain=__webpack_require__(53),LargeLineShape=graphic.extendShape({shape:{polyline:!1,segs:[]},buildPath:function(path,shape){for(var segs=shape.segs,isPolyline=shape.polyline,i=0;i<segs.length;i++){var seg=segs[i];if(isPolyline){path.moveTo(seg[0][0],seg[0][1]);for(var j=1;j<seg.length;j++)path.lineTo(seg[j][0],seg[j][1])}else path.moveTo(seg[0][0],seg[0][1]),seg.length>2?path.quadraticCurveTo(seg[2][0],seg[2][1],seg[1][0],seg[1][1]):path.lineTo(seg[1][0],seg[1][1])}},findDataIndex:function(x,y){for(var shape=this.shape,segs=shape.segs,isPolyline=shape.polyline,lineWidth=Math.max(this.style.lineWidth,1),i=0;i<segs.length;i++){var seg=segs[i];if(isPolyline){for(var j=1;j<seg.length;j++)if(lineContain.containStroke(seg[j-1][0],seg[j-1][1],seg[j][0],seg[j][1],lineWidth,x,y))return i}else if(seg.length>2){if(quadraticContain.containStroke(seg[0][0],seg[0][1],seg[2][0],seg[2][1],seg[1][0],seg[1][1],lineWidth,x,y))return i}else if(lineContain.containStroke(seg[0][0],seg[0][1],seg[1][0],seg[1][1],lineWidth,x,y))return i}return-1}}),largeLineProto=LargeLineDraw.prototype;largeLineProto.updateData=function(data){this.group.removeAll();var lineEl=this._lineEl,seriesModel=data.hostModel;lineEl.setShape({segs:data.mapArray(data.getItemLayout),polyline:seriesModel.get("polyline")}),lineEl.useStyle(seriesModel.getModel("lineStyle.normal").getLineStyle());var visualColor=data.getVisual("color");visualColor&&lineEl.setStyle("stroke",visualColor),lineEl.setStyle("fill"),lineEl.seriesIndex=seriesModel.seriesIndex,lineEl.on("mousemove",function(e){lineEl.dataIndex=null;var dataIndex=lineEl.findDataIndex(e.offsetX,e.offsetY);dataIndex>0&&(lineEl.dataIndex=dataIndex)}),this.group.add(lineEl)},largeLineProto.updateLayout=function(seriesModel){var data=seriesModel.getData();this._lineEl.setShape({segs:data.mapArray(data.getItemLayout)})},largeLineProto.remove=function(){this.group.removeAll()},module.exports=LargeLineDraw},function(module,exports,__webpack_require__){module.exports=function(ecModel){ecModel.eachSeriesByType("lines",function(seriesModel){var coordSys=seriesModel.coordinateSystem,lineData=seriesModel.getData();lineData.each(function(idx){var itemModel=lineData.getItemModel(idx),coords=itemModel.option instanceof Array?itemModel.option:itemModel.get("coords");if(!(coords instanceof Array&&coords.length>0&&coords[0]instanceof Array))throw new Error("Invalid coords "+JSON.stringify(coords)+". Lines must have 2d coords array in data item.");var pts=[];if(seriesModel.get("polyline"))for(var i=0;i<coords.length;i++)pts.push(coordSys.dataToPoint(coords[i]));else{pts[0]=coordSys.dataToPoint(coords[0]),pts[1]=coordSys.dataToPoint(coords[1]);var curveness=itemModel.get("lineStyle.normal.curveness");+curveness&&(pts[2]=[(pts[0][0]+pts[1][0])/2-(pts[0][1]-pts[1][1])*curveness,(pts[0][1]+pts[1][1])/2-(pts[1][0]-pts[0][0])*curveness])}lineData.setItemLayout(idx,pts)})})}},function(module,exports,__webpack_require__){__webpack_require__(270),__webpack_require__(271)},function(module,exports,__webpack_require__){var SeriesModel=__webpack_require__(28),createListFromArray=__webpack_require__(101);module.exports=SeriesModel.extend({type:"series.heatmap",getInitialData:function(option,ecModel){return createListFromArray(option.data,this,ecModel)},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0}})},function(module,exports,__webpack_require__){function getIsInPiecewiseRange(dataExtent,pieceList,selected){var dataSpan=dataExtent[1]-dataExtent[0];pieceList=zrUtil.map(pieceList,function(piece){return{interval:[(piece.interval[0]-dataExtent[0])/dataSpan,(piece.interval[1]-dataExtent[0])/dataSpan]}});var len=pieceList.length,lastIndex=0;return function(val){for(var i=lastIndex;i<len;i++){var interval=pieceList[i].interval;if(interval[0]<=val&&val<=interval[1]){lastIndex=i;break}}if(i===len)for(var i=lastIndex-1;i>=0;i--){var interval=pieceList[i].interval;if(interval[0]<=val&&val<=interval[1]){lastIndex=i;break}}return i>=0&&i<len&&selected[i]}}function getIsInContinuousRange(dataExtent,range){var dataSpan=dataExtent[1]-dataExtent[0];return range=[(range[0]-dataExtent[0])/dataSpan,(range[1]-dataExtent[0])/dataSpan],function(val){return val>=range[0]&&val<=range[1]}}function isGeoCoordSys(coordSys){var dimensions=coordSys.dimensions;return"lng"===dimensions[0]&&"lat"===dimensions[1]}var graphic=__webpack_require__(43),HeatmapLayer=__webpack_require__(272),zrUtil=__webpack_require__(4);module.exports=__webpack_require__(1).extendChartView({type:"heatmap",render:function(seriesModel,ecModel,api){var visualMapOfThisSeries;if(ecModel.eachComponent("visualMap",function(visualMap){visualMap.eachTargetSeries(function(targetSeries){targetSeries===seriesModel&&(visualMapOfThisSeries=visualMap)})}),!visualMapOfThisSeries)throw new Error("Heatmap must use with visualMap");this.group.removeAll();var coordSys=seriesModel.coordinateSystem;"cartesian2d"===coordSys.type?this._renderOnCartesian(coordSys,seriesModel,api):isGeoCoordSys(coordSys)&&this._renderOnGeo(coordSys,seriesModel,visualMapOfThisSeries,api)},_renderOnCartesian:function(cartesian,seriesModel,api){var xAxis=cartesian.getAxis("x"),yAxis=cartesian.getAxis("y"),group=this.group;if("category"!==xAxis.type||"category"!==yAxis.type)throw new Error("Heatmap on cartesian must have two category axes");if(!xAxis.onBand||!yAxis.onBand)throw new Error("Heatmap on cartesian must have two axes with boundaryGap true");var width=xAxis.getBandWidth(),height=yAxis.getBandWidth(),data=seriesModel.getData(),itemStyleQuery="itemStyle.normal",hoverItemStyleQuery="itemStyle.emphasis",labelQuery="label.normal",hoverLabelQuery="label.emphasis",style=seriesModel.getModel(itemStyleQuery).getItemStyle(["color"]),hoverStl=seriesModel.getModel(hoverItemStyleQuery).getItemStyle(),labelModel=seriesModel.getModel("label.normal"),hoverLabelModel=seriesModel.getModel("label.emphasis");data.each(["x","y","z"],function(x,y,z,idx){var itemModel=data.getItemModel(idx),point=cartesian.dataToPoint([x,y]);if(!isNaN(z)){var rect=new graphic.Rect({shape:{x:point[0]-width/2,y:point[1]-height/2,width:width,height:height},style:{fill:data.getItemVisual(idx,"color"),opacity:data.getItemVisual(idx,"opacity")}});data.hasItemOption&&(style=itemModel.getModel(itemStyleQuery).getItemStyle(["color"]),hoverStl=itemModel.getModel(hoverItemStyleQuery).getItemStyle(),labelModel=itemModel.getModel(labelQuery),hoverLabelModel=itemModel.getModel(hoverLabelQuery));var rawValue=seriesModel.getRawValue(idx),defaultText="-";rawValue&&null!=rawValue[2]&&(defaultText=rawValue[2]),labelModel.getShallow("show")&&(graphic.setText(style,labelModel),style.text=seriesModel.getFormattedLabel(idx,"normal")||defaultText),hoverLabelModel.getShallow("show")&&(graphic.setText(hoverStl,hoverLabelModel),hoverStl.text=seriesModel.getFormattedLabel(idx,"emphasis")||defaultText),rect.setStyle(style),graphic.setHoverStyle(rect,data.hasItemOption?hoverStl:zrUtil.extend({},hoverStl)),group.add(rect),data.setItemGraphicEl(idx,rect)}})},_renderOnGeo:function(geo,seriesModel,visualMapModel,api){var inRangeVisuals=visualMapModel.targetVisuals.inRange,outOfRangeVisuals=visualMapModel.targetVisuals.outOfRange,data=seriesModel.getData(),hmLayer=this._hmLayer||this._hmLayer||new HeatmapLayer;hmLayer.blurSize=seriesModel.get("blurSize"),hmLayer.pointSize=seriesModel.get("pointSize"),hmLayer.minOpacity=seriesModel.get("minOpacity"),hmLayer.maxOpacity=seriesModel.get("maxOpacity");var rect=geo.getViewRect().clone(),roamTransform=geo.getRoamTransform().transform;rect.applyTransform(roamTransform);var x=Math.max(rect.x,0),y=Math.max(rect.y,0),x2=Math.min(rect.width+rect.x,api.getWidth()),y2=Math.min(rect.height+rect.y,api.getHeight()),width=x2-x,height=y2-y,points=data.mapArray(["lng","lat","value"],function(lng,lat,value){var pt=geo.dataToPoint([lng,lat]);return pt[0]-=x,pt[1]-=y,pt.push(value),pt}),dataExtent=visualMapModel.getExtent(),isInRange="visualMap.continuous"===visualMapModel.type?getIsInContinuousRange(dataExtent,visualMapModel.option.range):getIsInPiecewiseRange(dataExtent,visualMapModel.getPieceList(),visualMapModel.option.selected);hmLayer.update(points,width,height,inRangeVisuals.color.getNormalizer(),{inRange:inRangeVisuals.color.getColorMapper(),outOfRange:outOfRangeVisuals.color.getColorMapper()},isInRange);var img=new graphic.Image({style:{width:width,height:height,x:x,y:y,image:hmLayer.canvas},silent:!0});this.group.add(img)}})},function(module,exports,__webpack_require__){function Heatmap(){var canvas=zrUtil.createCanvas();this.canvas=canvas,this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={}}var GRADIENT_LEVELS=256,zrUtil=__webpack_require__(4);Heatmap.prototype={update:function(data,width,height,normalize,colorFunc,isInRange){var brush=this._getBrush(),gradientInRange=this._getGradient(data,colorFunc,"inRange"),gradientOutOfRange=this._getGradient(data,colorFunc,"outOfRange"),r=this.pointSize+this.blurSize,canvas=this.canvas,ctx=canvas.getContext("2d"),len=data.length;canvas.width=width,canvas.height=height;for(var i=0;i<len;++i){var p=data[i],x=p[0],y=p[1],value=p[2],alpha=normalize(value);ctx.globalAlpha=alpha,ctx.drawImage(brush,x-r,y-r)}for(var imageData=ctx.getImageData(0,0,canvas.width,canvas.height),pixels=imageData.data,offset=0,pixelLen=pixels.length,minOpacity=this.minOpacity,maxOpacity=this.maxOpacity,diffOpacity=maxOpacity-minOpacity;offset<pixelLen;){var alpha=pixels[offset+3]/256,gradientOffset=4*Math.floor(alpha*(GRADIENT_LEVELS-1));if(alpha>0){var gradient=isInRange(alpha)?gradientInRange:gradientOutOfRange;alpha>0&&(alpha=alpha*diffOpacity+minOpacity),pixels[offset++]=gradient[gradientOffset],pixels[offset++]=gradient[gradientOffset+1],pixels[offset++]=gradient[gradientOffset+2],pixels[offset++]=gradient[gradientOffset+3]*alpha*256}else offset+=4}return ctx.putImageData(imageData,0,0),canvas},_getBrush:function(){var brushCanvas=this._brushCanvas||(this._brushCanvas=zrUtil.createCanvas()),r=this.pointSize+this.blurSize,d=2*r;brushCanvas.width=d,brushCanvas.height=d;var ctx=brushCanvas.getContext("2d");return ctx.clearRect(0,0,d,d),ctx.shadowOffsetX=d,ctx.shadowBlur=this.blurSize,ctx.shadowColor="#000",ctx.beginPath(),ctx.arc(-r,r,this.pointSize,0,2*Math.PI,!0),ctx.closePath(),ctx.fill(),brushCanvas},_getGradient:function(data,colorFunc,state){for(var gradientPixels=this._gradientPixels,pixelsSingleState=gradientPixels[state]||(gradientPixels[state]=new Uint8ClampedArray(1024)),color=[],off=0,i=0;i<256;i++)colorFunc[state](i/255,!0,color),pixelsSingleState[off++]=color[0],pixelsSingleState[off++]=color[1],pixelsSingleState[off++]=color[2],pixelsSingleState[off++]=color[3];return pixelsSingleState}},module.exports=Heatmap},function(module,exports,__webpack_require__){__webpack_require__(274),__webpack_require__(275),__webpack_require__(276);var echarts=__webpack_require__(1);echarts.registerProcessor(__webpack_require__(278))},function(module,exports,__webpack_require__){"use strict";var zrUtil=__webpack_require__(4),Model=__webpack_require__(12),LegendModel=__webpack_require__(1).extendComponentModel({type:"legend",dependencies:["series"],layoutMode:{type:"box",ignoreSize:!0},init:function(option,parentModel,ecModel){this.mergeDefaultAndTheme(option,ecModel),option.selected=option.selected||{}},mergeOption:function(option){LegendModel.superCall(this,"mergeOption",option)},optionUpdated:function(){this._updateData(this.ecModel);var legendData=this._data;if(legendData[0]&&"single"===this.get("selectedMode")){for(var hasSelected=!1,i=0;i<legendData.length;i++){var name=legendData[i].get("name");if(this.isSelected(name)){this.select(name),hasSelected=!0;break}}!hasSelected&&this.select(legendData[0].get("name"))}},_updateData:function(ecModel){var legendData=zrUtil.map(this.get("data")||[],function(dataItem){return"string"!=typeof dataItem&&"number"!=typeof dataItem||(dataItem={name:dataItem}),new Model(dataItem,this,this.ecModel)},this);this._data=legendData;var availableNames=zrUtil.map(ecModel.getSeries(),function(series){return series.name});ecModel.eachSeries(function(seriesModel){if(seriesModel.legendDataProvider){var data=seriesModel.legendDataProvider();availableNames=availableNames.concat(data.mapArray(data.getName))}}),this._availableNames=availableNames},getData:function(){return this._data},select:function(name){var selected=this.option.selected,selectedMode=this.get("selectedMode");if("single"===selectedMode){var data=this._data;zrUtil.each(data,function(dataItem){selected[dataItem.get("name")]=!1})}selected[name]=!0},unSelect:function(name){"single"!==this.get("selectedMode")&&(this.option.selected[name]=!1)},toggleSelected:function(name){var selected=this.option.selected;name in selected||(selected[name]=!0),this[selected[name]?"unSelect":"select"](name)},isSelected:function(name){var selected=this.option.selected;return!(name in selected&&!selected[name])&&zrUtil.indexOf(this._availableNames,name)>=0},defaultOption:{zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",top:"top",align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,inactiveColor:"#ccc",textStyle:{color:"#333"},selectedMode:!0,tooltip:{show:!1}}});module.exports=LegendModel},function(module,exports,__webpack_require__){function legendSelectActionHandler(methodName,payload,ecModel){var isSelected,selectedMap={},isToggleSelect="toggleSelected"===methodName;return ecModel.eachComponent("legend",function(legendModel){isToggleSelect&&null!=isSelected?legendModel[isSelected?"select":"unSelect"](payload.name):(legendModel[methodName](payload.name),isSelected=legendModel.isSelected(payload.name));var legendData=legendModel.getData();zrUtil.each(legendData,function(model){var name=model.get("name");if("\n"!==name&&""!==name){var isItemSelected=legendModel.isSelected(name);name in selectedMap?selectedMap[name]=selectedMap[name]&&isItemSelected:selectedMap[name]=isItemSelected}})}),{name:payload.name,selected:selectedMap}}var echarts=__webpack_require__(1),zrUtil=__webpack_require__(4);echarts.registerAction("legendToggleSelect","legendselectchanged",zrUtil.curry(legendSelectActionHandler,"toggleSelected")),echarts.registerAction("legendSelect","legendselected",zrUtil.curry(legendSelectActionHandler,"select")),echarts.registerAction("legendUnSelect","legendunselected",zrUtil.curry(legendSelectActionHandler,"unSelect"))},function(module,exports,__webpack_require__){function dispatchSelectAction(name,api){api.dispatchAction({type:"legendToggleSelect",name:name})}function dispatchHighlightAction(seriesModel,dataName,api){var el=api.getZr().storage.getDisplayList()[0];el&&el.useHoverLayer||seriesModel.get("legendHoverLink")&&api.dispatchAction({type:"highlight",seriesName:seriesModel.name,name:dataName})}function dispatchDownplayAction(seriesModel,dataName,api){var el=api.getZr().storage.getDisplayList()[0];el&&el.useHoverLayer||seriesModel.get("legendHoverLink")&&api.dispatchAction({type:"downplay",seriesName:seriesModel.name,name:dataName})}var zrUtil=__webpack_require__(4),symbolCreator=__webpack_require__(106),graphic=__webpack_require__(43),listComponentHelper=__webpack_require__(277),curry=zrUtil.curry;module.exports=__webpack_require__(1).extendComponentView({type:"legend",init:function(){this._symbolTypeStore={}},render:function(legendModel,ecModel,api){var group=this.group;if(group.removeAll(),legendModel.get("show")){var selectMode=legendModel.get("selectedMode"),itemAlign=legendModel.get("align");"auto"===itemAlign&&(itemAlign="right"===legendModel.get("left")&&"vertical"===legendModel.get("orient")?"right":"left");var legendDrawedMap={};zrUtil.each(legendModel.getData(),function(itemModel){var name=itemModel.get("name");if(""===name||"\n"===name)return void group.add(new graphic.Group({newline:!0}));var seriesModel=ecModel.getSeriesByName(name)[0];if(!legendDrawedMap[name]){if(seriesModel){var data=seriesModel.getData(),color=data.getVisual("color");"function"==typeof color&&(color=color(seriesModel.getDataParams(0)));var legendSymbolType=data.getVisual("legendSymbol")||"roundRect",symbolType=data.getVisual("symbol"),itemGroup=this._createItem(name,itemModel,legendModel,legendSymbolType,symbolType,itemAlign,color,selectMode);itemGroup.on("click",curry(dispatchSelectAction,name,api)).on("mouseover",curry(dispatchHighlightAction,seriesModel,"",api)).on("mouseout",curry(dispatchDownplayAction,seriesModel,"",api)),legendDrawedMap[name]=!0}else ecModel.eachRawSeries(function(seriesModel){if(!legendDrawedMap[name]&&seriesModel.legendDataProvider){var data=seriesModel.legendDataProvider(),idx=data.indexOfName(name);if(idx<0)return;var color=data.getItemVisual(idx,"color"),legendSymbolType="roundRect",itemGroup=this._createItem(name,itemModel,legendModel,legendSymbolType,null,itemAlign,color,selectMode);itemGroup.on("click",curry(dispatchSelectAction,name,api)).on("mouseover",curry(dispatchHighlightAction,seriesModel,name,api)).on("mouseout",curry(dispatchDownplayAction,seriesModel,name,api)),legendDrawedMap[name]=!0}},this);legendDrawedMap[name]||console.warn(name+" series not exists. Legend data should be same with series name or data name.")}},this),listComponentHelper.layout(group,legendModel,api),listComponentHelper.addBackground(group,legendModel)}},_createItem:function(name,itemModel,legendModel,legendSymbolType,symbolType,itemAlign,color,selectMode){var itemWidth=legendModel.get("itemWidth"),itemHeight=legendModel.get("itemHeight"),inactiveColor=legendModel.get("inactiveColor"),isSelected=legendModel.isSelected(name),itemGroup=new graphic.Group,textStyleModel=itemModel.getModel("textStyle"),itemIcon=itemModel.get("icon"),tooltipModel=itemModel.getModel("tooltip");if(legendSymbolType=itemIcon||legendSymbolType,itemGroup.add(symbolCreator.createSymbol(legendSymbolType,0,0,itemWidth,itemHeight,isSelected?color:inactiveColor)),!itemIcon&&symbolType&&(symbolType!==legendSymbolType||"none"==symbolType)){var size=.8*itemHeight;"none"===symbolType&&(symbolType="circle"),itemGroup.add(symbolCreator.createSymbol(symbolType,(itemWidth-size)/2,(itemHeight-size)/2,size,size,isSelected?color:inactiveColor))}var textX="left"===itemAlign?itemWidth+5:-5,textAlign=itemAlign,formatter=legendModel.get("formatter"),content=name;"string"==typeof formatter&&formatter?content=formatter.replace("{name}",name):"function"==typeof formatter&&(content=formatter(name));var text=new graphic.Text({style:{text:content,x:textX,y:itemHeight/2,fill:isSelected?textStyleModel.getTextColor():inactiveColor,textFont:textStyleModel.getFont(),textAlign:textAlign,textVerticalAlign:"middle"}});itemGroup.add(text);var hitRect=new graphic.Rect({shape:itemGroup.getBoundingRect(),invisible:!0,tooltip:tooltipModel.get("show")?zrUtil.extend({content:name,
formatter:function(){return name},formatterParams:{componentType:"legend",legendIndex:legendModel.componentIndex,name:name,$vars:["name"]}},tooltipModel.option):null});return itemGroup.add(hitRect),itemGroup.eachChild(function(child){child.silent=!0}),hitRect.silent=!selectMode,this.group.add(itemGroup),graphic.setHoverStyle(itemGroup),itemGroup}})},function(module,exports,__webpack_require__){function positionGroup(group,model,api){layout.positionGroup(group,model.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()},model.get("padding"))}var layout=__webpack_require__(21),formatUtil=__webpack_require__(6),graphic=__webpack_require__(43);module.exports={layout:function(group,componentModel,api){var rect=layout.getLayoutRect(componentModel.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()},componentModel.get("padding"));layout.box(componentModel.get("orient"),group,componentModel.get("itemGap"),rect.width,rect.height),positionGroup(group,componentModel,api)},addBackground:function(group,componentModel){var padding=formatUtil.normalizeCssArray(componentModel.get("padding")),boundingRect=group.getBoundingRect(),style=componentModel.getItemStyle(["color","opacity"]);style.fill=componentModel.get("backgroundColor");var rect=new graphic.Rect({shape:{x:boundingRect.x-padding[3],y:boundingRect.y-padding[0],width:boundingRect.width+padding[1]+padding[3],height:boundingRect.height+padding[0]+padding[2]},style:style,silent:!0,z2:-1});graphic.subPixelOptimizeRect(rect),group.add(rect)}}},function(module,exports){module.exports=function(ecModel){var legendModels=ecModel.findComponents({mainType:"legend"});legendModels&&legendModels.length&&ecModel.filterSeries(function(series){for(var i=0;i<legendModels.length;i++)if(!legendModels[i].isSelected(series.name))return!1;return!0})}},function(module,exports,__webpack_require__){__webpack_require__(280),__webpack_require__(281),__webpack_require__(1).registerAction({type:"showTip",event:"showTip",update:"none"},function(){}),__webpack_require__(1).registerAction({type:"hideTip",event:"hideTip",update:"none"},function(){})},function(module,exports,__webpack_require__){__webpack_require__(1).extendComponentModel({type:"tooltip",defaultOption:{zlevel:0,z:8,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove",alwaysShowContent:!1,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderRadius:4,borderWidth:0,padding:5,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:!0,animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",lineStyle:{color:"#555",width:1,type:"solid"},crossStyle:{color:"#555",width:1,type:"dashed",textStyle:{}},shadowStyle:{color:"rgba(150,150,150,0.3)"}},textStyle:{color:"#fff",fontSize:14}}})},function(module,exports,__webpack_require__){function dataEqual(a,b){if(!a||!b)return!1;var round=numberUtil.round;return round(a[0])===round(b[0])&&round(a[1])===round(b[1])}function makeLineShape(x1,y1,x2,y2){return{x1:x1,y1:y1,x2:x2,y2:y2}}function makeRectShape(x,y,width,height){return{x:x,y:y,width:width,height:height}}function makeSectorShape(cx,cy,r0,r,startAngle,endAngle){return{cx:cx,cy:cy,r0:r0,r:r,startAngle:startAngle,endAngle:endAngle,clockwise:!0}}function refixTooltipPosition(x,y,el,viewWidth,viewHeight){var width=el.clientWidth,height=el.clientHeight,gap=20;return x+width+gap>viewWidth?x-=width+gap:x+=gap,y+height+gap>viewHeight?y-=height+gap:y+=gap,[x,y]}function calcTooltipPosition(position,rect,dom){var domWidth=dom.clientWidth,domHeight=dom.clientHeight,gap=5,x=0,y=0,rectWidth=rect.width,rectHeight=rect.height;switch(position){case"inside":x=rect.x+rectWidth/2-domWidth/2,y=rect.y+rectHeight/2-domHeight/2;break;case"top":x=rect.x+rectWidth/2-domWidth/2,y=rect.y-domHeight-gap;break;case"bottom":x=rect.x+rectWidth/2-domWidth/2,y=rect.y+rectHeight+gap;break;case"left":x=rect.x-domWidth-gap,y=rect.y+rectHeight/2-domHeight/2;break;case"right":x=rect.x+rectWidth+gap,y=rect.y+rectHeight/2-domHeight/2}return[x,y]}function updatePosition(positionExpr,x,y,content,params,el,api){var viewWidth=api.getWidth(),viewHeight=api.getHeight(),rect=el&&el.getBoundingRect().clone();if(el&&rect.applyTransform(el.transform),"function"==typeof positionExpr&&(positionExpr=positionExpr([x,y],params,content.el,rect)),zrUtil.isArray(positionExpr))x=parsePercent(positionExpr[0],viewWidth),y=parsePercent(positionExpr[1],viewHeight);else if("string"==typeof positionExpr&&el){var pos=calcTooltipPosition(positionExpr,rect,content.el);x=pos[0],y=pos[1]}else{var pos=refixTooltipPosition(x,y,content.el,viewWidth,viewHeight);x=pos[0],y=pos[1]}content.moveTo(x,y)}function ifSeriesSupportAxisTrigger(seriesModel){var coordSys=seriesModel.coordinateSystem,trigger=seriesModel.get("tooltip.trigger",!0);return!(!coordSys||"cartesian2d"!==coordSys.type&&"polar"!==coordSys.type&&"singleAxis"!==coordSys.type||"item"===trigger)}var TooltipContent=__webpack_require__(282),graphic=__webpack_require__(43),zrUtil=__webpack_require__(4),formatUtil=__webpack_require__(6),numberUtil=__webpack_require__(7),parsePercent=numberUtil.parsePercent,env=__webpack_require__(2),Model=__webpack_require__(12);__webpack_require__(1).extendComponentView({type:"tooltip",_axisPointers:{},init:function(ecModel,api){if(!env.node){var tooltipContent=new TooltipContent(api.getDom(),api);this._tooltipContent=tooltipContent,api.on("showTip",this._manuallyShowTip,this),api.on("hideTip",this._manuallyHideTip,this)}},render:function(tooltipModel,ecModel,api){if(!env.node){this.group.removeAll(),this._axisPointers={},this._tooltipModel=tooltipModel,this._ecModel=ecModel,this._api=api,this._lastHover={};var tooltipContent=this._tooltipContent;tooltipContent.update(),tooltipContent.enterable=tooltipModel.get("enterable"),this._alwaysShowContent=tooltipModel.get("alwaysShowContent"),this._seriesGroupByAxis=this._prepareAxisTriggerData(tooltipModel,ecModel);var crossText=this._crossText;if(crossText&&this.group.add(crossText),null!=this._lastX&&null!=this._lastY){var self=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){self._manuallyShowTip({x:self._lastX,y:self._lastY})})}var zr=this._api.getZr();zr.off("click",this._tryShow),zr.off("mousemove",this._mousemove),zr.off("mouseout",this._hide),zr.off("globalout",this._hide),"click"===tooltipModel.get("triggerOn")?zr.on("click",this._tryShow,this):(zr.on("mousemove",this._mousemove,this),zr.on("mouseout",this._hide,this),zr.on("globalout",this._hide,this))}},_mousemove:function(e){var showDelay=this._tooltipModel.get("showDelay"),self=this;clearTimeout(this._showTimeout),showDelay>0?this._showTimeout=setTimeout(function(){self._tryShow(e)},showDelay):this._tryShow(e)},_manuallyShowTip:function(event){if(event.from!==this.uid){var ecModel=this._ecModel,seriesIndex=event.seriesIndex,dataIndex=event.dataIndex,seriesModel=ecModel.getSeriesByIndex(seriesIndex),api=this._api;if(null==event.x||null==event.y){if(seriesModel||ecModel.eachSeries(function(_series){ifSeriesSupportAxisTrigger(_series)&&!seriesModel&&(seriesModel=_series)}),seriesModel){var data=seriesModel.getData();null==dataIndex&&(dataIndex=data.indexOfName(event.name));var cx,cy,el=data.getItemGraphicEl(dataIndex),coordSys=seriesModel.coordinateSystem;if(coordSys&&coordSys.dataToPoint){var point=coordSys.dataToPoint(data.getValues(zrUtil.map(coordSys.dimensions,function(dim){return seriesModel.coordDimToDataDim(dim)[0]}),dataIndex,!0));cx=point&&point[0],cy=point&&point[1]}else if(el){var rect=el.getBoundingRect().clone();rect.applyTransform(el.transform),cx=rect.x+rect.width/2,cy=rect.y+rect.height/2}null!=cx&&null!=cy&&this._tryShow({offsetX:cx,offsetY:cy,target:el,event:{}})}}else{var el=api.getZr().handler.findHover(event.x,event.y);this._tryShow({offsetX:event.x,offsetY:event.y,target:el,event:{}})}}},_manuallyHideTip:function(e){e.from!==this.uid&&this._hide()},_prepareAxisTriggerData:function(tooltipModel,ecModel){var seriesGroupByAxis={};return ecModel.eachSeries(function(seriesModel){if(ifSeriesSupportAxisTrigger(seriesModel)){var baseAxis,key,coordSys=seriesModel.coordinateSystem;"cartesian2d"===coordSys.type?(baseAxis=coordSys.getBaseAxis(),key=baseAxis.dim+baseAxis.index):"singleAxis"===coordSys.type?(baseAxis=coordSys.getAxis(),key=baseAxis.dim+baseAxis.type):(baseAxis=coordSys.getBaseAxis(),key=baseAxis.dim+coordSys.name),seriesGroupByAxis[key]=seriesGroupByAxis[key]||{coordSys:[],series:[]},seriesGroupByAxis[key].coordSys.push(coordSys),seriesGroupByAxis[key].series.push(seriesModel)}},this),seriesGroupByAxis},_tryShow:function(e){var el=e.target,tooltipModel=this._tooltipModel,globalTrigger=tooltipModel.get("trigger"),ecModel=this._ecModel,api=this._api;if(tooltipModel)if(this._lastX=e.offsetX,this._lastY=e.offsetY,el&&null!=el.dataIndex){var dataModel=el.dataModel||ecModel.getSeriesByIndex(el.seriesIndex),dataIndex=el.dataIndex,itemModel=dataModel.getData().getItemModel(dataIndex);"axis"===(itemModel.get("tooltip.trigger")||globalTrigger)?this._showAxisTooltip(tooltipModel,ecModel,e):(this._ticket="",this._hideAxisPointer(),this._resetLastHover(),this._showItemTooltipContent(dataModel,dataIndex,el.dataType,e)),api.dispatchAction({type:"showTip",from:this.uid,dataIndex:el.dataIndex,seriesIndex:el.seriesIndex})}else if(el&&el.tooltip){var tooltipOpt=el.tooltip;if("string"==typeof tooltipOpt){var content=tooltipOpt;tooltipOpt={content:content,formatter:content}}var subTooltipModel=new Model(tooltipOpt,tooltipModel),defaultHtml=subTooltipModel.get("content"),asyncTicket=Math.random();this._showTooltipContent(subTooltipModel,defaultHtml,subTooltipModel.get("formatterParams")||{},asyncTicket,e.offsetX,e.offsetY,el,api)}else"item"===globalTrigger?this._hide():this._showAxisTooltip(tooltipModel,ecModel,e),"cross"===tooltipModel.get("axisPointer.type")&&api.dispatchAction({type:"showTip",from:this.uid,x:e.offsetX,y:e.offsetY})},_showAxisTooltip:function(tooltipModel,ecModel,e){var axisPointerModel=tooltipModel.getModel("axisPointer"),axisPointerType=axisPointerModel.get("type");if("cross"===axisPointerType){var el=e.target;if(el&&null!=el.dataIndex){var seriesModel=ecModel.getSeriesByIndex(el.seriesIndex),dataIndex=el.dataIndex;this._showItemTooltipContent(seriesModel,dataIndex,el.dataType,e)}}this._showAxisPointer();var allNotShow=!0;zrUtil.each(this._seriesGroupByAxis,function(seriesCoordSysSameAxis){var allCoordSys=seriesCoordSysSameAxis.coordSys,coordSys=allCoordSys[0],point=[e.offsetX,e.offsetY];if(!coordSys.containPoint(point))return void this._hideAxisPointer(coordSys.name);allNotShow=!1;var dimensions=coordSys.dimensions,value=coordSys.pointToData(point,!0);point=coordSys.dataToPoint(value);var baseAxis=coordSys.getBaseAxis(),axisType=axisPointerModel.get("axis");"auto"===axisType&&(axisType=baseAxis.dim);var contentNotChange=!1,lastHover=this._lastHover;if("cross"===axisPointerType)dataEqual(lastHover.data,value)&&(contentNotChange=!0),lastHover.data=value;else{var valIndex=zrUtil.indexOf(dimensions,axisType);lastHover.data===value[valIndex]&&(contentNotChange=!0),lastHover.data=value[valIndex]}"cartesian2d"!==coordSys.type||contentNotChange?"polar"!==coordSys.type||contentNotChange?"singleAxis"!==coordSys.type||contentNotChange||this._showSinglePointer(axisPointerModel,coordSys,axisType,point):this._showPolarPointer(axisPointerModel,coordSys,axisType,point):this._showCartesianPointer(axisPointerModel,coordSys,axisType,point),"cross"!==axisPointerType&&this._dispatchAndShowSeriesTooltipContent(coordSys,seriesCoordSysSameAxis.series,point,value,contentNotChange)},this),this._tooltipModel.get("show")||this._hideAxisPointer(),allNotShow&&this._hide()},_showCartesianPointer:function(axisPointerModel,cartesian,axisType,point){function moveGridLine(axisType,point,otherExtent){var targetShape="x"===axisType?makeLineShape(point[0],otherExtent[0],point[0],otherExtent[1]):makeLineShape(otherExtent[0],point[1],otherExtent[1],point[1]),pointerEl=self._getPointerElement(cartesian,axisPointerModel,axisType,targetShape);graphic.subPixelOptimizeLine({shape:targetShape,style:pointerEl.style}),moveAnimation?graphic.updateProps(pointerEl,{shape:targetShape},axisPointerModel):pointerEl.attr({shape:targetShape})}function moveGridShadow(axisType,point,otherExtent){var axis=cartesian.getAxis(axisType),bandWidth=axis.getBandWidth(),span=otherExtent[1]-otherExtent[0],targetShape="x"===axisType?makeRectShape(point[0]-bandWidth/2,otherExtent[0],bandWidth,span):makeRectShape(otherExtent[0],point[1]-bandWidth/2,span,bandWidth),pointerEl=self._getPointerElement(cartesian,axisPointerModel,axisType,targetShape);moveAnimation?graphic.updateProps(pointerEl,{shape:targetShape},axisPointerModel):pointerEl.attr({shape:targetShape})}var self=this,axisPointerType=axisPointerModel.get("type"),baseAxis=cartesian.getBaseAxis(),moveAnimation="cross"!==axisPointerType&&"category"===baseAxis.type&&baseAxis.getBandWidth()>20;if("cross"===axisPointerType)moveGridLine("x",point,cartesian.getAxis("y").getGlobalExtent()),moveGridLine("y",point,cartesian.getAxis("x").getGlobalExtent()),this._updateCrossText(cartesian,point,axisPointerModel);else{var otherAxis=cartesian.getAxis("x"===axisType?"y":"x"),otherExtent=otherAxis.getGlobalExtent();"cartesian2d"===cartesian.type&&("line"===axisPointerType?moveGridLine:moveGridShadow)(axisType,point,otherExtent)}},_showSinglePointer:function(axisPointerModel,single,axisType,point){function moveSingleLine(axisType,point,otherExtent){var axis=single.getAxis(),orient=axis.orient,targetShape="horizontal"===orient?makeLineShape(point[0],otherExtent[0],point[0],otherExtent[1]):makeLineShape(otherExtent[0],point[1],otherExtent[1],point[1]),pointerEl=self._getPointerElement(single,axisPointerModel,axisType,targetShape);moveAnimation?graphic.updateProps(pointerEl,{shape:targetShape},axisPointerModel):pointerEl.attr({shape:targetShape})}var self=this,axisPointerType=axisPointerModel.get("type"),moveAnimation="cross"!==axisPointerType&&"category"===single.getBaseAxis().type,rect=single.getRect(),otherExtent=[rect.y,rect.y+rect.height];moveSingleLine(axisType,point,otherExtent)},_showPolarPointer:function(axisPointerModel,polar,axisType,point){function movePolarLine(axisType,point,otherExtent){var targetShape,mouseCoord=polar.pointToCoord(point);if("angle"===axisType){var p1=polar.coordToPoint([otherExtent[0],mouseCoord[1]]),p2=polar.coordToPoint([otherExtent[1],mouseCoord[1]]);targetShape=makeLineShape(p1[0],p1[1],p2[0],p2[1])}else targetShape={cx:polar.cx,cy:polar.cy,r:mouseCoord[0]};var pointerEl=self._getPointerElement(polar,axisPointerModel,axisType,targetShape);moveAnimation?graphic.updateProps(pointerEl,{shape:targetShape},axisPointerModel):pointerEl.attr({shape:targetShape})}function movePolarShadow(axisType,point,otherExtent){var targetShape,axis=polar.getAxis(axisType),bandWidth=axis.getBandWidth(),mouseCoord=polar.pointToCoord(point),radian=Math.PI/180;targetShape="angle"===axisType?makeSectorShape(polar.cx,polar.cy,otherExtent[0],otherExtent[1],(-mouseCoord[1]-bandWidth/2)*radian,(-mouseCoord[1]+bandWidth/2)*radian):makeSectorShape(polar.cx,polar.cy,mouseCoord[0]-bandWidth/2,mouseCoord[0]+bandWidth/2,0,2*Math.PI);var pointerEl=self._getPointerElement(polar,axisPointerModel,axisType,targetShape);moveAnimation?graphic.updateProps(pointerEl,{shape:targetShape},axisPointerModel):pointerEl.attr({shape:targetShape})}var self=this,axisPointerType=axisPointerModel.get("type"),angleAxis=polar.getAngleAxis(),radiusAxis=polar.getRadiusAxis(),moveAnimation="cross"!==axisPointerType&&"category"===polar.getBaseAxis().type;if("cross"===axisPointerType)movePolarLine("angle",point,radiusAxis.getExtent()),movePolarLine("radius",point,angleAxis.getExtent()),this._updateCrossText(polar,point,axisPointerModel);else{var otherAxis=polar.getAxis("radius"===axisType?"angle":"radius"),otherExtent=otherAxis.getExtent();("line"===axisPointerType?movePolarLine:movePolarShadow)(axisType,point,otherExtent)}},_updateCrossText:function(coordSys,point,axisPointerModel){var crossStyleModel=axisPointerModel.getModel("crossStyle"),textStyleModel=crossStyleModel.getModel("textStyle"),tooltipModel=this._tooltipModel,text=this._crossText;text||(text=this._crossText=new graphic.Text({style:{textAlign:"left",textVerticalAlign:"bottom"}}),this.group.add(text));var value=coordSys.pointToData(point),dims=coordSys.dimensions;value=zrUtil.map(value,function(val,idx){var axis=coordSys.getAxis(dims[idx]);return val="category"===axis.type||"time"===axis.type?axis.scale.getLabel(val):formatUtil.addCommas(val.toFixed(axis.getPixelPrecision()))}),text.setStyle({fill:textStyleModel.getTextColor()||crossStyleModel.get("color"),textFont:textStyleModel.getFont(),text:value.join(", "),x:point[0]+5,y:point[1]-5}),text.z=tooltipModel.get("z"),text.zlevel=tooltipModel.get("zlevel")},_getPointerElement:function(coordSys,pointerModel,axisType,initShape){var tooltipModel=this._tooltipModel,z=tooltipModel.get("z"),zlevel=tooltipModel.get("zlevel"),axisPointers=this._axisPointers,coordSysName=coordSys.name;if(axisPointers[coordSysName]=axisPointers[coordSysName]||{},axisPointers[coordSysName][axisType])return axisPointers[coordSysName][axisType];var pointerType=pointerModel.get("type"),styleModel=pointerModel.getModel(pointerType+"Style"),isShadow="shadow"===pointerType,style=styleModel[isShadow?"getAreaStyle":"getLineStyle"](),elementType="polar"===coordSys.type?isShadow?"Sector":"radius"===axisType?"Circle":"Line":isShadow?"Rect":"Line";isShadow?style.stroke=null:style.fill=null;var el=axisPointers[coordSysName][axisType]=new graphic[elementType]({style:style,z:z,zlevel:zlevel,silent:!0,shape:initShape});return this.group.add(el),el},_dispatchAndShowSeriesTooltipContent:function(coordSys,seriesList,point,value,contentNotChange){var rootTooltipModel=this._tooltipModel,baseAxis=coordSys.getBaseAxis(),baseDimIndex="x"===baseAxis.dim||"radius"===baseAxis.dim?0:1,payloadBatch=zrUtil.map(seriesList,function(series){return{seriesIndex:series.seriesIndex,dataIndex:series.getAxisTooltipDataIndex?series.getAxisTooltipDataIndex(series.coordDimToDataDim(baseAxis.dim),value,baseAxis):series.getData().indexOfNearest(series.coordDimToDataDim(baseAxis.dim)[0],value[baseDimIndex],!1,"category"===baseAxis.type?.5:null)}}),lastHover=this._lastHover,api=this._api;if(lastHover.payloadBatch&&!contentNotChange&&api.dispatchAction({type:"downplay",batch:lastHover.payloadBatch}),contentNotChange||(api.dispatchAction({type:"highlight",batch:payloadBatch}),lastHover.payloadBatch=payloadBatch),api.dispatchAction({type:"showTip",dataIndex:payloadBatch[0].dataIndex,seriesIndex:payloadBatch[0].seriesIndex,from:this.uid}),baseAxis&&rootTooltipModel.get("showContent")&&rootTooltipModel.get("show")){var paramsList=zrUtil.map(seriesList,function(series,index){return series.getDataParams(payloadBatch[index].dataIndex)});if(contentNotChange)updatePosition(rootTooltipModel.get("position"),point[0],point[1],this._tooltipContent,paramsList,null,api);else{var firstDataIndex=payloadBatch[0].dataIndex,firstLine="time"===baseAxis.type?baseAxis.scale.getLabel(value[baseDimIndex]):seriesList[0].getData().getName(firstDataIndex),defaultHtml=(firstLine?firstLine+"<br />":"")+zrUtil.map(seriesList,function(series,index){return series.formatTooltip(payloadBatch[index].dataIndex,!0)}).join("<br />"),asyncTicket="axis_"+coordSys.name+"_"+firstDataIndex;this._showTooltipContent(rootTooltipModel,defaultHtml,paramsList,asyncTicket,point[0],point[1],null,api)}}},_showItemTooltipContent:function(seriesModel,dataIndex,dataType,e){var api=this._api,data=seriesModel.getData(dataType),itemModel=data.getItemModel(dataIndex),tooltipOpt=itemModel.get("tooltip",!0);if("string"==typeof tooltipOpt){var tooltipContent=tooltipOpt;tooltipOpt={formatter:tooltipContent}}var rootTooltipModel=this._tooltipModel,seriesTooltipModel=seriesModel.getModel("tooltip",rootTooltipModel),tooltipModel=new Model(tooltipOpt,seriesTooltipModel,seriesTooltipModel.ecModel),params=seriesModel.getDataParams(dataIndex,dataType),defaultHtml=seriesModel.formatTooltip(dataIndex,!1,dataType),asyncTicket="item_"+seriesModel.name+"_"+dataIndex;this._showTooltipContent(tooltipModel,defaultHtml,params,asyncTicket,e.offsetX,e.offsetY,e.target,api)},_showTooltipContent:function(tooltipModel,defaultHtml,params,asyncTicket,x,y,target,api){if(this._ticket="",tooltipModel.get("showContent")&&tooltipModel.get("show")){var tooltipContent=this._tooltipContent,formatter=tooltipModel.get("formatter"),positionExpr=tooltipModel.get("position"),html=defaultHtml;if(formatter)if("string"==typeof formatter)html=formatUtil.formatTpl(formatter,params);else if("function"==typeof formatter){var self=this,ticket=asyncTicket,callback=function(cbTicket,html){cbTicket===self._ticket&&(tooltipContent.setContent(html),updatePosition(positionExpr,x,y,tooltipContent,params,target,api))};self._ticket=ticket,html=formatter(params,ticket,callback)}tooltipContent.show(tooltipModel),tooltipContent.setContent(html),updatePosition(positionExpr,x,y,tooltipContent,params,target,api)}},_showAxisPointer:function(coordSysName){if(coordSysName){var axisPointers=this._axisPointers[coordSysName];axisPointers&&zrUtil.each(axisPointers,function(el){el.show()})}else this.group.eachChild(function(child){child.show()}),this.group.show()},_resetLastHover:function(){var lastHover=this._lastHover;lastHover.payloadBatch&&this._api.dispatchAction({type:"downplay",batch:lastHover.payloadBatch}),this._lastHover={}},_hideAxisPointer:function(coordSysName){if(coordSysName){var axisPointers=this._axisPointers[coordSysName];axisPointers&&zrUtil.each(axisPointers,function(el){el.hide()})}else this.group.children().length&&this.group.hide()},_hide:function(){clearTimeout(this._showTimeout),this._hideAxisPointer(),this._resetLastHover(),this._alwaysShowContent||this._tooltipContent.hideLater(this._tooltipModel.get("hideDelay")),this._api.dispatchAction({type:"hideTip",from:this.uid}),this._lastX=this._lastY=null},dispose:function(ecModel,api){if(!env.node){var zr=api.getZr();this._tooltipContent.hide(),zr.off("click",this._tryShow),zr.off("mousemove",this._mousemove),zr.off("mouseout",this._hide),zr.off("globalout",this._hide),api.off("showTip",this._manuallyShowTip),api.off("hideTip",this._manuallyHideTip)}}})},function(module,exports,__webpack_require__){function assembleTransition(duration){var transitionCurve="cubic-bezier(0.23, 1, 0.32, 1)",transitionText="left "+duration+"s "+transitionCurve+",top "+duration+"s "+transitionCurve;return zrUtil.map(vendors,function(vendorPrefix){return vendorPrefix+"transition:"+transitionText}).join(";")}function assembleFont(textStyleModel){var cssText=[],fontSize=textStyleModel.get("fontSize"),color=textStyleModel.getTextColor();return color&&cssText.push("color:"+color),cssText.push("font:"+textStyleModel.getFont()),fontSize&&cssText.push("line-height:"+Math.round(3*fontSize/2)+"px"),each(["decoration","align"],function(name){var val=textStyleModel.get(name);val&&cssText.push("text-"+name+":"+val)}),cssText.join(";")}function assembleCssText(tooltipModel){tooltipModel=tooltipModel;var cssText=[],transitionDuration=tooltipModel.get("transitionDuration"),backgroundColor=tooltipModel.get("backgroundColor"),textStyleModel=tooltipModel.getModel("textStyle"),padding=tooltipModel.get("padding");return transitionDuration&&cssText.push(assembleTransition(transitionDuration)),backgroundColor&&(env.canvasSupported?cssText.push("background-Color:"+backgroundColor):(cssText.push("background-Color:#"+zrColor.toHex(backgroundColor)),cssText.push("filter:alpha(opacity=70)"))),each(["width","color","radius"],function(name){var borderName="border-"+name,camelCase=toCamelCase(borderName),val=tooltipModel.get(camelCase);null!=val&&cssText.push(borderName+":"+val+("color"===name?"":"px"))}),cssText.push(assembleFont(textStyleModel)),null!=padding&&cssText.push("padding:"+formatUtil.normalizeCssArray(padding).join("px ")+"px"),cssText.join(";")+";"}function TooltipContent(container,api){var el=document.createElement("div"),zr=api.getZr();this.el=el,this._x=api.getWidth()/2,this._y=api.getHeight()/2,container.appendChild(el),this._container=container,this._show=!1,this._hideTimeout;var self=this;el.onmouseenter=function(){self.enterable&&(clearTimeout(self._hideTimeout),self._show=!0),self._inContent=!0},el.onmousemove=function(e){if(!self.enterable){var handler=zr.handler;eventUtil.normalizeEvent(container,e),handler.dispatch("mousemove",e)}},el.onmouseleave=function(){self.enterable&&self._show&&self.hideLater(self._hideDelay),self._inContent=!1},compromiseMobile(el,container)}function compromiseMobile(tooltipContentEl,container){function preventDefault(e){contains(e.target)&&e.preventDefault()}function contains(targetEl){for(;targetEl&&targetEl!==container;){if(targetEl===tooltipContentEl)return!0;targetEl=targetEl.parentNode}}eventUtil.addEventListener(container,"touchstart",preventDefault),eventUtil.addEventListener(container,"touchmove",preventDefault),eventUtil.addEventListener(container,"touchend",preventDefault)}var zrUtil=__webpack_require__(4),zrColor=__webpack_require__(39),eventUtil=__webpack_require__(87),formatUtil=__webpack_require__(6),each=zrUtil.each,toCamelCase=formatUtil.toCamelCase,env=__webpack_require__(2),vendors=["","-webkit-","-moz-","-o-"],gCssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;";TooltipContent.prototype={constructor:TooltipContent,enterable:!0,update:function(){var container=this._container,stl=container.currentStyle||document.defaultView.getComputedStyle(container),domStyle=container.style;"absolute"!==domStyle.position&&"absolute"!==stl.position&&(domStyle.position="relative")},show:function(tooltipModel){clearTimeout(this._hideTimeout);var el=this.el;el.style.cssText=gCssText+assembleCssText(tooltipModel)+";left:"+this._x+"px;top:"+this._y+"px;"+(tooltipModel.get("extraCssText")||""),el.style.display=el.innerHTML?"block":"none",this._show=!0},setContent:function(content){var el=this.el;el.innerHTML=content,el.style.display=content?"block":"none"},moveTo:function(x,y){var style=this.el.style;style.left=x+"px",style.top=y+"px",this._x=x,this._y=y},hide:function(){this.el.style.display="none",this._show=!1},hideLater:function(time){!this._show||this._inContent&&this.enterable||(time?(this._hideDelay=time,this._show=!1,this._hideTimeout=setTimeout(zrUtil.bind(this.hide,this),time)):this.hide())},isShow:function(){return this._show}},module.exports=TooltipContent},function(module,exports,__webpack_require__){"use strict";__webpack_require__(284),__webpack_require__(290),__webpack_require__(292),__webpack_require__(1).extendComponentView({type:"polar"})},function(module,exports,__webpack_require__){function resizePolar(polarModel,api){var center=polarModel.get("center"),radius=polarModel.get("radius"),width=api.getWidth(),height=api.getHeight(),parsePercent=numberUtil.parsePercent;this.cx=parsePercent(center[0],width),this.cy=parsePercent(center[1],height);var radiusAxis=this.getRadiusAxis(),size=Math.min(width,height)/2;radiusAxis.setExtent(0,parsePercent(radius,size))}function updatePolarScale(ecModel,api){var polar=this,angleAxis=polar.getAngleAxis(),radiusAxis=polar.getRadiusAxis();if(angleAxis.scale.setExtent(1/0,-(1/0)),radiusAxis.scale.setExtent(1/0,-(1/0)),ecModel.eachSeries(function(seriesModel){if(seriesModel.coordinateSystem===polar){var data=seriesModel.getData();radiusAxis.scale.unionExtent(data.getDataExtent("radius","category"!==radiusAxis.type)),angleAxis.scale.unionExtent(data.getDataExtent("angle","category"!==angleAxis.type))}}),niceScaleExtent(angleAxis,angleAxis.model),niceScaleExtent(radiusAxis,radiusAxis.model),"category"===angleAxis.type&&!angleAxis.onBand){var extent=angleAxis.getExtent(),diff=360/angleAxis.scale.count();angleAxis.inverse?extent[1]+=diff:extent[1]-=diff,angleAxis.setExtent(extent[0],extent[1])}}function setAxis(axis,axisModel){if(axis.type=axisModel.get("type"),axis.scale=axisHelper.createScaleByModel(axisModel),axis.onBand=axisModel.get("boundaryGap")&&"category"===axis.type,"angleAxis"===axisModel.mainType){var startAngle=axisModel.get("startAngle");axis.inverse=axisModel.get("inverse")^axisModel.get("clockwise"),axis.setExtent(startAngle,startAngle+(axis.inverse?-360:360))}axisModel.axis=axis,axis.model=axisModel}var Polar=__webpack_require__(285),numberUtil=__webpack_require__(7),zrUtil=__webpack_require__(4),axisHelper=__webpack_require__(114),niceScaleExtent=axisHelper.niceScaleExtent;__webpack_require__(288);var polarCreator={dimensions:Polar.prototype.dimensions,create:function(ecModel,api){var polarList=[];return ecModel.eachComponent("polar",function(polarModel,idx){var polar=new Polar(idx);polar.resize=resizePolar,polar.update=updatePolarScale;var radiusAxis=polar.getRadiusAxis(),angleAxis=polar.getAngleAxis(),radiusAxisModel=polarModel.findAxisModel("radiusAxis"),angleAxisModel=polarModel.findAxisModel("angleAxis");setAxis(radiusAxis,radiusAxisModel),setAxis(angleAxis,angleAxisModel),polar.resize(polarModel,api),polarList.push(polar),polarModel.coordinateSystem=polar}),ecModel.eachSeries(function(seriesModel){if("polar"===seriesModel.get("coordinateSystem")){var polarModel=ecModel.queryComponents({mainType:"polar",index:seriesModel.get("polarIndex"),id:seriesModel.get("polarId")})[0];if(!polarModel)throw new Error('Polar "'+zrUtil.retrieve(seriesModel.get("polarIndex"),seriesModel.get("polarId"),0)+'" not found');seriesModel.coordinateSystem=polarModel.coordinateSystem}}),polarList}};__webpack_require__(26).register("polar",polarCreator)},function(module,exports,__webpack_require__){"use strict";var RadiusAxis=__webpack_require__(286),AngleAxis=__webpack_require__(287),Polar=function(name){this.name=name||"",this.cx=0,this.cy=0,this._radiusAxis=new RadiusAxis,this._angleAxis=new AngleAxis};Polar.prototype={constructor:Polar,type:"polar",dimensions:["radius","angle"],containPoint:function(point){var coord=this.pointToCoord(point);return this._radiusAxis.contain(coord[0])&&this._angleAxis.contain(coord[1])},containData:function(data){return this._radiusAxis.containData(data[0])&&this._angleAxis.containData(data[1])},getAxis:function(axisType){return this["_"+axisType+"Axis"]},getAxesByScale:function(scaleType){var axes=[],angleAxis=this._angleAxis,radiusAxis=this._radiusAxis;return angleAxis.scale.type===scaleType&&axes.push(angleAxis),radiusAxis.scale.type===scaleType&&axes.push(radiusAxis),axes},getAngleAxis:function(){return this._angleAxis},getRadiusAxis:function(){return this._radiusAxis},getOtherAxis:function(axis){var angleAxis=this._angleAxis;return axis===angleAxis?this._radiusAxis:angleAxis},getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},dataToPoints:function(data){return data.mapArray(this.dimensions,function(radius,angle){return this.dataToPoint([radius,angle])},this)},dataToPoint:function(data,clamp){return this.coordToPoint([this._radiusAxis.dataToRadius(data[0],clamp),this._angleAxis.dataToAngle(data[1],clamp)])},pointToData:function(point,clamp){var coord=this.pointToCoord(point);return[this._radiusAxis.radiusToData(coord[0],clamp),this._angleAxis.angleToData(coord[1],clamp)]},pointToCoord:function(point){var dx=point[0]-this.cx,dy=point[1]-this.cy,angleAxis=this.getAngleAxis(),extent=angleAxis.getExtent(),minAngle=Math.min(extent[0],extent[1]),maxAngle=Math.max(extent[0],extent[1]);angleAxis.inverse?minAngle=maxAngle-360:maxAngle=minAngle+360;var radius=Math.sqrt(dx*dx+dy*dy);dx/=radius,dy/=radius;for(var radian=Math.atan2(-dy,dx)/Math.PI*180,dir=radian<minAngle?1:-1;radian<minAngle||radian>maxAngle;)radian+=360*dir;return[radius,radian]},coordToPoint:function(coord){var radius=coord[0],radian=coord[1]/180*Math.PI,x=Math.cos(radian)*radius+this.cx,y=-Math.sin(radian)*radius+this.cy;return[x,y]}},module.exports=Polar;
},function(module,exports,__webpack_require__){"use strict";function RadiusAxis(scale,radiusExtent){Axis.call(this,"radius",scale,radiusExtent),this.type="category"}var zrUtil=__webpack_require__(4),Axis=__webpack_require__(123);RadiusAxis.prototype={constructor:RadiusAxis,dataToRadius:Axis.prototype.dataToCoord,radiusToData:Axis.prototype.coordToData},zrUtil.inherits(RadiusAxis,Axis),module.exports=RadiusAxis},function(module,exports,__webpack_require__){"use strict";function AngleAxis(scale,angleExtent){angleExtent=angleExtent||[0,360],Axis.call(this,"angle",scale,angleExtent),this.type="category"}var zrUtil=__webpack_require__(4),Axis=__webpack_require__(123);AngleAxis.prototype={constructor:AngleAxis,dataToAngle:Axis.prototype.dataToCoord,angleToData:Axis.prototype.coordToData},zrUtil.inherits(AngleAxis,Axis),module.exports=AngleAxis},function(module,exports,__webpack_require__){"use strict";__webpack_require__(289),__webpack_require__(1).extendComponentModel({type:"polar",dependencies:["polarAxis","angleAxis"],coordinateSystem:null,findAxisModel:function(axisType){var foundAxisModel,ecModel=this.ecModel;return ecModel.eachComponent(axisType,function(axisModel){var polarModel=ecModel.queryComponents({mainType:"polar",index:axisModel.getShallow("polarIndex"),id:axisModel.getShallow("polarId")})[0];polarModel===this&&(foundAxisModel=axisModel)},this),foundAxisModel},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"80%"}})},function(module,exports,__webpack_require__){"use strict";function getAxisType(axisDim,option){return option.type||(option.data?"category":"value")}var zrUtil=__webpack_require__(4),ComponentModel=__webpack_require__(19),axisModelCreator=__webpack_require__(127),PolarAxisModel=ComponentModel.extend({type:"polarAxis",axis:null});zrUtil.merge(PolarAxisModel.prototype,__webpack_require__(129));var polarAxisDefaultExtendedOption={angle:{startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:!1}},radius:{splitNumber:5}};axisModelCreator("angle",PolarAxisModel,getAxisType,polarAxisDefaultExtendedOption.angle),axisModelCreator("radius",PolarAxisModel,getAxisType,polarAxisDefaultExtendedOption.radius)},function(module,exports,__webpack_require__){"use strict";__webpack_require__(284),__webpack_require__(291)},function(module,exports,__webpack_require__){"use strict";function getAxisLineShape(polar,r0,r,angle){var start=polar.coordToPoint([r0,angle]),end=polar.coordToPoint([r,angle]);return{x1:start[0],y1:start[1],x2:end[0],y2:end[1]}}var zrUtil=__webpack_require__(4),graphic=__webpack_require__(43),Model=__webpack_require__(12),elementList=["axisLine","axisLabel","axisTick","splitLine","splitArea"];__webpack_require__(1).extendComponentView({type:"angleAxis",render:function(angleAxisModel,ecModel){if(this.group.removeAll(),angleAxisModel.get("show")){var polarModel=ecModel.getComponent("polar",angleAxisModel.get("polarIndex")),angleAxis=angleAxisModel.axis,polar=polarModel.coordinateSystem,radiusExtent=polar.getRadiusAxis().getExtent(),ticksAngles=angleAxis.getTicksCoords();"category"!==angleAxis.type&&ticksAngles.pop(),zrUtil.each(elementList,function(name){angleAxisModel.get(name+".show")&&this["_"+name](angleAxisModel,polar,ticksAngles,radiusExtent)},this)}},_axisLine:function(angleAxisModel,polar,ticksAngles,radiusExtent){var lineStyleModel=angleAxisModel.getModel("axisLine.lineStyle"),circle=new graphic.Circle({shape:{cx:polar.cx,cy:polar.cy,r:radiusExtent[1]},style:lineStyleModel.getLineStyle(),z2:1,silent:!0});circle.style.fill=null,this.group.add(circle)},_axisTick:function(angleAxisModel,polar,ticksAngles,radiusExtent){var tickModel=angleAxisModel.getModel("axisTick"),tickLen=(tickModel.get("inside")?-1:1)*tickModel.get("length"),lines=zrUtil.map(ticksAngles,function(tickAngle){return new graphic.Line({shape:getAxisLineShape(polar,radiusExtent[1],radiusExtent[1]+tickLen,tickAngle)})});this.group.add(graphic.mergePath(lines,{style:zrUtil.defaults(tickModel.getModel("lineStyle").getLineStyle(),{stroke:angleAxisModel.get("axisLine.lineStyle.color")})}))},_axisLabel:function(angleAxisModel,polar,ticksAngles,radiusExtent){for(var axis=angleAxisModel.axis,categoryData=angleAxisModel.get("data"),labelModel=angleAxisModel.getModel("axisLabel"),axisTextStyleModel=labelModel.getModel("textStyle"),labels=angleAxisModel.getFormattedLabels(),labelMargin=labelModel.get("margin"),labelsAngles=axis.getLabelsCoords(),i=0;i<ticksAngles.length;i++){var r=radiusExtent[1],p=polar.coordToPoint([r+labelMargin,labelsAngles[i]]),cx=polar.cx,cy=polar.cy,labelTextAlign=Math.abs(p[0]-cx)/r<.3?"center":p[0]>cx?"left":"right",labelTextBaseline=Math.abs(p[1]-cy)/r<.3?"middle":p[1]>cy?"top":"bottom",textStyleModel=axisTextStyleModel;categoryData&&categoryData[i]&&categoryData[i].textStyle&&(textStyleModel=new Model(categoryData[i].textStyle,axisTextStyleModel)),this.group.add(new graphic.Text({style:{x:p[0],y:p[1],fill:textStyleModel.getTextColor()||angleAxisModel.get("axisLine.lineStyle.color"),text:labels[i],textAlign:labelTextAlign,textVerticalAlign:labelTextBaseline,textFont:textStyleModel.getFont()},silent:!0}))}},_splitLine:function(angleAxisModel,polar,ticksAngles,radiusExtent){var splitLineModel=angleAxisModel.getModel("splitLine"),lineStyleModel=splitLineModel.getModel("lineStyle"),lineColors=lineStyleModel.get("color"),lineCount=0;lineColors=lineColors instanceof Array?lineColors:[lineColors];for(var splitLines=[],i=0;i<ticksAngles.length;i++){var colorIndex=lineCount++%lineColors.length;splitLines[colorIndex]=splitLines[colorIndex]||[],splitLines[colorIndex].push(new graphic.Line({shape:getAxisLineShape(polar,radiusExtent[0],radiusExtent[1],ticksAngles[i])}))}for(var i=0;i<splitLines.length;i++)this.group.add(graphic.mergePath(splitLines[i],{style:zrUtil.defaults({stroke:lineColors[i%lineColors.length]},lineStyleModel.getLineStyle()),silent:!0,z:angleAxisModel.get("z")}))},_splitArea:function(angleAxisModel,polar,ticksAngles,radiusExtent){var splitAreaModel=angleAxisModel.getModel("splitArea"),areaStyleModel=splitAreaModel.getModel("areaStyle"),areaColors=areaStyleModel.get("color"),lineCount=0;areaColors=areaColors instanceof Array?areaColors:[areaColors];for(var splitAreas=[],RADIAN=Math.PI/180,prevAngle=-ticksAngles[0]*RADIAN,r0=Math.min(radiusExtent[0],radiusExtent[1]),r1=Math.max(radiusExtent[0],radiusExtent[1]),clockwise=angleAxisModel.get("clockwise"),i=1;i<ticksAngles.length;i++){var colorIndex=lineCount++%areaColors.length;splitAreas[colorIndex]=splitAreas[colorIndex]||[],splitAreas[colorIndex].push(new graphic.Sector({shape:{cx:polar.cx,cy:polar.cy,r0:r0,r:r1,startAngle:prevAngle,endAngle:-ticksAngles[i]*RADIAN,clockwise:clockwise},silent:!0})),prevAngle=-ticksAngles[i]*RADIAN}for(var i=0;i<splitAreas.length;i++)this.group.add(graphic.mergePath(splitAreas[i],{style:zrUtil.defaults({fill:areaColors[i%areaColors.length]},areaStyleModel.getAreaStyle()),silent:!0}))}})},function(module,exports,__webpack_require__){__webpack_require__(284),__webpack_require__(293)},function(module,exports,__webpack_require__){"use strict";function layoutAxis(polar,radiusAxisModel,axisAngle){return{position:[polar.cx,polar.cy],rotation:axisAngle/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotation:radiusAxisModel.getModel("axisLabel").get("rotate"),z2:1}}var zrUtil=__webpack_require__(4),graphic=__webpack_require__(43),AxisBuilder=__webpack_require__(132),axisBuilderAttrs=["axisLine","axisLabel","axisTick","axisName"],selfBuilderAttrs=["splitLine","splitArea"];__webpack_require__(1).extendComponentView({type:"radiusAxis",render:function(radiusAxisModel,ecModel){if(this.group.removeAll(),radiusAxisModel.get("show")){var polarModel=ecModel.getComponent("polar",radiusAxisModel.get("polarIndex")),angleAxis=polarModel.coordinateSystem.getAngleAxis(),radiusAxis=radiusAxisModel.axis,polar=polarModel.coordinateSystem,ticksCoords=radiusAxis.getTicksCoords(),axisAngle=angleAxis.getExtent()[0],radiusExtent=radiusAxis.getExtent(),layout=layoutAxis(polar,radiusAxisModel,axisAngle),axisBuilder=new AxisBuilder(radiusAxisModel,layout);zrUtil.each(axisBuilderAttrs,axisBuilder.add,axisBuilder),this.group.add(axisBuilder.getGroup()),zrUtil.each(selfBuilderAttrs,function(name){radiusAxisModel.get(name+".show")&&this["_"+name](radiusAxisModel,polar,axisAngle,radiusExtent,ticksCoords)},this)}},_splitLine:function(radiusAxisModel,polar,axisAngle,radiusExtent,ticksCoords){var splitLineModel=radiusAxisModel.getModel("splitLine"),lineStyleModel=splitLineModel.getModel("lineStyle"),lineColors=lineStyleModel.get("color"),lineCount=0;lineColors=lineColors instanceof Array?lineColors:[lineColors];for(var splitLines=[],i=0;i<ticksCoords.length;i++){var colorIndex=lineCount++%lineColors.length;splitLines[colorIndex]=splitLines[colorIndex]||[],splitLines[colorIndex].push(new graphic.Circle({shape:{cx:polar.cx,cy:polar.cy,r:ticksCoords[i]},silent:!0}))}for(var i=0;i<splitLines.length;i++)this.group.add(graphic.mergePath(splitLines[i],{style:zrUtil.defaults({stroke:lineColors[i%lineColors.length],fill:null},lineStyleModel.getLineStyle()),silent:!0}))},_splitArea:function(radiusAxisModel,polar,axisAngle,radiusExtent,ticksCoords){var splitAreaModel=radiusAxisModel.getModel("splitArea"),areaStyleModel=splitAreaModel.getModel("areaStyle"),areaColors=areaStyleModel.get("color"),lineCount=0;areaColors=areaColors instanceof Array?areaColors:[areaColors];for(var splitAreas=[],prevRadius=ticksCoords[0],i=1;i<ticksCoords.length;i++){var colorIndex=lineCount++%areaColors.length;splitAreas[colorIndex]=splitAreas[colorIndex]||[],splitAreas[colorIndex].push(new graphic.Sector({shape:{cx:polar.cx,cy:polar.cy,r0:prevRadius,r:ticksCoords[i],startAngle:0,endAngle:2*Math.PI},silent:!0})),prevRadius=ticksCoords[i]}for(var i=0;i<splitAreas.length;i++)this.group.add(graphic.mergePath(splitAreas[i],{style:zrUtil.defaults({fill:areaColors[i%areaColors.length]},areaStyleModel.getAreaStyle()),silent:!0}))}})},function(module,exports,__webpack_require__){function makeAction(method,actionInfo){actionInfo.update="updateView",echarts.registerAction(actionInfo,function(payload,ecModel){var selected={};return ecModel.eachComponent({mainType:"geo",query:payload},function(geoModel){geoModel[method](payload.name);var geo=geoModel.coordinateSystem;zrUtil.each(geo.regions,function(region){selected[region.name]=geoModel.isSelected(region.name)||!1})}),{selected:selected,name:payload.name}})}__webpack_require__(295),__webpack_require__(163),__webpack_require__(296),__webpack_require__(176);var echarts=__webpack_require__(1),zrUtil=__webpack_require__(4);makeAction("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),makeAction("select",{type:"geoSelect",event:"geoselected"}),makeAction("unSelect",{type:"geoUnSelect",event:"geounselected"})},function(module,exports,__webpack_require__){"use strict";var modelUtil=__webpack_require__(5),ComponentModel=__webpack_require__(19),Model=__webpack_require__(12),zrUtil=__webpack_require__(4),selectableMixin=__webpack_require__(140),geoCreator=__webpack_require__(163),GeoModel=ComponentModel.extend({type:"geo",coordinateSystem:null,layoutMode:"box",init:function(option){ComponentModel.prototype.init.apply(this,arguments),modelUtil.defaultEmphasis(option.label,["position","show","textStyle","distance","formatter"])},optionUpdated:function(){var option=this.option,self=this;option.regions=geoCreator.getFilledRegions(option.regions,option.map),this._optionModelMap=zrUtil.reduce(option.regions||[],function(obj,regionOpt){return regionOpt.name&&(obj[regionOpt.name]=new Model(regionOpt,self)),obj},{}),this.updateSelectedMap(option.regions)},defaultOption:{zlevel:0,z:0,show:!0,left:"center",top:"center",aspectScale:.75,silent:!1,map:"",center:null,zoom:1,scaleLimit:null,label:{normal:{show:!1,textStyle:{color:"#000"}},emphasis:{show:!0,textStyle:{color:"rgb(100,0,0)"}}},itemStyle:{normal:{borderWidth:.5,borderColor:"#444",color:"#eee"},emphasis:{color:"rgba(255,215,0,0.8)"}},regions:[]},getRegionModel:function(name){return this._optionModelMap[name]},getFormattedLabel:function(name,status){var formatter=this.get("label."+status+".formatter"),params={name:name};return"function"==typeof formatter?(params.status=status,formatter(params)):"string"==typeof formatter?formatter.replace("{a}",params.seriesName):void 0},setZoom:function(zoom){this.option.zoom=zoom},setCenter:function(center){this.option.center=center}});zrUtil.mixin(GeoModel,selectableMixin),module.exports=GeoModel},function(module,exports,__webpack_require__){"use strict";var MapDraw=__webpack_require__(173);module.exports=__webpack_require__(1).extendComponentView({type:"geo",init:function(ecModel,api){var mapDraw=new MapDraw(api,!0);this._mapDraw=mapDraw,this.group.add(mapDraw.group)},render:function(geoModel,ecModel,api,payload){if(!payload||"geoToggleSelect"!==payload.type||payload.from!==this.uid){var mapDraw=this._mapDraw;geoModel.get("show")?mapDraw.draw(geoModel,ecModel,api,this,payload):this._mapDraw.group.removeAll(),this.group.silent=geoModel.get("silent")}}})},function(module,exports,__webpack_require__){__webpack_require__(298),__webpack_require__(301),__webpack_require__(302);var echarts=__webpack_require__(1);echarts.extendComponentView({type:"single"})},function(module,exports,__webpack_require__){function create(ecModel,api){var singles=[];return ecModel.eachComponent("singleAxis",function(axisModel,idx){var single=new Single(axisModel,ecModel,api);single.name="single_"+idx,single.resize(axisModel,api),axisModel.coordinateSystem=single,singles.push(single)}),ecModel.eachSeries(function(seriesModel){if("singleAxis"===seriesModel.get("coordinateSystem")){var singleAxisModel=ecModel.queryComponents({mainType:"singleAxis",index:seriesModel.get("singleAxisIndex"),id:seriesModel.get("singleAxisId")})[0];seriesModel.coordinateSystem=singleAxisModel.coordinateSystem}}),singles}var Single=__webpack_require__(299);__webpack_require__(26).register("single",{create:create,dimensions:Single.prototype.dimensions})},function(module,exports,__webpack_require__){function Single(axisModel,ecModel,api){this.dimension="x",this.dimensions=["x"],this._axis=null,this._rect,this._init(axisModel,ecModel,api),this._model=axisModel}var SingleAxis=__webpack_require__(300),axisHelper=__webpack_require__(114),layout=__webpack_require__(21);Single.prototype={type:"singleAxis",constructor:Single,_init:function(axisModel,ecModel,api){var dim=this.dimension,axis=new SingleAxis(dim,axisHelper.createScaleByModel(axisModel),[0,0],axisModel.get("type"),axisModel.get("position")),isCategory="category"===axis.type;axis.onBand=isCategory&&axisModel.get("boundaryGap"),axis.inverse=axisModel.get("inverse"),axis.orient=axisModel.get("orient"),axisModel.axis=axis,axis.model=axisModel,this._axis=axis},update:function(ecModel,api){this._updateAxisFromSeries(ecModel)},_updateAxisFromSeries:function(ecModel){ecModel.eachSeries(function(seriesModel){var data=seriesModel.getData(),dim=this.dimension;this._axis.scale.unionExtent(data.getDataExtent(seriesModel.coordDimToDataDim(dim))),axisHelper.niceScaleExtent(this._axis,this._axis.model)},this)},resize:function(axisModel,api){this._rect=layout.getLayoutRect({left:axisModel.get("left"),top:axisModel.get("top"),right:axisModel.get("right"),bottom:axisModel.get("bottom"),width:axisModel.get("width"),height:axisModel.get("height")},{width:api.getWidth(),height:api.getHeight()}),this._adjustAxis()},getRect:function(){return this._rect},_adjustAxis:function(){var rect=this._rect,axis=this._axis,isHorizontal=axis.isHorizontal(),extent=isHorizontal?[0,rect.width]:[0,rect.height],idx=axis.reverse?1:0;axis.setExtent(extent[idx],extent[1-idx]),this._updateAxisTransform(axis,isHorizontal?rect.x:rect.y)},_updateAxisTransform:function(axis,coordBase){var axisExtent=axis.getExtent(),extentSum=axisExtent[0]+axisExtent[1],isHorizontal=axis.isHorizontal();axis.toGlobalCoord=isHorizontal?function(coord){return coord+coordBase}:function(coord){return extentSum-coord+coordBase},axis.toLocalCoord=isHorizontal?function(coord){return coord-coordBase}:function(coord){return extentSum-coord+coordBase}},getAxis:function(){return this._axis},getBaseAxis:function(){return this._axis},containPoint:function(point){var rect=this.getRect(),axis=this.getAxis(),orient=axis.orient;return"horizontal"===orient?axis.contain(axis.toLocalCoord(point[0]))&&point[1]>=rect.y&&point[1]<=rect.y+rect.height:axis.contain(axis.toLocalCoord(point[1]))&&point[0]>=rect.y&&point[0]<=rect.y+rect.height},pointToData:function(point){var axis=this.getAxis();return[axis.coordToData(axis.toLocalCoord(point["horizontal"===axis.orient?0:1]))]},dataToPoint:function(val){var axis=this.getAxis(),rect=this.getRect(),pt=[],idx="horizontal"===axis.orient?0:1;return pt[idx]=axis.toGlobalCoord(axis.dataToCoord(+val)),pt[1-idx]=0===idx?rect.y+rect.height/2:rect.x+rect.width/2,pt}},module.exports=Single},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4),Axis=__webpack_require__(123),axisHelper=__webpack_require__(114),SingleAxis=function(dim,scale,coordExtent,axisType,position){Axis.call(this,dim,scale,coordExtent),this.type=axisType||"value",this.position=position||"bottom",this.orient=null,this._labelInterval=null};SingleAxis.prototype={constructor:SingleAxis,model:null,isHorizontal:function(){var position=this.position;return"top"===position||"bottom"===position},getLabelInterval:function(){var labelInterval=this._labelInterval;if(!labelInterval){var axisModel=this.model,labelModel=axisModel.getModel("axisLabel"),interval=labelModel.get("interval");if("category"!==this.type||"auto"!==interval)return labelInterval=this._labelInterval="auto"===interval?0:interval;labelInterval=this._labelInterval=axisHelper.getAxisLabelInterval(zrUtil.map(this.scale.getTicks(),this.dataToCoord,this),axisModel.getFormattedLabels(),labelModel.getModel("textStyle").getFont(),this.isHorizontal())}return labelInterval},toGlobalCoord:null,toLocalCoord:null},zrUtil.inherits(SingleAxis,Axis),module.exports=SingleAxis},function(module,exports,__webpack_require__){function axisLayout(axisModel){var single=axisModel.coordinateSystem,axis=axisModel.axis,layout={},axisPosition=axis.position,orient=axis.orient,rect=single.getRect(),rectBound=[rect.x,rect.x+rect.width,rect.y,rect.y+rect.height],positionMap={horizontal:{top:rectBound[2],bottom:rectBound[3]},vertical:{left:rectBound[0],right:rectBound[1]}};layout.position=["vertical"===orient?positionMap.vertical[axisPosition]:rectBound[0],"horizontal"===orient?positionMap.horizontal[axisPosition]:rectBound[3]];var r={horizontal:0,vertical:1};layout.rotation=Math.PI/2*r[orient];var directionMap={top:-1,bottom:1,right:1,left:-1};layout.labelDirection=layout.tickDirection=layout.nameDirection=directionMap[axisPosition],axisModel.getModel("axisTick").get("inside")&&(layout.tickDirection=-layout.tickDirection),axisModel.getModel("axisLabel").get("inside")&&(layout.labelDirection=-layout.labelDirection);var labelRotation=axisModel.getModel("axisLabel").get("rotate");return layout.labelRotation="top"===axisPosition?-labelRotation:labelRotation,layout.labelInterval=axis.getLabelInterval(),layout.z2=1,layout}var AxisBuilder=__webpack_require__(132),zrUtil=__webpack_require__(4),graphic=__webpack_require__(43),getInterval=AxisBuilder.getInterval,ifIgnoreOnTick=AxisBuilder.ifIgnoreOnTick,axisBuilderAttrs=["axisLine","axisLabel","axisTick","axisName"],selfBuilderAttr="splitLine",AxisView=__webpack_require__(1).extendComponentView({type:"singleAxis",render:function(axisModel,ecModel){var group=this.group;group.removeAll();var layout=axisLayout(axisModel),axisBuilder=new AxisBuilder(axisModel,layout);zrUtil.each(axisBuilderAttrs,axisBuilder.add,axisBuilder),group.add(axisBuilder.getGroup()),axisModel.get(selfBuilderAttr+".show")&&this["_"+selfBuilderAttr](axisModel,layout.labelInterval)},_splitLine:function(axisModel,labelInterval){var axis=axisModel.axis,splitLineModel=axisModel.getModel("splitLine"),lineStyleModel=splitLineModel.getModel("lineStyle"),lineWidth=lineStyleModel.get("width"),lineColors=lineStyleModel.get("color"),lineInterval=getInterval(splitLineModel,labelInterval);lineColors=lineColors instanceof Array?lineColors:[lineColors];for(var gridRect=axisModel.coordinateSystem.getRect(),isHorizontal=axis.isHorizontal(),splitLines=[],lineCount=0,ticksCoords=axis.getTicksCoords(),p1=[],p2=[],i=0;i<ticksCoords.length;++i)if(!ifIgnoreOnTick(axis,i,lineInterval)){var tickCoord=axis.toGlobalCoord(ticksCoords[i]);isHorizontal?(p1[0]=tickCoord,p1[1]=gridRect.y,p2[0]=tickCoord,p2[1]=gridRect.y+gridRect.height):(p1[0]=gridRect.x,p1[1]=tickCoord,p2[0]=gridRect.x+gridRect.width,p2[1]=tickCoord);var colorIndex=lineCount++%lineColors.length;splitLines[colorIndex]=splitLines[colorIndex]||[],splitLines[colorIndex].push(new graphic.Line(graphic.subPixelOptimizeLine({shape:{x1:p1[0],y1:p1[1],x2:p2[0],y2:p2[1]},style:{lineWidth:lineWidth},silent:!0})))}for(var i=0;i<splitLines.length;++i)this.group.add(graphic.mergePath(splitLines[i],{style:{stroke:lineColors[i%lineColors.length],lineDash:lineStyleModel.getLineDash(),lineWidth:lineWidth},silent:!0}))}});module.exports=AxisView},function(module,exports,__webpack_require__){function getAxisType(axisName,option){return option.type||(option.data?"category":"value")}var ComponentModel=__webpack_require__(19),axisModelCreator=__webpack_require__(127),zrUtil=__webpack_require__(4),AxisModel=ComponentModel.extend({type:"singleAxis",layoutMode:"box",axis:null,coordinateSystem:null}),defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:2,type:"solid"}},axisTick:{show:!0,length:6,lineStyle:{width:2}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}};zrUtil.merge(AxisModel.prototype,__webpack_require__(129)),axisModelCreator("single",AxisModel,getAxisType,defaultOption),module.exports=AxisModel},function(module,exports,__webpack_require__){__webpack_require__(1).registerPreprocessor(__webpack_require__(304)),__webpack_require__(305),__webpack_require__(310),__webpack_require__(311),__webpack_require__(312),__webpack_require__(313)},function(module,exports,__webpack_require__){function removeDuplicate(arr){var map={};zrUtil.each(arr,function(val){map[val]=1}),arr.length=0,zrUtil.each(map,function(flag,val){arr.push(val)})}var zrUtil=__webpack_require__(4),DEFAULT_TOOLBOX_BTNS=["rect","polygon","keep","clear"];module.exports=function(option,isNew){var brushComponents=option&&option.brush;if(zrUtil.isArray(brushComponents)||(brushComponents=brushComponents?[brushComponents]:[]),brushComponents.length){var brushComponentSpecifiedBtns=[];zrUtil.each(brushComponents,function(brushOpt){var tbs=brushOpt.hasOwnProperty("toolbox")?brushOpt.toolbox:[];tbs instanceof Array&&(brushComponentSpecifiedBtns=brushComponentSpecifiedBtns.concat(tbs))});var toolbox=option&&option.toolbox;zrUtil.isArray(toolbox)&&(toolbox=toolbox[0]),toolbox||(toolbox={feature:{}},option.toolbox=[toolbox]);var toolboxFeature=toolbox.feature||(toolbox.feature={}),toolboxBrush=toolboxFeature.brush||(toolboxFeature.brush={}),brushTypes=toolboxBrush.type||(toolboxBrush.type=[]);brushTypes.push.apply(brushTypes,brushComponentSpecifiedBtns),removeDuplicate(brushTypes),isNew&&!brushTypes.length&&brushTypes.push.apply(brushTypes,DEFAULT_TOOLBOX_BTNS)}}},function(module,exports,__webpack_require__){function dispatchAction(api,throttleType,throttleDelay,brushSelected,payload){if(payload){var zr=api.getZr();if(!zr[DISPATCH_FLAG]){zr[DISPATCH_METHOD]||(zr[DISPATCH_METHOD]=doDispatch);var fn=throttle.createOrUpdate(zr,DISPATCH_METHOD,throttleDelay,throttleType);fn(api,brushSelected)}}}function doDispatch(api,brushSelected){if(!api.isDisposed()){var zr=api.getZr();zr[DISPATCH_FLAG]=!0,api.dispatchAction({type:"brushSelect",batch:brushSelected}),zr[DISPATCH_FLAG]=!1}}function checkInRange(selectorsByBrushType,rangeInfoList,data,dataIndex){for(var itemLayout=data.getItemLayout(dataIndex),i=0,len=rangeInfoList.length;i<len;i++){var area=rangeInfoList[i];if(selectorsByBrushType[area.brushType](itemLayout,area.selectors,area))return!0}}function getSelectorsByBrushType(seriesModel){var brushSelector=seriesModel.brushSelector;if(zrUtil.isString(brushSelector)){var sels=[];return zrUtil.each(selector,function(selectorsByElementType,brushType){sels[brushType]=selectorsByElementType[brushSelector]}),sels}if(zrUtil.isFunction(brushSelector)){var bSelector={};return zrUtil.each(selector,function(sel,brushType){bSelector[brushType]=brushSelector}),bSelector}return brushSelector}function brushModelNotControll(brushModel,seriesIndex){var seriesIndices=brushModel.option.seriesIndex;return null!=seriesIndices&&"all"!==seriesIndices&&(zrUtil.isArray(seriesIndices)?zrUtil.indexOf(seriesIndices,seriesIndex)<0:seriesIndex!==seriesIndices)}function bindSelector(area){var selectors=area.selectors={};return zrUtil.each(selector[area.brushType],function(selFn,elType){selectors[elType]=function(itemLayout){return selFn(itemLayout,selectors,area)}}),area}function getBoundingRectFromMinMax(minMax){return new BoundingRect(minMax[0][0],minMax[1][0],minMax[0][1]-minMax[0][0],minMax[1][1]-minMax[1][0])}var echarts=__webpack_require__(1),visualSolution=__webpack_require__(306),zrUtil=__webpack_require__(4),BoundingRect=__webpack_require__(9),selector=__webpack_require__(307),throttle=__webpack_require__(308),brushHelper=__webpack_require__(309),STATE_LIST=["inBrush","outOfBrush"],DISPATCH_METHOD="__ecBrushSelect",DISPATCH_FLAG="__ecInBrushSelectEvent",PRIORITY_BRUSH=echarts.PRIORITY.VISUAL.BRUSH;echarts.registerLayout(PRIORITY_BRUSH,function(ecModel,api,payload){ecModel.eachComponent({mainType:"brush"},function(brushModel){payload&&"takeGlobalCursor"===payload.type&&brushModel.setBrushOption("brush"===payload.key?payload.brushOption:{brushType:!1}),brushModel.coordInfoList=brushHelper.makeCoordInfoList(brushModel.option,ecModel),brushHelper.parseInputRanges(brushModel,ecModel)})}),echarts.registerVisual(PRIORITY_BRUSH,function(ecModel,api,payload){var throttleType,throttleDelay,brushSelected=[];ecModel.eachComponent({mainType:"brush"},function(brushModel,brushIndex){function linkOthers(seriesIndex){return"all"===brushLink||linkedSeriesMap[seriesIndex]}function brushed(rangeInfoList){return!!rangeInfoList.length}function stepAParallel(seriesModel,seriesIndex){var coordSys=seriesModel.coordinateSystem;hasBrushExists|=coordSys.hasAxisbrushed(),linkOthers(seriesIndex)&&coordSys.eachActiveState(seriesModel.getData(),function(activeState,dataIndex){"active"===activeState&&(selectedDataIndexForLink[dataIndex]=1)})}function stepAOthers(seriesModel,seriesIndex,rangeInfoList){var selectorsByBrushType=getSelectorsByBrushType(seriesModel);if(selectorsByBrushType&&!brushModelNotControll(brushModel,seriesIndex)&&(zrUtil.each(areas,function(area){selectorsByBrushType[area.brushType]&&brushHelper.controlSeries(area,brushModel,seriesModel)&&rangeInfoList.push(area),hasBrushExists|=brushed(rangeInfoList)}),linkOthers(seriesIndex)&&brushed(rangeInfoList))){var data=seriesModel.getData();data.each(function(dataIndex){checkInRange(selectorsByBrushType,rangeInfoList,data,dataIndex)&&(selectedDataIndexForLink[dataIndex]=1)})}}var thisBrushSelected={brushId:brushModel.id,brushIndex:brushIndex,brushName:brushModel.name,areas:zrUtil.clone(brushModel.areas),selected:[]};brushSelected.push(thisBrushSelected);var brushOption=brushModel.option,brushLink=brushOption.brushLink,linkedSeriesMap=[],selectedDataIndexForLink=[],rangeInfoBySeries=[],hasBrushExists=0;brushIndex||(throttleType=brushOption.throttleType,throttleDelay=brushOption.throttleDelay);var areas=zrUtil.map(brushModel.areas,function(area){return bindSelector(zrUtil.defaults({boundingRect:boundingRectBuilders[area.brushType](area)},area))}),visualMappings=visualSolution.createVisualMappings(brushModel.option,STATE_LIST,function(mappingOption){mappingOption.mappingMethod="fixed"});zrUtil.isArray(brushLink)&&zrUtil.each(brushLink,function(seriesIndex){linkedSeriesMap[seriesIndex]=1}),ecModel.eachSeries(function(seriesModel,seriesIndex){var rangeInfoList=rangeInfoBySeries[seriesIndex]=[];"parallel"===seriesModel.subType?stepAParallel(seriesModel,seriesIndex,rangeInfoList):stepAOthers(seriesModel,seriesIndex,rangeInfoList)}),ecModel.eachSeries(function(seriesModel,seriesIndex){var seriesBrushSelected={seriesId:seriesModel.id,seriesIndex:seriesIndex,seriesName:seriesModel.name,dataIndex:[]};thisBrushSelected.selected.push(seriesBrushSelected);var selectorsByBrushType=getSelectorsByBrushType(seriesModel),rangeInfoList=rangeInfoBySeries[seriesIndex],data=seriesModel.getData(),getValueState=linkOthers(seriesIndex)?function(dataIndex){return selectedDataIndexForLink[dataIndex]?(seriesBrushSelected.dataIndex.push(data.getRawIndex(dataIndex)),"inBrush"):"outOfBrush"}:function(dataIndex){return checkInRange(selectorsByBrushType,rangeInfoList,data,dataIndex)?(seriesBrushSelected.dataIndex.push(data.getRawIndex(dataIndex)),"inBrush"):"outOfBrush"};(linkOthers(seriesIndex)?hasBrushExists:brushed(rangeInfoList))&&visualSolution.applyVisual(STATE_LIST,visualMappings,data,getValueState)})}),dispatchAction(api,throttleType,throttleDelay,brushSelected,payload)});var boundingRectBuilders={lineX:zrUtil.noop,lineY:zrUtil.noop,rect:function(area){return getBoundingRectFromMinMax(area.range)},polygon:function(area){for(var minMax,range=area.range,i=0,len=range.length;i<len;i++){minMax=minMax||[[1/0,-(1/0)],[1/0,-(1/0)]];var rg=range[i];rg[0]<minMax[0][0]&&(minMax[0][0]=rg[0]),rg[0]>minMax[0][1]&&(minMax[0][1]=rg[0]),rg[1]<minMax[1][0]&&(minMax[1][0]=rg[1]),rg[1]>minMax[1][1]&&(minMax[1][1]=rg[1])}return minMax&&getBoundingRectFromMinMax(minMax)}}},function(module,exports,__webpack_require__){function hasKeys(obj){if(obj)for(var name in obj)if(obj.hasOwnProperty(name))return!0}var zrUtil=__webpack_require__(4),VisualMapping=__webpack_require__(192),each=zrUtil.each,visualSolution={createVisualMappings:function(option,stateList,supplementVisualOption){function createMappings(){var Creater=function(){};Creater.prototype.__hidden=Creater.prototype;var obj=new Creater;return obj}var visualMappings={};return each(stateList,function(state){var mappings=visualMappings[state]=createMappings();each(option[state],function(visualData,visualType){if(VisualMapping.isValidType(visualType)){var mappingOption={type:visualType,visual:visualData};supplementVisualOption&&supplementVisualOption(mappingOption,state),mappings[visualType]=new VisualMapping(mappingOption),"opacity"===visualType&&(mappingOption=zrUtil.clone(mappingOption),mappingOption.type="colorAlpha",mappings.__hidden.__alphaForOpacity=new VisualMapping(mappingOption))}})}),visualMappings},replaceVisualOption:function(thisOption,newOption,keys){var has;zrUtil.each(keys,function(key){newOption.hasOwnProperty(key)&&hasKeys(newOption[key])&&(has=!0)}),has&&zrUtil.each(keys,function(key){newOption.hasOwnProperty(key)&&hasKeys(newOption[key])?thisOption[key]=zrUtil.clone(newOption[key]):delete thisOption[key]})},applyVisual:function(stateList,visualMappings,data,getValueState,scope,dimension){function getVisual(key){return data.getItemVisual(dataIndex,key)}function setVisual(key,value){data.setItemVisual(dataIndex,key,value)}function eachItem(valueOrIndex,index){dataIndex=null==dimension?valueOrIndex:index;for(var valueState=getValueState.call(scope,valueOrIndex),mappings=visualMappings[valueState],visualTypes=visualTypesMap[valueState],i=0,len=visualTypes.length;i<len;i++){var type=visualTypes[i];mappings[type]&&mappings[type].applyVisual(valueOrIndex,getVisual,setVisual)}}var visualTypesMap={};zrUtil.each(stateList,function(state){var visualTypes=VisualMapping.prepareVisualTypes(visualMappings[state]);visualTypesMap[state]=visualTypes});var dataIndex;null==dimension?data.each(eachItem,!0):data.each([dimension],eachItem,!0);
}};module.exports=visualSolution},function(module,exports,__webpack_require__){function getLineSelectors(xyIndex){var xy=["x","y"],wh=["width","height"];return{point:function(itemLayout,selectors,area){var range=area.range,p=itemLayout[xyIndex];return inLineRange(p,range)},rect:function(itemLayout,selectors,area){var range=area.range;return inLineRange(itemLayout[xy[xyIndex]],range)||inLineRange(itemLayout[xy[xyIndex]]+itemLayout[wh[xyIndex]],range)}}}function inLineRange(p,range){return range[0]<=p&&p<=range[1]}function lineIntersectPolygon(lx,ly,l2x,l2y,points){for(var i=0,p2=points[points.length-1];i<points.length;i++){var p=points[i];if(lineIntersect(lx,ly,l2x,l2y,p[0],p[1],p2[0],p2[1]))return!0;p2=p}}function lineIntersect(a1x,a1y,a2x,a2y,b1x,b1y,b2x,b2y){var delta=determinant(a2x-a1x,b1x-b2x,a2y-a1y,b1y-b2y);if(nearZero(delta))return!1;var namenda=determinant(b1x-a1x,b1x-b2x,b1y-a1y,b1y-b2y)/delta;if(namenda<0||namenda>1)return!1;var miu=determinant(a2x-a1x,b1x-a1x,a2y-a1y,b1y-a1y)/delta;return!(miu<0||miu>1)}function nearZero(val){return val<=1e-6&&val>=-1e-6}function determinant(v1,v2,v3,v4){return v1*v4-v2*v3}function makeBoundingRect(itemLayout){var x=itemLayout.x,y=itemLayout.y,width=itemLayout.width,height=itemLayout.height;return width<0&&(x+=width,width=-width),height<0&&(y+=height,height=-height),new BoundingRect(x,y,width,height)}var polygonContain=__webpack_require__(167).contain,BoundingRect=__webpack_require__(9),selector={lineX:getLineSelectors(0),lineY:getLineSelectors(1),rect:{point:function(itemLayout,selectors,area){return area.boundingRect.contain(itemLayout[0],itemLayout[1])},rect:function(itemLayout,selectors,area){return area.boundingRect.intersect(makeBoundingRect(itemLayout))}},polygon:{point:function(itemLayout,selectors,area){return area.boundingRect.contain(itemLayout[0],itemLayout[1])&&polygonContain(area.range,itemLayout[0],itemLayout[1])},rect:function(itemLayout,selectors,area){var points=area.range;if(points.length<=1)return!1;var x=itemLayout.x,y=itemLayout.y,width=itemLayout.width,height=itemLayout.height,p=points[0];return!!(polygonContain(points,x,y)||polygonContain(points,x+width,y)||polygonContain(points,x,y+height)||polygonContain(points,x+width,y+height)||makeBoundingRect(itemLayout).contain(p[0],p[1])||lineIntersectPolygon(x,y,x+width,y,points)||lineIntersectPolygon(x,y,x,y+height,points)||lineIntersectPolygon(x+width,y,x+width,y+height,points)||lineIntersectPolygon(x,y+height,x+width,y+height,points))||void 0}}};module.exports=selector},function(module,exports){var lib={},ORIGIN_METHOD="\0__throttleOriginMethod",RATE="\0__throttleRate",THROTTLE_TYPE="\0__throttleType";lib.throttle=function(fn,delay,debounce){function exec(){lastExec=(new Date).getTime(),timer=null,fn.apply(scope,args||[])}var currCall,diff,scope,args,lastCall=0,lastExec=0,timer=null;delay=delay||0;var cb=function(){currCall=(new Date).getTime(),scope=this,args=arguments,diff=currCall-(debounce?lastCall:lastExec)-delay,clearTimeout(timer),debounce?timer=setTimeout(exec,delay):diff>=0?exec():timer=setTimeout(exec,-diff),lastCall=currCall};return cb.clear=function(){timer&&(clearTimeout(timer),timer=null)},cb},lib.createOrUpdate=function(obj,fnAttr,rate,throttleType){var fn=obj[fnAttr];if(fn){var originFn=fn[ORIGIN_METHOD]||fn,lastThrottleType=fn[THROTTLE_TYPE],lastRate=fn[RATE];if(lastRate!==rate||lastThrottleType!==throttleType){if(null==rate||!throttleType)return obj[fnAttr]=originFn;fn=obj[fnAttr]=lib.throttle(originFn,rate,"debounce"===throttleType),fn[ORIGIN_METHOD]=originFn,fn[THROTTLE_TYPE]=throttleType,fn[RATE]=rate}return fn}},lib.clear=function(obj,fnAttr){var fn=obj[fnAttr];fn&&fn[ORIGIN_METHOD]&&(obj[fnAttr]=fn[ORIGIN_METHOD])},module.exports=lib},function(module,exports,__webpack_require__){function formatMinMax(minMax){return minMax[0]>minMax[1]&&minMax.reverse(),minMax}function findCoordInfo(area,coordInfoList){for(var isGlobal=!0,j=0;j<COMPONENT_NAMES.length;j++){var indexAttr=COMPONENT_NAMES[j]+"Index";if(area[indexAttr]>=0){isGlobal=!1;for(var i=0;i<coordInfoList.length;i++)if(coordInfoList[i][indexAttr]===area[indexAttr])return coordInfoList[i]}}return isGlobal}function axisConvert(axisName,to,coordInfo,coordRange){var axis=coordInfo.coordSys.getAxis(axisName);return zrUtil.assert(axis,"line brush is only available in cartesian (grid)."),formatMinMax(zrUtil.map([0,1],function(i){return to?axis.coordToData(axis.toLocalCoord(coordRange[i])):axis.toGlobalCoord(axis.dataToCoord(coordRange[i]))}))}var zrUtil=__webpack_require__(4),graphic=__webpack_require__(43),each=zrUtil.each,helper={},COMPONENT_NAMES=["geo","xAxis","yAxis"],PANEL_ID_SPLIT="--",COORD_CONVERTS=["dataToPoint","pointToData"];helper.parseOutputRanges=function(areas,coordInfoList,ecModel,rangesCoordInfo){each(areas,function(area,index){var panelId=area.panelId;if(panelId){panelId=panelId.split(PANEL_ID_SPLIT),area[panelId[0]+"Index"]=+panelId[1];var coordInfo=findCoordInfo(area,coordInfoList);area.coordRange=coordConvert[area.brushType](1,coordInfo,area.range),rangesCoordInfo&&(rangesCoordInfo[index]=coordInfo)}})},helper.parseInputRanges=function(brushModel,ecModel){each(brushModel.areas,function(area){var coordInfo=findCoordInfo(area,brushModel.coordInfoList);zrUtil.assert(!coordInfo||coordInfo===!0||area.coordRange,"coordRange must be specified when coord index specified."),zrUtil.assert(!coordInfo||coordInfo!==!0||area.range,"range must be specified."),area.range=area.range||[],coordInfo&&coordInfo!==!0&&(area.range=coordConvert[area.brushType](0,coordInfo,area.coordRange),area.panelId=coordInfo.panelId)})},helper.makePanelOpts=function(coordInfoList){var panelOpts=[];return each(coordInfoList,function(coordInfo){var rect,coordSys=coordInfo.coordSys;coordInfo.geoIndex>=0?(rect=coordSys.getBoundingRect().clone(),rect.applyTransform(graphic.getTransform(coordSys))):rect=coordSys.grid.getRect().clone(),panelOpts.push({panelId:coordInfo.panelId,rect:rect})}),panelOpts},helper.makeCoordInfoList=function(option,ecModel){var coordInfoList=[];return each(COMPONENT_NAMES,function(componentName){var componentIndices=option[componentName+"Index"];null!=componentIndices&&"none"!==componentIndices&&("all"===componentIndices||zrUtil.isArray(componentIndices)||(componentIndices=[componentIndices]),ecModel.eachComponent({mainType:componentName},function(componentModel,index){if(!("all"!==componentIndices&&zrUtil.indexOf(componentIndices,index)<0)){var grid,coordSys;"xAxis"===componentName||"yAxis"===componentName?grid=componentModel.axis.grid:coordSys=componentModel.coordinateSystem;for(var coordInfo,i=0,len=coordInfoList.length;i<len;i++){var cInfo=coordInfoList[i];if(zrUtil.assert(cInfo[componentName+"Index"]!=index,"Coord should not be defined duplicately: "+componentName+index),"yAxis"===componentName&&!cInfo.yAxis&&cInfo.xAxis){var aCoordSys=grid.getCartesian(cInfo.xAxisIndex,index);if(aCoordSys){coordSys=aCoordSys,coordInfo=cInfo;break}}}!coordInfo&&coordInfoList.push(coordInfo={}),coordInfo[componentName]=componentModel,coordInfo[componentName+"Index"]=index,coordInfo.panelId=componentName+PANEL_ID_SPLIT+index,coordInfo.coordSys=coordSys||grid.getCartesian(coordInfo.xAxisIndex,coordInfo.yAxisIndex),coordInfo.coordSys?coordInfoList[componentName+"Has"]=!0:coordInfoList.pop()}}))}),coordInfoList},helper.controlSeries=function(area,brushModel,seriesModel){var coordInfo=findCoordInfo(area,brushModel.coordInfoList);return coordInfo===!0||coordInfo&&coordInfo.coordSys===seriesModel.coordinateSystem};var coordConvert={lineX:zrUtil.curry(axisConvert,"x"),lineY:zrUtil.curry(axisConvert,"y"),rect:function(to,coordInfo,coordRange){var coordSys=coordInfo.coordSys,xminymin=coordSys[COORD_CONVERTS[to]]([coordRange[0][0],coordRange[1][0]]),xmaxymax=coordSys[COORD_CONVERTS[to]]([coordRange[0][1],coordRange[1][1]]);return[formatMinMax([xminymin[0],xmaxymax[0]]),formatMinMax([xminymin[1],xmaxymax[1]])]},polygon:function(to,coordInfo,coordRange){var coordSys=coordInfo.coordSys;return zrUtil.map(coordRange,coordSys[COORD_CONVERTS[to]],coordSys)}};module.exports=helper},function(module,exports,__webpack_require__){var echarts=__webpack_require__(1),zrUtil=__webpack_require__(4),visualSolution=__webpack_require__(306),Model=__webpack_require__(12),DEFAULT_OUT_OF_BRUSH_COLOR=["#ddd"],BrushModel=echarts.extendComponentModel({type:"brush",dependencies:["geo","grid","xAxis","yAxis","parallel","series"],defaultOption:{toolbox:null,brushLink:null,seriesIndex:"all",geoIndex:null,xAxisIndex:null,yAxisIndex:null,brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(120,140,180,0.3)",borderColor:"rgba(120,140,180,0.8)",width:null},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0},areas:[],brushType:null,brushOption:{},coordInfoList:[],optionUpdated:function(newOption,isInit){var thisOption=this.option;!isInit&&visualSolution.replaceVisualOption(thisOption,newOption,["inBrush","outOfBrush"]),thisOption.inBrush=thisOption.inBrush||{},thisOption.outOfBrush=thisOption.outOfBrush||{color:DEFAULT_OUT_OF_BRUSH_COLOR}},setAreas:function(areas){zrUtil.assert(zrUtil.isArray(areas)),zrUtil.each(areas,function(area){zrUtil.assert(area.brushType,"Illegal areas")}),areas&&(this.areas=zrUtil.map(areas,function(area){return this._mergeBrushOption(area)},this))},setBrushOption:function(brushOption){this.brushOption=this._mergeBrushOption(brushOption),this.brushType=this.brushOption.brushType},_mergeBrushOption:function(brushOption){var option=this.option;return zrUtil.merge({brushType:option.brushType,brushMode:option.brushMode,transformable:option.transformable,brushStyle:new Model(option.brushStyle).getItemStyle(),removeOnClick:option.removeOnClick},brushOption,!0)}});module.exports=BrushModel},function(module,exports,__webpack_require__){function updateController(brushModel,ecModel,api,payload){(!payload||payload.$from!==brushModel.id)&&this._brushController.setPanels(brushHelper.makePanelOpts(brushModel.coordInfoList)).enableBrush(brushModel.brushOption).updateCovers(brushModel.areas.slice())}var zrUtil=__webpack_require__(4),BrushController=__webpack_require__(233),echarts=__webpack_require__(1),brushHelper=__webpack_require__(309);module.exports=echarts.extendComponentView({type:"brush",init:function(ecModel,api){this.ecModel=ecModel,this.api=api,this.model,(this._brushController=new BrushController(api.getZr())).on("brush",zrUtil.bind(this._onBrush,this)).mount()},render:function(brushModel){return this.model=brushModel,updateController.apply(this,arguments)},updateView:updateController,updateLayout:updateController,updateVisual:updateController,dispose:function(){this._brushController.dispose()},_onBrush:function(areas,opt){var modelId=this.model.id;brushHelper.parseOutputRanges(areas,this.model.coordInfoList,this.ecModel),(!opt.isEnd||opt.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:modelId,areas:zrUtil.clone(areas),$from:modelId})}})},function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);echarts.registerAction({type:"brush",event:"brush",update:"updateView"},function(payload,ecModel){ecModel.eachComponent({mainType:"brush",query:payload},function(brushModel){brushModel.setAreas(payload.areas)})}),echarts.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},function(){})},function(module,exports,__webpack_require__){"use strict";function Brush(model,ecModel,api){this.model=model,this.ecModel=ecModel,this.api=api,this._brushType,this._brushMode}var featureManager=__webpack_require__(314),zrUtil=__webpack_require__(4);Brush.defaultOption={show:!0,type:["rect","polygon","lineX","lineY","keep","clear"],icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}};var proto=Brush.prototype;proto.render=proto.updateView=proto.updateLayout=function(featureModel,ecModel,api){var brushType,brushMode,isBrushed;ecModel.eachComponent({mainType:"brush"},function(brushModel){brushType=brushModel.brushType,brushMode=brushModel.brushOption.brushMode||"single",isBrushed|=brushModel.areas.length}),this._brushType=brushType,this._brushMode=brushMode,zrUtil.each(featureModel.get("type",!0),function(type){featureModel.setIconStatus(type,("keep"===type?"multiple"===brushMode:"clear"===type?isBrushed:type===brushType)?"emphasis":"normal")})},proto.getIcons=function(){var model=this.model,availableIcons=model.get("icon",!0),icons={};return zrUtil.each(model.get("type",!0),function(type){availableIcons[type]&&(icons[type]=availableIcons[type])}),icons},proto.onclick=function(ecModel,api,type){var api=this.api,brushType=this._brushType,brushMode=this._brushMode;"clear"===type?api.dispatchAction({type:"brush",areas:[]}):api.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===type?brushType:brushType!==type&&type,brushMode:"keep"===type?"multiple"===brushMode?"single":"multiple":brushMode}})},featureManager.register("brush",Brush),module.exports=Brush},function(module,exports){"use strict";var features={};module.exports={register:function(name,ctor){features[name]=ctor},get:function(name){return features[name]}}},function(module,exports,__webpack_require__){"use strict";var echarts=__webpack_require__(1),graphic=__webpack_require__(43),layout=__webpack_require__(21);echarts.extendComponentModel({type:"title",layoutMode:{type:"box",ignoreSize:!0},defaultOption:{zlevel:0,z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bolder",color:"#333"},subtextStyle:{color:"#aaa"}}}),echarts.extendComponentView({type:"title",render:function(titleModel,ecModel,api){if(this.group.removeAll(),titleModel.get("show")){var group=this.group,textStyleModel=titleModel.getModel("textStyle"),subtextStyleModel=titleModel.getModel("subtextStyle"),textAlign=titleModel.get("textAlign"),textBaseline=titleModel.get("textBaseline"),textEl=new graphic.Text({style:{text:titleModel.get("text"),textFont:textStyleModel.getFont(),fill:textStyleModel.getTextColor()},z2:10}),textRect=textEl.getBoundingRect(),subText=titleModel.get("subtext"),subTextEl=new graphic.Text({style:{text:subText,textFont:subtextStyleModel.getFont(),fill:subtextStyleModel.getTextColor(),y:textRect.height+titleModel.get("itemGap"),textBaseline:"top"},z2:10}),link=titleModel.get("link"),sublink=titleModel.get("sublink");textEl.silent=!link,subTextEl.silent=!sublink,link&&textEl.on("click",function(){window.open(link,"_"+titleModel.get("target"))}),sublink&&subTextEl.on("click",function(){window.open(sublink,"_"+titleModel.get("subtarget"))}),group.add(textEl),subText&&group.add(subTextEl);var groupRect=group.getBoundingRect(),layoutOption=titleModel.getBoxLayoutParams();layoutOption.width=groupRect.width,layoutOption.height=groupRect.height;var layoutRect=layout.getLayoutRect(layoutOption,{width:api.getWidth(),height:api.getHeight()},titleModel.get("padding"));textAlign||(textAlign=titleModel.get("left")||titleModel.get("right"),"middle"===textAlign&&(textAlign="center"),"right"===textAlign?layoutRect.x+=layoutRect.width:"center"===textAlign&&(layoutRect.x+=layoutRect.width/2)),textBaseline||(textBaseline=titleModel.get("top")||titleModel.get("bottom"),"center"===textBaseline&&(textBaseline="middle"),"bottom"===textBaseline?layoutRect.y+=layoutRect.height:"middle"===textBaseline&&(layoutRect.y+=layoutRect.height/2),textBaseline=textBaseline||"top"),group.attr("position",[layoutRect.x,layoutRect.y]);var alignStyle={textAlign:textAlign,textVerticalAlign:textBaseline};textEl.setStyle(alignStyle),subTextEl.setStyle(alignStyle),groupRect=group.getBoundingRect();var padding=layoutRect.margin,style=titleModel.getItemStyle(["color","opacity"]);style.fill=titleModel.get("backgroundColor");var rect=new graphic.Rect({shape:{x:groupRect.x-padding[3],y:groupRect.y-padding[0],width:groupRect.width+padding[1]+padding[3],height:groupRect.height+padding[0]+padding[2]},style:style,silent:!0});graphic.subPixelOptimizeRect(rect),group.add(rect)}}})},function(module,exports,__webpack_require__){__webpack_require__(317),__webpack_require__(318),__webpack_require__(321),__webpack_require__(322),__webpack_require__(323),__webpack_require__(325),__webpack_require__(326),__webpack_require__(328),__webpack_require__(329)},function(module,exports,__webpack_require__){__webpack_require__(19).registerSubTypeDefaulter("dataZoom",function(option){return"slider"})},function(module,exports,__webpack_require__){function retrieveRaw(option){var ret={};return each(["start","end","startValue","endValue","throttle"],function(name){option.hasOwnProperty(name)&&(ret[name]=option[name])}),ret}function processRangeProp(percentProp,valueProp,rawOption,thisOption){null!=rawOption[valueProp]&&null==rawOption[percentProp]&&(thisOption[percentProp]=null)}var zrUtil=__webpack_require__(4),env=__webpack_require__(2),echarts=__webpack_require__(1),modelUtil=__webpack_require__(5),helper=__webpack_require__(319),AxisProxy=__webpack_require__(320),each=zrUtil.each,eachAxisDim=helper.eachAxisDim,DataZoomModel=echarts.extendComponentModel({type:"dataZoom",dependencies:["xAxis","yAxis","zAxis","radiusAxis","angleAxis","series"],defaultOption:{zlevel:0,z:4,orient:null,xAxisIndex:null,yAxisIndex:null,filterMode:"filter",throttle:null,start:0,end:100,startValue:null,endValue:null},init:function(option,parentModel,ecModel){this._dataIntervalByAxis={},this._dataInfo={},this._axisProxies={},this.textStyleModel,this._autoThrottle=!0;var rawOption=retrieveRaw(option);this.mergeDefaultAndTheme(option,ecModel),this.doInit(rawOption)},mergeOption:function(newOption){var rawOption=retrieveRaw(newOption);zrUtil.merge(this.option,newOption,!0),this.doInit(rawOption)},doInit:function(rawOption){var thisOption=this.option;env.canvasSupported||(thisOption.realtime=!1),this._setDefaultThrottle(rawOption),processRangeProp("start","startValue",rawOption,thisOption),processRangeProp("end","endValue",rawOption,thisOption),this.textStyleModel=this.getModel("textStyle"),this._resetTarget(),this._giveAxisProxies()},_giveAxisProxies:function(){var axisProxies=this._axisProxies;this.eachTargetAxis(function(dimNames,axisIndex,dataZoomModel,ecModel){var axisModel=this.dependentModels[dimNames.axis][axisIndex],axisProxy=axisModel.__dzAxisProxy||(axisModel.__dzAxisProxy=new AxisProxy(dimNames.name,axisIndex,this,ecModel));axisProxies[dimNames.name+"_"+axisIndex]=axisProxy},this)},_resetTarget:function(){var thisOption=this.option,autoMode=this._judgeAutoMode();eachAxisDim(function(dimNames){var axisIndexName=dimNames.axisIndex;thisOption[axisIndexName]=modelUtil.normalizeToArray(thisOption[axisIndexName])},this),"axisIndex"===autoMode?this._autoSetAxisIndex():"orient"===autoMode&&this._autoSetOrient()},_judgeAutoMode:function(){var thisOption=this.option,hasIndexSpecified=!1;eachAxisDim(function(dimNames){null!=thisOption[dimNames.axisIndex]&&(hasIndexSpecified=!0)},this);var orient=thisOption.orient;return null==orient&&hasIndexSpecified?"orient":hasIndexSpecified?void 0:(null==orient&&(thisOption.orient="horizontal"),"axisIndex")},_autoSetAxisIndex:function(){var autoAxisIndex=!0,orient=this.get("orient",!0),thisOption=this.option;if(autoAxisIndex){var dimNames="vertical"===orient?{dim:"y",axisIndex:"yAxisIndex",axis:"yAxis"}:{dim:"x",axisIndex:"xAxisIndex",axis:"xAxis"};this.dependentModels[dimNames.axis].length&&(thisOption[dimNames.axisIndex]=[0],autoAxisIndex=!1)}autoAxisIndex&&eachAxisDim(function(dimNames){if(autoAxisIndex){var axisIndices=[],axisModels=this.dependentModels[dimNames.axis];if(axisModels.length&&!axisIndices.length)for(var i=0,len=axisModels.length;i<len;i++)"category"===axisModels[i].get("type")&&axisIndices.push(i);thisOption[dimNames.axisIndex]=axisIndices,axisIndices.length&&(autoAxisIndex=!1)}},this),autoAxisIndex&&this.ecModel.eachSeries(function(seriesModel){this._isSeriesHasAllAxesTypeOf(seriesModel,"value")&&eachAxisDim(function(dimNames){var axisIndices=thisOption[dimNames.axisIndex],axisIndex=seriesModel.get(dimNames.axisIndex),axisId=seriesModel.get(dimNames.axisId),axisModel=seriesModel.ecModel.queryComponents({mainType:dimNames.axis,index:axisIndex,id:axisId})[0];if(!axisModel)throw new Error(dimNames.axis+' "'+zrUtil.retrieve(axisIndex,axisId,0)+'" not found');axisIndex=axisModel.componentIndex,zrUtil.indexOf(axisIndices,axisIndex)<0&&axisIndices.push(axisIndex)})},this)},_autoSetOrient:function(){var dim;this.eachTargetAxis(function(dimNames){!dim&&(dim=dimNames.name)},this),this.option.orient="y"===dim?"vertical":"horizontal"},_isSeriesHasAllAxesTypeOf:function(seriesModel,axisType){var is=!0;return eachAxisDim(function(dimNames){var seriesAxisIndex=seriesModel.get(dimNames.axisIndex),axisModel=this.dependentModels[dimNames.axis][seriesAxisIndex];axisModel&&axisModel.get("type")===axisType||(is=!1)},this),is},_setDefaultThrottle:function(rawOption){if(rawOption.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var globalOption=this.ecModel.option;this.option.throttle=globalOption.animation&&globalOption.animationDurationUpdate>0?100:20}},getFirstTargetAxisModel:function(){var firstAxisModel;return eachAxisDim(function(dimNames){if(null==firstAxisModel){var indices=this.get(dimNames.axisIndex);indices.length&&(firstAxisModel=this.dependentModels[dimNames.axis][indices[0]])}},this),firstAxisModel},eachTargetAxis:function(callback,context){var ecModel=this.ecModel;eachAxisDim(function(dimNames){each(this.get(dimNames.axisIndex),function(axisIndex){callback.call(context,dimNames,axisIndex,this,ecModel)},this)},this)},getAxisProxy:function(dimName,axisIndex){return this._axisProxies[dimName+"_"+axisIndex]},setRawRange:function(opt){each(["start","end","startValue","endValue"],function(name){this.option[name]=opt[name]},this)},getPercentRange:function(){var axisProxy=this.findRepresentativeAxisProxy();if(axisProxy)return axisProxy.getDataPercentWindow()},getValueRange:function(axisDimName,axisIndex){if(null!=axisDimName||null!=axisIndex)return this.getAxisProxy(axisDimName,axisIndex).getDataValueWindow();var axisProxy=this.findRepresentativeAxisProxy();return axisProxy?axisProxy.getDataValueWindow():void 0},findRepresentativeAxisProxy:function(){var axisProxies=this._axisProxies;for(var key in axisProxies)if(axisProxies.hasOwnProperty(key)&&axisProxies[key].hostedBy(this))return axisProxies[key];for(var key in axisProxies)if(axisProxies.hasOwnProperty(key)&&!axisProxies[key].hostedBy(this))return axisProxies[key]}});module.exports=DataZoomModel},function(module,exports,__webpack_require__){var formatUtil=__webpack_require__(6),zrUtil=__webpack_require__(4),helper={},AXIS_DIMS=["x","y","z","radius","angle"];helper.createNameEach=function(names,attrs){names=names.slice();var capitalNames=zrUtil.map(names,formatUtil.capitalFirst);attrs=(attrs||[]).slice();var capitalAttrs=zrUtil.map(attrs,formatUtil.capitalFirst);return function(callback,context){zrUtil.each(names,function(name,index){for(var nameObj={name:name,capital:capitalNames[index]},j=0;j<attrs.length;j++)nameObj[attrs[j]]=name+capitalAttrs[j];callback.call(context,nameObj)})}},helper.eachAxisDim=helper.createNameEach(AXIS_DIMS,["axisIndex","axis","index","id"]),helper.createLinkedNodesFinder=function(forEachNode,forEachEdgeType,edgeIdGetter){function isNodeAbsorded(node,result){return zrUtil.indexOf(result.nodes,node)>=0}function isLinked(node,result){var hasLink=!1;return forEachEdgeType(function(edgeType){zrUtil.each(edgeIdGetter(node,edgeType)||[],function(edgeId){result.records[edgeType.name][edgeId]&&(hasLink=!0)})}),hasLink}function absorb(node,result){result.nodes.push(node),forEachEdgeType(function(edgeType){zrUtil.each(edgeIdGetter(node,edgeType)||[],function(edgeId){result.records[edgeType.name][edgeId]=!0})})}return function(sourceNode){function processSingleNode(node){!isNodeAbsorded(node,result)&&isLinked(node,result)&&(absorb(node,result),existsLink=!0)}var result={nodes:[],records:{}};if(forEachEdgeType(function(edgeType){result.records[edgeType.name]={}}),!sourceNode)return result;absorb(sourceNode,result);var existsLink;do existsLink=!1,forEachNode(processSingleNode);while(existsLink);return result}},module.exports=helper},function(module,exports,__webpack_require__){function calculateDataExtent(axisDim,seriesModels){var dataExtent=[1/0,-(1/0)];return each(seriesModels,function(seriesModel){var seriesData=seriesModel.getData();seriesData&&each(seriesModel.coordDimToDataDim(axisDim),function(dim){var seriesExtent=seriesData.getDataExtent(dim);seriesExtent[0]<dataExtent[0]&&(dataExtent[0]=seriesExtent[0]),seriesExtent[1]>dataExtent[1]&&(dataExtent[1]=seriesExtent[1])})},this),dataExtent}function calculateDataWindow(opt,dataExtent,axisProxy){var axisModel=axisProxy.getAxisModel(),scale=axisModel.axis.scale,percentExtent=[0,100],percentWindow=[opt.start,opt.end],valueWindow=[];return dataExtent=dataExtent.slice(),fixExtendByAxis(dataExtent,axisModel,scale),each(["startValue","endValue"],function(prop){valueWindow.push(null!=opt[prop]?scale.parse(opt[prop]):null)}),each([0,1],function(idx){var boundValue=valueWindow[idx],boundPercent=percentWindow[idx];null!=boundPercent||null==boundValue?(null==boundPercent&&(boundPercent=percentExtent[idx]),boundValue=scale.parse(numberUtil.linearMap(boundPercent,percentExtent,dataExtent,!0))):boundPercent=numberUtil.linearMap(boundValue,dataExtent,percentExtent,!0),valueWindow[idx]=boundValue,percentWindow[idx]=boundPercent}),{valueWindow:asc(valueWindow),percentWindow:asc(percentWindow)}}function fixExtendByAxis(dataExtent,axisModel,scale){return each(["min","max"],function(minMax,index){var axisMax=axisModel.get(minMax,!0);null!=axisMax&&(axisMax+"").toLowerCase()!=="data"+minMax&&(dataExtent[index]=scale.parse(axisMax))}),axisModel.get("scale",!0)||(dataExtent[0]>0&&(dataExtent[0]=0),dataExtent[1]<0&&(dataExtent[1]=0)),dataExtent}function setAxisModel(axisProxy,isRestore){var axisModel=axisProxy.getAxisModel(),percentWindow=axisProxy._percentWindow,valueWindow=axisProxy._valueWindow;if(percentWindow){var isFull=isRestore||0===percentWindow[0]&&100===percentWindow[1],precision=!isRestore&&numberUtil.getPixelPrecision(valueWindow,[0,500]),invalidPrecision=!(isRestore||precision<20&&precision>=0),useOrigin=isRestore||isFull||invalidPrecision;axisModel.setRange&&axisModel.setRange(useOrigin?null:+valueWindow[0].toFixed(precision),useOrigin?null:+valueWindow[1].toFixed(precision))}}var zrUtil=__webpack_require__(4),numberUtil=__webpack_require__(7),each=zrUtil.each,asc=numberUtil.asc,AxisProxy=function(dimName,axisIndex,dataZoomModel,ecModel){this._dimName=dimName,this._axisIndex=axisIndex,this._valueWindow,this._percentWindow,this._dataExtent,this.ecModel=ecModel,this._dataZoomModel=dataZoomModel};AxisProxy.prototype={constructor:AxisProxy,hostedBy:function(dataZoomModel){return this._dataZoomModel===dataZoomModel},getDataExtent:function(){return this._dataExtent.slice()},getDataValueWindow:function(){return this._valueWindow.slice()},getDataPercentWindow:function(){return this._percentWindow.slice()},getTargetSeriesModels:function(){var seriesModels=[],ecModel=this.ecModel;return ecModel.eachSeries(function(seriesModel){var dimName=this._dimName,axisModel=ecModel.queryComponents({mainType:dimName+"Axis",index:seriesModel.get(dimName+"AxisIndex"),id:seriesModel.get(dimName+"AxisId")})[0];this._axisIndex===(axisModel&&axisModel.componentIndex)&&seriesModels.push(seriesModel)},this),seriesModels},getAxisModel:function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},getOtherAxisModel:function(){var otherAxisDim,coordSysIndexName,axisDim=this._dimName,ecModel=this.ecModel,axisModel=this.getAxisModel(),isCartesian="x"===axisDim||"y"===axisDim;isCartesian?(coordSysIndexName="gridIndex",otherAxisDim="x"===axisDim?"y":"x"):(coordSysIndexName="polarIndex",otherAxisDim="angle"===axisDim?"radius":"angle");var foundOtherAxisModel;return ecModel.eachComponent(otherAxisDim+"Axis",function(otherAxisModel){(otherAxisModel.get(coordSysIndexName)||0)===(axisModel.get(coordSysIndexName)||0)&&(foundOtherAxisModel=otherAxisModel)}),foundOtherAxisModel},reset:function(dataZoomModel){if(dataZoomModel===this._dataZoomModel){var dataExtent=this._dataExtent=calculateDataExtent(this._dimName,this.getTargetSeriesModels()),dataWindow=calculateDataWindow(dataZoomModel.option,dataExtent,this);this._valueWindow=dataWindow.valueWindow,this._percentWindow=dataWindow.percentWindow,setAxisModel(this)}},restore:function(dataZoomModel){dataZoomModel===this._dataZoomModel&&(this._valueWindow=this._percentWindow=null,setAxisModel(this,!0))},filterData:function(dataZoomModel){function isInWindow(value){return value>=valueWindow[0]&&value<=valueWindow[1]}if(dataZoomModel===this._dataZoomModel){var axisDim=this._dimName,seriesModels=this.getTargetSeriesModels(),filterMode=dataZoomModel.get("filterMode"),valueWindow=this._valueWindow,otherAxisModel=this.getOtherAxisModel();dataZoomModel.get("$fromToolbox")&&otherAxisModel&&"category"===otherAxisModel.get("type")&&(filterMode="empty"),each(seriesModels,function(seriesModel){var seriesData=seriesModel.getData();seriesData&&each(seriesModel.coordDimToDataDim(axisDim),function(dim){"empty"===filterMode?seriesModel.setData(seriesData.map(dim,function(value){return isInWindow(value)?value:NaN})):seriesData.filterSelf(dim,isInWindow)})})}}},module.exports=AxisProxy},function(module,exports,__webpack_require__){var ComponentView=__webpack_require__(29);module.exports=ComponentView.extend({type:"dataZoom",render:function(dataZoomModel,ecModel,api,payload){this.dataZoomModel=dataZoomModel,this.ecModel=ecModel,this.api=api},getTargetInfo:function(){function save(coordModel,axisModel,store,coordIndex){for(var item,i=0;i<store.length;i++)if(store[i].model===coordModel){item=store[i];break}item||store.push(item={model:coordModel,axisModels:[],coordIndex:coordIndex}),item.axisModels.push(axisModel)}var dataZoomModel=this.dataZoomModel,ecModel=this.ecModel,cartesians=[],polars=[],axisModels=[];return dataZoomModel.eachTargetAxis(function(dimNames,axisIndex){var axisModel=ecModel.getComponent(dimNames.axis,axisIndex);if(axisModel){axisModels.push(axisModel);var coordSysName;coordSysName="xAxis"===dimNames.axis||"yAxis"===dimNames.axis?"grid":"polar";var coordModel=ecModel.queryComponents({mainType:coordSysName,index:axisModel.get(coordSysName+"Index"),
id:axisModel.get(coordSysName+"Id")})[0];null!=coordModel&&save(coordModel,axisModel,"grid"===coordSysName?cartesians:polars,coordModel.componentIndex)}},this),{cartesians:cartesians,polars:polars,axisModels:axisModels}}})},function(module,exports,__webpack_require__){var DataZoomModel=__webpack_require__(318),SliderZoomModel=DataZoomModel.extend({type:"dataZoom.slider",layoutMode:"box",defaultOption:{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#2f4554",width:.5,opacity:.3},areaStyle:{color:"rgba(47,69,84,0.3)",opacity:.3}},borderColor:"#ddd",fillerColor:"rgba(167,183,204,0.4)",handleIcon:"M8.2,13.6V3.9H6.3v9.7H3.1v14.9h3.3v9.7h1.8v-9.7h3.3V13.6H8.2z M9.7,24.4H4.8v-1.4h4.9V24.4z M9.7,19.1H4.8v-1.4h4.9V19.1z",handleSize:"100%",handleStyle:{color:"#a7b7cc"},labelPrecision:null,labelFormatter:null,showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#333"}}});module.exports=SliderZoomModel},function(module,exports,__webpack_require__){function getOtherDim(thisDim){return"x"===thisDim?"y":"x"}var zrUtil=__webpack_require__(4),graphic=__webpack_require__(43),throttle=__webpack_require__(308),DataZoomView=__webpack_require__(321),Rect=graphic.Rect,numberUtil=__webpack_require__(7),linearMap=numberUtil.linearMap,layout=__webpack_require__(21),sliderMove=__webpack_require__(324),asc=numberUtil.asc,bind=zrUtil.bind,each=zrUtil.each,DEFAULT_LOCATION_EDGE_GAP=7,DEFAULT_FRAME_BORDER_WIDTH=1,DEFAULT_FILLER_SIZE=30,HORIZONTAL="horizontal",VERTICAL="vertical",LABEL_GAP=5,SHOW_DATA_SHADOW_SERIES_TYPE=["line","bar","candlestick","scatter"],SliderZoomView=DataZoomView.extend({type:"dataZoom.slider",init:function(ecModel,api){this._displayables={},this._orient,this._range,this._handleEnds,this._size,this._handleWidth,this._handleHeight,this._location,this._dragging,this._dataShadowInfo,this.api=api},render:function(dataZoomModel,ecModel,api,payload){return SliderZoomView.superApply(this,"render",arguments),throttle.createOrUpdate(this,"_dispatchZoomAction",this.dataZoomModel.get("throttle"),"fixRate"),this._orient=dataZoomModel.get("orient"),this.dataZoomModel.get("show")===!1?void this.group.removeAll():(payload&&"dataZoom"===payload.type&&payload.from===this.uid||this._buildView(),void this._updateView())},remove:function(){SliderZoomView.superApply(this,"remove",arguments),throttle.clear(this,"_dispatchZoomAction")},dispose:function(){SliderZoomView.superApply(this,"dispose",arguments),throttle.clear(this,"_dispatchZoomAction")},_buildView:function(){var thisGroup=this.group;thisGroup.removeAll(),this._resetLocation(),this._resetInterval();var barGroup=this._displayables.barGroup=new graphic.Group;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),thisGroup.add(barGroup),this._positionGroup()},_resetLocation:function(){var dataZoomModel=this.dataZoomModel,api=this.api,coordRect=this._findCoordRect(),ecSize={width:api.getWidth(),height:api.getHeight()},positionInfo=this._orient===HORIZONTAL?{right:ecSize.width-coordRect.x-coordRect.width,top:ecSize.height-DEFAULT_FILLER_SIZE-DEFAULT_LOCATION_EDGE_GAP,width:coordRect.width,height:DEFAULT_FILLER_SIZE}:{right:DEFAULT_LOCATION_EDGE_GAP,top:coordRect.y,width:DEFAULT_FILLER_SIZE,height:coordRect.height},layoutParams=layout.getLayoutParams(dataZoomModel.option);zrUtil.each(["right","top","width","height"],function(name){"ph"===layoutParams[name]&&(layoutParams[name]=positionInfo[name])});var layoutRect=layout.getLayoutRect(layoutParams,ecSize,dataZoomModel.padding);this._location={x:layoutRect.x,y:layoutRect.y},this._size=[layoutRect.width,layoutRect.height],this._orient===VERTICAL&&this._size.reverse()},_positionGroup:function(){var thisGroup=this.group,location=this._location,orient=this._orient,targetAxisModel=this.dataZoomModel.getFirstTargetAxisModel(),inverse=targetAxisModel&&targetAxisModel.get("inverse"),barGroup=this._displayables.barGroup,otherAxisInverse=(this._dataShadowInfo||{}).otherAxisInverse;barGroup.attr(orient!==HORIZONTAL||inverse?orient===HORIZONTAL&&inverse?{scale:otherAxisInverse?[-1,1]:[-1,-1]}:orient!==VERTICAL||inverse?{scale:otherAxisInverse?[-1,-1]:[-1,1],rotation:Math.PI/2}:{scale:otherAxisInverse?[1,-1]:[1,1],rotation:Math.PI/2}:{scale:otherAxisInverse?[1,1]:[1,-1]});var rect=thisGroup.getBoundingRect([barGroup]);thisGroup.attr("position",[location.x-rect.x,location.y-rect.y])},_getViewExtent:function(){return[0,this._size[0]]},_renderBackground:function(){var dataZoomModel=this.dataZoomModel,size=this._size;this._displayables.barGroup.add(new Rect({silent:!0,shape:{x:0,y:0,width:size[0],height:size[1]},style:{fill:dataZoomModel.get("backgroundColor")},z2:-40}))},_renderDataShadow:function(){var info=this._dataShadowInfo=this._prepareDataShadowInfo();if(info){var size=this._size,seriesModel=info.series,data=seriesModel.getRawData(),otherDim=seriesModel.getShadowDim?seriesModel.getShadowDim():info.otherDim,otherDataExtent=data.getDataExtent(otherDim),otherOffset=.3*(otherDataExtent[1]-otherDataExtent[0]);otherDataExtent=[otherDataExtent[0]-otherOffset,otherDataExtent[1]+otherOffset];var otherShadowExtent=[0,size[1]],thisShadowExtent=[0,size[0]],areaPoints=[[size[0],0],[0,0]],linePoints=[],step=thisShadowExtent[1]/(data.count()-1),thisCoord=0,stride=Math.round(data.count()/size[0]);data.each([otherDim],function(value,index){if(stride>0&&index%stride)return void(thisCoord+=step);var otherCoord=null==value||isNaN(value)||""===value?null:linearMap(value,otherDataExtent,otherShadowExtent,!0);null!=otherCoord&&(areaPoints.push([thisCoord,otherCoord]),linePoints.push([thisCoord,otherCoord])),thisCoord+=step});var dataZoomModel=this.dataZoomModel;this._displayables.barGroup.add(new graphic.Polygon({shape:{points:areaPoints},style:zrUtil.defaults({fill:dataZoomModel.get("dataBackgroundColor")},dataZoomModel.getModel("dataBackground.areaStyle").getAreaStyle()),silent:!0,z2:-20})),this._displayables.barGroup.add(new graphic.Polyline({shape:{points:linePoints},style:dataZoomModel.getModel("dataBackground.lineStyle").getLineStyle(),silent:!0,z2:-19}))}},_prepareDataShadowInfo:function(){var dataZoomModel=this.dataZoomModel,showDataShadow=dataZoomModel.get("showDataShadow");if(showDataShadow!==!1){var result,ecModel=this.ecModel;return dataZoomModel.eachTargetAxis(function(dimNames,axisIndex){var seriesModels=dataZoomModel.getAxisProxy(dimNames.name,axisIndex).getTargetSeriesModels();zrUtil.each(seriesModels,function(seriesModel){if(!(result||showDataShadow!==!0&&zrUtil.indexOf(SHOW_DATA_SHADOW_SERIES_TYPE,seriesModel.get("type"))<0)){var otherDim=getOtherDim(dimNames.name),thisAxis=ecModel.getComponent(dimNames.axis,axisIndex).axis;result={thisAxis:thisAxis,series:seriesModel,thisDim:dimNames.name,otherDim:otherDim,otherAxisInverse:seriesModel.coordinateSystem.getOtherAxis(thisAxis).inverse}}},this)},this),result}},_renderHandle:function(){var displaybles=this._displayables,handles=displaybles.handles=[],handleLabels=displaybles.handleLabels=[],barGroup=this._displayables.barGroup,size=this._size,dataZoomModel=this.dataZoomModel;barGroup.add(displaybles.filler=new Rect({draggable:!0,cursor:"move",drift:bind(this._onDragMove,this,"all"),ondragstart:bind(this._showDataInfo,this,!0),ondragend:bind(this._onDragEnd,this),onmouseover:bind(this._showDataInfo,this,!0),onmouseout:bind(this._showDataInfo,this,!1),style:{fill:dataZoomModel.get("fillerColor"),textPosition:"inside"}})),barGroup.add(new Rect(graphic.subPixelOptimizeRect({silent:!0,shape:{x:0,y:0,width:size[0],height:size[1]},style:{stroke:dataZoomModel.get("dataBackgroundColor")||dataZoomModel.get("borderColor"),lineWidth:DEFAULT_FRAME_BORDER_WIDTH,fill:"rgba(0,0,0,0)"}})));var iconStr=dataZoomModel.get("handleIcon");each([0,1],function(handleIndex){var path=graphic.makePath(iconStr,{style:{strokeNoScale:!0},rectHover:!0,cursor:"vertical"===this._orient?"ns-resize":"ew-resize",draggable:!0,drift:bind(this._onDragMove,this,handleIndex),ondragend:bind(this._onDragEnd,this),onmouseover:bind(this._showDataInfo,this,!0),onmouseout:bind(this._showDataInfo,this,!1)},{x:-.5,y:0,width:1,height:1},"center"),bRect=path.getBoundingRect();this._handleHeight=numberUtil.parsePercent(dataZoomModel.get("handleSize"),this._size[1]),this._handleWidth=bRect.width/bRect.height*this._handleHeight,path.setStyle(dataZoomModel.getModel("handleStyle").getItemStyle());var handleColor=dataZoomModel.get("handleColor");null!=handleColor&&(path.style.fill=handleColor),barGroup.add(handles[handleIndex]=path);var textStyleModel=dataZoomModel.textStyleModel;this.group.add(handleLabels[handleIndex]=new graphic.Text({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textVerticalAlign:"middle",textAlign:"center",fill:textStyleModel.getTextColor(),textFont:textStyleModel.getFont()},z2:10}))},this)},_resetInterval:function(){var range=this._range=this.dataZoomModel.getPercentRange(),viewExtent=this._getViewExtent();this._handleEnds=[linearMap(range[0],[0,100],viewExtent,!0),linearMap(range[1],[0,100],viewExtent,!0)]},_updateInterval:function(handleIndex,delta){var handleEnds=this._handleEnds,viewExtend=this._getViewExtent();sliderMove(delta,handleEnds,viewExtend,"all"===handleIndex||this.dataZoomModel.get("zoomLock")?"rigid":"cross",handleIndex),this._range=asc([linearMap(handleEnds[0],viewExtend,[0,100],!0),linearMap(handleEnds[1],viewExtend,[0,100],!0)])},_updateView:function(){var displaybles=this._displayables,handleEnds=this._handleEnds,handleInterval=asc(handleEnds.slice()),size=this._size;each([0,1],function(handleIndex){var handle=displaybles.handles[handleIndex],handleHeight=this._handleHeight;handle.attr({scale:[handleHeight,handleHeight],position:[handleEnds[handleIndex],size[1]/2-handleHeight/2]})},this),displaybles.filler.setShape({x:handleInterval[0],y:0,width:handleInterval[1]-handleInterval[0],height:size[1]}),this._updateDataInfo()},_updateDataInfo:function(){function setLabel(handleIndex){var barTransform=graphic.getTransform(displaybles.handles[handleIndex].parent,this.group),direction=graphic.transformDirection(0===handleIndex?"right":"left",barTransform),offset=this._handleWidth/2+LABEL_GAP,textPoint=graphic.applyTransform([orderedHandleEnds[handleIndex]+(0===handleIndex?-offset:offset),this._size[1]/2],barTransform);handleLabels[handleIndex].setStyle({x:textPoint[0],y:textPoint[1],textVerticalAlign:orient===HORIZONTAL?"middle":direction,textAlign:orient===HORIZONTAL?direction:"center",text:labelTexts[handleIndex]})}var dataZoomModel=this.dataZoomModel,displaybles=this._displayables,handleLabels=displaybles.handleLabels,orient=this._orient,labelTexts=["",""];if(dataZoomModel.get("showDetail")){var dataInterval,axis;dataZoomModel.eachTargetAxis(function(dimNames,axisIndex){dataInterval||(dataInterval=dataZoomModel.getAxisProxy(dimNames.name,axisIndex).getDataValueWindow(),axis=this.ecModel.getComponent(dimNames.axis,axisIndex).axis)},this),dataInterval&&(labelTexts=[this._formatLabel(dataInterval[0],axis),this._formatLabel(dataInterval[1],axis)])}var orderedHandleEnds=asc(this._handleEnds.slice());setLabel.call(this,0),setLabel.call(this,1)},_formatLabel:function(value,axis){var dataZoomModel=this.dataZoomModel,labelFormatter=dataZoomModel.get("labelFormatter");if(zrUtil.isFunction(labelFormatter))return labelFormatter(value);var labelPrecision=dataZoomModel.get("labelPrecision");return null!=labelPrecision&&"auto"!==labelPrecision||(labelPrecision=axis.getPixelPrecision()),value=null==value&&isNaN(value)?"":"category"===axis.type||"time"===axis.type?axis.scale.getLabel(Math.round(value)):value.toFixed(Math.min(labelPrecision,20)),zrUtil.isString(labelFormatter)&&(value=labelFormatter.replace("{value}",value)),value},_showDataInfo:function(showOrHide){showOrHide=this._dragging||showOrHide;var handleLabels=this._displayables.handleLabels;handleLabels[0].attr("invisible",!showOrHide),handleLabels[1].attr("invisible",!showOrHide)},_onDragMove:function(handleIndex,dx,dy){this._dragging=!0;var vertex=this._applyBarTransform([dx,dy],!0);this._updateInterval(handleIndex,vertex[0]),this._updateView(),this.dataZoomModel.get("realtime")&&this._dispatchZoomAction()},_onDragEnd:function(){this._dragging=!1,this._showDataInfo(!1),this._dispatchZoomAction()},_dispatchZoomAction:function(){var range=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,start:range[0],end:range[1]})},_applyBarTransform:function(vertex,inverse){var barTransform=this._displayables.barGroup.getLocalTransform();return graphic.applyTransform(vertex,barTransform,inverse)},_findCoordRect:function(){var rect,targetInfo=this.getTargetInfo();if(targetInfo.cartesians.length)rect=targetInfo.cartesians[0].model.coordinateSystem.getRect();else{var width=this.api.getWidth(),height=this.api.getHeight();rect={x:.2*width,y:.2*height,width:.6*width,height:.6*height}}return rect}});module.exports=SliderZoomView},function(module,exports){module.exports=function(delta,handleEnds,extent,mode,handleIndex){function getRealDelta(delta,handleEnds,extent){var handleMinMax=handleEnds.length?handleEnds.slice():[handleEnds,handleEnds];return handleEnds[0]>handleEnds[1]&&handleMinMax.reverse(),delta<0&&handleMinMax[0]+delta<extent[0]&&(delta=extent[0]-handleMinMax[0]),delta>0&&handleMinMax[1]+delta>extent[1]&&(delta=extent[1]-handleMinMax[1]),delta}return delta?("rigid"===mode?(delta=getRealDelta(delta,handleEnds,extent),handleEnds[0]+=delta,handleEnds[1]+=delta):(delta=getRealDelta(delta,handleEnds[handleIndex],extent),handleEnds[handleIndex]+=delta,"push"===mode&&handleEnds[0]>handleEnds[1]&&(handleEnds[1-handleIndex]=handleEnds[handleIndex])),handleEnds):handleEnds}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(318).extend({type:"dataZoom.inside",defaultOption:{zoomLock:!1}})},function(module,exports,__webpack_require__){function panCartesian(pixelDeltas,range,controller,coordInfo){range=range.slice();var axisModel=coordInfo.axisModels[0];if(axisModel){var directionInfo=getDirectionInfo(pixelDeltas,axisModel,controller),percentDelta=directionInfo.signal*(range[1]-range[0])*directionInfo.pixel/directionInfo.pixelLength;return sliderMove(percentDelta,range,[0,100],"rigid"),range}}function scaleCartesian(scale,mousePoint,range,controller,coordInfo,dataZoomModel){range=range.slice();var axisModel=coordInfo.axisModels[0];if(axisModel){var directionInfo=getDirectionInfo(mousePoint,axisModel,controller),mouse=directionInfo.pixel-directionInfo.pixelStart,percentPoint=mouse/directionInfo.pixelLength*(range[1]-range[0])+range[0];return scale=Math.max(scale,0),range[0]=(range[0]-percentPoint)*scale+percentPoint,range[1]=(range[1]-percentPoint)*scale+percentPoint,fixRange(range)}}function getDirectionInfo(xy,axisModel,controller){var axis=axisModel.axis,rect=controller.rectProvider(),ret={};return"x"===axis.dim?(ret.pixel=xy[0],ret.pixelLength=rect.width,ret.pixelStart=rect.x,ret.signal=axis.inverse?1:-1):(ret.pixel=xy[1],ret.pixelLength=rect.height,ret.pixelStart=rect.y,ret.signal=axis.inverse?-1:1),ret}function fixRange(range){var bound=[0,100];return!(range[0]<=bound[1])&&(range[0]=bound[1]),!(range[1]<=bound[1])&&(range[1]=bound[1]),!(range[0]>=bound[0])&&(range[0]=bound[0]),!(range[1]>=bound[0])&&(range[1]=bound[0]),range}var DataZoomView=__webpack_require__(321),zrUtil=__webpack_require__(4),sliderMove=__webpack_require__(324),roams=__webpack_require__(327),bind=zrUtil.bind,InsideZoomView=DataZoomView.extend({type:"dataZoom.inside",init:function(ecModel,api){this._range},render:function(dataZoomModel,ecModel,api,payload){InsideZoomView.superApply(this,"render",arguments),roams.shouldRecordRange(payload,dataZoomModel.id)&&(this._range=dataZoomModel.getPercentRange());var coordInfoList=this.getTargetInfo().cartesians,allCoordIds=zrUtil.map(coordInfoList,function(coordInfo){return roams.generateCoordId(coordInfo.model)});zrUtil.each(coordInfoList,function(coordInfo){var coordModel=coordInfo.model;roams.register(api,{coordId:roams.generateCoordId(coordModel),allCoordIds:allCoordIds,coordinateSystem:coordModel.coordinateSystem,dataZoomId:dataZoomModel.id,throttleRate:dataZoomModel.get("throttle",!0),panGetRange:bind(this._onPan,this,coordInfo),zoomGetRange:bind(this._onZoom,this,coordInfo)})},this)},dispose:function(){roams.unregister(this.api,this.dataZoomModel.id),InsideZoomView.superApply(this,"dispose",arguments),this._range=null},_onPan:function(coordInfo,controller,dx,dy){return this._range=panCartesian([dx,dy],this._range,controller,coordInfo)},_onZoom:function(coordInfo,controller,scale,mouseX,mouseY){var dataZoomModel=this.dataZoomModel;return dataZoomModel.option.zoomLock?this._range:this._range=scaleCartesian(1/scale,[mouseX,mouseY],this._range,controller,coordInfo,dataZoomModel)}});module.exports=InsideZoomView},function(module,exports,__webpack_require__){function giveStore(api){var zr=api.getZr();return zr[ATTR]||(zr[ATTR]={})}function createController(api,dataZoomInfo,newRecord){var controller=new RoamController(api.getZr());return controller.enable(),controller.on("pan",curry(onPan,newRecord)),controller.on("zoom",curry(onZoom,newRecord)),controller}function cleanStore(store){zrUtil.each(store,function(record,coordId){record.count||(record.controller.off("pan").off("zoom"),delete store[coordId])})}function onPan(record,dx,dy){wrapAndDispatch(record,function(info){return info.panGetRange(record.controller,dx,dy)})}function onZoom(record,scale,mouseX,mouseY){wrapAndDispatch(record,function(info){return info.zoomGetRange(record.controller,scale,mouseX,mouseY)})}function wrapAndDispatch(record,getRange){var batch=[];zrUtil.each(record.dataZoomInfos,function(info){var range=getRange(info);range&&batch.push({dataZoomId:info.dataZoomId,start:range[0],end:range[1]})}),record.dispatchAction(batch)}function dispatchAction(api,batch){api.dispatchAction({type:"dataZoom",batch:batch})}var zrUtil=__webpack_require__(4),RoamController=__webpack_require__(174),throttle=__webpack_require__(308),curry=zrUtil.curry,ATTR="\0_ec_dataZoom_roams",roams={register:function(api,dataZoomInfo){var store=giveStore(api),theDataZoomId=dataZoomInfo.dataZoomId,theCoordId=dataZoomInfo.coordId;zrUtil.each(store,function(record,coordId){var dataZoomInfos=record.dataZoomInfos;dataZoomInfos[theDataZoomId]&&zrUtil.indexOf(dataZoomInfo.allCoordIds,theCoordId)<0&&(delete dataZoomInfos[theDataZoomId],record.count--)}),cleanStore(store);var record=store[theCoordId];record||(record=store[theCoordId]={coordId:theCoordId,dataZoomInfos:{},count:0},record.controller=createController(api,dataZoomInfo,record),record.dispatchAction=zrUtil.curry(dispatchAction,api));var rect=dataZoomInfo.coordinateSystem.getRect().clone();record.controller.rectProvider=function(){return rect},throttle.createOrUpdate(record,"dispatchAction",dataZoomInfo.throttleRate,"fixRate"),!record.dataZoomInfos[theDataZoomId]&&record.count++,record.dataZoomInfos[theDataZoomId]=dataZoomInfo},unregister:function(api,dataZoomId){var store=giveStore(api);zrUtil.each(store,function(record){var dataZoomInfos=record.dataZoomInfos;dataZoomInfos[dataZoomId]&&(delete dataZoomInfos[dataZoomId],record.count--)}),cleanStore(store)},shouldRecordRange:function(payload,dataZoomId){if(payload&&"dataZoom"===payload.type&&payload.batch)for(var i=0,len=payload.batch.length;i<len;i++)if(payload.batch[i].dataZoomId===dataZoomId)return!1;return!0},generateCoordId:function(coordModel){return coordModel.type+"\0_"+coordModel.id}};module.exports=roams},function(module,exports,__webpack_require__){function resetSingleAxis(dimNames,axisIndex,dataZoomModel){dataZoomModel.getAxisProxy(dimNames.name,axisIndex).reset(dataZoomModel)}function filterSingleAxis(dimNames,axisIndex,dataZoomModel){dataZoomModel.getAxisProxy(dimNames.name,axisIndex).filterData(dataZoomModel)}var echarts=__webpack_require__(1);echarts.registerProcessor(function(ecModel,api){ecModel.eachComponent("dataZoom",function(dataZoomModel){dataZoomModel.eachTargetAxis(resetSingleAxis),dataZoomModel.eachTargetAxis(filterSingleAxis)}),ecModel.eachComponent("dataZoom",function(dataZoomModel){var axisProxy=dataZoomModel.findRepresentativeAxisProxy(),percentRange=axisProxy.getDataPercentWindow(),valueRange=axisProxy.getDataValueWindow();dataZoomModel.setRawRange({start:percentRange[0],end:percentRange[1],startValue:valueRange[0],endValue:valueRange[1]})})})},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4),helper=__webpack_require__(319),echarts=__webpack_require__(1);echarts.registerAction("dataZoom",function(payload,ecModel){var linkedNodesFinder=helper.createLinkedNodesFinder(zrUtil.bind(ecModel.eachComponent,ecModel,"dataZoom"),helper.eachAxisDim,function(model,dimNames){return model.get(dimNames.axisIndex)}),effectedModels=[];ecModel.eachComponent({mainType:"dataZoom",query:payload},function(model,index){effectedModels.push.apply(effectedModels,linkedNodesFinder(model).nodes)}),zrUtil.each(effectedModels,function(dataZoomModel,index){dataZoomModel.setRawRange({start:payload.start,end:payload.end,startValue:payload.startValue,endValue:payload.endValue})})})},function(module,exports,__webpack_require__){__webpack_require__(331),__webpack_require__(342)},function(module,exports,__webpack_require__){__webpack_require__(1).registerPreprocessor(__webpack_require__(332)),__webpack_require__(333),__webpack_require__(334),__webpack_require__(335),__webpack_require__(338),__webpack_require__(341)},function(module,exports,__webpack_require__){function has(obj,name){return obj&&obj.hasOwnProperty&&obj.hasOwnProperty(name)}var zrUtil=__webpack_require__(4),each=zrUtil.each;module.exports=function(option){var visualMap=option&&option.visualMap;zrUtil.isArray(visualMap)||(visualMap=visualMap?[visualMap]:[]),each(visualMap,function(opt){if(opt){has(opt,"splitList")&&!has(opt,"pieces")&&(opt.pieces=opt.splitList,delete opt.splitList);var pieces=opt.pieces;pieces&&zrUtil.isArray(pieces)&&each(pieces,function(piece){zrUtil.isObject(piece)&&(has(piece,"start")&&!has(piece,"min")&&(piece.min=piece.start),has(piece,"end")&&!has(piece,"max")&&(piece.max=piece.end))})}})}},function(module,exports,__webpack_require__){__webpack_require__(19).registerSubTypeDefaulter("visualMap",function(option){return option.categories||(option.pieces?option.pieces.length>0:option.splitNumber>0)&&!option.calculable?"piecewise":"continuous"})},function(module,exports,__webpack_require__){function processSingleVisualMap(visualMapModel,ecModel){visualMapModel.eachTargetSeries(function(seriesModel){var data=seriesModel.getData();visualSolution.applyVisual(visualMapModel.stateList,visualMapModel.targetVisuals,data,visualMapModel.getValueState,visualMapModel,visualMapModel.getDataDimension(data))})}function prepareVisualMeta(ecModel){ecModel.eachSeries(function(seriesModel){var data=seriesModel.getData(),visualMetaList=[];ecModel.eachComponent("visualMap",function(visualMapModel){if(visualMapModel.isTargetSeries(seriesModel)){var visualMeta={};visualMetaList.push(visualMeta),visualMeta.stops=visualMapModel.getStops(seriesModel,getColorVisual),visualMeta.dimension=visualMapModel.getDataDimension(data)}}),seriesModel.getData().setVisual("visualMeta",visualMetaList)})}function getColorVisual(visualMapModel,value,valueState){function getVisual(key){return resultVisual[key]}function setVisual(key,value){resultVisual[key]=value}for(var mappings=visualMapModel.targetVisuals[valueState],visualTypes=VisualMapping.prepareVisualTypes(mappings),resultVisual={},i=0,len=visualTypes.length;i<len;i++){var type=visualTypes[i],mapping=mappings["colorAlpha"===type?"__alphaForOpacity":type];mapping&&mapping.applyVisual(value,getVisual,setVisual)}return resultVisual.color}var echarts=__webpack_require__(1),visualSolution=__webpack_require__(306),VisualMapping=__webpack_require__(192);echarts.registerVisual(echarts.PRIORITY.VISUAL.COMPONENT,function(ecModel){ecModel.eachComponent("visualMap",function(visualMapModel){processSingleVisualMap(visualMapModel,ecModel)}),prepareVisualMeta(ecModel)})},function(module,exports,__webpack_require__){function getColorStopValues(visualMapModel,valueState,dataExtent){var mapping=visualMapModel.targetVisuals[valueState].color;if(!mapping)return dataExtent.slice();var count=mapping.option.visual.length;if(count<=1||dataExtent[0]===dataExtent[1])return dataExtent.slice();for(var step=(dataExtent[1]-dataExtent[0])/(count-1),value=dataExtent[0],stopValues=[],i=0;i<count&&value<dataExtent[1];i++)stopValues.push(value),value+=step;return stopValues.push(dataExtent[1]),stopValues}function insertStopList(visualMapModel,valueState,dataExtent,result){var stops=getColorStopValues(visualMapModel,valueState,dataExtent);zrUtil.each(stops,function(val){for(var stop={value:val,valueState:valueState},inRange=0,i=0;i<result.length;i++){if(inRange|="inRange"===result[i].valueState,val<result[i].value)return void result.splice(i,0,stop);inRange&&(result[i].valueState="inRange")}result.push(stop)})}var VisualMapModel=__webpack_require__(336),zrUtil=__webpack_require__(4),numberUtil=__webpack_require__(7),DEFAULT_BAR_BOUND=[20,140],ContinuousModel=VisualMapModel.extend({type:"visualMap.continuous",defaultOption:{align:"auto",calculable:!1,range:null,realtime:!0,itemHeight:null,itemWidth:null,hoverLink:!0,hoverLinkDataSize:null,hoverLinkOnHandle:!0},optionUpdated:function(newOption,isInit){ContinuousModel.superApply(this,"optionUpdated",arguments),this.resetTargetSeries(),this.resetExtent(),this.resetVisual(function(mappingOption){mappingOption.mappingMethod="linear",mappingOption.dataExtent=this.getExtent()}),this._resetRange()},resetItemSize:function(){ContinuousModel.superApply(this,"resetItemSize",arguments);var itemSize=this.itemSize;"horizontal"===this._orient&&itemSize.reverse(),(null==itemSize[0]||isNaN(itemSize[0]))&&(itemSize[0]=DEFAULT_BAR_BOUND[0]),(null==itemSize[1]||isNaN(itemSize[1]))&&(itemSize[1]=DEFAULT_BAR_BOUND[1])},_resetRange:function(){var dataExtent=this.getExtent(),range=this.option.range;!range||range.auto?(dataExtent.auto=1,this.option.range=dataExtent):zrUtil.isArray(range)&&(range[0]>range[1]&&range.reverse(),range[0]=Math.max(range[0],dataExtent[0]),range[1]=Math.min(range[1],dataExtent[1]))},completeVisualOption:function(){VisualMapModel.prototype.completeVisualOption.apply(this,arguments),zrUtil.each(this.stateList,function(state){var symbolSize=this.option.controller[state].symbolSize;symbolSize&&symbolSize[0]!==symbolSize[1]&&(symbolSize[0]=0)},this)},setSelected:function(selected){this.option.range=selected.slice(),this._resetRange()},getSelected:function(){var dataExtent=this.getExtent(),dataInterval=numberUtil.asc((this.get("range")||[]).slice());return dataInterval[0]>dataExtent[1]&&(dataInterval[0]=dataExtent[1]),dataInterval[1]>dataExtent[1]&&(dataInterval[1]=dataExtent[1]),dataInterval[0]<dataExtent[0]&&(dataInterval[0]=dataExtent[0]),dataInterval[1]<dataExtent[0]&&(dataInterval[1]=dataExtent[0]),dataInterval},getValueState:function(value){var range=this.option.range,dataExtent=this.getExtent();return(range[0]<=dataExtent[0]||range[0]<=value)&&(range[1]>=dataExtent[1]||value<=range[1])?"inRange":"outOfRange"},findTargetDataIndices:function(range){var result=[];return this.eachTargetSeries(function(seriesModel){var dataIndices=[],data=seriesModel.getData();data.each(this.getDataDimension(data),function(value,dataIndex){range[0]<=value&&value<=range[1]&&dataIndices.push(dataIndex)},!0,this),result.push({seriesId:seriesModel.id,dataIndex:dataIndices})},this),result},getStops:function(seriesModel,getColorVisual){var result=[];return insertStopList(this,"outOfRange",this.getExtent(),result),insertStopList(this,"inRange",this.option.range.slice(),result),zrUtil.each(result,function(item){item.color=getColorVisual(this,item.value,item.valueState)},this),result}});module.exports=ContinuousModel},function(module,exports,__webpack_require__){var echarts=__webpack_require__(1),zrUtil=__webpack_require__(4),env=__webpack_require__(2),visualDefault=__webpack_require__(337),VisualMapping=__webpack_require__(192),visualSolution=__webpack_require__(306),mapVisual=VisualMapping.mapVisual,modelUtil=__webpack_require__(5),eachVisual=VisualMapping.eachVisual,numberUtil=__webpack_require__(7),isArray=zrUtil.isArray,each=zrUtil.each,asc=numberUtil.asc,linearMap=numberUtil.linearMap,noop=zrUtil.noop,DEFAULT_COLOR=["#f6efa6","#d88273","#bf444c"],VisualMapModel=echarts.extendComponentModel({type:"visualMap",dependencies:["series"],stateList:["inRange","outOfRange"],replacableOptionKeys:["inRange","outOfRange","target","controller","color"],dataBound:[-(1/0),1/0],layoutMode:{type:"box",ignoreSize:!0},defaultOption:{show:!0,zlevel:0,z:4,seriesIndex:null,min:0,max:200,dimension:null,inRange:null,outOfRange:null,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,color:null,formatter:null,text:null,textStyle:{color:"#333"}},init:function(option,parentModel,ecModel){this._dataExtent,this.targetVisuals={},this.controllerVisuals={},this.textStyleModel,this.itemSize,this.mergeDefaultAndTheme(option,ecModel)},optionUpdated:function(newOption,isInit){var thisOption=this.option;env.canvasSupported||(thisOption.realtime=!1),!isInit&&visualSolution.replaceVisualOption(thisOption,newOption,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},resetVisual:function(supplementVisualOption){var stateList=this.stateList;supplementVisualOption=zrUtil.bind(supplementVisualOption,this),this.controllerVisuals=visualSolution.createVisualMappings(this.option.controller,stateList,supplementVisualOption),this.targetVisuals=visualSolution.createVisualMappings(this.option.target,stateList,supplementVisualOption)},resetTargetSeries:function(){var thisOption=this.option,allSeriesIndex=null==thisOption.seriesIndex;thisOption.seriesIndex=allSeriesIndex?[]:modelUtil.normalizeToArray(thisOption.seriesIndex),allSeriesIndex&&this.ecModel.eachSeries(function(seriesModel,index){thisOption.seriesIndex.push(index)})},eachTargetSeries:function(callback,context){zrUtil.each(this.option.seriesIndex,function(seriesIndex){callback.call(context,this.ecModel.getSeriesByIndex(seriesIndex))},this)},isTargetSeries:function(seriesModel){var is=!1;return this.eachTargetSeries(function(model){model===seriesModel&&(is=!0)}),is},formatValueText:function(value,isCategory,edgeSymbols){function toFixed(val){return val===dataBound[0]?"min":val===dataBound[1]?"max":(+val).toFixed(precision)}var isMinMax,textValue,option=this.option,precision=option.precision,dataBound=this.dataBound,formatter=option.formatter;return edgeSymbols=edgeSymbols||["<",">"],zrUtil.isArray(value)&&(value=value.slice(),isMinMax=!0),textValue=isCategory?value:isMinMax?[toFixed(value[0]),toFixed(value[1])]:toFixed(value),zrUtil.isString(formatter)?formatter.replace("{value}",isMinMax?textValue[0]:textValue).replace("{value2}",isMinMax?textValue[1]:textValue):zrUtil.isFunction(formatter)?isMinMax?formatter(value[0],value[1]):formatter(value):isMinMax?value[0]===dataBound[0]?edgeSymbols[0]+" "+textValue[1]:value[1]===dataBound[1]?edgeSymbols[1]+" "+textValue[0]:textValue[0]+" - "+textValue[1]:textValue},resetExtent:function(){var thisOption=this.option,extent=asc([thisOption.min,thisOption.max]);this._dataExtent=extent},getDataDimension:function(list){var optDim=this.option.dimension;return null!=optDim?optDim:list.dimensions.length-1},getExtent:function(){return this._dataExtent.slice()},completeVisualOption:function(){function completeSingle(base){isArray(thisOption.color)&&!base.inRange&&(base.inRange={color:thisOption.color.slice().reverse()}),base.inRange=base.inRange||{color:DEFAULT_COLOR},each(this.stateList,function(state){var visualType=base[state];
if(zrUtil.isString(visualType)){var defa=visualDefault.get(visualType,"active",isCategory);defa?(base[state]={},base[state][visualType]=defa):delete base[state]}},this)}function completeInactive(base,stateExist,stateAbsent){var optExist=base[stateExist],optAbsent=base[stateAbsent];optExist&&!optAbsent&&(optAbsent=base[stateAbsent]={},each(optExist,function(visualData,visualType){if(VisualMapping.isValidType(visualType)){var defa=visualDefault.get(visualType,"inactive",isCategory);null!=defa&&(optAbsent[visualType]=defa,"color"!==visualType||optAbsent.hasOwnProperty("opacity")||optAbsent.hasOwnProperty("colorAlpha")||(optAbsent.opacity=[0,0]))}}))}function completeController(controller){var symbolExists=(controller.inRange||{}).symbol||(controller.outOfRange||{}).symbol,symbolSizeExists=(controller.inRange||{}).symbolSize||(controller.outOfRange||{}).symbolSize,inactiveColor=this.get("inactiveColor");each(this.stateList,function(state){var itemSize=this.itemSize,visuals=controller[state];visuals||(visuals=controller[state]={color:isCategory?inactiveColor:[inactiveColor]}),null==visuals.symbol&&(visuals.symbol=symbolExists&&zrUtil.clone(symbolExists)||(isCategory?"roundRect":["roundRect"])),null==visuals.symbolSize&&(visuals.symbolSize=symbolSizeExists&&zrUtil.clone(symbolSizeExists)||(isCategory?itemSize[0]:[itemSize[0],itemSize[0]])),visuals.symbol=mapVisual(visuals.symbol,function(symbol){return"none"===symbol||"square"===symbol?"roundRect":symbol});var symbolSize=visuals.symbolSize;if(null!=symbolSize){var max=-(1/0);eachVisual(symbolSize,function(value){value>max&&(max=value)}),visuals.symbolSize=mapVisual(symbolSize,function(value){return linearMap(value,[0,max],[0,itemSize[0]],!0)})}},this)}var thisOption=this.option,base={inRange:thisOption.inRange,outOfRange:thisOption.outOfRange},target=thisOption.target||(thisOption.target={}),controller=thisOption.controller||(thisOption.controller={});zrUtil.merge(target,base),zrUtil.merge(controller,base);var isCategory=this.isCategory();completeSingle.call(this,target),completeSingle.call(this,controller),completeInactive.call(this,target,"inRange","outOfRange"),completeController.call(this,controller)},resetItemSize:function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},isCategory:function(){return!!this.option.categories},setSelected:noop,getValueState:noop});module.exports=VisualMapModel},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4),visualDefault={get:function(visualType,key,isCategory){var value=zrUtil.clone((defaultOption[visualType]||{})[key]);return isCategory&&zrUtil.isArray(value)?value[value.length-1]:value}},defaultOption={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}};module.exports=visualDefault},function(module,exports,__webpack_require__){function createPolygon(points,cursor,onDrift,onDragEnd){return new graphic.Polygon({shape:{points:points},draggable:!!onDrift,cursor:cursor,drift:onDrift,ondragend:onDragEnd})}function createHandlePoints(handleIndex,textSize){return 0===handleIndex?[[0,0],[textSize,0],[textSize,-textSize]]:[[0,0],[textSize,0],[textSize,textSize]]}function createIndicatorPoints(isRange,halfHoverLinkSize,pos,extentMax){return isRange?[[0,-mathMin(halfHoverLinkSize,mathMax(pos,0))],[HOVER_LINK_OUT,0],[0,mathMin(halfHoverLinkSize,mathMax(extentMax-pos,0))]]:[[0,0],[5,-5],[5,5]]}function getHalfHoverLinkSize(visualMapModel,dataExtent,sizeExtent){var halfHoverLinkSize=HOVER_LINK_SIZE/2,hoverLinkDataSize=visualMapModel.get("hoverLinkDataSize");return hoverLinkDataSize&&(halfHoverLinkSize=linearMap(hoverLinkDataSize,dataExtent,sizeExtent,!0)/2),halfHoverLinkSize}function useHoverLinkOnHandle(visualMapModel){return!visualMapModel.get("realtime")&&visualMapModel.get("hoverLinkOnHandle")}var VisualMapView=__webpack_require__(339),graphic=__webpack_require__(43),zrUtil=__webpack_require__(4),numberUtil=__webpack_require__(7),sliderMove=__webpack_require__(324),LinearGradient=__webpack_require__(79),helper=__webpack_require__(340),modelUtil=__webpack_require__(5),linearMap=numberUtil.linearMap,each=zrUtil.each,mathMin=Math.min,mathMax=Math.max,HOVER_LINK_SIZE=12,HOVER_LINK_OUT=6,ContinuousView=VisualMapView.extend({type:"visualMap.continuous",init:function(){ContinuousView.superApply(this,"init",arguments),this._shapes={},this._dataInterval=[],this._handleEnds=[],this._orient,this._useHandle,this._hoverLinkDataIndices=[],this._dragging,this._hovering},doRender:function(visualMapModel,ecModel,api,payload){payload&&"selectDataRange"===payload.type&&payload.from===this.uid||this._buildView()},_buildView:function(){this.group.removeAll();var visualMapModel=this.visualMapModel,thisGroup=this.group;this._orient=visualMapModel.get("orient"),this._useHandle=visualMapModel.get("calculable"),this._resetInterval(),this._renderBar(thisGroup);var dataRangeText=visualMapModel.get("text");this._renderEndsText(thisGroup,dataRangeText,0),this._renderEndsText(thisGroup,dataRangeText,1),this._updateView(!0),this.renderBackground(thisGroup),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(thisGroup)},_renderEndsText:function(group,dataRangeText,endsIndex){if(dataRangeText){var text=dataRangeText[1-endsIndex];text=null!=text?text+"":"";var visualMapModel=this.visualMapModel,textGap=visualMapModel.get("textGap"),itemSize=visualMapModel.itemSize,barGroup=this._shapes.barGroup,position=this._applyTransform([itemSize[0]/2,0===endsIndex?-textGap:itemSize[1]+textGap],barGroup),align=this._applyTransform(0===endsIndex?"bottom":"top",barGroup),orient=this._orient,textStyleModel=this.visualMapModel.textStyleModel;this.group.add(new graphic.Text({style:{x:position[0],y:position[1],textVerticalAlign:"horizontal"===orient?"middle":align,textAlign:"horizontal"===orient?align:"center",text:text,textFont:textStyleModel.getFont(),fill:textStyleModel.getTextColor()}}))}},_renderBar:function(targetGroup){var visualMapModel=this.visualMapModel,shapes=this._shapes,itemSize=visualMapModel.itemSize,orient=this._orient,useHandle=this._useHandle,itemAlign=helper.getItemAlign(visualMapModel,this.api,itemSize),barGroup=shapes.barGroup=this._createBarGroup(itemAlign);barGroup.add(shapes.outOfRange=createPolygon()),barGroup.add(shapes.inRange=createPolygon(null,useHandle?"move":null,zrUtil.bind(this._dragHandle,this,"all",!1),zrUtil.bind(this._dragHandle,this,"all",!0)));var textRect=visualMapModel.textStyleModel.getTextRect("国"),textSize=mathMax(textRect.width,textRect.height);useHandle&&(shapes.handleThumbs=[],shapes.handleLabels=[],shapes.handleLabelPoints=[],this._createHandle(barGroup,0,itemSize,textSize,orient,itemAlign),this._createHandle(barGroup,1,itemSize,textSize,orient,itemAlign)),this._createIndicator(barGroup,itemSize,textSize,orient),targetGroup.add(barGroup)},_createHandle:function(barGroup,handleIndex,itemSize,textSize,orient){var onDrift=zrUtil.bind(this._dragHandle,this,handleIndex,!1),onDragEnd=zrUtil.bind(this._dragHandle,this,handleIndex,!0),handleThumb=createPolygon(createHandlePoints(handleIndex,textSize),"move",onDrift,onDragEnd);handleThumb.position[0]=itemSize[0],barGroup.add(handleThumb);var textStyleModel=this.visualMapModel.textStyleModel,handleLabel=new graphic.Text({draggable:!0,drift:onDrift,ondragend:onDragEnd,style:{x:0,y:0,text:"",textFont:textStyleModel.getFont(),fill:textStyleModel.getTextColor()}});this.group.add(handleLabel);var handleLabelPoint=["horizontal"===orient?textSize/2:1.5*textSize,"horizontal"===orient?0===handleIndex?-(1.5*textSize):1.5*textSize:0===handleIndex?-textSize/2:textSize/2],shapes=this._shapes;shapes.handleThumbs[handleIndex]=handleThumb,shapes.handleLabelPoints[handleIndex]=handleLabelPoint,shapes.handleLabels[handleIndex]=handleLabel},_createIndicator:function(barGroup,itemSize,textSize,orient){var indicator=createPolygon([[0,0]],"move");indicator.position[0]=itemSize[0],indicator.attr({invisible:!0,silent:!0}),barGroup.add(indicator);var textStyleModel=this.visualMapModel.textStyleModel,indicatorLabel=new graphic.Text({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textFont:textStyleModel.getFont(),fill:textStyleModel.getTextColor()}});this.group.add(indicatorLabel);var indicatorLabelPoint=["horizontal"===orient?textSize/2:HOVER_LINK_OUT+3,0],shapes=this._shapes;shapes.indicator=indicator,shapes.indicatorLabel=indicatorLabel,shapes.indicatorLabelPoint=indicatorLabelPoint},_dragHandle:function(handleIndex,isEnd,dx,dy){if(this._useHandle){if(this._dragging=!isEnd,!isEnd){var vertex=this._applyTransform([dx,dy],this._shapes.barGroup,!0);this._updateInterval(handleIndex,vertex[1]),this._updateView()}isEnd===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),isEnd?!this._hovering&&this._clearHoverLinkToSeries():useHoverLinkOnHandle(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[handleIndex],!1)}},_resetInterval:function(){var visualMapModel=this.visualMapModel,dataInterval=this._dataInterval=visualMapModel.getSelected(),dataExtent=visualMapModel.getExtent(),sizeExtent=[0,visualMapModel.itemSize[1]];this._handleEnds=[linearMap(dataInterval[0],dataExtent,sizeExtent,!0),linearMap(dataInterval[1],dataExtent,sizeExtent,!0)]},_updateInterval:function(handleIndex,delta){delta=delta||0;var visualMapModel=this.visualMapModel,handleEnds=this._handleEnds;sliderMove(delta,handleEnds,[0,visualMapModel.itemSize[1]],"all"===handleIndex?"rigid":"push",handleIndex);var dataExtent=visualMapModel.getExtent(),sizeExtent=[0,visualMapModel.itemSize[1]];this._dataInterval=[linearMap(handleEnds[0],sizeExtent,dataExtent,!0),linearMap(handleEnds[1],sizeExtent,dataExtent,!0)]},_updateView:function(forSketch){var visualMapModel=this.visualMapModel,dataExtent=visualMapModel.getExtent(),shapes=this._shapes,outOfRangeHandleEnds=[0,visualMapModel.itemSize[1]],inRangeHandleEnds=forSketch?outOfRangeHandleEnds:this._handleEnds,visualInRange=this._createBarVisual(this._dataInterval,dataExtent,inRangeHandleEnds,"inRange"),visualOutOfRange=this._createBarVisual(dataExtent,dataExtent,outOfRangeHandleEnds,"outOfRange");shapes.inRange.setStyle({fill:visualInRange.barColor,opacity:visualInRange.opacity}).setShape("points",visualInRange.barPoints),shapes.outOfRange.setStyle({fill:visualOutOfRange.barColor,opacity:visualOutOfRange.opacity}).setShape("points",visualOutOfRange.barPoints),this._updateHandle(inRangeHandleEnds,visualInRange)},_createBarVisual:function(dataInterval,dataExtent,handleEnds,forceState){var opts={forceState:forceState,convertOpacityToAlpha:!0},colorStops=this._makeColorGradient(dataInterval,opts),symbolSizes=[this.getControllerVisual(dataInterval[0],"symbolSize",opts),this.getControllerVisual(dataInterval[1],"symbolSize",opts)],barPoints=this._createBarPoints(handleEnds,symbolSizes);return{barColor:new LinearGradient(0,0,0,1,colorStops),barPoints:barPoints,handlesColor:[colorStops[0].color,colorStops[colorStops.length-1].color]}},_makeColorGradient:function(dataInterval,opts){var sampleNumber=100,colorStops=[],step=(dataInterval[1]-dataInterval[0])/sampleNumber;colorStops.push({color:this.getControllerVisual(dataInterval[0],"color",opts),offset:0});for(var i=1;i<sampleNumber;i++){var currValue=dataInterval[0]+step*i;if(currValue>dataInterval[1])break;colorStops.push({color:this.getControllerVisual(currValue,"color",opts),offset:i/sampleNumber})}return colorStops.push({color:this.getControllerVisual(dataInterval[1],"color",opts),offset:1}),colorStops},_createBarPoints:function(handleEnds,symbolSizes){var itemSize=this.visualMapModel.itemSize;return[[itemSize[0]-symbolSizes[0],handleEnds[0]],[itemSize[0],handleEnds[0]],[itemSize[0],handleEnds[1]],[itemSize[0]-symbolSizes[1],handleEnds[1]]]},_createBarGroup:function(itemAlign){var orient=this._orient,inverse=this.visualMapModel.get("inverse");return new graphic.Group("horizontal"!==orient||inverse?"horizontal"===orient&&inverse?{scale:"bottom"===itemAlign?[-1,1]:[1,1],rotation:-Math.PI/2}:"vertical"!==orient||inverse?{scale:"left"===itemAlign?[1,1]:[-1,1]}:{scale:"left"===itemAlign?[1,-1]:[-1,-1]}:{scale:"bottom"===itemAlign?[1,1]:[-1,1],rotation:Math.PI/2})},_updateHandle:function(handleEnds,visualInRange){if(this._useHandle){var shapes=this._shapes,visualMapModel=this.visualMapModel,handleThumbs=shapes.handleThumbs,handleLabels=shapes.handleLabels;each([0,1],function(handleIndex){var handleThumb=handleThumbs[handleIndex];handleThumb.setStyle("fill",visualInRange.handlesColor[handleIndex]),handleThumb.position[1]=handleEnds[handleIndex];var textPoint=graphic.applyTransform(shapes.handleLabelPoints[handleIndex],graphic.getTransform(handleThumb,this.group));handleLabels[handleIndex].setStyle({x:textPoint[0],y:textPoint[1],text:visualMapModel.formatValueText(this._dataInterval[handleIndex]),textVerticalAlign:"middle",textAlign:this._applyTransform("horizontal"===this._orient?0===handleIndex?"bottom":"top":"left",shapes.barGroup)})},this)}},_showIndicator:function(cursorValue,textValue,rangeSymbol,halfHoverLinkSize){var visualMapModel=this.visualMapModel,dataExtent=visualMapModel.getExtent(),itemSize=visualMapModel.itemSize,sizeExtent=[0,itemSize[1]],pos=linearMap(cursorValue,dataExtent,sizeExtent,!0),shapes=this._shapes,indicator=shapes.indicator;if(indicator){indicator.position[1]=pos,indicator.attr("invisible",!1),indicator.setShape("points",createIndicatorPoints(!!rangeSymbol,halfHoverLinkSize,pos,itemSize[1]));var opts={convertOpacityToAlpha:!0},color=this.getControllerVisual(cursorValue,"color",opts);indicator.setStyle("fill",color);var textPoint=graphic.applyTransform(shapes.indicatorLabelPoint,graphic.getTransform(indicator,this.group)),indicatorLabel=shapes.indicatorLabel;indicatorLabel.attr("invisible",!1);var align=this._applyTransform("left",shapes.barGroup),orient=this._orient;indicatorLabel.setStyle({text:(rangeSymbol?rangeSymbol:"")+visualMapModel.formatValueText(textValue),textVerticalAlign:"horizontal"===orient?align:"middle",textAlign:"horizontal"===orient?"center":align,x:textPoint[0],y:textPoint[1]})}},_enableHoverLinkToSeries:function(){var self=this;this._shapes.barGroup.on("mousemove",function(e){if(self._hovering=!0,!self._dragging){var itemSize=self.visualMapModel.itemSize,pos=self._applyTransform([e.offsetX,e.offsetY],self._shapes.barGroup,!0,!0);pos[1]=mathMin(mathMax(0,pos[1]),itemSize[1]),self._doHoverLinkToSeries(pos[1],0<=pos[0]&&pos[0]<=itemSize[0])}}).on("mouseout",function(){self._hovering=!1,!self._dragging&&self._clearHoverLinkToSeries()})},_enableHoverLinkFromSeries:function(){var zr=this.api.getZr();this.visualMapModel.option.hoverLink?(zr.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),zr.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},_doHoverLinkToSeries:function(cursorPos,hoverOnBar){var visualMapModel=this.visualMapModel,itemSize=visualMapModel.itemSize;if(visualMapModel.option.hoverLink){var sizeExtent=[0,itemSize[1]],dataExtent=visualMapModel.getExtent();cursorPos=mathMin(mathMax(sizeExtent[0],cursorPos),sizeExtent[1]);var halfHoverLinkSize=getHalfHoverLinkSize(visualMapModel,dataExtent,sizeExtent),hoverRange=[cursorPos-halfHoverLinkSize,cursorPos+halfHoverLinkSize],cursorValue=linearMap(cursorPos,sizeExtent,dataExtent,!0),valueRange=[linearMap(hoverRange[0],sizeExtent,dataExtent,!0),linearMap(hoverRange[1],sizeExtent,dataExtent,!0)];hoverRange[0]<sizeExtent[0]&&(valueRange[0]=-(1/0)),hoverRange[1]>sizeExtent[1]&&(valueRange[1]=1/0),hoverOnBar&&(valueRange[0]===-(1/0)?this._showIndicator(cursorValue,valueRange[1],"< ",halfHoverLinkSize):valueRange[1]===1/0?this._showIndicator(cursorValue,valueRange[0],"> ",halfHoverLinkSize):this._showIndicator(cursorValue,cursorValue,"≈ ",halfHoverLinkSize));var oldBatch=this._hoverLinkDataIndices,newBatch=[];(hoverOnBar||useHoverLinkOnHandle(visualMapModel))&&(newBatch=this._hoverLinkDataIndices=visualMapModel.findTargetDataIndices(valueRange));var resultBatches=modelUtil.compressBatches(oldBatch,newBatch);this._dispatchHighDown("downplay",resultBatches[0]),this._dispatchHighDown("highlight",resultBatches[1])}},_hoverLinkFromSeriesMouseOver:function(e){var el=e.target;if(el&&null!=el.dataIndex){var dataModel=el.dataModel||this.ecModel.getSeriesByIndex(el.seriesIndex),data=dataModel.getData(el.dataType),dim=data.getDimension(this.visualMapModel.getDataDimension(data)),value=data.get(dim,el.dataIndex,!0);isNaN(value)||this._showIndicator(value,value)}},_hideIndicator:function(){var shapes=this._shapes;shapes.indicator&&shapes.indicator.attr("invisible",!0),shapes.indicatorLabel&&shapes.indicatorLabel.attr("invisible",!0)},_clearHoverLinkToSeries:function(){this._hideIndicator();var indices=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",indices),indices.length=0},_clearHoverLinkFromSeries:function(){this._hideIndicator();var zr=this.api.getZr();zr.off("mouseover",this._hoverLinkFromSeriesMouseOver),zr.off("mouseout",this._hideIndicator)},_applyTransform:function(vertex,element,inverse,global){var transform=graphic.getTransform(element,global?null:this.group);return graphic[zrUtil.isArray(vertex)?"applyTransform":"transformDirection"](vertex,transform,inverse)},_dispatchHighDown:function(type,batch){batch&&batch.length&&this.api.dispatchAction({type:type,batch:batch})},dispose:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},remove:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()}});module.exports=ContinuousView},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4),graphic=__webpack_require__(43),formatUtil=__webpack_require__(6),layout=__webpack_require__(21),echarts=__webpack_require__(1),VisualMapping=__webpack_require__(192);module.exports=echarts.extendComponentView({type:"visualMap",autoPositionValues:{left:1,right:1,top:1,bottom:1},init:function(ecModel,api){this.ecModel=ecModel,this.api=api,this.visualMapModel},render:function(visualMapModel,ecModel,api,payload){return this.visualMapModel=visualMapModel,visualMapModel.get("show")===!1?void this.group.removeAll():void this.doRender.apply(this,arguments)},renderBackground:function(group){var visualMapModel=this.visualMapModel,padding=formatUtil.normalizeCssArray(visualMapModel.get("padding")||0),rect=group.getBoundingRect();group.add(new graphic.Rect({z2:-1,silent:!0,shape:{x:rect.x-padding[3],y:rect.y-padding[0],width:rect.width+padding[3]+padding[1],height:rect.height+padding[0]+padding[2]},style:{fill:visualMapModel.get("backgroundColor"),stroke:visualMapModel.get("borderColor"),lineWidth:visualMapModel.get("borderWidth")}}))},getControllerVisual:function(targetValue,visualCluster,opts){function getter(key){return visualObj[key]}function setter(key,value){visualObj[key]=value}opts=opts||{};var forceState=opts.forceState,visualMapModel=this.visualMapModel,visualObj={};if("symbol"===visualCluster&&(visualObj.symbol=visualMapModel.get("itemSymbol")),"color"===visualCluster){var defaultColor=visualMapModel.get("contentColor");visualObj.color=defaultColor}var mappings=visualMapModel.controllerVisuals[forceState||visualMapModel.getValueState(targetValue)],visualTypes=VisualMapping.prepareVisualTypes(mappings);return zrUtil.each(visualTypes,function(type){var visualMapping=mappings[type];opts.convertOpacityToAlpha&&"opacity"===type&&(type="colorAlpha",visualMapping=mappings.__alphaForOpacity),VisualMapping.dependsOn(type,visualCluster)&&visualMapping&&visualMapping.applyVisual(targetValue,getter,setter)}),visualObj[visualCluster]},positionGroup:function(group){var model=this.visualMapModel,api=this.api;layout.positionGroup(group,model.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()})},doRender:zrUtil.noop})},function(module,exports,__webpack_require__){var layout=__webpack_require__(21),helper={getItemAlign:function(visualMapModel,api,itemSize){var modelOption=visualMapModel.option,itemAlign=modelOption.align;if(null!=itemAlign&&"auto"!==itemAlign)return itemAlign;for(var ecSize={width:api.getWidth(),height:api.getHeight()},realIndex="horizontal"===modelOption.orient?1:0,paramsSet=[["left","right","width"],["top","bottom","height"]],reals=paramsSet[realIndex],fakeValue=[0,null,10],layoutInput={},i=0;i<3;i++)layoutInput[paramsSet[1-realIndex][i]]=fakeValue[i],layoutInput[reals[i]]=2===i?itemSize[0]:modelOption[reals[i]];var rParam=[["x","width",3],["y","height",0]][realIndex],rect=layout.getLayoutRect(layoutInput,ecSize,modelOption.padding);return reals[(rect.margin[rParam[2]]||0)+rect[rParam[0]]+.5*rect[rParam[1]]<.5*ecSize[rParam[1]]?0:1]}};module.exports=helper},function(module,exports,__webpack_require__){var echarts=__webpack_require__(1),actionInfo={type:"selectDataRange",event:"dataRangeSelected",update:"update"};echarts.registerAction(actionInfo,function(payload,ecModel){ecModel.eachComponent({mainType:"visualMap",query:payload},function(model){model.setSelected(payload.selected)})})},function(module,exports,__webpack_require__){__webpack_require__(1).registerPreprocessor(__webpack_require__(332)),__webpack_require__(333),__webpack_require__(334),__webpack_require__(343),__webpack_require__(344),__webpack_require__(341)},function(module,exports,__webpack_require__){function normalizeReverse(thisOption,pieceList){var inverse=thisOption.inverse;("vertical"===thisOption.orient?!inverse:inverse)&&pieceList.reverse()}function normalizePieces(pieceList){function littleThan(piece,standard,lg){return lg=lg||0,piece.interval[lg]<standard.interval[lg]||piece.interval[lg]===standard.interval[lg]&&(+piece.close[lg]>standard.close[lg]||littleThan(piece,standard,1))}pieceList.sort(function(a,b){return littleThan(a,b)?-1:1});for(var curr=-(1/0),i=0;i<pieceList.length;i++)for(var interval=pieceList[i].interval,close=pieceList[i].close,lg=0;lg<2;lg++)interval[lg]<curr&&(interval[lg]=curr,close[lg]=1-lg),curr=interval[lg]}var VisualMapModel=__webpack_require__(336),zrUtil=__webpack_require__(4),VisualMapping=__webpack_require__(192),PiecewiseModel=VisualMapModel.extend({type:"visualMap.piecewise",defaultOption:{selected:null,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieceList:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0},optionUpdated:function(newOption,isInit){PiecewiseModel.superApply(this,"optionUpdated",arguments),this._pieceList=[],this.resetTargetSeries(),this.resetExtent();var mode=this._mode=this._determineMode();resetMethods[this._mode].call(this),this._resetSelected(newOption,isInit);var categories=this.option.categories;this.resetVisual(function(mappingOption,state){"categories"===mode?(mappingOption.mappingMethod="category",mappingOption.categories=zrUtil.clone(categories)):(mappingOption.dataExtent=this.getExtent(),mappingOption.mappingMethod="piecewise",mappingOption.pieceList=zrUtil.map(this._pieceList,function(piece){var piece=zrUtil.clone(piece);return"inRange"!==state&&(piece.visual=null),piece}))})},_resetSelected:function(newOption,isInit){var thisOption=this.option,pieceList=this._pieceList,selected=(isInit?thisOption:newOption).selected||{};if(thisOption.selected=selected,zrUtil.each(pieceList,function(piece,index){var key=this.getSelectedMapKey(piece);key in selected||(selected[key]=!0)},this),"single"===thisOption.selectedMode){var hasSel=!1;zrUtil.each(pieceList,function(piece,index){var key=this.getSelectedMapKey(piece);selected[key]&&(hasSel?selected[key]=!1:hasSel=!0)},this)}},getSelectedMapKey:function(piece){return"categories"===this._mode?piece.value+"":piece.index+""},getPieceList:function(){return this._pieceList},_determineMode:function(){var option=this.option;return option.pieces&&option.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},setSelected:function(selected){this.option.selected=zrUtil.clone(selected)},getValueState:function(value){var index=VisualMapping.findPieceIndex(value,this._pieceList);return null!=index&&this.option.selected[this.getSelectedMapKey(this._pieceList[index])]?"inRange":"outOfRange"},findTargetDataIndices:function(pieceIndex){var result=[];return this.eachTargetSeries(function(seriesModel){var dataIndices=[],data=seriesModel.getData();data.each(this.getDataDimension(data),function(value,dataIndex){var pIdx=VisualMapping.findPieceIndex(value,this._pieceList);pIdx===pieceIndex&&dataIndices.push(dataIndex)},!0,this),result.push({seriesId:seriesModel.id,dataIndex:dataIndices})},this),result},getRepresentValue:function(piece){var representValue;if(this.isCategory())representValue=piece.value;else if(null!=piece.value)representValue=piece.value;else{var pieceInterval=piece.interval||[];representValue=(pieceInterval[0]+pieceInterval[1])/2}return representValue},getStops:function(seriesModel,getColorVisual){function setPiece(piece){result.push(piece),piece.color=getColorVisual(model,model.getRepresentValue(piece),piece.valueState)}var result=[],model=this,curr=-(1/0);return zrUtil.each(this._pieceList,function(piece){var interval=piece.interval;interval&&(interval[0]>curr&&setPiece({interval:[curr,interval[0]],valueState:"outOfRange"}),setPiece({interval:interval.slice(),valueState:this.getValueState((interval[0]+interval[1])/2)}),curr=interval[1])},this),result}}),resetMethods={splitNumber:function(){var thisOption=this.option,pieceList=this._pieceList,precision=thisOption.precision,dataExtent=this.getExtent(),splitNumber=thisOption.splitNumber;splitNumber=Math.max(parseInt(splitNumber,10),1),thisOption.splitNumber=splitNumber;for(var splitStep=(dataExtent[1]-dataExtent[0])/splitNumber;+splitStep.toFixed(precision)!==splitStep&&precision<5;)precision++;thisOption.precision=precision,splitStep=+splitStep.toFixed(precision);for(var i=0,curr=dataExtent[0];i<splitNumber;i++,curr+=splitStep){var max=i===splitNumber-1?dataExtent[1]:curr+splitStep;pieceList.push({index:i,interval:[curr,max],close:[1,1]})}normalizePieces(pieceList),zrUtil.each(pieceList,function(piece){piece.text=this.formatValueText(piece.interval)},this)},categories:function(){var thisOption=this.option;zrUtil.each(thisOption.categories,function(cate){this._pieceList.push({text:this.formatValueText(cate,!0),value:cate})},this),normalizeReverse(thisOption,this._pieceList)},pieces:function(){var thisOption=this.option,pieceList=this._pieceList;zrUtil.each(thisOption.pieces,function(pieceListItem,index){zrUtil.isObject(pieceListItem)||(pieceListItem={value:pieceListItem});var item={text:"",index:index};if(null!=pieceListItem.label&&(item.text=pieceListItem.label),pieceListItem.hasOwnProperty("value")){var value=item.value=pieceListItem.value;item.interval=[value,value],item.close=[1,1]}else{for(var interval=item.interval=[],close=item.close=[0,0],closeList=[1,0,1],infinityList=[-(1/0),1/0],useMinMax=[],lg=0;lg<2;lg++){for(var names=[["gte","gt","min"],["lte","lt","max"]][lg],i=0;i<3&&null==interval[lg];i++)interval[lg]=pieceListItem[names[i]],close[lg]=closeList[i],useMinMax[lg]=2===i;null==interval[lg]&&(interval[lg]=infinityList[lg])}useMinMax[0]&&interval[1]===1/0&&(close[0]=0),useMinMax[1]&&interval[0]===-(1/0)&&(close[1]=0),interval[0]>interval[1]&&console.warn("Piece "+index+"is illegal: "+interval+" lower bound should not greater then uppper bound."),interval[0]===interval[1]&&close[0]&&close[1]&&(item.value=interval[0])}item.visual=VisualMapping.retrieveVisuals(pieceListItem),pieceList.push(item)},this),normalizeReverse(thisOption,pieceList),normalizePieces(pieceList),zrUtil.each(pieceList,function(piece){var close=piece.close,edgeSymbols=[["<","≤"][close[1]],[">","≥"][close[0]]];piece.text=piece.text||this.formatValueText(null!=piece.value?piece.value:piece.interval,!1,edgeSymbols)},this)}};module.exports=PiecewiseModel},function(module,exports,__webpack_require__){var VisualMapView=__webpack_require__(339),zrUtil=__webpack_require__(4),graphic=__webpack_require__(43),symbolCreators=__webpack_require__(106),layout=__webpack_require__(21),helper=__webpack_require__(340),PiecewiseVisualMapView=VisualMapView.extend({type:"visualMap.piecewise",doRender:function(){function renderItem(item){var piece=item.piece,itemGroup=new graphic.Group;itemGroup.onclick=zrUtil.bind(this._onItemClick,this,piece),this._enableHoverLink(itemGroup,item.indexInModelPieceList);var representValue=visualMapModel.getRepresentValue(piece);if(this._createItemSymbol(itemGroup,representValue,[0,0,itemSize[0],itemSize[1]]),showLabel){var visualState=this.visualMapModel.getValueState(representValue);itemGroup.add(new graphic.Text({style:{x:"right"===itemAlign?-textGap:itemSize[0]+textGap,y:itemSize[1]/2,text:piece.text,textVerticalAlign:"middle",textAlign:itemAlign,textFont:textFont,fill:textFill,opacity:"outOfRange"===visualState?.5:1}}))}thisGroup.add(itemGroup)}var thisGroup=this.group;thisGroup.removeAll();var visualMapModel=this.visualMapModel,textGap=visualMapModel.get("textGap"),textStyleModel=visualMapModel.textStyleModel,textFont=textStyleModel.getFont(),textFill=textStyleModel.getTextColor(),itemAlign=this._getItemAlign(),itemSize=visualMapModel.itemSize,viewData=this._getViewData(),showLabel=!viewData.endsText,showEndsText=!showLabel;showEndsText&&this._renderEndsText(thisGroup,viewData.endsText[0],itemSize),zrUtil.each(viewData.viewPieceList,renderItem,this),showEndsText&&this._renderEndsText(thisGroup,viewData.endsText[1],itemSize),layout.box(visualMapModel.get("orient"),thisGroup,visualMapModel.get("itemGap")),this.renderBackground(thisGroup),this.positionGroup(thisGroup)},_enableHoverLink:function(itemGroup,pieceIndex){function onHoverLink(method){var visualMapModel=this.visualMapModel;visualMapModel.option.hoverLink&&this.api.dispatchAction({type:method,batch:visualMapModel.findTargetDataIndices(pieceIndex)})}itemGroup.on("mouseover",zrUtil.bind(onHoverLink,this,"highlight")).on("mouseout",zrUtil.bind(onHoverLink,this,"downplay"))},_getItemAlign:function(){var visualMapModel=this.visualMapModel,modelOption=visualMapModel.option;if("vertical"===modelOption.orient)return helper.getItemAlign(visualMapModel,this.api,visualMapModel.itemSize);var align=modelOption.align;return align&&"auto"!==align||(align="left"),align},_renderEndsText:function(group,text,itemSize){if(text){var itemGroup=new graphic.Group,textStyleModel=this.visualMapModel.textStyleModel;itemGroup.add(new graphic.Text({style:{x:itemSize[0]/2,y:itemSize[1]/2,textVerticalAlign:"middle",textAlign:"center",text:text,textFont:textStyleModel.getFont(),fill:textStyleModel.getTextColor()}})),group.add(itemGroup)}},_getViewData:function(){var visualMapModel=this.visualMapModel,viewPieceList=zrUtil.map(visualMapModel.getPieceList(),function(piece,index){return{piece:piece,indexInModelPieceList:index}}),endsText=visualMapModel.get("text"),orient=visualMapModel.get("orient"),inverse=visualMapModel.get("inverse");return("horizontal"===orient?inverse:!inverse)?viewPieceList.reverse():endsText&&(endsText=endsText.slice().reverse()),{viewPieceList:viewPieceList,endsText:endsText}},_createItemSymbol:function(group,representValue,shapeParam){group.add(symbolCreators.createSymbol(this.getControllerVisual(representValue,"symbol"),shapeParam[0],shapeParam[1],shapeParam[2],shapeParam[3],this.getControllerVisual(representValue,"color")))},_onItemClick:function(piece){var visualMapModel=this.visualMapModel,option=visualMapModel.option,selected=zrUtil.clone(option.selected),newKey=visualMapModel.getSelectedMapKey(piece);"single"===option.selectedMode?(selected[newKey]=!0,zrUtil.each(selected,function(o,key){selected[key]=key===newKey})):selected[newKey]=!selected[newKey],this.api.dispatchAction({
type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:selected})}});module.exports=PiecewiseVisualMapView},function(module,exports,__webpack_require__){__webpack_require__(346),__webpack_require__(348),__webpack_require__(1).registerPreprocessor(function(opt){opt.markPoint=opt.markPoint||{}})},function(module,exports,__webpack_require__){module.exports=__webpack_require__(347).extend({type:"markPoint",defaultOption:{zlevel:0,z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{normal:{show:!0,position:"inside"},emphasis:{show:!0}},itemStyle:{normal:{borderWidth:2}}}})},function(module,exports,__webpack_require__){function fillLabel(opt){modelUtil.defaultEmphasis(opt.label,modelUtil.LABEL_OPTIONS)}var modelUtil=__webpack_require__(5),zrUtil=__webpack_require__(4),env=__webpack_require__(2),formatUtil=__webpack_require__(6),addCommas=formatUtil.addCommas,encodeHTML=formatUtil.encodeHTML,MarkerModel=__webpack_require__(1).extendComponentModel({type:"marker",dependencies:["series","grid","polar","geo"],init:function(option,parentModel,ecModel,extraOpt){if("marker"===this.type)throw new Error("Marker component is abstract component. Use markLine, markPoint, markArea instead.");this.mergeDefaultAndTheme(option,ecModel),this.mergeOption(option,ecModel,extraOpt.createdBySelf,!0)},ifEnableAnimation:function(){if(env.node)return!1;var hostSeries=this.__hostSeries;return this.getShallow("animation")&&hostSeries&&hostSeries.ifEnableAnimation()},mergeOption:function(newOpt,ecModel,createdBySelf,isInit){var MarkerModel=this.constructor,modelPropName=this.mainType+"Model";createdBySelf||ecModel.eachSeries(function(seriesModel){var markerOpt=seriesModel.get(this.mainType),markerModel=seriesModel[modelPropName];if(!markerOpt||!markerOpt.data)return void(seriesModel[modelPropName]=null);if(markerModel)markerModel.mergeOption(markerOpt,ecModel,!0);else{isInit&&fillLabel(markerOpt),zrUtil.each(markerOpt.data,function(item){item instanceof Array?(fillLabel(item[0]),fillLabel(item[1])):fillLabel(item)});var opt={mainType:this.mainType,seriesIndex:seriesModel.seriesIndex,name:seriesModel.name,createdBySelf:!0};markerModel=new MarkerModel(markerOpt,this,ecModel,opt),markerModel.__hostSeries=seriesModel}seriesModel[modelPropName]=markerModel},this)},formatTooltip:function(dataIndex){var data=this.getData(),value=this.getRawValue(dataIndex),formattedValue=zrUtil.isArray(value)?zrUtil.map(value,addCommas).join(", "):addCommas(value),name=data.getName(dataIndex),html=this.name;return(null!=value||name)&&(html+="<br />"),name&&(html+=encodeHTML(name),null!=value&&(html+=" : ")),null!=value&&(html+=formattedValue),html},getData:function(){return this._data},setData:function(data){this._data=data}});zrUtil.mixin(MarkerModel,modelUtil.dataFormatMixin),module.exports=MarkerModel},function(module,exports,__webpack_require__){function updateMarkerLayout(mpData,seriesModel,api){var coordSys=seriesModel.coordinateSystem;mpData.each(function(idx){var point,itemModel=mpData.getItemModel(idx),xPx=numberUtil.parsePercent(itemModel.get("x"),api.getWidth()),yPx=numberUtil.parsePercent(itemModel.get("y"),api.getHeight());if(isNaN(xPx)||isNaN(yPx)){if(seriesModel.getMarkerPosition)point=seriesModel.getMarkerPosition(mpData.getValues(mpData.dimensions,idx));else if(coordSys){var x=mpData.get(coordSys.dimensions[0],idx),y=mpData.get(coordSys.dimensions[1],idx);point=coordSys.dataToPoint([x,y])}}else point=[xPx,yPx];isNaN(xPx)||(point[0]=xPx),isNaN(yPx)||(point[1]=yPx),mpData.setItemLayout(idx,point)})}function createList(coordSys,seriesModel,mpModel){var coordDimsInfos;coordDimsInfos=coordSys?zrUtil.map(coordSys&&coordSys.dimensions,function(coordDim){var info=seriesModel.getData().getDimensionInfo(seriesModel.coordDimToDataDim(coordDim)[0])||{};return info.name=coordDim,info}):[{name:"value",type:"float"}];var mpData=new List(coordDimsInfos,mpModel),dataOpt=zrUtil.map(mpModel.get("data"),zrUtil.curry(markerHelper.dataTransform,seriesModel));return coordSys&&(dataOpt=zrUtil.filter(dataOpt,zrUtil.curry(markerHelper.dataFilter,coordSys))),mpData.initData(dataOpt,null,coordSys?markerHelper.dimValueGetter:function(item){return item.value}),mpData}var SymbolDraw=__webpack_require__(104),zrUtil=__webpack_require__(4),numberUtil=__webpack_require__(7),List=__webpack_require__(97),markerHelper=__webpack_require__(349);__webpack_require__(350).extend({type:"markPoint",updateLayout:function(markPointModel,ecModel,api){ecModel.eachSeries(function(seriesModel){var mpModel=seriesModel.markPointModel;mpModel&&(updateMarkerLayout(mpModel.getData(),seriesModel,api),this.markerGroupMap[seriesModel.name].updateLayout(mpModel))},this)},renderSeries:function(seriesModel,mpModel,ecModel,api){var coordSys=seriesModel.coordinateSystem,seriesName=seriesModel.name,seriesData=seriesModel.getData(),symbolDrawMap=this.markerGroupMap,symbolDraw=symbolDrawMap[seriesName];symbolDraw||(symbolDraw=symbolDrawMap[seriesName]=new SymbolDraw);var mpData=createList(coordSys,seriesModel,mpModel);mpModel.setData(mpData),updateMarkerLayout(mpModel.getData(),seriesModel,api),mpData.each(function(idx){var itemModel=mpData.getItemModel(idx),symbolSize=itemModel.getShallow("symbolSize");"function"==typeof symbolSize&&(symbolSize=symbolSize(mpModel.getRawValue(idx),mpModel.getDataParams(idx))),mpData.setItemVisual(idx,{symbolSize:symbolSize,color:itemModel.get("itemStyle.normal.color")||seriesData.getVisual("color"),symbol:itemModel.getShallow("symbol")})}),symbolDraw.updateData(mpData),this.group.add(symbolDraw.group),mpData.eachItemGraphicEl(function(el){el.traverse(function(child){child.dataModel=mpModel})}),symbolDraw.__keep=!0,symbolDraw.group.silent=mpModel.get("silent")||seriesModel.get("silent")}})},function(module,exports,__webpack_require__){function hasXOrY(item){return!(isNaN(parseFloat(item.x))&&isNaN(parseFloat(item.y)))}function hasXAndY(item){return!isNaN(parseFloat(item.x))&&!isNaN(parseFloat(item.y))}function getPrecision(data,valueAxisDim,dataIndex){var precision=-1;do precision=Math.max(numberUtil.getPrecision(data.get(valueAxisDim,dataIndex)),precision),data=data.stackedOn;while(data);return precision}function markerTypeCalculatorWithExtent(mlType,data,otherDataDim,targetDataDim,otherCoordIndex,targetCoordIndex){var coordArr=[],value=numCalculate(data,targetDataDim,mlType),dataIndex=data.indexOfNearest(targetDataDim,value,!0);coordArr[otherCoordIndex]=data.get(otherDataDim,dataIndex,!0),coordArr[targetCoordIndex]=data.get(targetDataDim,dataIndex,!0);var precision=getPrecision(data,targetDataDim,dataIndex);return precision>=0&&(coordArr[targetCoordIndex]=+coordArr[targetCoordIndex].toFixed(precision)),coordArr}var zrUtil=__webpack_require__(4),numberUtil=__webpack_require__(7),indexOf=zrUtil.indexOf,curry=zrUtil.curry,markerTypeCalculator={min:curry(markerTypeCalculatorWithExtent,"min"),max:curry(markerTypeCalculatorWithExtent,"max"),average:curry(markerTypeCalculatorWithExtent,"average")},dataTransform=function(seriesModel,item){var data=seriesModel.getData(),coordSys=seriesModel.coordinateSystem;if(item&&!hasXAndY(item)&&!zrUtil.isArray(item.coord)&&coordSys){var dims=coordSys.dimensions,axisInfo=getAxisInfo(item,data,coordSys,seriesModel);if(item=zrUtil.clone(item),item.type&&markerTypeCalculator[item.type]&&axisInfo.baseAxis&&axisInfo.valueAxis){var otherCoordIndex=indexOf(dims,axisInfo.baseAxis.dim),targetCoordIndex=indexOf(dims,axisInfo.valueAxis.dim);item.coord=markerTypeCalculator[item.type](data,axisInfo.baseDataDim,axisInfo.valueDataDim,otherCoordIndex,targetCoordIndex),item.value=item.coord[targetCoordIndex]}else{for(var coord=[null!=item.xAxis?item.xAxis:item.radiusAxis,null!=item.yAxis?item.yAxis:item.angleAxis],i=0;i<2;i++)if(markerTypeCalculator[coord[i]]){var dataDim=seriesModel.coordDimToDataDim(dims[i])[0];coord[i]=numCalculate(data,dataDim,coord[i])}item.coord=coord}}return item},getAxisInfo=function(item,data,coordSys,seriesModel){var ret={};return null!=item.valueIndex||null!=item.valueDim?(ret.valueDataDim=null!=item.valueIndex?data.getDimension(item.valueIndex):item.valueDim,ret.valueAxis=coordSys.getAxis(seriesModel.dataDimToCoordDim(ret.valueDataDim)),ret.baseAxis=coordSys.getOtherAxis(ret.valueAxis),ret.baseDataDim=seriesModel.coordDimToDataDim(ret.baseAxis.dim)[0]):(ret.baseAxis=seriesModel.getBaseAxis(),ret.valueAxis=coordSys.getOtherAxis(ret.baseAxis),ret.baseDataDim=seriesModel.coordDimToDataDim(ret.baseAxis.dim)[0],ret.valueDataDim=seriesModel.coordDimToDataDim(ret.valueAxis.dim)[0]),ret},dataFilter=function(coordSys,item){return!(coordSys&&coordSys.containData&&item.coord&&!hasXOrY(item))||coordSys.containData(item.coord)},dimValueGetter=function(item,dimName,dataIndex,dimIndex){return dimIndex<2?item.coord&&item.coord[dimIndex]:item.value},numCalculate=function(data,valueDataDim,type){if("average"===type){var sum=0,count=0;return data.each(valueDataDim,function(val,idx){isNaN(val)||(sum+=val,count++)},!0),sum/count}return data.getDataExtent(valueDataDim,!0)["max"===type?1:0]};module.exports={dataTransform:dataTransform,dataFilter:dataFilter,dimValueGetter:dimValueGetter,getAxisInfo:getAxisInfo,numCalculate:numCalculate}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(1).extendComponentView({type:"marker",init:function(){this.markerGroupMap={}},render:function(markerModel,ecModel,api){var markerGroupMap=this.markerGroupMap;for(var name in markerGroupMap)markerGroupMap[name].__keep=!1;var markerModelKey=this.type+"Model";ecModel.eachSeries(function(seriesModel){var markerModel=seriesModel[markerModelKey];markerModel&&this.renderSeries(seriesModel,markerModel,ecModel,api)},this);for(var name in markerGroupMap)markerGroupMap[name].__keep||this.group.remove(markerGroupMap[name].group)},renderSeries:function(){}})},function(module,exports,__webpack_require__){__webpack_require__(352),__webpack_require__(353),__webpack_require__(1).registerPreprocessor(function(opt){opt.markLine=opt.markLine||{}})},function(module,exports,__webpack_require__){module.exports=__webpack_require__(347).extend({type:"markLine",defaultOption:{zlevel:0,z:5,symbol:["circle","arrow"],symbolSize:[8,16],precision:2,tooltip:{trigger:"item"},label:{normal:{show:!0,position:"end"},emphasis:{show:!0}},lineStyle:{normal:{type:"dashed"},emphasis:{width:3}},animationEasing:"linear"}})},function(module,exports,__webpack_require__){function isInifinity(val){return!isNaN(val)&&!isFinite(val)}function ifMarkLineHasOnlyDim(dimIndex,fromCoord,toCoord,coordSys){var otherDimIndex=1-dimIndex,dimName=coordSys.dimensions[dimIndex];return isInifinity(fromCoord[otherDimIndex])&&isInifinity(toCoord[otherDimIndex])&&fromCoord[dimIndex]===toCoord[dimIndex]&&coordSys.getAxis(dimName).containData(fromCoord[dimIndex])}function markLineFilter(coordSys,item){if("cartesian2d"===coordSys.type){var fromCoord=item[0].coord,toCoord=item[1].coord;if(fromCoord&&toCoord&&(ifMarkLineHasOnlyDim(1,fromCoord,toCoord,coordSys)||ifMarkLineHasOnlyDim(0,fromCoord,toCoord,coordSys)))return!0}return markerHelper.dataFilter(coordSys,item[0])&&markerHelper.dataFilter(coordSys,item[1])}function updateSingleMarkerEndLayout(data,idx,isFrom,seriesModel,api){var point,coordSys=seriesModel.coordinateSystem,itemModel=data.getItemModel(idx),xPx=numberUtil.parsePercent(itemModel.get("x"),api.getWidth()),yPx=numberUtil.parsePercent(itemModel.get("y"),api.getHeight());if(isNaN(xPx)||isNaN(yPx)){if(seriesModel.getMarkerPosition)point=seriesModel.getMarkerPosition(data.getValues(data.dimensions,idx));else{var dims=coordSys.dimensions,x=data.get(dims[0],idx),y=data.get(dims[1],idx);point=coordSys.dataToPoint([x,y])}if("cartesian2d"===coordSys.type){var xAxis=coordSys.getAxis("x"),yAxis=coordSys.getAxis("y"),dims=coordSys.dimensions;isInifinity(data.get(dims[0],idx))?point[0]=xAxis.toGlobalCoord(xAxis.getExtent()[isFrom?0:1]):isInifinity(data.get(dims[1],idx))&&(point[1]=yAxis.toGlobalCoord(yAxis.getExtent()[isFrom?0:1]))}isNaN(xPx)||(point[0]=xPx),isNaN(yPx)||(point[1]=yPx)}else point=[xPx,yPx];data.setItemLayout(idx,point)}function createList(coordSys,seriesModel,mlModel){var coordDimsInfos;coordDimsInfos=coordSys?zrUtil.map(coordSys&&coordSys.dimensions,function(coordDim){var info=seriesModel.getData().getDimensionInfo(seriesModel.coordDimToDataDim(coordDim)[0])||{};return info.name=coordDim,info}):[{name:"value",type:"float"}];var fromData=new List(coordDimsInfos,mlModel),toData=new List(coordDimsInfos,mlModel),lineData=new List([],mlModel),optData=zrUtil.map(mlModel.get("data"),zrUtil.curry(markLineTransform,seriesModel,coordSys,mlModel));coordSys&&(optData=zrUtil.filter(optData,zrUtil.curry(markLineFilter,coordSys)));var dimValueGetter=coordSys?markerHelper.dimValueGetter:function(item){return item.value};return fromData.initData(zrUtil.map(optData,function(item){return item[0]}),null,dimValueGetter),toData.initData(zrUtil.map(optData,function(item){return item[1]}),null,dimValueGetter),lineData.initData(zrUtil.map(optData,function(item){return item[2]})),lineData.hasItemOption=!0,{from:fromData,to:toData,line:lineData}}var zrUtil=__webpack_require__(4),List=__webpack_require__(97),numberUtil=__webpack_require__(7),markerHelper=__webpack_require__(349),LineDraw=__webpack_require__(199),markLineTransform=function(seriesModel,coordSys,mlModel,item){var data=seriesModel.getData(),mlType=item.type;if(!zrUtil.isArray(item)&&("min"===mlType||"max"===mlType||"average"===mlType||null!=item.xAxis||null!=item.yAxis)){var valueAxis,valueDataDim,value;if(null!=item.yAxis||null!=item.xAxis)valueDataDim=null!=item.yAxis?"y":"x",valueAxis=coordSys.getAxis(valueDataDim),value=zrUtil.retrieve(item.yAxis,item.xAxis);else{var axisInfo=markerHelper.getAxisInfo(item,data,coordSys,seriesModel);valueDataDim=axisInfo.valueDataDim,valueAxis=axisInfo.valueAxis,value=markerHelper.numCalculate(data,valueDataDim,mlType)}var valueIndex="x"===valueDataDim?0:1,baseIndex=1-valueIndex,mlFrom=zrUtil.clone(item),mlTo={};mlFrom.type=null,mlFrom.coord=[],mlTo.coord=[],mlFrom.coord[baseIndex]=-(1/0),mlTo.coord[baseIndex]=1/0;var precision=mlModel.get("precision");precision>=0&&(value=+value.toFixed(precision)),mlFrom.coord[valueIndex]=mlTo.coord[valueIndex]=value,item=[mlFrom,mlTo,{type:mlType,valueIndex:item.valueIndex,value:value}]}return item=[markerHelper.dataTransform(seriesModel,item[0]),markerHelper.dataTransform(seriesModel,item[1]),zrUtil.extend({},item[2])],item[2].type=item[2].type||"",zrUtil.merge(item[2],item[0]),zrUtil.merge(item[2],item[1]),item};__webpack_require__(350).extend({type:"markLine",updateLayout:function(markLineModel,ecModel,api){ecModel.eachSeries(function(seriesModel){var mlModel=seriesModel.markLineModel;if(mlModel){var mlData=mlModel.getData(),fromData=mlModel.__from,toData=mlModel.__to;fromData.each(function(idx){updateSingleMarkerEndLayout(fromData,idx,!0,seriesModel,api),updateSingleMarkerEndLayout(toData,idx,!1,seriesModel,api)}),mlData.each(function(idx){mlData.setItemLayout(idx,[fromData.getItemLayout(idx),toData.getItemLayout(idx)])}),this.markerGroupMap[seriesModel.name].updateLayout()}},this)},renderSeries:function(seriesModel,mlModel,ecModel,api){function updateDataVisualAndLayout(data,idx,isFrom){var itemModel=data.getItemModel(idx);updateSingleMarkerEndLayout(data,idx,isFrom,seriesModel,api),data.setItemVisual(idx,{symbolSize:itemModel.get("symbolSize")||symbolSize[isFrom?0:1],symbol:itemModel.get("symbol",!0)||symbolType[isFrom?0:1],color:itemModel.get("itemStyle.normal.color")||seriesData.getVisual("color")})}var coordSys=seriesModel.coordinateSystem,seriesName=seriesModel.name,seriesData=seriesModel.getData(),lineDrawMap=this.markerGroupMap,lineDraw=lineDrawMap[seriesName];lineDraw||(lineDraw=lineDrawMap[seriesName]=new LineDraw),this.group.add(lineDraw.group);var mlData=createList(coordSys,seriesModel,mlModel),fromData=mlData.from,toData=mlData.to,lineData=mlData.line;mlModel.__from=fromData,mlModel.__to=toData,mlModel.setData(lineData);var symbolType=mlModel.get("symbol"),symbolSize=mlModel.get("symbolSize");zrUtil.isArray(symbolType)||(symbolType=[symbolType,symbolType]),"number"==typeof symbolSize&&(symbolSize=[symbolSize,symbolSize]),mlData.from.each(function(idx){updateDataVisualAndLayout(fromData,idx,!0),updateDataVisualAndLayout(toData,idx,!1)}),lineData.each(function(idx){var lineColor=lineData.getItemModel(idx).get("lineStyle.normal.color");lineData.setItemVisual(idx,{color:lineColor||fromData.getItemVisual(idx,"color")}),lineData.setItemLayout(idx,[fromData.getItemLayout(idx),toData.getItemLayout(idx)]),lineData.setItemVisual(idx,{fromSymbolSize:fromData.getItemVisual(idx,"symbolSize"),fromSymbol:fromData.getItemVisual(idx,"symbol"),toSymbolSize:toData.getItemVisual(idx,"symbolSize"),toSymbol:toData.getItemVisual(idx,"symbol")})}),lineDraw.updateData(lineData),mlData.line.eachItemGraphicEl(function(el,idx){el.traverse(function(child){child.dataModel=mlModel})}),lineDraw.__keep=!0,lineDraw.group.silent=mlModel.get("silent")||seriesModel.get("silent")}})},function(module,exports,__webpack_require__){__webpack_require__(355),__webpack_require__(356),__webpack_require__(1).registerPreprocessor(function(opt){opt.markArea=opt.markArea||{}})},function(module,exports,__webpack_require__){module.exports=__webpack_require__(347).extend({type:"markArea",defaultOption:{zlevel:0,z:1,tooltip:{trigger:"item"},animation:!1,label:{normal:{show:!0,position:"top"},emphasis:{show:!0,position:"top"}},itemStyle:{normal:{borderWidth:0}}}})},function(module,exports,__webpack_require__){function isInifinity(val){return!isNaN(val)&&!isFinite(val)}function ifMarkLineHasOnlyDim(dimIndex,fromCoord,toCoord,coordSys){var otherDimIndex=1-dimIndex;return isInifinity(fromCoord[otherDimIndex])&&isInifinity(toCoord[otherDimIndex])}function markAreaFilter(coordSys,item){var fromCoord=item.coord[0],toCoord=item.coord[1];return!("cartesian2d"!==coordSys.type||!fromCoord||!toCoord||!ifMarkLineHasOnlyDim(1,fromCoord,toCoord,coordSys)&&!ifMarkLineHasOnlyDim(0,fromCoord,toCoord,coordSys))||(markerHelper.dataFilter(coordSys,{coord:fromCoord,x:item.x0,y:item.y0})||markerHelper.dataFilter(coordSys,{coord:toCoord,x:item.x1,y:item.y1}))}function getSingleMarkerEndPoint(data,idx,dims,seriesModel,api){var point,coordSys=seriesModel.coordinateSystem,itemModel=data.getItemModel(idx),xPx=numberUtil.parsePercent(itemModel.get(dims[0]),api.getWidth()),yPx=numberUtil.parsePercent(itemModel.get(dims[1]),api.getHeight());if(isNaN(xPx)||isNaN(yPx)){if(seriesModel.getMarkerPosition)point=seriesModel.getMarkerPosition(data.getValues(dims,idx));else{var x=data.get(dims[0],idx),y=data.get(dims[1],idx);point=coordSys.dataToPoint([x,y],!0)}if("cartesian2d"===coordSys.type){var xAxis=coordSys.getAxis("x"),yAxis=coordSys.getAxis("y"),x=data.get(dims[0],idx),y=data.get(dims[1],idx);isInifinity(x)?point[0]=xAxis.toGlobalCoord(xAxis.getExtent()["x0"===dims[0]?0:1]):isInifinity(y)&&(point[1]=yAxis.toGlobalCoord(yAxis.getExtent()["y0"===dims[1]?0:1]))}isNaN(xPx)||(point[0]=xPx),isNaN(yPx)||(point[1]=yPx)}else point=[xPx,yPx];return point}function createList(coordSys,seriesModel,maModel){var coordDimsInfos,areaData,dims=["x0","y0","x1","y1"];coordSys?(coordDimsInfos=zrUtil.map(coordSys&&coordSys.dimensions,function(coordDim){var info=seriesModel.getData().getDimensionInfo(seriesModel.coordDimToDataDim(coordDim)[0])||{};return info.name=coordDim,info}),areaData=new List(zrUtil.map(dims,function(dim,idx){return{name:dim,type:coordDimsInfos[idx%2].type}}),maModel)):(coordDimsInfos=[{name:"value",type:"float"}],areaData=new List(coordDimsInfos,maModel));var optData=zrUtil.map(maModel.get("data"),zrUtil.curry(markAreaTransform,seriesModel,coordSys,maModel));coordSys&&(optData=zrUtil.filter(optData,zrUtil.curry(markAreaFilter,coordSys)));var dimValueGetter=coordSys?function(item,dimName,dataIndex,dimIndex){return item.coord[Math.floor(dimIndex/2)][dimIndex%2]}:function(item){return item.value};return areaData.initData(optData,null,dimValueGetter),areaData.hasItemOption=!0,areaData}var zrUtil=__webpack_require__(4),List=__webpack_require__(97),numberUtil=__webpack_require__(7),graphic=__webpack_require__(43),colorUtil=__webpack_require__(39),markerHelper=__webpack_require__(349),markAreaTransform=function(seriesModel,coordSys,maModel,item){var lt=markerHelper.dataTransform(seriesModel,item[0]),rb=markerHelper.dataTransform(seriesModel,item[1]),retrieve=zrUtil.retrieve,ltCoord=lt.coord,rbCoord=rb.coord;ltCoord[0]=retrieve(ltCoord[0],-(1/0)),ltCoord[1]=retrieve(ltCoord[1],-(1/0)),rbCoord[0]=retrieve(rbCoord[0],1/0),rbCoord[1]=retrieve(rbCoord[1],1/0);var result=zrUtil.mergeAll([{},lt,rb]);return result.coord=[lt.coord,rb.coord],result.x0=lt.x,result.y0=lt.y,result.x1=rb.x,result.y1=rb.y,result},dimPermutations=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]];__webpack_require__(350).extend({type:"markArea",updateLayout:function(markAreaModel,ecModel,api){ecModel.eachSeries(function(seriesModel){var maModel=seriesModel.markAreaModel;if(maModel){var areaData=maModel.getData();areaData.each(function(idx){var points=zrUtil.map(dimPermutations,function(dim){return getSingleMarkerEndPoint(areaData,idx,dim,seriesModel,api)});areaData.setItemLayout(idx,points);var el=areaData.getItemGraphicEl(idx);el.setShape("points",points)})}},this)},renderSeries:function(seriesModel,maModel,ecModel,api){var coordSys=seriesModel.coordinateSystem,seriesName=seriesModel.name,seriesData=seriesModel.getData(),areaGroupMap=this.markerGroupMap,polygonGroup=areaGroupMap[seriesName];polygonGroup||(polygonGroup=areaGroupMap[seriesName]={group:new graphic.Group}),this.group.add(polygonGroup.group),polygonGroup.__keep=!0;var areaData=createList(coordSys,seriesModel,maModel);maModel.setData(areaData),areaData.each(function(idx){areaData.setItemLayout(idx,zrUtil.map(dimPermutations,function(dim){return getSingleMarkerEndPoint(areaData,idx,dim,seriesModel,api)})),areaData.setItemVisual(idx,{color:seriesData.getVisual("color")})}),areaData.diff(polygonGroup.__data).add(function(idx){var polygon=new graphic.Polygon({shape:{points:areaData.getItemLayout(idx)}});areaData.setItemGraphicEl(idx,polygon),polygonGroup.group.add(polygon)}).update(function(newIdx,oldIdx){var polygon=polygonGroup.__data.getItemGraphicEl(oldIdx);graphic.updateProps(polygon,{shape:{points:areaData.getItemLayout(newIdx)}},maModel,newIdx),polygonGroup.group.add(polygon),areaData.setItemGraphicEl(newIdx,polygon)}).remove(function(idx){var polygon=polygonGroup.__data.getItemGraphicEl(idx);polygonGroup.group.remove(polygon)}).execute(),areaData.eachItemGraphicEl(function(polygon,idx){var itemModel=areaData.getItemModel(idx),labelModel=itemModel.getModel("label.normal"),labelHoverModel=itemModel.getModel("label.emphasis"),color=areaData.getItemVisual(idx,"color");polygon.useStyle(zrUtil.defaults(itemModel.getModel("itemStyle.normal").getItemStyle(),{fill:colorUtil.modifyAlpha(color,.4),stroke:color})),polygon.hoverStyle=itemModel.getModel("itemStyle.normal").getItemStyle();var defaultValue=areaData.getName(idx)||"",textColor=color||polygon.style.fill;graphic.setText(polygon.style,labelModel,textColor),polygon.style.text=zrUtil.retrieve(maModel.getFormattedLabel(idx,"normal"),defaultValue),graphic.setText(polygon.hoverStyle,labelHoverModel,textColor),polygon.hoverStyle.text=zrUtil.retrieve(maModel.getFormattedLabel(idx,"emphasis"),defaultValue),graphic.setHoverStyle(polygon,{}),polygon.dataModel=maModel}),polygonGroup.__data=areaData,polygonGroup.group.silent=maModel.get("silent")||seriesModel.get("silent")}})},function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);echarts.registerPreprocessor(__webpack_require__(358)),__webpack_require__(359),__webpack_require__(360),__webpack_require__(361),__webpack_require__(363)},function(module,exports,__webpack_require__){function compatibleEC2(opt){var type=opt.type,ec2Types={number:"value",time:"time"};if(ec2Types[type]&&(opt.axisType=ec2Types[type],delete opt.type),transferItem(opt),has(opt,"controlPosition")){var controlStyle=opt.controlStyle||(opt.controlStyle={});has(controlStyle,"position")||(controlStyle.position=opt.controlPosition),"none"!==controlStyle.position||has(controlStyle,"show")||(controlStyle.show=!1,delete controlStyle.position),delete opt.controlPosition}zrUtil.each(opt.data||[],function(dataItem){zrUtil.isObject(dataItem)&&!zrUtil.isArray(dataItem)&&(!has(dataItem,"value")&&has(dataItem,"name")&&(dataItem.value=dataItem.name),transferItem(dataItem))})}function transferItem(opt){var itemStyle=opt.itemStyle||(opt.itemStyle={}),itemStyleEmphasis=itemStyle.emphasis||(itemStyle.emphasis={}),label=opt.label||opt.label||{},labelNormal=label.normal||(label.normal={}),excludeLabelAttr={normal:1,emphasis:1};zrUtil.each(label,function(value,name){excludeLabelAttr[name]||has(labelNormal,name)||(labelNormal[name]=value)}),itemStyleEmphasis.label&&!has(label,"emphasis")&&(label.emphasis=itemStyleEmphasis.label,delete itemStyleEmphasis.label)}function has(obj,attr){return obj.hasOwnProperty(attr)}var zrUtil=__webpack_require__(4);module.exports=function(option){var timelineOpt=option&&option.timeline;zrUtil.isArray(timelineOpt)||(timelineOpt=timelineOpt?[timelineOpt]:[]),zrUtil.each(timelineOpt,function(opt){opt&&compatibleEC2(opt)})}},function(module,exports,__webpack_require__){__webpack_require__(19).registerSubTypeDefaulter("timeline",function(){return"slider"})},function(module,exports,__webpack_require__){var echarts=__webpack_require__(1);echarts.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(payload,ecModel){var timelineModel=ecModel.getComponent("timeline");timelineModel&&null!=payload.currentIndex&&(timelineModel.setCurrentIndex(payload.currentIndex),!timelineModel.get("loop",!0)&&timelineModel.isIndexMax()&&timelineModel.setPlayState(!1)),ecModel.resetOption("timeline")}),echarts.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(payload,ecModel){var timelineModel=ecModel.getComponent("timeline");timelineModel&&null!=payload.playState&&timelineModel.setPlayState(payload.playState)})},function(module,exports,__webpack_require__){var TimelineModel=__webpack_require__(362),zrUtil=__webpack_require__(4),modelUtil=__webpack_require__(5),SliderTimelineModel=TimelineModel.extend({type:"timeline.slider",defaultOption:{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"emptyCircle",symbolSize:10,lineStyle:{show:!0,width:2,color:"#304654"},label:{position:"auto",normal:{show:!0,interval:"auto",rotate:0,textStyle:{color:"#304654"}},emphasis:{show:!0,textStyle:{color:"#c23531"}}},itemStyle:{normal:{color:"#304654",borderWidth:1},emphasis:{color:"#c23531"}},checkpointStyle:{symbol:"circle",symbolSize:13,color:"#c23531",borderWidth:5,borderColor:"rgba(194,53,49, 0.5)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:22,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"path://M18.6,50.8l22.5-22.5c0.2-0.2,0.3-0.4,0.3-0.7c0-0.3-0.1-0.5-0.3-0.7L18.7,4.4c-0.1-0.1-0.2-0.3-0.2-0.5 c0-0.4,0.3-0.8,0.8-0.8c0.2,0,0.5,0.1,0.6,0.3l23.5,23.5l0,0c0.2,0.2,0.3,0.4,0.3,0.7c0,0.3-0.1,0.5-0.3,0.7l-0.1,0.1L19.7,52 c-0.1,0.1-0.3,0.2-0.5,0.2c-0.4,0-0.8-0.3-0.8-0.8C18.4,51.2,18.5,51,18.6,50.8z",prevIcon:"path://M43,52.8L20.4,30.3c-0.2-0.2-0.3-0.4-0.3-0.7c0-0.3,0.1-0.5,0.3-0.7L42.9,6.4c0.1-0.1,0.2-0.3,0.2-0.5 c0-0.4-0.3-0.8-0.8-0.8c-0.2,0-0.5,0.1-0.6,0.3L18.3,28.8l0,0c-0.2,0.2-0.3,0.4-0.3,0.7c0,0.3,0.1,0.5,0.3,0.7l0.1,0.1L41.9,54 c0.1,0.1,0.3,0.2,0.5,0.2c0.4,0,0.8-0.3,0.8-0.8C43.2,53.2,43.1,53,43,52.8z",normal:{color:"#304654",borderColor:"#304654",borderWidth:1},emphasis:{color:"#c23531",borderColor:"#c23531",borderWidth:2}},data:[]}});zrUtil.mixin(SliderTimelineModel,modelUtil.dataFormatMixin),module.exports=SliderTimelineModel},function(module,exports,__webpack_require__){var ComponentModel=__webpack_require__(19),List=__webpack_require__(97),zrUtil=__webpack_require__(4),modelUtil=__webpack_require__(5),TimelineModel=ComponentModel.extend({type:"timeline",layoutMode:"box",defaultOption:{zlevel:0,z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{normal:{},emphasis:{}},label:{normal:{textStyle:{color:"#000"}},emphasis:{}},data:[]},init:function(option,parentModel,ecModel){this._data,this._names,this.mergeDefaultAndTheme(option,ecModel),this._initData()},mergeOption:function(option){TimelineModel.superApply(this,"mergeOption",arguments),this._initData()},setCurrentIndex:function(currentIndex){null==currentIndex&&(currentIndex=this.option.currentIndex);var count=this._data.count();this.option.loop?currentIndex=(currentIndex%count+count)%count:(currentIndex>=count&&(currentIndex=count-1),currentIndex<0&&(currentIndex=0)),this.option.currentIndex=currentIndex},getCurrentIndex:function(){return this.option.currentIndex},isIndexMax:function(){return this.getCurrentIndex()>=this._data.count()-1},setPlayState:function(state){this.option.autoPlay=!!state},getPlayState:function(){return!!this.option.autoPlay},_initData:function(){var thisOption=this.option,dataArr=thisOption.data||[],axisType=thisOption.axisType,names=this._names=[];if("category"===axisType){var idxArr=[];zrUtil.each(dataArr,function(item,index){var newItem,value=modelUtil.getDataItemValue(item);zrUtil.isObject(item)?(newItem=zrUtil.clone(item),newItem.value=index):newItem=index,idxArr.push(newItem),zrUtil.isString(value)||null!=value&&!isNaN(value)||(value=""),names.push(value+"")}),dataArr=idxArr}var dimType={category:"ordinal",time:"time"}[axisType]||"number",data=this._data=new List([{name:"value",type:dimType}],this);data.initData(dataArr,names)},getData:function(){return this._data},getCategories:function(){if("category"===this.get("axisType"))return this._names.slice()}});module.exports=TimelineModel},function(module,exports,__webpack_require__){function getViewRect(model,api){return layout.getLayoutRect(model.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()},model.get("padding"))}function makeIcon(timelineModel,objPath,rect,opts){var icon=graphic.makePath(timelineModel.get(objPath).replace(/^path:\/\//,""),zrUtil.clone(opts||{}),new BoundingRect(rect[0],rect[1],rect[2],rect[3]),"center");return icon}function giveSymbol(hostModel,itemStyleModel,group,opt,symbol,callback){var symbolType=hostModel.get("symbol"),color=itemStyleModel.get("color"),symbolSize=hostModel.get("symbolSize"),halfSymbolSize=symbolSize/2,itemStyle=itemStyleModel.getItemStyle(["color","symbol","symbolSize"]);return symbol?(symbol.setStyle(itemStyle),symbol.setColor(color),group.add(symbol),callback&&callback.onUpdate(symbol)):(symbol=symbolUtil.createSymbol(symbolType,-halfSymbolSize,-halfSymbolSize,symbolSize,symbolSize,color),group.add(symbol),callback&&callback.onCreate(symbol)),opt=zrUtil.merge({rectHover:!0,style:itemStyle,z2:100},opt,!0),symbol.attr(opt),symbol}function pointerMoveTo(pointer,dataIndex,axis,timelineModel,noAnimation){
if(!pointer.dragging){var pointerModel=timelineModel.getModel("checkpointStyle"),toCoord=axis.dataToCoord(timelineModel.getData().get(["value"],dataIndex));noAnimation||!pointerModel.get("animation",!0)?pointer.attr({position:[toCoord,0]}):(pointer.stopAnimation(!0),pointer.animateTo({position:[toCoord,0]},pointerModel.get("animationDuration",!0),pointerModel.get("animationEasing",!0)))}}var zrUtil=__webpack_require__(4),graphic=__webpack_require__(43),layout=__webpack_require__(21),TimelineView=__webpack_require__(364),TimelineAxis=__webpack_require__(365),symbolUtil=__webpack_require__(106),axisHelper=__webpack_require__(114),BoundingRect=__webpack_require__(9),matrix=__webpack_require__(11),numberUtil=__webpack_require__(7),formatUtil=__webpack_require__(6),encodeHTML=formatUtil.encodeHTML,bind=zrUtil.bind,each=zrUtil.each,PI=Math.PI;module.exports=TimelineView.extend({type:"timeline.slider",init:function(ecModel,api){this.api=api,this._axis,this._viewRect,this._timer,this._currentPointer,this._mainGroup,this._labelGroup},render:function(timelineModel,ecModel,api,payload){if(this.model=timelineModel,this.api=api,this.ecModel=ecModel,this.group.removeAll(),timelineModel.get("show",!0)){var layoutInfo=this._layout(timelineModel,api),mainGroup=this._createGroup("mainGroup"),labelGroup=this._createGroup("labelGroup"),axis=this._axis=this._createAxis(layoutInfo,timelineModel);timelineModel.formatTooltip=function(dataIndex){return encodeHTML(axis.scale.getLabel(dataIndex))},each(["AxisLine","AxisTick","Control","CurrentPointer"],function(name){this["_render"+name](layoutInfo,mainGroup,axis,timelineModel)},this),this._renderAxisLabel(layoutInfo,labelGroup,axis,timelineModel),this._position(layoutInfo,timelineModel)}this._doPlayStop()},remove:function(){this._clearTimer(),this.group.removeAll()},dispose:function(){this._clearTimer()},_layout:function(timelineModel,api){var labelPosOpt=timelineModel.get("label.normal.position"),orient=timelineModel.get("orient"),viewRect=getViewRect(timelineModel,api);null==labelPosOpt||"auto"===labelPosOpt?labelPosOpt="horizontal"===orient?viewRect.y+viewRect.height/2<api.getHeight()/2?"-":"+":viewRect.x+viewRect.width/2<api.getWidth()/2?"+":"-":isNaN(labelPosOpt)&&(labelPosOpt={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[orient][labelPosOpt]);var labelAlignMap={horizontal:"center",vertical:labelPosOpt>=0||"+"===labelPosOpt?"left":"right"},labelBaselineMap={horizontal:labelPosOpt>=0||"+"===labelPosOpt?"top":"bottom",vertical:"middle"},rotationMap={horizontal:0,vertical:PI/2},mainLength="vertical"===orient?viewRect.height:viewRect.width,controlModel=timelineModel.getModel("controlStyle"),showControl=controlModel.get("show"),controlSize=showControl?controlModel.get("itemSize"):0,controlGap=showControl?controlModel.get("itemGap"):0,sizePlusGap=controlSize+controlGap,labelRotation=timelineModel.get("label.normal.rotate")||0;labelRotation=labelRotation*PI/180;var playPosition,prevBtnPosition,nextBtnPosition,axisExtent,controlPosition=controlModel.get("position",!0),showControl=controlModel.get("show",!0),showPlayBtn=showControl&&controlModel.get("showPlayBtn",!0),showPrevBtn=showControl&&controlModel.get("showPrevBtn",!0),showNextBtn=showControl&&controlModel.get("showNextBtn",!0),xLeft=0,xRight=mainLength;return"left"===controlPosition||"bottom"===controlPosition?(showPlayBtn&&(playPosition=[0,0],xLeft+=sizePlusGap),showPrevBtn&&(prevBtnPosition=[xLeft,0],xLeft+=sizePlusGap),showNextBtn&&(nextBtnPosition=[xRight-controlSize,0],xRight-=sizePlusGap)):(showPlayBtn&&(playPosition=[xRight-controlSize,0],xRight-=sizePlusGap),showPrevBtn&&(prevBtnPosition=[0,0],xLeft+=sizePlusGap),showNextBtn&&(nextBtnPosition=[xRight-controlSize,0],xRight-=sizePlusGap)),axisExtent=[xLeft,xRight],timelineModel.get("inverse")&&axisExtent.reverse(),{viewRect:viewRect,mainLength:mainLength,orient:orient,rotation:rotationMap[orient],labelRotation:labelRotation,labelPosOpt:labelPosOpt,labelAlign:labelAlignMap[orient],labelBaseline:labelBaselineMap[orient],playPosition:playPosition,prevBtnPosition:prevBtnPosition,nextBtnPosition:nextBtnPosition,axisExtent:axisExtent,controlSize:controlSize,controlGap:controlGap}},_position:function(layoutInfo,timelineModel){function setOrigin(targetGroup){var pos=targetGroup.position;targetGroup.origin=[viewBound[0][0]-pos[0],viewBound[1][0]-pos[1]]}function getBound(rect){return[[rect.x,rect.x+rect.width],[rect.y,rect.y+rect.height]]}function toBound(fromPos,from,to,dimIdx,boundIdx){fromPos[dimIdx]+=to[dimIdx][boundIdx]-from[dimIdx][boundIdx]}var mainGroup=this._mainGroup,labelGroup=this._labelGroup,viewRect=layoutInfo.viewRect;if("vertical"===layoutInfo.orient){var m=matrix.create(),rotateOriginX=viewRect.x,rotateOriginY=viewRect.y+viewRect.height;matrix.translate(m,m,[-rotateOriginX,-rotateOriginY]),matrix.rotate(m,m,-PI/2),matrix.translate(m,m,[rotateOriginX,rotateOriginY]),viewRect=viewRect.clone(),viewRect.applyTransform(m)}var viewBound=getBound(viewRect),mainBound=getBound(mainGroup.getBoundingRect()),labelBound=getBound(labelGroup.getBoundingRect()),mainPosition=mainGroup.position,labelsPosition=labelGroup.position;labelsPosition[0]=mainPosition[0]=viewBound[0][0];var labelPosOpt=layoutInfo.labelPosOpt;if(isNaN(labelPosOpt)){var mainBoundIdx="+"===labelPosOpt?0:1;toBound(mainPosition,mainBound,viewBound,1,mainBoundIdx),toBound(labelsPosition,labelBound,viewBound,1,1-mainBoundIdx)}else{var mainBoundIdx=labelPosOpt>=0?0:1;toBound(mainPosition,mainBound,viewBound,1,mainBoundIdx),labelsPosition[1]=mainPosition[1]+labelPosOpt}mainGroup.attr("position",mainPosition),labelGroup.attr("position",labelsPosition),mainGroup.rotation=labelGroup.rotation=layoutInfo.rotation,setOrigin(mainGroup),setOrigin(labelGroup)},_createAxis:function(layoutInfo,timelineModel){var data=timelineModel.getData(),axisType=timelineModel.get("axisType"),scale=axisHelper.createScaleByModel(timelineModel,axisType),dataExtent=data.getDataExtent("value");scale.setExtent(dataExtent[0],dataExtent[1]),this._customizeScale(scale,data),scale.niceTicks();var axis=new TimelineAxis("value",scale,layoutInfo.axisExtent,axisType);return axis.model=timelineModel,axis},_customizeScale:function(scale,data){scale.getTicks=function(){return data.mapArray(["value"],function(value){return value})},scale.getTicksLabels=function(){return zrUtil.map(this.getTicks(),scale.getLabel,scale)}},_createGroup:function(name){var newGroup=this["_"+name]=new graphic.Group;return this.group.add(newGroup),newGroup},_renderAxisLine:function(layoutInfo,group,axis,timelineModel){var axisExtent=axis.getExtent();timelineModel.get("lineStyle.show")&&group.add(new graphic.Line({shape:{x1:axisExtent[0],y1:0,x2:axisExtent[1],y2:0},style:zrUtil.extend({lineCap:"round"},timelineModel.getModel("lineStyle").getLineStyle()),silent:!0,z2:1}))},_renderAxisTick:function(layoutInfo,group,axis,timelineModel){var data=timelineModel.getData(),ticks=axis.scale.getTicks();each(ticks,function(value,dataIndex){var tickCoord=axis.dataToCoord(value),itemModel=data.getItemModel(dataIndex),itemStyleModel=itemModel.getModel("itemStyle.normal"),hoverStyleModel=itemModel.getModel("itemStyle.emphasis"),symbolOpt={position:[tickCoord,0],onclick:bind(this._changeTimeline,this,dataIndex)},el=giveSymbol(itemModel,itemStyleModel,group,symbolOpt);graphic.setHoverStyle(el,hoverStyleModel.getItemStyle()),itemModel.get("tooltip")?(el.dataIndex=dataIndex,el.dataModel=timelineModel):el.dataIndex=el.dataModel=null},this)},_renderAxisLabel:function(layoutInfo,group,axis,timelineModel){var labelModel=timelineModel.getModel("label.normal");if(labelModel.get("show")){var data=timelineModel.getData(),ticks=axis.scale.getTicks(),labels=axisHelper.getFormattedLabels(axis,labelModel.get("formatter")),labelInterval=axis.getLabelInterval();each(ticks,function(tick,dataIndex){if(!axis.isLabelIgnored(dataIndex,labelInterval)){var itemModel=data.getItemModel(dataIndex),itemTextStyleModel=itemModel.getModel("label.normal.textStyle"),hoverTextStyleModel=itemModel.getModel("label.emphasis.textStyle"),tickCoord=axis.dataToCoord(tick),textEl=new graphic.Text({style:{text:labels[dataIndex],textAlign:layoutInfo.labelAlign,textVerticalAlign:layoutInfo.labelBaseline,textFont:itemTextStyleModel.getFont(),fill:itemTextStyleModel.getTextColor()},position:[tickCoord,0],rotation:layoutInfo.labelRotation-layoutInfo.rotation,onclick:bind(this._changeTimeline,this,dataIndex),silent:!1});group.add(textEl),graphic.setHoverStyle(textEl,hoverTextStyleModel.getItemStyle())}},this)}},_renderControl:function(layoutInfo,group,axis,timelineModel){function makeBtn(position,iconPath,onclick,willRotate){if(position){var opt={position:position,origin:[controlSize/2,0],rotation:willRotate?-rotation:0,rectHover:!0,style:itemStyle,onclick:onclick},btn=makeIcon(timelineModel,iconPath,rect,opt);group.add(btn),graphic.setHoverStyle(btn,hoverStyle)}}var controlSize=layoutInfo.controlSize,rotation=layoutInfo.rotation,itemStyle=timelineModel.getModel("controlStyle.normal").getItemStyle(),hoverStyle=timelineModel.getModel("controlStyle.emphasis").getItemStyle(),rect=[0,-controlSize/2,controlSize,controlSize],playState=timelineModel.getPlayState(),inverse=timelineModel.get("inverse",!0);makeBtn(layoutInfo.nextBtnPosition,"controlStyle.nextIcon",bind(this._changeTimeline,this,inverse?"-":"+")),makeBtn(layoutInfo.prevBtnPosition,"controlStyle.prevIcon",bind(this._changeTimeline,this,inverse?"+":"-")),makeBtn(layoutInfo.playPosition,"controlStyle."+(playState?"stopIcon":"playIcon"),bind(this._handlePlayClick,this,!playState),!0)},_renderCurrentPointer:function(layoutInfo,group,axis,timelineModel){var data=timelineModel.getData(),currentIndex=timelineModel.getCurrentIndex(),pointerModel=data.getItemModel(currentIndex).getModel("checkpointStyle"),me=this,callback={onCreate:function(pointer){pointer.draggable=!0,pointer.drift=bind(me._handlePointerDrag,me),pointer.ondragend=bind(me._handlePointerDragend,me),pointerMoveTo(pointer,currentIndex,axis,timelineModel,!0)},onUpdate:function(pointer){pointerMoveTo(pointer,currentIndex,axis,timelineModel)}};this._currentPointer=giveSymbol(pointerModel,pointerModel,this._mainGroup,{},this._currentPointer,callback)},_handlePlayClick:function(nextState){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:nextState,from:this.uid})},_handlePointerDrag:function(dx,dy,e){this._clearTimer(),this._pointerChangeTimeline([e.offsetX,e.offsetY])},_handlePointerDragend:function(e){this._pointerChangeTimeline([e.offsetX,e.offsetY],!0)},_pointerChangeTimeline:function(mousePos,trigger){var toCoord=this._toAxisCoord(mousePos)[0],axis=this._axis,axisExtent=numberUtil.asc(axis.getExtent().slice());toCoord>axisExtent[1]&&(toCoord=axisExtent[1]),toCoord<axisExtent[0]&&(toCoord=axisExtent[0]),this._currentPointer.position[0]=toCoord,this._currentPointer.dirty();var targetDataIndex=this._findNearestTick(toCoord),timelineModel=this.model;(trigger||targetDataIndex!==timelineModel.getCurrentIndex()&&timelineModel.get("realtime"))&&this._changeTimeline(targetDataIndex)},_doPlayStop:function(){function handleFrame(){var timelineModel=this.model;this._changeTimeline(timelineModel.getCurrentIndex()+(timelineModel.get("rewind",!0)?-1:1))}this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(bind(handleFrame,this),this.model.get("playInterval")))},_toAxisCoord:function(vertex){var trans=this._mainGroup.getLocalTransform();return graphic.applyTransform(vertex,trans,!0)},_findNearestTick:function(axisCoord){var targetDataIndex,data=this.model.getData(),dist=1/0,axis=this._axis;return data.each(["value"],function(value,dataIndex){var coord=axis.dataToCoord(value),d=Math.abs(coord-axisCoord);d<dist&&(dist=d,targetDataIndex=dataIndex)}),targetDataIndex},_clearTimer:function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},_changeTimeline:function(nextIndex){var currentIndex=this.model.getCurrentIndex();"+"===nextIndex?nextIndex=currentIndex+1:"-"===nextIndex&&(nextIndex=currentIndex-1),this.api.dispatchAction({type:"timelineChange",currentIndex:nextIndex,from:this.uid})}})},function(module,exports,__webpack_require__){var ComponentView=__webpack_require__(29);module.exports=ComponentView.extend({type:"timeline"})},function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(4),Axis=__webpack_require__(123),axisHelper=__webpack_require__(114),TimelineAxis=function(dim,scale,coordExtent,axisType){Axis.call(this,dim,scale,coordExtent),this.type=axisType||"value",this._autoLabelInterval,this.model=null};TimelineAxis.prototype={constructor:TimelineAxis,getLabelInterval:function(){var timelineModel=this.model,labelModel=timelineModel.getModel("label.normal"),labelInterval=labelModel.get("interval");if(null!=labelInterval&&"auto"!=labelInterval)return labelInterval;var labelInterval=this._autoLabelInterval;return labelInterval||(labelInterval=this._autoLabelInterval=axisHelper.getAxisLabelInterval(zrUtil.map(this.scale.getTicks(),this.dataToCoord,this),axisHelper.getFormattedLabels(this,labelModel.get("formatter")),labelModel.getModel("textStyle").getFont(),"horizontal"===timelineModel.get("orient"))),labelInterval},isLabelIgnored:function(idx){if("category"===this.type){var labelInterval=this.getLabelInterval();return"function"==typeof labelInterval&&!labelInterval(idx,this.scale.getLabel(idx))||idx%(labelInterval+1)}}},zrUtil.inherits(TimelineAxis,Axis),module.exports=TimelineAxis},function(module,exports,__webpack_require__){__webpack_require__(367),__webpack_require__(368),__webpack_require__(370),__webpack_require__(371),__webpack_require__(372),__webpack_require__(373),__webpack_require__(378)},function(module,exports,__webpack_require__){var featureManager=__webpack_require__(314),zrUtil=__webpack_require__(4),ToolboxModel=__webpack_require__(1).extendComponentModel({type:"toolbox",layoutMode:{type:"box",ignoreSize:!0},mergeDefaultAndTheme:function(option){ToolboxModel.superApply(this,"mergeDefaultAndTheme",arguments),zrUtil.each(this.option.feature,function(featureOpt,featureName){var Feature=featureManager.get(featureName);Feature&&zrUtil.merge(featureOpt,Feature.defaultOption)})},defaultOption:{show:!0,z:6,zlevel:0,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{normal:{borderColor:"#666",color:"none"},emphasis:{borderColor:"#3E98C5"}}}});module.exports=ToolboxModel},function(module,exports,__webpack_require__){(function(process){function isUserFeatureName(featureName){return 0===featureName.indexOf("my")}var featureManager=__webpack_require__(314),zrUtil=__webpack_require__(4),graphic=__webpack_require__(43),Model=__webpack_require__(12),DataDiffer=__webpack_require__(98),listComponentHelper=__webpack_require__(277),textContain=__webpack_require__(8);module.exports=__webpack_require__(1).extendComponentView({type:"toolbox",render:function(toolboxModel,ecModel,api,payload){function process(newIndex,oldIndex){var feature,featureName=featureNames[newIndex],oldName=featureNames[oldIndex],featureOpt=featureOpts[featureName],featureModel=new Model(featureOpt,toolboxModel,toolboxModel.ecModel);if(featureName&&!oldName){if(isUserFeatureName(featureName))feature={model:featureModel,onclick:featureModel.option.onclick,featureName:featureName};else{var Feature=featureManager.get(featureName);if(!Feature)return;feature=new Feature(featureModel,ecModel,api)}features[featureName]=feature}else{if(feature=features[oldName],!feature)return;feature.model=featureModel,feature.ecModel=ecModel,feature.api=api}return!featureName&&oldName?void(feature.dispose&&feature.dispose(ecModel,api)):!featureModel.get("show")||feature.unusable?void(feature.remove&&feature.remove(ecModel,api)):(createIconPaths(featureModel,feature,featureName),featureModel.setIconStatus=function(iconName,status){var option=this.option,iconPaths=this.iconPaths;option.iconStatus=option.iconStatus||{},option.iconStatus[iconName]=status,iconPaths[iconName]&&iconPaths[iconName].trigger(status)},void(feature.render&&feature.render(featureModel,ecModel,api,payload)))}function createIconPaths(featureModel,feature,featureName){var iconStyleModel=featureModel.getModel("iconStyle"),icons=feature.getIcons?feature.getIcons():featureModel.get("icon"),titles=featureModel.get("title")||{};if("string"==typeof icons){var icon=icons,title=titles;icons={},titles={},icons[featureName]=icon,titles[featureName]=title}var iconPaths=featureModel.iconPaths={};zrUtil.each(icons,function(icon,iconName){var normalStyle=iconStyleModel.getModel("normal").getItemStyle(),hoverStyle=iconStyleModel.getModel("emphasis").getItemStyle(),style={x:-itemSize/2,y:-itemSize/2,width:itemSize,height:itemSize},path=0===icon.indexOf("image://")?(style.image=icon.slice(8),new graphic.Image({style:style})):graphic.makePath(icon.replace("path://",""),{style:normalStyle,hoverStyle:hoverStyle,rectHover:!0},style,"center");graphic.setHoverStyle(path),toolboxModel.get("showTitle")&&(path.__title=titles[iconName],path.on("mouseover",function(){path.setStyle({text:titles[iconName],textPosition:hoverStyle.textPosition||"bottom",textFill:hoverStyle.fill||hoverStyle.stroke||"#000",textAlign:hoverStyle.textAlign||"center"})}).on("mouseout",function(){path.setStyle({textFill:null})})),path.trigger(featureModel.get("iconStatus."+iconName)||"normal"),group.add(path),path.on("click",zrUtil.bind(feature.onclick,feature,ecModel,api,iconName)),iconPaths[iconName]=path})}var group=this.group;if(group.removeAll(),toolboxModel.get("show")){var itemSize=+toolboxModel.get("itemSize"),featureOpts=toolboxModel.get("feature")||{},features=this._features||(this._features={}),featureNames=[];zrUtil.each(featureOpts,function(opt,name){featureNames.push(name)}),new DataDiffer(this._featureNames||[],featureNames).add(process).update(process).remove(zrUtil.curry(process,null)).execute(),this._featureNames=featureNames,listComponentHelper.layout(group,toolboxModel,api),listComponentHelper.addBackground(group,toolboxModel),group.eachChild(function(icon){var titleText=icon.__title,hoverStyle=icon.hoverStyle;if(hoverStyle&&titleText){var rect=textContain.getBoundingRect(titleText,hoverStyle.font),offsetX=icon.position[0]+group.position[0],offsetY=icon.position[1]+group.position[1]+itemSize,needPutOnTop=!1;offsetY+rect.height>api.getHeight()&&(hoverStyle.textPosition="top",needPutOnTop=!0);var topOffset=needPutOnTop?-5-rect.height:itemSize+8;offsetX+rect.width/2>api.getWidth()?(hoverStyle.textPosition=["100%",topOffset],hoverStyle.textAlign="right"):offsetX-rect.width/2<0&&(hoverStyle.textPosition=[0,topOffset],hoverStyle.textAlign="left")}})}},updateView:function(toolboxModel,ecModel,api,payload){zrUtil.each(this._features,function(feature){feature.updateView&&feature.updateView(feature.model,ecModel,api,payload)})},updateLayout:function(toolboxModel,ecModel,api,payload){zrUtil.each(this._features,function(feature){feature.updateLayout&&feature.updateLayout(feature.model,ecModel,api,payload)})},remove:function(ecModel,api){zrUtil.each(this._features,function(feature){feature.remove&&feature.remove(ecModel,api)}),this.group.removeAll()},dispose:function(ecModel,api){zrUtil.each(this._features,function(feature){feature.dispose&&feature.dispose(ecModel,api)})}})}).call(exports,__webpack_require__(369))},function(module,exports){function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=cachedSetTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,cachedClearTimeout(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}var cachedSetTimeout,cachedClearTimeout,process=module.exports={};!function(){try{cachedSetTimeout=setTimeout}catch(e){cachedSetTimeout=function(){throw new Error("setTimeout is not defined")}}try{cachedClearTimeout=clearTimeout}catch(e){cachedClearTimeout=function(){throw new Error("clearTimeout is not defined")}}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||cachedSetTimeout(drainQueue,0)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},function(module,exports,__webpack_require__){function SaveAsImage(model){this.model=model}var env=__webpack_require__(2);SaveAsImage.defaultOption={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:"保存为图片",type:"png",name:"",excludeComponents:["toolbox"],pixelRatio:1,lang:["右键另存为图片"]},SaveAsImage.prototype.unusable=!env.canvasSupported;var proto=SaveAsImage.prototype;proto.onclick=function(ecModel,api){var model=this.model,title=model.get("name")||ecModel.get("title.0.text")||"echarts",$a=document.createElement("a"),type=model.get("type",!0)||"png";$a.download=title+"."+type,$a.target="_blank";var url=api.getConnectedDataURL({type:type,backgroundColor:model.get("backgroundColor",!0)||ecModel.get("backgroundColor")||"#fff",excludeComponents:model.get("excludeComponents"),pixelRatio:model.get("pixelRatio")});if($a.href=url,"function"==typeof MouseEvent){var evt=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});$a.dispatchEvent(evt)}else{var lang=model.get("lang"),html='<body style="margin:0;"><img src="'+url+'" style="max-width:100%;" title="'+(lang&&lang[0]||"")+'" /></body>',tab=window.open();tab.document.write(html)}},__webpack_require__(314).register("saveAsImage",SaveAsImage),module.exports=SaveAsImage},function(module,exports,__webpack_require__){"use strict";function MagicType(model){this.model=model}var zrUtil=__webpack_require__(4);MagicType.defaultOption={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z",tiled:"M2.3,2.2h22.8V25H2.3V2.2z M35,2.2h22.8V25H35V2.2zM2.3,35h22.8v22.8H2.3V35z M35,35h22.8v22.8H35V35z"},title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"},option:{},seriesIndex:{}};var proto=MagicType.prototype;proto.getIcons=function(){var model=this.model,availableIcons=model.get("icon"),icons={};return zrUtil.each(model.get("type"),function(type){availableIcons[type]&&(icons[type]=availableIcons[type])}),icons};var seriesOptGenreator={line:function(seriesType,seriesId,seriesModel,model){if("bar"===seriesType)return zrUtil.merge({id:seriesId,type:"line",data:seriesModel.get("data"),stack:seriesModel.get("stack"),markPoint:seriesModel.get("markPoint"),markLine:seriesModel.get("markLine")},model.get("option.line")||{},!0)},bar:function(seriesType,seriesId,seriesModel,model){if("line"===seriesType)return zrUtil.merge({id:seriesId,type:"bar",data:seriesModel.get("data"),stack:seriesModel.get("stack"),markPoint:seriesModel.get("markPoint"),markLine:seriesModel.get("markLine")},model.get("option.bar")||{},!0)},stack:function(seriesType,seriesId,seriesModel,model){if("line"===seriesType||"bar"===seriesType)return zrUtil.merge({id:seriesId,stack:"__ec_magicType_stack__"},model.get("option.stack")||{},!0)},tiled:function(seriesType,seriesId,seriesModel,model){if("line"===seriesType||"bar"===seriesType)return zrUtil.merge({id:seriesId,stack:""},model.get("option.tiled")||{},!0)}},radioTypes=[["line","bar"],["stack","tiled"]];proto.onclick=function(ecModel,api,type){var model=this.model,seriesIndex=model.get("seriesIndex."+type);if(seriesOptGenreator[type]){var newOption={series:[]},generateNewSeriesTypes=function(seriesModel){var seriesType=seriesModel.subType,seriesId=seriesModel.id,newSeriesOpt=seriesOptGenreator[type](seriesType,seriesId,seriesModel,model);newSeriesOpt&&(zrUtil.defaults(newSeriesOpt,seriesModel.option),newOption.series.push(newSeriesOpt));var coordSys=seriesModel.coordinateSystem;if(coordSys&&"cartesian2d"===coordSys.type&&("line"===type||"bar"===type)){var categoryAxis=coordSys.getAxesByScale("ordinal")[0];if(categoryAxis){var axisDim=categoryAxis.dim,axisType=axisDim+"Axis",axisModel=ecModel.queryComponents({mainType:axisType,index:seriesModel.get(name+"Index"),id:seriesModel.get(name+"Id")})[0],axisIndex=axisModel.componentIndex;newOption[axisType]=newOption[axisType]||[];for(var i=0;i<=axisIndex;i++)newOption[axisType][axisIndex]=newOption[axisType][axisIndex]||{};newOption[axisType][axisIndex].boundaryGap="bar"===type}}};zrUtil.each(radioTypes,function(radio){zrUtil.indexOf(radio,type)>=0&&zrUtil.each(radio,function(item){model.setIconStatus(item,"normal")})}),model.setIconStatus(type,"emphasis"),ecModel.eachComponent({mainType:"series",query:null==seriesIndex?null:{seriesIndex:seriesIndex}},generateNewSeriesTypes),api.dispatchAction({type:"changeMagicType",currentType:type,newOption:newOption})}};var echarts=__webpack_require__(1);echarts.registerAction({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(payload,ecModel){ecModel.mergeOption(payload.newOption)}),__webpack_require__(314).register("magicType",MagicType),module.exports=MagicType},function(module,exports,__webpack_require__){function groupSeries(ecModel){var seriesGroupByCategoryAxis={},otherSeries=[],meta=[];return ecModel.eachRawSeries(function(seriesModel){var coordSys=seriesModel.coordinateSystem;if(!coordSys||"cartesian2d"!==coordSys.type&&"polar"!==coordSys.type)otherSeries.push(seriesModel);else{var baseAxis=coordSys.getBaseAxis();if("category"===baseAxis.type){var key=baseAxis.dim+"_"+baseAxis.index;seriesGroupByCategoryAxis[key]||(seriesGroupByCategoryAxis[key]={categoryAxis:baseAxis,valueAxis:coordSys.getOtherAxis(baseAxis),series:[]},meta.push({axisDim:baseAxis.dim,axisIndex:baseAxis.index})),seriesGroupByCategoryAxis[key].series.push(seriesModel)}else otherSeries.push(seriesModel)}}),{seriesGroupByCategoryAxis:seriesGroupByCategoryAxis,other:otherSeries,meta:meta}}function assembleSeriesWithCategoryAxis(series){var tables=[];return zrUtil.each(series,function(group,key){var categoryAxis=group.categoryAxis,valueAxis=group.valueAxis,valueAxisDim=valueAxis.dim,headers=[" "].concat(zrUtil.map(group.series,function(series){return series.name})),columns=[categoryAxis.model.getCategories()];zrUtil.each(group.series,function(series){columns.push(series.getRawData().mapArray(valueAxisDim,function(val){return val}))});for(var lines=[headers.join(ITEM_SPLITER)],i=0;i<columns[0].length;i++){for(var items=[],j=0;j<columns.length;j++)items.push(columns[j][i]);lines.push(items.join(ITEM_SPLITER))}tables.push(lines.join("\n"))}),tables.join("\n\n"+BLOCK_SPLITER+"\n\n")}function assembleOtherSeries(series){return zrUtil.map(series,function(series){var data=series.getRawData(),lines=[series.name],vals=[];return data.each(data.dimensions,function(){for(var argLen=arguments.length,dataIndex=arguments[argLen-1],name=data.getName(dataIndex),i=0;i<argLen-1;i++)vals[i]=arguments[i];lines.push((name?name+ITEM_SPLITER:"")+vals.join(ITEM_SPLITER))}),lines.join("\n")}).join("\n\n"+BLOCK_SPLITER+"\n\n")}function getContentFromModel(ecModel){var result=groupSeries(ecModel);return{value:zrUtil.filter([assembleSeriesWithCategoryAxis(result.seriesGroupByCategoryAxis),assembleOtherSeries(result.other)],function(str){return str.replace(/[\n\t\s]/g,"")}).join("\n\n"+BLOCK_SPLITER+"\n\n"),meta:result.meta}}function trim(str){return str.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function isTSVFormat(block){var firstLine=block.slice(0,block.indexOf("\n"));if(firstLine.indexOf(ITEM_SPLITER)>=0)return!0}function parseTSVContents(tsv){for(var tsvLines=tsv.split(/\n+/g),headers=trim(tsvLines.shift()).split(itemSplitRegex),categories=[],series=zrUtil.map(headers,function(header){return{name:header,data:[]}}),i=0;i<tsvLines.length;i++){var items=trim(tsvLines[i]).split(itemSplitRegex);categories.push(items.shift());for(var j=0;j<items.length;j++)series[j]&&(series[j].data[i]=items[j])}return{series:series,categories:categories}}function parseListContents(str){for(var lines=str.split(/\n+/g),seriesName=trim(lines.shift()),data=[],i=0;i<lines.length;i++){var value,items=trim(lines[i]).split(itemSplitRegex),name="",hasName=!1;isNaN(items[0])?(hasName=!0,name=items[0],items=items.slice(1),data[i]={name:name,value:[]},value=data[i].value):value=data[i]=[];for(var j=0;j<items.length;j++)value.push(+items[j]);1===value.length&&(hasName?data[i].value=value[0]:data[i]=value[0])}return{name:seriesName,data:data}}function parseContents(str,blockMetaList){var blocks=str.split(new RegExp("\n*"+BLOCK_SPLITER+"\n*","g")),newOption={series:[]};return zrUtil.each(blocks,function(block,idx){if(isTSVFormat(block)){var result=parseTSVContents(block),blockMeta=blockMetaList[idx],axisKey=blockMeta.axisDim+"Axis";blockMeta&&(newOption[axisKey]=newOption[axisKey]||[],newOption[axisKey][blockMeta.axisIndex]={data:result.categories},newOption.series=newOption.series.concat(result.series))}else{var result=parseListContents(block);newOption.series.push(result)}}),newOption}function DataView(model){this._dom=null,this.model=model}function tryMergeDataOption(newData,originalData){return zrUtil.map(newData,function(newVal,idx){var original=originalData&&originalData[idx];return zrUtil.isObject(original)&&!zrUtil.isArray(original)?(zrUtil.isObject(newVal)&&!zrUtil.isArray(newVal)&&(newVal=newVal.value),zrUtil.defaults({value:newVal},original)):newVal})}var zrUtil=__webpack_require__(4),eventTool=__webpack_require__(87),BLOCK_SPLITER=new Array(60).join("-"),ITEM_SPLITER="\t",itemSplitRegex=new RegExp("["+ITEM_SPLITER+"]+","g");DataView.defaultOption={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:"数据视图",lang:["数据视图","关闭","刷新"],backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"},DataView.prototype.onclick=function(ecModel,api){function close(){container.removeChild(root),self._dom=null}var container=api.getDom(),model=this.model;this._dom&&container.removeChild(this._dom);var root=document.createElement("div");root.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;",root.style.backgroundColor=model.get("backgroundColor")||"#fff";var header=document.createElement("h4"),lang=model.get("lang")||[];header.innerHTML=lang[0]||model.get("title"),header.style.cssText="margin: 10px 20px;",header.style.color=model.get("textColor");var viewMain=document.createElement("div"),textarea=document.createElement("textarea");viewMain.style.cssText="display:block;width:100%;overflow:auto;";var optionToContent=model.get("optionToContent"),contentToOption=model.get("contentToOption"),result=getContentFromModel(ecModel);
if("function"==typeof optionToContent){var htmlOrDom=optionToContent(api.getOption());"string"==typeof htmlOrDom?viewMain.innerHTML=htmlOrDom:zrUtil.isDom(htmlOrDom)&&viewMain.appendChild(htmlOrDom)}else viewMain.appendChild(textarea),textarea.readOnly=model.get("readOnly"),textarea.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;",textarea.style.color=model.get("textColor"),textarea.style.borderColor=model.get("textareaBorderColor"),textarea.style.backgroundColor=model.get("textareaColor"),textarea.value=result.value;var blockMetaList=result.meta,buttonContainer=document.createElement("div");buttonContainer.style.cssText="position:absolute;bottom:0;left:0;right:0;";var buttonStyle="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",closeButton=document.createElement("div"),refreshButton=document.createElement("div");buttonStyle+=";background-color:"+model.get("buttonColor"),buttonStyle+=";color:"+model.get("buttonTextColor");var self=this;eventTool.addEventListener(closeButton,"click",close),eventTool.addEventListener(refreshButton,"click",function(){var newOption;try{newOption="function"==typeof contentToOption?contentToOption(viewMain,api.getOption()):parseContents(textarea.value,blockMetaList)}catch(e){throw close(),new Error("Data view format error "+e)}newOption&&api.dispatchAction({type:"changeDataView",newOption:newOption}),close()}),closeButton.innerHTML=lang[1],refreshButton.innerHTML=lang[2],refreshButton.style.cssText=buttonStyle,closeButton.style.cssText=buttonStyle,!model.get("readOnly")&&buttonContainer.appendChild(refreshButton),buttonContainer.appendChild(closeButton),eventTool.addEventListener(textarea,"keydown",function(e){if(9===(e.keyCode||e.which)){var val=this.value,start=this.selectionStart,end=this.selectionEnd;this.value=val.substring(0,start)+ITEM_SPLITER+val.substring(end),this.selectionStart=this.selectionEnd=start+1,eventTool.stop(e)}}),root.appendChild(header),root.appendChild(viewMain),root.appendChild(buttonContainer),viewMain.style.height=container.clientHeight-80+"px",container.appendChild(root),this._dom=root},DataView.prototype.remove=function(ecModel,api){this._dom&&api.getDom().removeChild(this._dom)},DataView.prototype.dispose=function(ecModel,api){this.remove(ecModel,api)},__webpack_require__(314).register("dataView",DataView),__webpack_require__(1).registerAction({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(payload,ecModel){var newSeriesOptList=[];zrUtil.each(payload.newOption.series,function(seriesOpt){var seriesModel=ecModel.getSeriesByName(seriesOpt.name)[0];if(seriesModel){var originalData=seriesModel.get("data");newSeriesOptList.push({name:seriesOpt.name,data:tryMergeDataOption(seriesOpt.data,originalData)})}else newSeriesOptList.push(zrUtil.extend({type:"scatter"},seriesOpt))}),ecModel.mergeOption(zrUtil.defaults({series:newSeriesOptList},payload.newOption))}),module.exports=DataView},function(module,exports,__webpack_require__){"use strict";function DataZoom(model,ecModel,api){(this._brushController=new BrushController(api.getZr())).on("brush",zrUtil.bind(this._onBrush,this)).mount(),this._isZoomActive}function retrieveAxisSetting(option){var setting={};return zrUtil.each(["xAxisIndex","yAxisIndex"],function(name){setting[name]=option[name],null==setting[name]&&(setting[name]="all"),(setting[name]===!1||"none"===setting[name])&&(setting[name]=[])}),setting}function updateBackBtnStatus(featureModel,ecModel){featureModel.setIconStatus("back",history.count(ecModel)>1?"emphasis":"normal")}function updateZoomBtnStatus(featureModel,ecModel,view,payload){var zoomActive=view._isZoomActive;payload&&"takeGlobalCursor"===payload.type&&(zoomActive="dataZoomSelect"===payload.key&&payload.dataZoomSelectActive),view._isZoomActive=zoomActive,featureModel.setIconStatus("zoom",zoomActive?"emphasis":"normal");var coordInfoList=brushHelper.makeCoordInfoList(retrieveAxisSetting(featureModel.option),ecModel),brushType=coordInfoList.xAxisHas&&!coordInfoList.yAxisHas?"lineX":!coordInfoList.xAxisHas&&coordInfoList.yAxisHas?"lineY":"rect";view._brushController.setPanels(brushHelper.makePanelOpts(coordInfoList)).enableBrush(!!zoomActive&&{brushType:brushType,brushStyle:{lineWidth:0,fill:"rgba(0,0,0,0.2)"}})}var zrUtil=__webpack_require__(4),BrushController=__webpack_require__(233),brushHelper=__webpack_require__(309),history=__webpack_require__(374),each=zrUtil.each;__webpack_require__(375);var DATA_ZOOM_ID_BASE="\0_ec_\0toolbox-dataZoom_";DataZoom.defaultOption={show:!0,icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:{zoom:"区域缩放",back:"区域缩放还原"}};var proto=DataZoom.prototype;proto.render=function(featureModel,ecModel,api,payload){this.model=featureModel,this.ecModel=ecModel,this.api=api,updateZoomBtnStatus(featureModel,ecModel,this,payload),updateBackBtnStatus(featureModel,ecModel)},proto.onclick=function(ecModel,api,type){handlers[type].call(this)},proto.remove=function(ecModel,api){this._brushController.unmount()},proto.dispose=function(ecModel,api){this._brushController.dispose()};var handlers={zoom:function(){var nextActive=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:nextActive})},back:function(){this._dispatchZoomAction(history.pop(this.ecModel))}};proto._onBrush=function(areas,opt){function setBatch(axisName,minMax,coordInfo){var dataZoomModel=findDataZoom(axisName,coordInfo[axisName],ecModel);dataZoomModel&&(snapshot[dataZoomModel.id]={dataZoomId:dataZoomModel.id,startValue:minMax[0],endValue:minMax[1]})}function findDataZoom(axisName,axisModel,ecModel){var dataZoomModel;return ecModel.eachComponent({mainType:"dataZoom",subType:"select"},function(dzModel,dataZoomIndex){var axisIndex=dzModel.get(axisName+"Index");null!=axisIndex&&ecModel.getComponent(axisName,axisIndex)===axisModel&&(dataZoomModel=dzModel)}),dataZoomModel}if(opt.isEnd&&areas.length){var snapshot={},ecModel=this.ecModel;this._brushController.updateCovers([]);var coordInfoList=brushHelper.makeCoordInfoList(retrieveAxisSetting(this.model.option),ecModel),rangesCoordInfoList=[];brushHelper.parseOutputRanges(areas,coordInfoList,ecModel,rangesCoordInfoList);var area=areas[0],coordInfo=rangesCoordInfoList[0],coordRange=area.coordRange,brushType=area.brushType;if(coordInfo&&coordRange)if("rect"===brushType)setBatch("xAxis",coordRange[0],coordInfo),setBatch("yAxis",coordRange[1],coordInfo);else{var axisNames={lineX:"xAxis",lineY:"yAxis"};setBatch(axisNames[brushType],coordRange,coordInfo)}history.push(ecModel,snapshot),this._dispatchZoomAction(snapshot)}},proto._dispatchZoomAction=function(snapshot){var batch=[];each(snapshot,function(batchItem,dataZoomId){batch.push(zrUtil.clone(batchItem))}),batch.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:batch})},__webpack_require__(314).register("dataZoom",DataZoom),__webpack_require__(1).registerPreprocessor(function(option){function addForAxis(axisName,dataZoomOpt){if(dataZoomOpt){var axisIndicesName=axisName+"Index",givenAxisIndices=dataZoomOpt[axisIndicesName];null==givenAxisIndices||"all"==givenAxisIndices||zrUtil.isArray(givenAxisIndices)||(givenAxisIndices=givenAxisIndices===!1||"none"===givenAxisIndices?[]:[givenAxisIndices]),forEachComponent(axisName,function(axisOpt,axisIndex){if(null==givenAxisIndices||"all"==givenAxisIndices||zrUtil.indexOf(givenAxisIndices,axisIndex)!==-1){var newOpt={type:"select",$fromToolbox:!0,id:DATA_ZOOM_ID_BASE+axisName+axisIndex};newOpt[axisIndicesName]=axisIndex,dataZoomOpts.push(newOpt)}})}}function forEachComponent(mainType,cb){var opts=option[mainType];zrUtil.isArray(opts)||(opts=opts?[opts]:[]),each(opts,cb)}if(option){var dataZoomOpts=option.dataZoom||(option.dataZoom=[]);zrUtil.isArray(dataZoomOpts)||(option.dataZoom=dataZoomOpts=[dataZoomOpts]);var toolboxOpt=option.toolbox;if(toolboxOpt&&(zrUtil.isArray(toolboxOpt)&&(toolboxOpt=toolboxOpt[0]),toolboxOpt&&toolboxOpt.feature)){var dataZoomOpt=toolboxOpt.feature.dataZoom;addForAxis("xAxis",dataZoomOpt),addForAxis("yAxis",dataZoomOpt)}}}),module.exports=DataZoom},function(module,exports,__webpack_require__){function giveStore(ecModel){var store=ecModel[ATTR];return store||(store=ecModel[ATTR]=[{}]),store}var zrUtil=__webpack_require__(4),each=zrUtil.each,ATTR="\0_ec_hist_store",history={push:function(ecModel,newSnapshot){var store=giveStore(ecModel);each(newSnapshot,function(batchItem,dataZoomId){for(var i=store.length-1;i>=0;i--){var snapshot=store[i];if(snapshot[dataZoomId])break}if(i<0){var dataZoomModel=ecModel.queryComponents({mainType:"dataZoom",subType:"select",id:dataZoomId})[0];if(dataZoomModel){var percentRange=dataZoomModel.getPercentRange();store[0][dataZoomId]={dataZoomId:dataZoomId,start:percentRange[0],end:percentRange[1]}}}}),store.push(newSnapshot)},pop:function(ecModel){var store=giveStore(ecModel),head=store[store.length-1];store.length>1&&store.pop();var snapshot={};return each(head,function(batchItem,dataZoomId){for(var i=store.length-1;i>=0;i--){var batchItem=store[i][dataZoomId];if(batchItem){snapshot[dataZoomId]=batchItem;break}}}),snapshot},clear:function(ecModel){ecModel[ATTR]=null},count:function(ecModel){return giveStore(ecModel).length}};module.exports=history},function(module,exports,__webpack_require__){__webpack_require__(317),__webpack_require__(318),__webpack_require__(321),__webpack_require__(376),__webpack_require__(377),__webpack_require__(328),__webpack_require__(329)},function(module,exports,__webpack_require__){var DataZoomModel=__webpack_require__(318);module.exports=DataZoomModel.extend({type:"dataZoom.select"})},function(module,exports,__webpack_require__){module.exports=__webpack_require__(321).extend({type:"dataZoom.select"})},function(module,exports,__webpack_require__){"use strict";function Restore(model){this.model=model}var history=__webpack_require__(374);Restore.defaultOption={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:"还原"};var proto=Restore.prototype;proto.onclick=function(ecModel,api,type){history.clear(ecModel),api.dispatchAction({type:"restore",from:this.uid})},__webpack_require__(314).register("restore",Restore),__webpack_require__(1).registerAction({type:"restore",event:"restore",update:"prepareAndUpdate"},function(payload,ecModel){ecModel.resetOption("recreate")}),module.exports=Restore},function(module,exports,__webpack_require__){__webpack_require__(380),__webpack_require__(81).registerPainter("vml",__webpack_require__(382))},function(module,exports,__webpack_require__){if(!__webpack_require__(2).canvasSupported){var vec2=__webpack_require__(10),BoundingRect=__webpack_require__(9),CMD=__webpack_require__(49).CMD,colorTool=__webpack_require__(39),textContain=__webpack_require__(8),RectText=__webpack_require__(48),Displayable=__webpack_require__(46),ZImage=__webpack_require__(62),Text=__webpack_require__(64),Path=__webpack_require__(45),Gradient=__webpack_require__(61),vmlCore=__webpack_require__(381),round=Math.round,sqrt=Math.sqrt,abs=Math.abs,cos=Math.cos,sin=Math.sin,mathMax=Math.max,applyTransform=vec2.applyTransform,comma=",",imageTransformPrefix="progid:DXImageTransform.Microsoft",Z=21600,Z2=Z/2,ZLEVEL_BASE=1e5,Z_BASE=1e3,initRootElStyle=function(el){el.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px;",el.coordsize=Z+","+Z,el.coordorigin="0,0"},encodeHtmlAttribute=function(s){return String(s).replace(/&/g,"&amp;").replace(/"/g,"&quot;")},rgb2Str=function(r,g,b){return"rgb("+[r,g,b].join(",")+")"},append=function(parent,child){child&&parent&&child.parentNode!==parent&&parent.appendChild(child)},remove=function(parent,child){child&&parent&&child.parentNode===parent&&parent.removeChild(child)},getZIndex=function(zlevel,z,z2){return(parseFloat(zlevel)||0)*ZLEVEL_BASE+(parseFloat(z)||0)*Z_BASE+z2},parsePercent=function(value,maxValue){return"string"==typeof value?value.lastIndexOf("%")>=0?parseFloat(value)/100*maxValue:parseFloat(value):value},setColorAndOpacity=function(el,color,opacity){var colorArr=colorTool.parse(color);opacity=+opacity,isNaN(opacity)&&(opacity=1),colorArr&&(el.color=rgb2Str(colorArr[0],colorArr[1],colorArr[2]),el.opacity=opacity*colorArr[3])},getColorAndAlpha=function(color){var colorArr=colorTool.parse(color);return[rgb2Str(colorArr[0],colorArr[1],colorArr[2]),colorArr[3]]},updateFillNode=function(el,style,zrEl){var fill=style.fill;if(null!=fill)if(fill instanceof Gradient){var gradientType,angle=0,focus=[0,0],shift=0,expansion=1,rect=zrEl.getBoundingRect(),rectWidth=rect.width,rectHeight=rect.height;if("linear"===fill.type){gradientType="gradient";var transform=zrEl.transform,p0=[fill.x*rectWidth,fill.y*rectHeight],p1=[fill.x2*rectWidth,fill.y2*rectHeight];transform&&(applyTransform(p0,p0,transform),applyTransform(p1,p1,transform));var dx=p1[0]-p0[0],dy=p1[1]-p0[1];angle=180*Math.atan2(dx,dy)/Math.PI,angle<0&&(angle+=360),angle<1e-6&&(angle=0)}else{gradientType="gradientradial";var p0=[fill.x*rectWidth,fill.y*rectHeight],transform=zrEl.transform,scale=zrEl.scale,width=rectWidth,height=rectHeight;focus=[(p0[0]-rect.x)/width,(p0[1]-rect.y)/height],transform&&applyTransform(p0,p0,transform),width/=scale[0]*Z,height/=scale[1]*Z;var dimension=mathMax(width,height);shift=0/dimension,expansion=2*fill.r/dimension-shift}var stops=fill.colorStops.slice();stops.sort(function(cs1,cs2){return cs1.offset-cs2.offset});for(var length=stops.length,colorAndAlphaList=[],colors=[],i=0;i<length;i++){var stop=stops[i],colorAndAlpha=getColorAndAlpha(stop.color);colors.push(stop.offset*expansion+shift+" "+colorAndAlpha[0]),0!==i&&i!==length-1||colorAndAlphaList.push(colorAndAlpha)}if(length>=2){var color1=colorAndAlphaList[0][0],color2=colorAndAlphaList[1][0],opacity1=colorAndAlphaList[0][1]*style.opacity,opacity2=colorAndAlphaList[1][1]*style.opacity;el.type=gradientType,el.method="none",el.focus="100%",el.angle=angle,el.color=color1,el.color2=color2,el.colors=colors.join(","),el.opacity=opacity2,el.opacity2=opacity1}"radial"===gradientType&&(el.focusposition=focus.join(","))}else setColorAndOpacity(el,fill,style.opacity)},updateStrokeNode=function(el,style){null!=style.lineDash&&(el.dashstyle=style.lineDash.join(" ")),null==style.stroke||style.stroke instanceof Gradient||setColorAndOpacity(el,style.stroke,style.opacity)},updateFillAndStroke=function(vmlEl,type,style,zrEl){var isFill="fill"==type,el=vmlEl.getElementsByTagName(type)[0];null!=style[type]&&"none"!==style[type]&&(isFill||!isFill&&style.lineWidth)?(vmlEl[isFill?"filled":"stroked"]="true",style[type]instanceof Gradient&&remove(vmlEl,el),el||(el=vmlCore.createNode(type)),isFill?updateFillNode(el,style,zrEl):updateStrokeNode(el,style),append(vmlEl,el)):(vmlEl[isFill?"filled":"stroked"]="false",remove(vmlEl,el))},points=[[],[],[]],pathDataToString=function(data,m){var nPoint,cmdStr,cmd,i,xi,yi,M=CMD.M,C=CMD.C,L=CMD.L,A=CMD.A,Q=CMD.Q,str=[];for(i=0;i<data.length;){switch(cmd=data[i++],cmdStr="",nPoint=0,cmd){case M:cmdStr=" m ",nPoint=1,xi=data[i++],yi=data[i++],points[0][0]=xi,points[0][1]=yi;break;case L:cmdStr=" l ",nPoint=1,xi=data[i++],yi=data[i++],points[0][0]=xi,points[0][1]=yi;break;case Q:case C:cmdStr=" c ",nPoint=3;var x3,y3,x1=data[i++],y1=data[i++],x2=data[i++],y2=data[i++];cmd===Q?(x3=x2,y3=y2,x2=(x2+2*x1)/3,y2=(y2+2*y1)/3,x1=(xi+2*x1)/3,y1=(yi+2*y1)/3):(x3=data[i++],y3=data[i++]),points[0][0]=x1,points[0][1]=y1,points[1][0]=x2,points[1][1]=y2,points[2][0]=x3,points[2][1]=y3,xi=x3,yi=y3;break;case A:var x=0,y=0,sx=1,sy=1,angle=0;m&&(x=m[4],y=m[5],sx=sqrt(m[0]*m[0]+m[1]*m[1]),sy=sqrt(m[2]*m[2]+m[3]*m[3]),angle=Math.atan2(-m[1]/sy,m[0]/sx));var cx=data[i++],cy=data[i++],rx=data[i++],ry=data[i++],startAngle=data[i++]+angle,endAngle=data[i++]+startAngle+angle;i++;var clockwise=data[i++],x0=cx+cos(startAngle)*rx,y0=cy+sin(startAngle)*ry,x1=cx+cos(endAngle)*rx,y1=cy+sin(endAngle)*ry,type=clockwise?" wa ":" at ";Math.abs(x0-x1)<1e-10&&(Math.abs(endAngle-startAngle)>.01?clockwise&&(x0+=270/Z):Math.abs(y0-cy)<1e-10?clockwise&&x0<cx||!clockwise&&x0>cx?y1-=270/Z:y1+=270/Z:clockwise&&y0<cy||!clockwise&&y0>cy?x1+=270/Z:x1-=270/Z),str.push(type,round(((cx-rx)*sx+x)*Z-Z2),comma,round(((cy-ry)*sy+y)*Z-Z2),comma,round(((cx+rx)*sx+x)*Z-Z2),comma,round(((cy+ry)*sy+y)*Z-Z2),comma,round((x0*sx+x)*Z-Z2),comma,round((y0*sy+y)*Z-Z2),comma,round((x1*sx+x)*Z-Z2),comma,round((y1*sy+y)*Z-Z2)),xi=x1,yi=y1;break;case CMD.R:var p0=points[0],p1=points[1];p0[0]=data[i++],p0[1]=data[i++],p1[0]=p0[0]+data[i++],p1[1]=p0[1]+data[i++],m&&(applyTransform(p0,p0,m),applyTransform(p1,p1,m)),p0[0]=round(p0[0]*Z-Z2),p1[0]=round(p1[0]*Z-Z2),p0[1]=round(p0[1]*Z-Z2),p1[1]=round(p1[1]*Z-Z2),str.push(" m ",p0[0],comma,p0[1]," l ",p1[0],comma,p0[1]," l ",p1[0],comma,p1[1]," l ",p0[0],comma,p1[1]);break;case CMD.Z:str.push(" x ")}if(nPoint>0){str.push(cmdStr);for(var k=0;k<nPoint;k++){var p=points[k];m&&applyTransform(p,p,m),str.push(round(p[0]*Z-Z2),comma,round(p[1]*Z-Z2),k<nPoint-1?comma:"")}}}return str.join("")};Path.prototype.brushVML=function(vmlRoot){var style=this.style,vmlEl=this._vmlEl;vmlEl||(vmlEl=vmlCore.createNode("shape"),initRootElStyle(vmlEl),this._vmlEl=vmlEl),updateFillAndStroke(vmlEl,"fill",style,this),updateFillAndStroke(vmlEl,"stroke",style,this);var m=this.transform,needTransform=null!=m,strokeEl=vmlEl.getElementsByTagName("stroke")[0];if(strokeEl){var lineWidth=style.lineWidth;if(needTransform&&!style.strokeNoScale){var det=m[0]*m[3]-m[1]*m[2];lineWidth*=sqrt(abs(det))}strokeEl.weight=lineWidth+"px"}var path=this.path;this.__dirtyPath&&(path.beginPath(),this.buildPath(path,this.shape),path.toStatic(),this.__dirtyPath=!1),vmlEl.path=pathDataToString(path.data,this.transform),vmlEl.style.zIndex=getZIndex(this.zlevel,this.z,this.z2),append(vmlRoot,vmlEl),style.text?this.drawRectText(vmlRoot,this.getBoundingRect()):this.removeRectText(vmlRoot)},Path.prototype.onRemove=function(vmlRoot){remove(vmlRoot,this._vmlEl),this.removeRectText(vmlRoot)},Path.prototype.onAdd=function(vmlRoot){append(vmlRoot,this._vmlEl),this.appendRectText(vmlRoot)};var isImage=function(img){return"object"==typeof img&&img.tagName&&"IMG"===img.tagName.toUpperCase()};ZImage.prototype.brushVML=function(vmlRoot){var ow,oh,style=this.style,image=style.image;if(isImage(image)){var src=image.src;if(src===this._imageSrc)ow=this._imageWidth,oh=this._imageHeight;else{var imageRuntimeStyle=image.runtimeStyle,oldRuntimeWidth=imageRuntimeStyle.width,oldRuntimeHeight=imageRuntimeStyle.height;imageRuntimeStyle.width="auto",imageRuntimeStyle.height="auto",ow=image.width,oh=image.height,imageRuntimeStyle.width=oldRuntimeWidth,imageRuntimeStyle.height=oldRuntimeHeight,this._imageSrc=src,this._imageWidth=ow,this._imageHeight=oh}image=src}else image===this._imageSrc&&(ow=this._imageWidth,oh=this._imageHeight);if(image){var x=style.x||0,y=style.y||0,dw=style.width,dh=style.height,sw=style.sWidth,sh=style.sHeight,sx=style.sx||0,sy=style.sy||0,hasCrop=sw&&sh,vmlEl=this._vmlEl;vmlEl||(vmlEl=vmlCore.doc.createElement("div"),initRootElStyle(vmlEl),this._vmlEl=vmlEl);var m,vmlElStyle=vmlEl.style,hasRotation=!1,scaleX=1,scaleY=1;if(this.transform&&(m=this.transform,scaleX=sqrt(m[0]*m[0]+m[1]*m[1]),scaleY=sqrt(m[2]*m[2]+m[3]*m[3]),hasRotation=m[1]||m[2]),hasRotation){var p0=[x,y],p1=[x+dw,y],p2=[x,y+dh],p3=[x+dw,y+dh];applyTransform(p0,p0,m),applyTransform(p1,p1,m),applyTransform(p2,p2,m),applyTransform(p3,p3,m);var maxX=mathMax(p0[0],p1[0],p2[0],p3[0]),maxY=mathMax(p0[1],p1[1],p2[1],p3[1]),transformFilter=[];transformFilter.push("M11=",m[0]/scaleX,comma,"M12=",m[2]/scaleY,comma,"M21=",m[1]/scaleX,comma,"M22=",m[3]/scaleY,comma,"Dx=",round(x*scaleX+m[4]),comma,"Dy=",round(y*scaleY+m[5])),vmlElStyle.padding="0 "+round(maxX)+"px "+round(maxY)+"px 0",vmlElStyle.filter=imageTransformPrefix+".Matrix("+transformFilter.join("")+", SizingMethod=clip)"}else m&&(x=x*scaleX+m[4],y=y*scaleY+m[5]),vmlElStyle.filter="",vmlElStyle.left=round(x)+"px",vmlElStyle.top=round(y)+"px";var imageEl=this._imageEl,cropEl=this._cropEl;imageEl||(imageEl=vmlCore.doc.createElement("div"),this._imageEl=imageEl);var imageELStyle=imageEl.style;if(hasCrop){if(ow&&oh)imageELStyle.width=round(scaleX*ow*dw/sw)+"px",imageELStyle.height=round(scaleY*oh*dh/sh)+"px";else{var tmpImage=new Image,self=this;tmpImage.onload=function(){tmpImage.onload=null,ow=tmpImage.width,oh=tmpImage.height,imageELStyle.width=round(scaleX*ow*dw/sw)+"px",imageELStyle.height=round(scaleY*oh*dh/sh)+"px",self._imageWidth=ow,self._imageHeight=oh,self._imageSrc=image},tmpImage.src=image}cropEl||(cropEl=vmlCore.doc.createElement("div"),cropEl.style.overflow="hidden",this._cropEl=cropEl);var cropElStyle=cropEl.style;cropElStyle.width=round((dw+sx*dw/sw)*scaleX),cropElStyle.height=round((dh+sy*dh/sh)*scaleY),cropElStyle.filter=imageTransformPrefix+".Matrix(Dx="+-sx*dw/sw*scaleX+",Dy="+-sy*dh/sh*scaleY+")",cropEl.parentNode||vmlEl.appendChild(cropEl),imageEl.parentNode!=cropEl&&cropEl.appendChild(imageEl)}else imageELStyle.width=round(scaleX*dw)+"px",imageELStyle.height=round(scaleY*dh)+"px",vmlEl.appendChild(imageEl),cropEl&&cropEl.parentNode&&(vmlEl.removeChild(cropEl),this._cropEl=null);var filterStr="",alpha=style.opacity;alpha<1&&(filterStr+=".Alpha(opacity="+round(100*alpha)+") "),filterStr+=imageTransformPrefix+".AlphaImageLoader(src="+image+", SizingMethod=scale)",imageELStyle.filter=filterStr,vmlEl.style.zIndex=getZIndex(this.zlevel,this.z,this.z2),append(vmlRoot,vmlEl),style.text&&this.drawRectText(vmlRoot,this.getBoundingRect())}},ZImage.prototype.onRemove=function(vmlRoot){remove(vmlRoot,this._vmlEl),this._vmlEl=null,this._cropEl=null,this._imageEl=null,this.removeRectText(vmlRoot)},ZImage.prototype.onAdd=function(vmlRoot){append(vmlRoot,this._vmlEl),this.appendRectText(vmlRoot)};var textMeasureEl,DEFAULT_STYLE_NORMAL="normal",fontStyleCache={},fontStyleCacheCount=0,MAX_FONT_CACHE_SIZE=100,fontEl=document.createElement("div"),getFontStyle=function(fontString){var fontStyle=fontStyleCache[fontString];if(!fontStyle){fontStyleCacheCount>MAX_FONT_CACHE_SIZE&&(fontStyleCacheCount=0,fontStyleCache={});var fontFamily,style=fontEl.style;try{style.font=fontString,fontFamily=style.fontFamily.split(",")[0]}catch(e){}fontStyle={style:style.fontStyle||DEFAULT_STYLE_NORMAL,variant:style.fontVariant||DEFAULT_STYLE_NORMAL,weight:style.fontWeight||DEFAULT_STYLE_NORMAL,size:0|parseFloat(style.fontSize||12),family:fontFamily||"Microsoft YaHei"},fontStyleCache[fontString]=fontStyle,fontStyleCacheCount++}return fontStyle};textContain.measureText=function(text,textFont){var doc=vmlCore.doc;textMeasureEl||(textMeasureEl=doc.createElement("div"),textMeasureEl.style.cssText="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;",vmlCore.doc.body.appendChild(textMeasureEl));try{textMeasureEl.style.font=textFont}catch(ex){}return textMeasureEl.innerHTML="",textMeasureEl.appendChild(doc.createTextNode(text)),{width:textMeasureEl.offsetWidth}};for(var tmpRect=new BoundingRect,drawRectText=function(vmlRoot,rect,textRect,fromTextEl){var style=this.style,text=style.text;if(text){var x,y,align=style.textAlign,fontStyle=getFontStyle(style.textFont),font=fontStyle.style+" "+fontStyle.variant+" "+fontStyle.weight+" "+fontStyle.size+'px "'+fontStyle.family+'"',baseline=style.textBaseline,verticalAlign=style.textVerticalAlign;textRect=textRect||textContain.getBoundingRect(text,font,align,baseline);var m=this.transform;if(m&&!fromTextEl&&(tmpRect.copy(rect),tmpRect.applyTransform(m),rect=tmpRect),fromTextEl)x=rect.x,y=rect.y;else{var textPosition=style.textPosition,distance=style.textDistance;if(textPosition instanceof Array)x=rect.x+parsePercent(textPosition[0],rect.width),y=rect.y+parsePercent(textPosition[1],rect.height),align=align||"left",baseline=baseline||"top";else{var res=textContain.adjustTextPositionOnRect(textPosition,rect,textRect,distance);x=res.x,y=res.y,align=align||res.textAlign,baseline=baseline||res.textBaseline}}if(verticalAlign){switch(verticalAlign){case"middle":y-=textRect.height/2;break;case"bottom":y-=textRect.height}baseline="top"}var fontSize=fontStyle.size;switch(baseline){case"hanging":case"top":y+=fontSize/1.75;break;case"middle":break;default:y-=fontSize/2.25}switch(align){case"left":break;case"center":x-=textRect.width/2;break;case"right":x-=textRect.width}var pathEl,textPathEl,skewEl,createNode=vmlCore.createNode,textVmlEl=this._textVmlEl;textVmlEl?(skewEl=textVmlEl.firstChild,pathEl=skewEl.nextSibling,textPathEl=pathEl.nextSibling):(textVmlEl=createNode("line"),pathEl=createNode("path"),textPathEl=createNode("textpath"),skewEl=createNode("skew"),textPathEl.style["v-text-align"]="left",initRootElStyle(textVmlEl),pathEl.textpathok=!0,textPathEl.on=!0,textVmlEl.from="0 0",textVmlEl.to="1000 0.05",append(textVmlEl,skewEl),append(textVmlEl,pathEl),append(textVmlEl,textPathEl),this._textVmlEl=textVmlEl);var coords=[x,y],textVmlElStyle=textVmlEl.style;m&&fromTextEl?(applyTransform(coords,coords,m),skewEl.on=!0,skewEl.matrix=m[0].toFixed(3)+comma+m[2].toFixed(3)+comma+m[1].toFixed(3)+comma+m[3].toFixed(3)+",0,0",skewEl.offset=(round(coords[0])||0)+","+(round(coords[1])||0),skewEl.origin="0 0",textVmlElStyle.left="0px",textVmlElStyle.top="0px"):(skewEl.on=!1,textVmlElStyle.left=round(x)+"px",textVmlElStyle.top=round(y)+"px"),textPathEl.string=encodeHtmlAttribute(text);try{textPathEl.style.font=font}catch(e){}updateFillAndStroke(textVmlEl,"fill",{fill:fromTextEl?style.fill:style.textFill,opacity:style.opacity},this),updateFillAndStroke(textVmlEl,"stroke",{stroke:fromTextEl?style.stroke:style.textStroke,opacity:style.opacity,lineDash:style.lineDash},this),textVmlEl.style.zIndex=getZIndex(this.zlevel,this.z,this.z2),append(vmlRoot,textVmlEl)}},removeRectText=function(vmlRoot){remove(vmlRoot,this._textVmlEl),this._textVmlEl=null},appendRectText=function(vmlRoot){append(vmlRoot,this._textVmlEl)},list=[RectText,Displayable,ZImage,Path,Text],i=0;i<list.length;i++){var proto=list[i].prototype;proto.drawRectText=drawRectText,proto.removeRectText=removeRectText,proto.appendRectText=appendRectText}Text.prototype.brushVML=function(vmlRoot){var style=this.style;style.text?this.drawRectText(vmlRoot,{x:style.x||0,y:style.y||0,width:0,height:0},this.getBoundingRect(),!0):this.removeRectText(vmlRoot)},Text.prototype.onRemove=function(vmlRoot){this.removeRectText(vmlRoot)},Text.prototype.onAdd=function(vmlRoot){this.appendRectText(vmlRoot)}}},function(module,exports,__webpack_require__){if(!__webpack_require__(2).canvasSupported){var createNode,urn="urn:schemas-microsoft-com:vml",win=window,doc=win.document,vmlInited=!1;try{!doc.namespaces.zrvml&&doc.namespaces.add("zrvml",urn),createNode=function(tagName){return doc.createElement("<zrvml:"+tagName+' class="zrvml">')}}catch(e){createNode=function(tagName){return doc.createElement("<"+tagName+' xmlns="'+urn+'" class="zrvml">')}}var initVML=function(){if(!vmlInited){vmlInited=!0;var styleSheets=doc.styleSheets;styleSheets.length<31?doc.createStyleSheet().addRule(".zrvml","behavior:url(#default#VML)"):styleSheets[0].addRule(".zrvml","behavior:url(#default#VML)")}};module.exports={doc:doc,initVML:initVML,createNode:createNode}}},function(module,exports,__webpack_require__){function parseInt10(val){return parseInt(val,10)}function VMLPainter(root,storage){vmlCore.initVML(),this.root=root,this.storage=storage;var vmlViewport=document.createElement("div"),vmlRoot=document.createElement("div");vmlViewport.style.cssText="display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;",vmlRoot.style.cssText="position:absolute;left:0;top:0;",root.appendChild(vmlViewport),this._vmlRoot=vmlRoot,this._vmlViewport=vmlViewport,this.resize();var oldDelFromMap=storage.delFromMap,oldAddToMap=storage.addToMap;storage.delFromMap=function(elId){var el=storage.get(elId);oldDelFromMap.call(storage,elId),el&&el.onRemove&&el.onRemove(vmlRoot)},storage.addToMap=function(el){el.onAdd&&el.onAdd(vmlRoot),oldAddToMap.call(storage,el)},this._firstPaint=!0}function createMethodNotSupport(method){return function(){zrLog('In IE8.0 VML mode painter not support method "'+method+'"')}}var zrLog=__webpack_require__(40),vmlCore=__webpack_require__(381);VMLPainter.prototype={constructor:VMLPainter,getViewportRoot:function(){return this._vmlViewport},refresh:function(){var list=this.storage.getDisplayList(!0,!0);this._paintList(list)},_paintList:function(list){for(var vmlRoot=this._vmlRoot,i=0;i<list.length;i++){var el=list[i];el.invisible||el.ignore?(el.__alreadyNotVisible||el.onRemove(vmlRoot),el.__alreadyNotVisible=!0):(el.__alreadyNotVisible&&el.onAdd(vmlRoot),el.__alreadyNotVisible=!1,el.__dirty&&(el.beforeBrush&&el.beforeBrush(),(el.brushVML||el.brush).call(el,vmlRoot),el.afterBrush&&el.afterBrush())),el.__dirty=!1}this._firstPaint&&(this._vmlViewport.appendChild(vmlRoot),this._firstPaint=!1)},resize:function(){var width=this._getWidth(),height=this._getHeight();if(this._width!=width&&this._height!=height){this._width=width,this._height=height;var vmlViewportStyle=this._vmlViewport.style;vmlViewportStyle.width=width+"px",vmlViewportStyle.height=height+"px"}},dispose:function(){this.root.innerHTML="",this._vmlRoot=this._vmlViewport=this.storage=null},getWidth:function(){return this._width},getHeight:function(){return this._height},clear:function(){this.root.removeChild(this.vmlViewport)},_getWidth:function(){var root=this.root,stl=root.currentStyle;return(root.clientWidth||parseInt10(stl.width))-parseInt10(stl.paddingLeft)-parseInt10(stl.paddingRight)|0},_getHeight:function(){var root=this.root,stl=root.currentStyle;return(root.clientHeight||parseInt10(stl.height))-parseInt10(stl.paddingTop)-parseInt10(stl.paddingBottom)|0}};for(var notSupportedMethods=["getLayer","insertLayer","eachLayer","eachBuildinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],i=0;i<notSupportedMethods.length;i++){var name=notSupportedMethods[i];VMLPainter.prototype[name]=createMethodNotSupport(name)}module.exports=VMLPainter}])});